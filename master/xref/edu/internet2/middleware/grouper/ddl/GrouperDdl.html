<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>GrouperDdl xref</title>
<link type="text/css" rel="stylesheet" href="../../../../../stylesheet.css" />
</head>
<body>
<div id="overview"><a href="../../../../../../apidocs/edu/internet2/middleware/grouper/ddl/GrouperDdl.html">View Javadoc</a></div><pre>
<a class="jxr_linenumber" name="L1" href="#L1">1</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2" href="#L2">2</a>   <em class="jxr_javadoccomment"> * Copyright 2014 Internet2</em>
<a class="jxr_linenumber" name="L3" href="#L3">3</a>   <em class="jxr_javadoccomment"> *</em>
<a class="jxr_linenumber" name="L4" href="#L4">4</a>   <em class="jxr_javadoccomment"> * Licensed under the Apache License, Version 2.0 (the "License");</em>
<a class="jxr_linenumber" name="L5" href="#L5">5</a>   <em class="jxr_javadoccomment"> * you may not use this file except in compliance with the License.</em>
<a class="jxr_linenumber" name="L6" href="#L6">6</a>   <em class="jxr_javadoccomment"> * You may obtain a copy of the License at</em>
<a class="jxr_linenumber" name="L7" href="#L7">7</a>   <em class="jxr_javadoccomment"> *</em>
<a class="jxr_linenumber" name="L8" href="#L8">8</a>   <em class="jxr_javadoccomment"> *   <a href="http://www.apache.org/licenses/LICENSE-2." target="alexandria_uri">http://www.apache.org/licenses/LICENSE-2.</a>0</em>
<a class="jxr_linenumber" name="L9" href="#L9">9</a>   <em class="jxr_javadoccomment"> *</em>
<a class="jxr_linenumber" name="L10" href="#L10">10</a>  <em class="jxr_javadoccomment"> * Unless required by applicable law or agreed to in writing, software</em>
<a class="jxr_linenumber" name="L11" href="#L11">11</a>  <em class="jxr_javadoccomment"> * distributed under the License is distributed on an "AS IS" BASIS,</em>
<a class="jxr_linenumber" name="L12" href="#L12">12</a>  <em class="jxr_javadoccomment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</em>
<a class="jxr_linenumber" name="L13" href="#L13">13</a>  <em class="jxr_javadoccomment"> * See the License for the specific language governing permissions and</em>
<a class="jxr_linenumber" name="L14" href="#L14">14</a>  <em class="jxr_javadoccomment"> * limitations under the License.</em>
<a class="jxr_linenumber" name="L15" href="#L15">15</a>  <em class="jxr_javadoccomment"> */</em>
<a class="jxr_linenumber" name="L16" href="#L16">16</a>  <em class="jxr_comment">/*</em>
<a class="jxr_linenumber" name="L17" href="#L17">17</a>  <em class="jxr_comment"> * @author mchyzer</em>
<a class="jxr_linenumber" name="L18" href="#L18">18</a>  <em class="jxr_comment"> * $Id: GrouperDdl.java,v 1.98 2009-12-05 06:39:07 mchyzer Exp $</em>
<a class="jxr_linenumber" name="L19" href="#L19">19</a>  <em class="jxr_comment"> */</em>
<a class="jxr_linenumber" name="L20" href="#L20">20</a>  <strong class="jxr_keyword">package</strong> edu.internet2.middleware.grouper.ddl;
<a class="jxr_linenumber" name="L21" href="#L21">21</a>  
<a class="jxr_linenumber" name="L22" href="#L22">22</a>  <strong class="jxr_keyword">import</strong> java.sql.Connection;
<a class="jxr_linenumber" name="L23" href="#L23">23</a>  <strong class="jxr_keyword">import</strong> java.sql.PreparedStatement;
<a class="jxr_linenumber" name="L24" href="#L24">24</a>  <strong class="jxr_keyword">import</strong> java.sql.ResultSet;
<a class="jxr_linenumber" name="L25" href="#L25">25</a>  <strong class="jxr_keyword">import</strong> java.sql.Types;
<a class="jxr_linenumber" name="L26" href="#L26">26</a>  <strong class="jxr_keyword">import</strong> java.util.Date;
<a class="jxr_linenumber" name="L27" href="#L27">27</a>  <strong class="jxr_keyword">import</strong> java.util.List;
<a class="jxr_linenumber" name="L28" href="#L28">28</a>  <strong class="jxr_keyword">import</strong> java.util.Set;
<a class="jxr_linenumber" name="L29" href="#L29">29</a>  
<a class="jxr_linenumber" name="L30" href="#L30">30</a>  <strong class="jxr_keyword">import</strong> org.apache.commons.lang.StringUtils;
<a class="jxr_linenumber" name="L31" href="#L31">31</a>  <strong class="jxr_keyword">import</strong> org.apache.commons.logging.Log;
<a class="jxr_linenumber" name="L32" href="#L32">32</a>  <strong class="jxr_keyword">import</strong> org.apache.ddlutils.model.Column;
<a class="jxr_linenumber" name="L33" href="#L33">33</a>  <strong class="jxr_keyword">import</strong> org.apache.ddlutils.model.Database;
<a class="jxr_linenumber" name="L34" href="#L34">34</a>  <strong class="jxr_keyword">import</strong> org.apache.ddlutils.model.Index;
<a class="jxr_linenumber" name="L35" href="#L35">35</a>  <strong class="jxr_keyword">import</strong> org.apache.ddlutils.model.Table;
<a class="jxr_linenumber" name="L36" href="#L36">36</a>  
<a class="jxr_linenumber" name="L37" href="#L37">37</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.Attribute;
<a class="jxr_linenumber" name="L38" href="#L38">38</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.Composite;
<a class="jxr_linenumber" name="L39" href="#L39">39</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.Field;
<a class="jxr_linenumber" name="L40" href="#L40">40</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.Group;
<a class="jxr_linenumber" name="L41" href="#L41">41</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.GroupType;
<a class="jxr_linenumber" name="L42" href="#L42">42</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.GroupTypeTuple;
<a class="jxr_linenumber" name="L43" href="#L43">43</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.Member;
<a class="jxr_linenumber" name="L44" href="#L44">44</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.Membership;
<a class="jxr_linenumber" name="L45" href="#L45">45</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.Stem;
<a class="jxr_linenumber" name="L46" href="#L46">46</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.app.loader.db.Hib3GrouperLoaderLog;
<a class="jxr_linenumber" name="L47" href="#L47">47</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.attr.AttributeDef;
<a class="jxr_linenumber" name="L48" href="#L48">48</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.attr.AttributeDefName;
<a class="jxr_linenumber" name="L49" href="#L49">49</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.attr.AttributeDefNameSet;
<a class="jxr_linenumber" name="L50" href="#L50">50</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.attr.AttributeDefScope;
<a class="jxr_linenumber" name="L51" href="#L51">51</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.attr.assign.AttributeAssign;
<a class="jxr_linenumber" name="L52" href="#L52">52</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.attr.assign.AttributeAssignAction;
<a class="jxr_linenumber" name="L53" href="#L53">53</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.attr.assign.AttributeAssignActionSet;
<a class="jxr_linenumber" name="L54" href="#L54">54</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.attr.value.AttributeAssignValue;
<a class="jxr_linenumber" name="L55" href="#L55">55</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.audit.AuditEntry;
<a class="jxr_linenumber" name="L56" href="#L56">56</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.audit.AuditType;
<a class="jxr_linenumber" name="L57" href="#L57">57</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.cfg.GrouperConfig;
<a class="jxr_linenumber" name="L58" href="#L58">58</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.changeLog.ChangeLogConsumer;
<a class="jxr_linenumber" name="L59" href="#L59">59</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.changeLog.ChangeLogEntry;
<a class="jxr_linenumber" name="L60" href="#L60">60</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.changeLog.ChangeLogType;
<a class="jxr_linenumber" name="L61" href="#L61">61</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.externalSubjects.ExternalSubject;
<a class="jxr_linenumber" name="L62" href="#L62">62</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.externalSubjects.ExternalSubjectAttribute;
<a class="jxr_linenumber" name="L63" href="#L63">63</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.externalSubjects.ExternalSubjectConfig;
<a class="jxr_linenumber" name="L64" href="#L64">64</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.externalSubjects.ExternalSubjectConfig.ExternalSubjectAttributeConfigBean;
<a class="jxr_linenumber" name="L65" href="#L65">65</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.externalSubjects.ExternalSubjectConfig.ExternalSubjectConfigBean;
<a class="jxr_linenumber" name="L66" href="#L66">66</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.group.GroupSet;
<a class="jxr_linenumber" name="L67" href="#L67">67</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.hibernate.AuditControl;
<a class="jxr_linenumber" name="L68" href="#L68">68</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.hibernate.GrouperTransactionType;
<a class="jxr_linenumber" name="L69" href="#L69">69</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.hibernate.HibernateHandler;
<a class="jxr_linenumber" name="L70" href="#L70">70</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.hibernate.HibernateHandlerBean;
<a class="jxr_linenumber" name="L71" href="#L71">71</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.hibernate.HibernateSession;
<a class="jxr_linenumber" name="L72" href="#L72">72</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.internal.dao.GrouperDAOException;
<a class="jxr_linenumber" name="L73" href="#L73">73</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.internal.util.GrouperUuid;
<a class="jxr_linenumber" name="L74" href="#L74">74</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.permissions.role.RoleSet;
<a class="jxr_linenumber" name="L75" href="#L75">75</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITAttributeAssign;
<a class="jxr_linenumber" name="L76" href="#L76">76</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITAttributeAssignAction;
<a class="jxr_linenumber" name="L77" href="#L77">77</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITAttributeAssignActionSet;
<a class="jxr_linenumber" name="L78" href="#L78">78</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITAttributeAssignValue;
<a class="jxr_linenumber" name="L79" href="#L79">79</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITAttributeDef;
<a class="jxr_linenumber" name="L80" href="#L80">80</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITAttributeDefName;
<a class="jxr_linenumber" name="L81" href="#L81">81</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITAttributeDefNameSet;
<a class="jxr_linenumber" name="L82" href="#L82">82</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITField;
<a class="jxr_linenumber" name="L83" href="#L83">83</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITGroup;
<a class="jxr_linenumber" name="L84" href="#L84">84</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITGroupSet;
<a class="jxr_linenumber" name="L85" href="#L85">85</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITMember;
<a class="jxr_linenumber" name="L86" href="#L86">86</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITMembership;
<a class="jxr_linenumber" name="L87" href="#L87">87</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITRoleSet;
<a class="jxr_linenumber" name="L88" href="#L88">88</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.pit.PITStem;
<a class="jxr_linenumber" name="L89" href="#L89">89</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.stem.StemSet;
<a class="jxr_linenumber" name="L90" href="#L90">90</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.tableIndex.TableIndex;
<a class="jxr_linenumber" name="L91" href="#L91">91</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.tableIndex.TableIndexType;
<a class="jxr_linenumber" name="L92" href="#L92">92</a>  <strong class="jxr_keyword">import</strong> edu.internet2.middleware.grouper.util.GrouperUtil;
<a class="jxr_linenumber" name="L93" href="#L93">93</a>  
<a class="jxr_linenumber" name="L94" href="#L94">94</a>  
<a class="jxr_linenumber" name="L95" href="#L95">95</a>  
<a class="jxr_linenumber" name="L96" href="#L96">96</a>  <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L97" href="#L97">97</a>  <em class="jxr_javadoccomment"> * ddl versions and stuff for grouper.  All ddl classes must have a currentVersion method that</em>
<a class="jxr_linenumber" name="L98" href="#L98">98</a>  <em class="jxr_javadoccomment"> * returns the current version.  </em>
<a class="jxr_linenumber" name="L99" href="#L99">99</a>  <em class="jxr_javadoccomment"> */</em>
<a class="jxr_linenumber" name="L100" href="#L100">100</a> <strong class="jxr_keyword">public</strong> enum <a href="../../../../../edu/internet2/middleware/grouper/ddl/GrouperDdl.html">GrouperDdl</a> <strong class="jxr_keyword">implements</strong> <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionable.html">DdlVersionable</a> {
<a class="jxr_linenumber" name="L101" href="#L101">101</a> 
<a class="jxr_linenumber" name="L102" href="#L102">102</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L103" href="#L103">103</a> <em class="jxr_javadoccomment">   * change stem name index if applicable</em>
<a class="jxr_linenumber" name="L104" href="#L104">104</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L105" href="#L105">105</a>   V13 {
<a class="jxr_linenumber" name="L106" href="#L106">106</a>     
<a class="jxr_linenumber" name="L107" href="#L107">107</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L108" href="#L108">108</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L109" href="#L109">109</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L110" href="#L110">110</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L111" href="#L111">111</a>     @Override
<a class="jxr_linenumber" name="L112" href="#L112">112</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L113" href="#L113">113</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L114" href="#L114">114</a> 
<a class="jxr_linenumber" name="L115" href="#L115">115</a>       Table stemsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L116" href="#L116">116</a>           Stem.TABLE_GROUPER_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L117" href="#L117">117</a> 
<a class="jxr_linenumber" name="L118" href="#L118">118</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L119" href="#L119">119</a>           <span class="jxr_string">"stem_name_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"name"</span>);
<a class="jxr_linenumber" name="L120" href="#L120">120</a> 
<a class="jxr_linenumber" name="L121" href="#L121">121</a>     }
<a class="jxr_linenumber" name="L122" href="#L122">122</a>   },
<a class="jxr_linenumber" name="L123" href="#L123">123</a> 
<a class="jxr_linenumber" name="L124" href="#L124">124</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L125" href="#L125">125</a> <em class="jxr_javadoccomment">   * delete create source and modify source cols if they exist</em>
<a class="jxr_linenumber" name="L126" href="#L126">126</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L127" href="#L127">127</a>   V12 {
<a class="jxr_linenumber" name="L128" href="#L128">128</a>     
<a class="jxr_linenumber" name="L129" href="#L129">129</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L130" href="#L130">130</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L131" href="#L131">131</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L132" href="#L132">132</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L133" href="#L133">133</a>     @Override
<a class="jxr_linenumber" name="L134" href="#L134">134</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L135" href="#L135">135</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L136" href="#L136">136</a> 
<a class="jxr_linenumber" name="L137" href="#L137">137</a>       <em class="jxr_comment">//only drop cols if there are there, and all of them (which means the conversion probably happened, and they</em>
<a class="jxr_linenumber" name="L138" href="#L138">138</a>       <em class="jxr_comment">//havent been dropped yet)</em>
<a class="jxr_linenumber" name="L139" href="#L139">139</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"CREATE_SOURCE"</span>, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L140" href="#L140">140</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"CREATE_SOURCE"</span>, ddlVersionBean);
<a class="jxr_linenumber" name="L141" href="#L141">141</a>       }
<a class="jxr_linenumber" name="L142" href="#L142">142</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"MODIFY_SOURCE"</span>, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L143" href="#L143">143</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"MODIFY_SOURCE"</span>, ddlVersionBean);
<a class="jxr_linenumber" name="L144" href="#L144">144</a>       }
<a class="jxr_linenumber" name="L145" href="#L145">145</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, <span class="jxr_string">"CREATE_SOURCE"</span>, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L146" href="#L146">146</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Stem.TABLE_GROUPER_STEMS, <span class="jxr_string">"CREATE_SOURCE"</span>, ddlVersionBean);
<a class="jxr_linenumber" name="L147" href="#L147">147</a>       }
<a class="jxr_linenumber" name="L148" href="#L148">148</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, <span class="jxr_string">"MODIFY_SOURCE"</span>, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L149" href="#L149">149</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Stem.TABLE_GROUPER_STEMS, <span class="jxr_string">"MODIFY_SOURCE"</span>, ddlVersionBean);
<a class="jxr_linenumber" name="L150" href="#L150">150</a>       }
<a class="jxr_linenumber" name="L151" href="#L151">151</a>     }
<a class="jxr_linenumber" name="L152" href="#L152">152</a>   },
<a class="jxr_linenumber" name="L153" href="#L153">153</a> 
<a class="jxr_linenumber" name="L154" href="#L154">154</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L155" href="#L155">155</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L156" href="#L156">156</a> <em class="jxr_javadoccomment">   * if needs upgrade:</em>
<a class="jxr_linenumber" name="L157" href="#L157">157</a> <em class="jxr_javadoccomment">   * backup attribute table, create group cols if not exist, move data to groups,</em>
<a class="jxr_linenumber" name="L158" href="#L158">158</a> <em class="jxr_javadoccomment">   * delete old attribute data, </em>
<a class="jxr_linenumber" name="L159" href="#L159">159</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L160" href="#L160">160</a> <em class="jxr_javadoccomment">   * if configured to drop backup attribute table, and it exists, then drop it</em>
<a class="jxr_linenumber" name="L161" href="#L161">161</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L162" href="#L162">162</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L163" href="#L163">163</a>   V14 {
<a class="jxr_linenumber" name="L164" href="#L164">164</a>     
<a class="jxr_linenumber" name="L165" href="#L165">165</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L166" href="#L166">166</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L167" href="#L167">167</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L168" href="#L168">168</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L169" href="#L169">169</a>     @Override
<a class="jxr_linenumber" name="L170" href="#L170">170</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L171" href="#L171">171</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L172" href="#L172">172</a> 
<a class="jxr_linenumber" name="L173" href="#L173">173</a>       <em class="jxr_comment">//we need an upgrade if there is a name attribute field, and if there is no name attribute of the groups table</em>
<a class="jxr_linenumber" name="L174" href="#L174">174</a>       <strong class="jxr_keyword">boolean</strong> needsUpgrade = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L175" href="#L175">175</a>       
<a class="jxr_linenumber" name="L176" href="#L176">176</a>       <strong class="jxr_keyword">int</strong> count = 0;
<a class="jxr_linenumber" name="L177" href="#L177">177</a>       
<a class="jxr_linenumber" name="L178" href="#L178">178</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_fields"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L179" href="#L179">179</a>         
<a class="jxr_linenumber" name="L180" href="#L180">180</a>         count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L181" href="#L181">181</a>           <span class="jxr_string">"select count(*) from grouper_fields where type='attribute' and name='name'"</span>);
<a class="jxr_linenumber" name="L182" href="#L182">182</a>       
<a class="jxr_linenumber" name="L183" href="#L183">183</a>         <em class="jxr_comment">//if there is not name attribute field, then we dont need an upgrade</em>
<a class="jxr_linenumber" name="L184" href="#L184">184</a>         <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L185" href="#L185">185</a>           
<a class="jxr_linenumber" name="L186" href="#L186">186</a>           <em class="jxr_comment">//see how many attributes are there</em>
<a class="jxr_linenumber" name="L187" href="#L187">187</a>           count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L188" href="#L188">188</a>             <span class="jxr_string">"select count(*) from grouper_fields where type='attribute'"</span>);
<a class="jxr_linenumber" name="L189" href="#L189">189</a>           
<a class="jxr_linenumber" name="L190" href="#L190">190</a>           <em class="jxr_comment">//are there any attributes?</em>
<a class="jxr_linenumber" name="L191" href="#L191">191</a>           <strong class="jxr_keyword">if</strong> (count &gt; 0) {
<a class="jxr_linenumber" name="L192" href="#L192">192</a>             needsUpgrade = false;
<a class="jxr_linenumber" name="L193" href="#L193">193</a>           }
<a class="jxr_linenumber" name="L194" href="#L194">194</a>         }
<a class="jxr_linenumber" name="L195" href="#L195">195</a>         
<a class="jxr_linenumber" name="L196" href="#L196">196</a>         <em class="jxr_comment">//if there is a name groups col, then no upgrade</em>
<a class="jxr_linenumber" name="L197" href="#L197">197</a>         <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"NAME"</span>, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L198" href="#L198">198</a>           needsUpgrade = false;
<a class="jxr_linenumber" name="L199" href="#L199">199</a>         }
<a class="jxr_linenumber" name="L200" href="#L200">200</a>       } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L201" href="#L201">201</a>         needsUpgrade = false;
<a class="jxr_linenumber" name="L202" href="#L202">202</a>       }
<a class="jxr_linenumber" name="L203" href="#L203">203</a>       <strong class="jxr_keyword">boolean</strong> dropAttributeBackupTableFromGroupUpgrade = GrouperConfig.retrieveConfig().propertyValueBoolean(
<a class="jxr_linenumber" name="L204" href="#L204">204</a>           <span class="jxr_string">"ddlutils.dropAttributeBackupTableFromGroupUpgrade"</span>, false);
<a class="jxr_linenumber" name="L205" href="#L205">205</a>       
<a class="jxr_linenumber" name="L206" href="#L206">206</a>       <strong class="jxr_keyword">if</strong> (needsUpgrade) {
<a class="jxr_linenumber" name="L207" href="#L207">207</a>         
<a class="jxr_linenumber" name="L208" href="#L208">208</a>         <em class="jxr_comment">//first order of business, backup</em>
<a class="jxr_linenumber" name="L209" href="#L209">209</a>         <strong class="jxr_keyword">if</strong> (!dropAttributeBackupTableFromGroupUpgrade) {
<a class="jxr_linenumber" name="L210" href="#L210">210</a>           
<a class="jxr_linenumber" name="L211" href="#L211">211</a>           <em class="jxr_comment">//make a backup</em>
<a class="jxr_linenumber" name="L212" href="#L212">212</a>           GrouperDdlUtils.ddlutilsBackupTable(ddlVersionBean, Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, BAK_GROUPER_ATTRIBUTES);
<a class="jxr_linenumber" name="L213" href="#L213">213</a>           
<a class="jxr_linenumber" name="L214" href="#L214">214</a>         }
<a class="jxr_linenumber" name="L215" href="#L215">215</a>         
<a class="jxr_linenumber" name="L216" href="#L216">216</a>         <em class="jxr_comment">//create the group cols if not exist</em>
<a class="jxr_linenumber" name="L217" href="#L217">217</a>         addGroupNameColumns(ddlVersionBean, database);
<a class="jxr_linenumber" name="L218" href="#L218">218</a>         
<a class="jxr_linenumber" name="L219" href="#L219">219</a>         <em class="jxr_comment">//move data to the group cols</em>
<a class="jxr_linenumber" name="L220" href="#L220">220</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_groups set name = \n"</span> +
<a class="jxr_linenumber" name="L221" href="#L221">221</a>         	 <span class="jxr_string">"  (select ga.value from grouper_attributes ga, grouper_fields gf \n"</span> +
<a class="jxr_linenumber" name="L222" href="#L222">222</a>            <span class="jxr_string">"    where ga.FIELD_ID = gf.ID and gf.TYPE = 'attribute' \n"</span> +
<a class="jxr_linenumber" name="L223" href="#L223">223</a>            <span class="jxr_string">"    and gf.NAME = 'name' and ga.GROUP_ID = grouper_groups.id);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L224" href="#L224">224</a>         
<a class="jxr_linenumber" name="L225" href="#L225">225</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_groups set display_name = \n"</span> +
<a class="jxr_linenumber" name="L226" href="#L226">226</a>             <span class="jxr_string">"  (select ga.value from grouper_attributes ga, grouper_fields gf \n"</span> +
<a class="jxr_linenumber" name="L227" href="#L227">227</a>             <span class="jxr_string">"    where ga.FIELD_ID = gf.ID and gf.TYPE = 'attribute' \n"</span> +
<a class="jxr_linenumber" name="L228" href="#L228">228</a>             <span class="jxr_string">"    and gf.NAME = 'displayName' and ga.GROUP_ID = grouper_groups.id);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L229" href="#L229">229</a> 
<a class="jxr_linenumber" name="L230" href="#L230">230</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_groups set extension = \n"</span> +
<a class="jxr_linenumber" name="L231" href="#L231">231</a>             <span class="jxr_string">"  (select ga.value from grouper_attributes ga, grouper_fields gf \n"</span> +
<a class="jxr_linenumber" name="L232" href="#L232">232</a>             <span class="jxr_string">"    where ga.FIELD_ID = gf.ID and gf.TYPE = 'attribute' \n"</span> +
<a class="jxr_linenumber" name="L233" href="#L233">233</a>             <span class="jxr_string">"    and gf.NAME = 'extension' and ga.GROUP_ID = grouper_groups.id);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L234" href="#L234">234</a>            
<a class="jxr_linenumber" name="L235" href="#L235">235</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_groups set display_extension = \n"</span> +
<a class="jxr_linenumber" name="L236" href="#L236">236</a>             <span class="jxr_string">"  (select ga.value from grouper_attributes ga, grouper_fields gf \n"</span> +
<a class="jxr_linenumber" name="L237" href="#L237">237</a>             <span class="jxr_string">"    where ga.FIELD_ID = gf.ID and gf.TYPE = 'attribute' \n"</span> +
<a class="jxr_linenumber" name="L238" href="#L238">238</a>             <span class="jxr_string">"    and gf.NAME = 'displayExtension' and ga.GROUP_ID = grouper_groups.id);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L239" href="#L239">239</a>            
<a class="jxr_linenumber" name="L240" href="#L240">240</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_groups set description = \n"</span> +
<a class="jxr_linenumber" name="L241" href="#L241">241</a>             <span class="jxr_string">"  (select ga.value from grouper_attributes ga, grouper_fields gf \n"</span> +
<a class="jxr_linenumber" name="L242" href="#L242">242</a>             <span class="jxr_string">"    where ga.FIELD_ID = gf.ID and gf.TYPE = 'attribute' \n"</span> +
<a class="jxr_linenumber" name="L243" href="#L243">243</a>             <span class="jxr_string">"    and gf.NAME = 'description' and ga.GROUP_ID = grouper_groups.id);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L244" href="#L244">244</a>         
<a class="jxr_linenumber" name="L245" href="#L245">245</a>         <em class="jxr_comment">//delete old cols</em>
<a class="jxr_linenumber" name="L246" href="#L246">246</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ndelete from grouper_attributes where  field_id in \n"</span> +
<a class="jxr_linenumber" name="L247" href="#L247">247</a>             <span class="jxr_string">"  (select gf.ID from grouper_fields gf where gf.type = 'attribute' \n"</span> +
<a class="jxr_linenumber" name="L248" href="#L248">248</a>             <span class="jxr_string">"    and gf.name in ('name', 'displayName', 'extension', 'displayExtension', 'description' ));\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L249" href="#L249">249</a>         
<a class="jxr_linenumber" name="L250" href="#L250">250</a>         <em class="jxr_comment">//delete old fields</em>
<a class="jxr_linenumber" name="L251" href="#L251">251</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ndelete from grouper_fields where  type = 'attribute' \n"</span> +
<a class="jxr_linenumber" name="L252" href="#L252">252</a>             <span class="jxr_string">" and name in ('name', 'description', 'displayExtension', 'displayName', 'extension');\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L253" href="#L253">253</a> 
<a class="jxr_linenumber" name="L254" href="#L254">254</a>       }
<a class="jxr_linenumber" name="L255" href="#L255">255</a>       
<a class="jxr_linenumber" name="L256" href="#L256">256</a>       <em class="jxr_comment">//whether or not needs an upgrade, see if we should delete the bak table</em>
<a class="jxr_linenumber" name="L257" href="#L257">257</a>       <strong class="jxr_keyword">if</strong> (dropAttributeBackupTableFromGroupUpgrade) {
<a class="jxr_linenumber" name="L258" href="#L258">258</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, BAK_GROUPER_ATTRIBUTES, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L259" href="#L259">259</a>       }
<a class="jxr_linenumber" name="L260" href="#L260">260</a>       
<a class="jxr_linenumber" name="L261" href="#L261">261</a>     }
<a class="jxr_linenumber" name="L262" href="#L262">262</a>   },
<a class="jxr_linenumber" name="L263" href="#L263">263</a> 
<a class="jxr_linenumber" name="L264" href="#L264">264</a>   <em class="jxr_javadoccomment">/** add indexes on group attribute name cols */</em>
<a class="jxr_linenumber" name="L265" href="#L265">265</a>   V15 {
<a class="jxr_linenumber" name="L266" href="#L266">266</a>     
<a class="jxr_linenumber" name="L267" href="#L267">267</a>     @Override
<a class="jxr_linenumber" name="L268" href="#L268">268</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L269" href="#L269">269</a> 
<a class="jxr_linenumber" name="L270" href="#L270">270</a>       Table groupsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L271" href="#L271">271</a>           Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L272" href="#L272">272</a> 
<a class="jxr_linenumber" name="L273" href="#L273">273</a>       {
<a class="jxr_linenumber" name="L274" href="#L274">274</a>         String scriptOverrideName = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE unique INDEX group_name_idx "</span> +
<a class="jxr_linenumber" name="L275" href="#L275">275</a>             <span class="jxr_string">"ON grouper_groups (name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L276" href="#L276">276</a>         
<a class="jxr_linenumber" name="L277" href="#L277">277</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, groupsTable.getName(), 
<a class="jxr_linenumber" name="L278" href="#L278">278</a>             <span class="jxr_string">"group_name_idx"</span>, scriptOverrideName, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"name"</span>);
<a class="jxr_linenumber" name="L279" href="#L279">279</a>         
<a class="jxr_linenumber" name="L280" href="#L280">280</a>         String scriptOverrideDisplayName = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX group_display_name_idx "</span> +
<a class="jxr_linenumber" name="L281" href="#L281">281</a>             <span class="jxr_string">"ON grouper_groups (display_name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L282" href="#L282">282</a>         
<a class="jxr_linenumber" name="L283" href="#L283">283</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, groupsTable.getName(), 
<a class="jxr_linenumber" name="L284" href="#L284">284</a>             <span class="jxr_string">"group_display_name_idx"</span>, scriptOverrideDisplayName, false, <span class="jxr_string">"display_name"</span>);
<a class="jxr_linenumber" name="L285" href="#L285">285</a>       }
<a class="jxr_linenumber" name="L286" href="#L286">286</a>       
<a class="jxr_linenumber" name="L287" href="#L287">287</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, groupsTable.getName(), 
<a class="jxr_linenumber" name="L288" href="#L288">288</a>           <span class="jxr_string">"group_parent_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"parent_stem"</span>, <span class="jxr_string">"extension"</span>);
<a class="jxr_linenumber" name="L289" href="#L289">289</a>       
<a class="jxr_linenumber" name="L290" href="#L290">290</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, groupsTable.getName(), 
<a class="jxr_linenumber" name="L291" href="#L291">291</a>           <span class="jxr_string">"group_parent_display_idx"</span>, false, <span class="jxr_string">"parent_stem"</span>, <span class="jxr_string">"display_extension"</span>);
<a class="jxr_linenumber" name="L292" href="#L292">292</a>       
<a class="jxr_linenumber" name="L293" href="#L293">293</a>     }
<a class="jxr_linenumber" name="L294" href="#L294">294</a>     
<a class="jxr_linenumber" name="L295" href="#L295">295</a>   },
<a class="jxr_linenumber" name="L296" href="#L296">296</a>   
<a class="jxr_linenumber" name="L297" href="#L297">297</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L298" href="#L298">298</a> <em class="jxr_javadoccomment">     * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L299" href="#L299">299</a> <em class="jxr_javadoccomment">     * if needs upgrade:</em>
<a class="jxr_linenumber" name="L300" href="#L300">300</a> <em class="jxr_javadoccomment">     * backup memberships table, create new tables, views, columns if not exist, move data around,</em>
<a class="jxr_linenumber" name="L301" href="#L301">301</a> <em class="jxr_javadoccomment">     * delete old data, </em>
<a class="jxr_linenumber" name="L302" href="#L302">302</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L303" href="#L303">303</a> <em class="jxr_javadoccomment">     * if configured to drop backup membership cols, and they exists, then drop them</em>
<a class="jxr_linenumber" name="L304" href="#L304">304</a> <em class="jxr_javadoccomment">     * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L305" href="#L305">305</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L306" href="#L306">306</a>   V16 {
<a class="jxr_linenumber" name="L307" href="#L307">307</a>       
<a class="jxr_linenumber" name="L308" href="#L308">308</a>       <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L309" href="#L309">309</a> <em class="jxr_javadoccomment">       * </em>
<a class="jxr_linenumber" name="L310" href="#L310">310</a> <em class="jxr_javadoccomment">       * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L311" href="#L311">311</a> <em class="jxr_javadoccomment">       */</em>
<a class="jxr_linenumber" name="L312" href="#L312">312</a>       @Override
<a class="jxr_linenumber" name="L313" href="#L313">313</a>       <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L314" href="#L314">314</a>           <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L315" href="#L315">315</a>         
<a class="jxr_linenumber" name="L316" href="#L316">316</a>         <em class="jxr_comment">// there shouldn't be any effective memberships</em>
<a class="jxr_linenumber" name="L317" href="#L317">317</a>         <strong class="jxr_keyword">int</strong> count = 0;
<a class="jxr_linenumber" name="L318" href="#L318">318</a>         
<a class="jxr_linenumber" name="L319" href="#L319">319</a>         <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L320" href="#L320">320</a>           count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L321" href="#L321">321</a>             <span class="jxr_string">"select count(*) from grouper_memberships where mship_type = 'effective'"</span>);
<a class="jxr_linenumber" name="L322" href="#L322">322</a>         } <strong class="jxr_keyword">catch</strong> (Exception e) {
<a class="jxr_linenumber" name="L323" href="#L323">323</a>           LOG.info(<span class="jxr_string">"Problem getting effective membership count"</span>);
<a class="jxr_linenumber" name="L324" href="#L324">324</a>         }
<a class="jxr_linenumber" name="L325" href="#L325">325</a>         <strong class="jxr_keyword">if</strong> (count &gt; 0) {        
<a class="jxr_linenumber" name="L326" href="#L326">326</a>           ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L327" href="#L327">327</a>               <span class="jxr_string">"\ndelete from grouper_memberships where mship_type = 'effective';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L328" href="#L328">328</a>         }
<a class="jxr_linenumber" name="L329" href="#L329">329</a>     
<a class="jxr_linenumber" name="L330" href="#L330">330</a>         <em class="jxr_comment">// check if we need to upgrade to use group set</em>
<a class="jxr_linenumber" name="L331" href="#L331">331</a>         <strong class="jxr_keyword">boolean</strong> needsUpgrade = needsMembershipAndGroupSetConversion(database);
<a class="jxr_linenumber" name="L332" href="#L332">332</a>         
<a class="jxr_linenumber" name="L333" href="#L333">333</a>         <strong class="jxr_keyword">boolean</strong> dropMembershipBackupColFromMshipUpgrade = GrouperConfig.retrieveConfig().propertyValueBoolean(
<a class="jxr_linenumber" name="L334" href="#L334">334</a>             <span class="jxr_string">"ddlutils.dropMembershipBackupColsFromOwnerViaUpgrade"</span>, false);
<a class="jxr_linenumber" name="L335" href="#L335">335</a>         
<a class="jxr_linenumber" name="L336" href="#L336">336</a>           
<a class="jxr_linenumber" name="L337" href="#L337">337</a>         <em class="jxr_comment">// find or add columns and indexes whether or not upgrade is needed.</em>
<a class="jxr_linenumber" name="L338" href="#L338">338</a>           runMembershipAndGroupSetConversion(database, ddlVersionBean, false);
<a class="jxr_linenumber" name="L339" href="#L339">339</a>           
<a class="jxr_linenumber" name="L340" href="#L340">340</a>         
<a class="jxr_linenumber" name="L341" href="#L341">341</a>         <strong class="jxr_keyword">if</strong> (needsUpgrade) {
<a class="jxr_linenumber" name="L342" href="#L342">342</a>           
<a class="jxr_linenumber" name="L343" href="#L343">343</a>           Table membershipsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L344" href="#L344">344</a>               Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L345" href="#L345">345</a> 
<a class="jxr_linenumber" name="L346" href="#L346">346</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_VIA_ID_BAK, 
<a class="jxr_linenumber" name="L347" href="#L347">347</a>               Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L348" href="#L348">348</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_DEPTH_BAK, 
<a class="jxr_linenumber" name="L349" href="#L349">349</a>               Types.INTEGER, <span class="jxr_string">"11"</span>, false, false);
<a class="jxr_linenumber" name="L350" href="#L350">350</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_PARENT_MEMBERSHIP_BAK, 
<a class="jxr_linenumber" name="L351" href="#L351">351</a>               Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L352" href="#L352">352</a>   
<a class="jxr_linenumber" name="L353" href="#L353">353</a>           
<a class="jxr_linenumber" name="L354" href="#L354">354</a>           <em class="jxr_comment">//move data to the group cols</em>
<a class="jxr_linenumber" name="L355" href="#L355">355</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_memberships \n"</span>
<a class="jxr_linenumber" name="L356" href="#L356">356</a>               + <span class="jxr_string">"set owner_group_id = (select gg.id from grouper_groups gg where gg.id = owner_id), \n"</span>
<a class="jxr_linenumber" name="L357" href="#L357">357</a>               + <span class="jxr_string">"owner_stem_id = (select gs.id from grouper_stems gs where gs.id = owner_id), \n"</span>
<a class="jxr_linenumber" name="L358" href="#L358">358</a>               + <span class="jxr_string">"via_composite_id = (select gc.id from grouper_composites gc where gc.id = via_id), \n"</span>
<a class="jxr_linenumber" name="L359" href="#L359">359</a>               + <span class="jxr_string">"via_id_bak = via_id, \n"</span>
<a class="jxr_linenumber" name="L360" href="#L360">360</a>               + <span class="jxr_string">"via_id = null, \n"</span>
<a class="jxr_linenumber" name="L361" href="#L361">361</a>               + <span class="jxr_string">"depth_bak = depth, \n"</span>
<a class="jxr_linenumber" name="L362" href="#L362">362</a>               + <span class="jxr_string">"depth = 0, \n"</span>
<a class="jxr_linenumber" name="L363" href="#L363">363</a>               + <span class="jxr_string">"parent_membership_bak = parent_membership, \n"</span>
<a class="jxr_linenumber" name="L364" href="#L364">364</a>               + <span class="jxr_string">"parent_membership = null \n"</span>
<a class="jxr_linenumber" name="L365" href="#L365">365</a>               + <span class="jxr_string">"where owner_group_id is null and owner_stem_id is null and owner_attr_def_id is null \n"</span>  
<a class="jxr_linenumber" name="L366" href="#L366">366</a>               + <span class="jxr_string">"and via_composite_id is null and via_id_bak is null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L367" href="#L367">367</a>           
<a class="jxr_linenumber" name="L368" href="#L368">368</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_memberships \n"</span>
<a class="jxr_linenumber" name="L369" href="#L369">369</a>               + <span class="jxr_string">"set enabled = 'T' \n"</span>
<a class="jxr_linenumber" name="L370" href="#L370">370</a>               + <span class="jxr_string">"where enabled is null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L371" href="#L371">371</a>           
<a class="jxr_linenumber" name="L372" href="#L372">372</a>         }
<a class="jxr_linenumber" name="L373" href="#L373">373</a>         
<a class="jxr_linenumber" name="L374" href="#L374">374</a>         <em class="jxr_comment">// see if we should delete the bak columns</em>
<a class="jxr_linenumber" name="L375" href="#L375">375</a>         <strong class="jxr_keyword">if</strong> (!needsUpgrade &amp;&amp; dropMembershipBackupColFromMshipUpgrade) {
<a class="jxr_linenumber" name="L376" href="#L376">376</a>           GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_VIA_ID_BAK, ddlVersionBean);
<a class="jxr_linenumber" name="L377" href="#L377">377</a>           GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_DEPTH_BAK, ddlVersionBean);
<a class="jxr_linenumber" name="L378" href="#L378">378</a>           GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_PARENT_MEMBERSHIP_BAK, ddlVersionBean);
<a class="jxr_linenumber" name="L379" href="#L379">379</a>         }
<a class="jxr_linenumber" name="L380" href="#L380">380</a>       }
<a class="jxr_linenumber" name="L381" href="#L381">381</a>     }, 
<a class="jxr_linenumber" name="L382" href="#L382">382</a>     
<a class="jxr_linenumber" name="L383" href="#L383">383</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L384" href="#L384">384</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L385" href="#L385">385</a> <em class="jxr_javadoccomment">   * drop original columns in membership table not needed for 1.5.  also add unique index and field indexes.</em>
<a class="jxr_linenumber" name="L386" href="#L386">386</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L387" href="#L387">387</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L388" href="#L388">388</a>   V17 {
<a class="jxr_linenumber" name="L389" href="#L389">389</a>     
<a class="jxr_linenumber" name="L390" href="#L390">390</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L391" href="#L391">391</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L392" href="#L392">392</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L393" href="#L393">393</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L394" href="#L394">394</a>     @Override
<a class="jxr_linenumber" name="L395" href="#L395">395</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L396" href="#L396">396</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L397" href="#L397">397</a> 
<a class="jxr_linenumber" name="L398" href="#L398">398</a>       Table membershipsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L399" href="#L399">399</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L400" href="#L400">400</a>       
<a class="jxr_linenumber" name="L401" href="#L401">401</a>       GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L402" href="#L402">402</a>           Membership.COLUMN_VIA_ID, ddlVersionBean);
<a class="jxr_linenumber" name="L403" href="#L403">403</a>       GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L404" href="#L404">404</a>           Membership.COLUMN_DEPTH, ddlVersionBean);
<a class="jxr_linenumber" name="L405" href="#L405">405</a>       GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L406" href="#L406">406</a>           Membership.COLUMN_PARENT_MEMBERSHIP, ddlVersionBean);
<a class="jxr_linenumber" name="L407" href="#L407">407</a>       
<a class="jxr_linenumber" name="L408" href="#L408">408</a>       addMembershipUniqueIndex(database, membershipsTable);
<a class="jxr_linenumber" name="L409" href="#L409">409</a>       
<a class="jxr_linenumber" name="L410" href="#L410">410</a>       addMembershipFieldIndexes(database, membershipsTable);
<a class="jxr_linenumber" name="L411" href="#L411">411</a>     }
<a class="jxr_linenumber" name="L412" href="#L412">412</a>   },
<a class="jxr_linenumber" name="L413" href="#L413">413</a> 
<a class="jxr_linenumber" name="L414" href="#L414">414</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L415" href="#L415">415</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L416" href="#L416">416</a> <em class="jxr_javadoccomment">   * add last membership change</em>
<a class="jxr_linenumber" name="L417" href="#L417">417</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L418" href="#L418">418</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L419" href="#L419">419</a>   V18 {
<a class="jxr_linenumber" name="L420" href="#L420">420</a>     
<a class="jxr_linenumber" name="L421" href="#L421">421</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L422" href="#L422">422</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L423" href="#L423">423</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L424" href="#L424">424</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L425" href="#L425">425</a>     @Override
<a class="jxr_linenumber" name="L426" href="#L426">426</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L427" href="#L427">427</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L428" href="#L428">428</a> 
<a class="jxr_linenumber" name="L429" href="#L429">429</a>       Table groupsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L430" href="#L430">430</a>           Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L431" href="#L431">431</a> 
<a class="jxr_linenumber" name="L432" href="#L432">432</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, Group.COLUMN_LAST_MEMBERSHIP_CHANGE, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L433" href="#L433">433</a>       
<a class="jxr_linenumber" name="L434" href="#L434">434</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Group.TABLE_GROUPER_GROUPS,
<a class="jxr_linenumber" name="L435" href="#L435">435</a>           <span class="jxr_string">"group_last_membership_idx"</span>, false, Group.COLUMN_LAST_MEMBERSHIP_CHANGE);
<a class="jxr_linenumber" name="L436" href="#L436">436</a> 
<a class="jxr_linenumber" name="L437" href="#L437">437</a>       Table stemsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L438" href="#L438">438</a>           Stem.TABLE_GROUPER_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L439" href="#L439">439</a> 
<a class="jxr_linenumber" name="L440" href="#L440">440</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, Stem.COLUMN_LAST_MEMBERSHIP_CHANGE, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L441" href="#L441">441</a> 
<a class="jxr_linenumber" name="L442" href="#L442">442</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Stem.TABLE_GROUPER_STEMS,
<a class="jxr_linenumber" name="L443" href="#L443">443</a>           <span class="jxr_string">"stem_last_membership_idx"</span>, false, Stem.COLUMN_LAST_MEMBERSHIP_CHANGE);
<a class="jxr_linenumber" name="L444" href="#L444">444</a>     }
<a class="jxr_linenumber" name="L445" href="#L445">445</a>   },
<a class="jxr_linenumber" name="L446" href="#L446">446</a> 
<a class="jxr_linenumber" name="L447" href="#L447">447</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L448" href="#L448">448</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L449" href="#L449">449</a> <em class="jxr_javadoccomment">   * add user auditing and context ids</em>
<a class="jxr_linenumber" name="L450" href="#L450">450</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L451" href="#L451">451</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L452" href="#L452">452</a>   V19 {
<a class="jxr_linenumber" name="L453" href="#L453">453</a>     
<a class="jxr_linenumber" name="L454" href="#L454">454</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L455" href="#L455">455</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L456" href="#L456">456</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L457" href="#L457">457</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L458" href="#L458">458</a>     @Override
<a class="jxr_linenumber" name="L459" href="#L459">459</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L460" href="#L460">460</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L461" href="#L461">461</a> 
<a class="jxr_linenumber" name="L462" href="#L462">462</a>       
<a class="jxr_linenumber" name="L463" href="#L463">463</a>       addContextIdColsLoader(database);
<a class="jxr_linenumber" name="L464" href="#L464">464</a>       
<a class="jxr_linenumber" name="L465" href="#L465">465</a>       addContextIdCols(database);
<a class="jxr_linenumber" name="L466" href="#L466">466</a>       
<a class="jxr_linenumber" name="L467" href="#L467">467</a>       addAuditTables(ddlVersionBean, database);
<a class="jxr_linenumber" name="L468" href="#L468">468</a>       
<a class="jxr_linenumber" name="L469" href="#L469">469</a>     }
<a class="jxr_linenumber" name="L470" href="#L470">470</a>   },
<a class="jxr_linenumber" name="L471" href="#L471">471</a>   
<a class="jxr_linenumber" name="L472" href="#L472">472</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L473" href="#L473">473</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L474" href="#L474">474</a> <em class="jxr_javadoccomment">   * add alternate name</em>
<a class="jxr_linenumber" name="L475" href="#L475">475</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L476" href="#L476">476</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L477" href="#L477">477</a>   V20 {
<a class="jxr_linenumber" name="L478" href="#L478">478</a>     
<a class="jxr_linenumber" name="L479" href="#L479">479</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L480" href="#L480">480</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L481" href="#L481">481</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L482" href="#L482">482</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L483" href="#L483">483</a>     @Override
<a class="jxr_linenumber" name="L484" href="#L484">484</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L485" href="#L485">485</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L486" href="#L486">486</a> 
<a class="jxr_linenumber" name="L487" href="#L487">487</a>       Table groupsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L488" href="#L488">488</a>           Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L489" href="#L489">489</a> 
<a class="jxr_linenumber" name="L490" href="#L490">490</a>       addGroupAlternateNameCol(database, ddlVersionBean, groupsTable);
<a class="jxr_linenumber" name="L491" href="#L491">491</a>     }
<a class="jxr_linenumber" name="L492" href="#L492">492</a> 
<a class="jxr_linenumber" name="L493" href="#L493">493</a>   },
<a class="jxr_linenumber" name="L494" href="#L494">494</a> 
<a class="jxr_linenumber" name="L495" href="#L495">495</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L496" href="#L496">496</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L497" href="#L497">497</a> <em class="jxr_javadoccomment">   * add change log</em>
<a class="jxr_linenumber" name="L498" href="#L498">498</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L499" href="#L499">499</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L500" href="#L500">500</a>   V21 {
<a class="jxr_linenumber" name="L501" href="#L501">501</a>     
<a class="jxr_linenumber" name="L502" href="#L502">502</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L503" href="#L503">503</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L504" href="#L504">504</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L505" href="#L505">505</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L506" href="#L506">506</a>     @Override
<a class="jxr_linenumber" name="L507" href="#L507">507</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L508" href="#L508">508</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L509" href="#L509">509</a> 
<a class="jxr_linenumber" name="L510" href="#L510">510</a>       addChangeLogTables(ddlVersionBean, database);
<a class="jxr_linenumber" name="L511" href="#L511">511</a>       
<a class="jxr_linenumber" name="L512" href="#L512">512</a>     }
<a class="jxr_linenumber" name="L513" href="#L513">513</a>   },
<a class="jxr_linenumber" name="L514" href="#L514">514</a>   
<a class="jxr_linenumber" name="L515" href="#L515">515</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L516" href="#L516">516</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L517" href="#L517">517</a> <em class="jxr_javadoccomment">   * add privilege management</em>
<a class="jxr_linenumber" name="L518" href="#L518">518</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L519" href="#L519">519</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L520" href="#L520">520</a>   V22 {
<a class="jxr_linenumber" name="L521" href="#L521">521</a>     
<a class="jxr_linenumber" name="L522" href="#L522">522</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L523" href="#L523">523</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L524" href="#L524">524</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L525" href="#L525">525</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L526" href="#L526">526</a>     @Override
<a class="jxr_linenumber" name="L527" href="#L527">527</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L528" href="#L528">528</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L529" href="#L529">529</a> 
<a class="jxr_linenumber" name="L530" href="#L530">530</a>       addPrivilegeManagement(ddlVersionBean, database, false);
<a class="jxr_linenumber" name="L531" href="#L531">531</a>       
<a class="jxr_linenumber" name="L532" href="#L532">532</a>     }
<a class="jxr_linenumber" name="L533" href="#L533">533</a>   },
<a class="jxr_linenumber" name="L534" href="#L534">534</a>   
<a class="jxr_linenumber" name="L535" href="#L535">535</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L536" href="#L536">536</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L537" href="#L537">537</a> <em class="jxr_javadoccomment">   * add column to grouper_attribute_assign_value, remove composite memberships where the member is a group,</em>
<a class="jxr_linenumber" name="L538" href="#L538">538</a> <em class="jxr_javadoccomment">   * add owner_id column to grouper_group_set</em>
<a class="jxr_linenumber" name="L539" href="#L539">539</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L540" href="#L540">540</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L541" href="#L541">541</a>   V23 {
<a class="jxr_linenumber" name="L542" href="#L542">542</a>     
<a class="jxr_linenumber" name="L543" href="#L543">543</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L544" href="#L544">544</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L545" href="#L545">545</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L546" href="#L546">546</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L547" href="#L547">547</a>     @Override
<a class="jxr_linenumber" name="L548" href="#L548">548</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L549" href="#L549">549</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L550" href="#L550">550</a>       
<a class="jxr_linenumber" name="L551" href="#L551">551</a>       addAttributeFloatValueCol(database);
<a class="jxr_linenumber" name="L552" href="#L552">552</a> 
<a class="jxr_linenumber" name="L553" href="#L553">553</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L554" href="#L554">554</a>         
<a class="jxr_linenumber" name="L555" href="#L555">555</a>         <strong class="jxr_keyword">int</strong> count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L556" href="#L556">556</a>             <span class="jxr_string">"select count(*) from grouper_memberships ms, grouper_members m "</span> +
<a class="jxr_linenumber" name="L557" href="#L557">557</a>             <span class="jxr_string">"  where ms.member_id = m.id and ms.mship_type='composite' and m.subject_source='g:gsa'"</span>);
<a class="jxr_linenumber" name="L558" href="#L558">558</a>   
<a class="jxr_linenumber" name="L559" href="#L559">559</a>         <strong class="jxr_keyword">if</strong> (count &gt; 0) {   
<a class="jxr_linenumber" name="L560" href="#L560">560</a>           <em class="jxr_comment">// this is more complicated than it should be because of mysql</em>
<a class="jxr_linenumber" name="L561" href="#L561">561</a>           <em class="jxr_comment">// http://bugs.mysql.com/bug.php?id=5037</em>
<a class="jxr_linenumber" name="L562" href="#L562">562</a>           ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L563" href="#L563">563</a>               <span class="jxr_string">"\ndelete from grouper_memberships where id in "</span> +
<a class="jxr_linenumber" name="L564" href="#L564">564</a>               <span class="jxr_string">"  (select x.id from "</span> +
<a class="jxr_linenumber" name="L565" href="#L565">565</a>               <span class="jxr_string">"    (select ms.id from grouper_memberships ms, grouper_members m "</span> +
<a class="jxr_linenumber" name="L566" href="#L566">566</a>               <span class="jxr_string">"      where ms.member_id = m.id and ms.mship_type='composite' and m.subject_source='g:gsa') x);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L567" href="#L567">567</a>         }
<a class="jxr_linenumber" name="L568" href="#L568">568</a>         
<a class="jxr_linenumber" name="L569" href="#L569">569</a>       }
<a class="jxr_linenumber" name="L570" href="#L570">570</a>       
<a class="jxr_linenumber" name="L571" href="#L571">571</a>       addGroupSetOwnerIdColumn(database, ddlVersionBean);
<a class="jxr_linenumber" name="L572" href="#L572">572</a>       
<a class="jxr_linenumber" name="L573" href="#L573">573</a>       <em class="jxr_comment">//fix the enabled time col if wrong type</em>
<a class="jxr_linenumber" name="L574" href="#L574">574</a>       {
<a class="jxr_linenumber" name="L575" href="#L575">575</a>         Table attributeAssignTable = GrouperDdlUtils.ddlutilsFindTable(
<a class="jxr_linenumber" name="L576" href="#L576">576</a>             database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L577" href="#L577">577</a>         
<a class="jxr_linenumber" name="L578" href="#L578">578</a>         Column column = GrouperDdlUtils.ddlutilsFindColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L579" href="#L579">579</a>             AttributeAssign.COLUMN_ENABLED_TIME, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L580" href="#L580">580</a>         
<a class="jxr_linenumber" name="L581" href="#L581">581</a>         <strong class="jxr_keyword">if</strong> (column.getTypeCode() == Types.CHAR || column.getTypeCode() == Types.VARCHAR) {
<a class="jxr_linenumber" name="L582" href="#L582">582</a>           
<a class="jxr_linenumber" name="L583" href="#L583">583</a>           <strong class="jxr_keyword">if</strong> (ddlVersionBean.isMysql()) {
<a class="jxr_linenumber" name="L584" href="#L584">584</a>             ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"alter table `grouper_attribute_assign` change `enabled_time` `enabled_time` bigint(20) NULL;\n"</span>);
<a class="jxr_linenumber" name="L585" href="#L585">585</a>           } <strong class="jxr_keyword">else</strong> <strong class="jxr_keyword">if</strong> (ddlVersionBean.isOracle()) {
<a class="jxr_linenumber" name="L586" href="#L586">586</a>             ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"ALTER TABLE GROUPER_ATTRIBUTE_ASSIGN MODIFY(ENABLED_TIME NUMBER);\n"</span>);
<a class="jxr_linenumber" name="L587" href="#L587">587</a>           } <strong class="jxr_keyword">else</strong> <strong class="jxr_keyword">if</strong> (ddlVersionBean.isPostgres()) {
<a class="jxr_linenumber" name="L588" href="#L588">588</a>             ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"alter table grouper_attribute_assign alter column enabled_time type bigint USING CAST (enabled_time as BIGINT);\n"</span>);
<a class="jxr_linenumber" name="L589" href="#L589">589</a>           } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L590" href="#L590">590</a>             <em class="jxr_comment">//do the default</em>
<a class="jxr_linenumber" name="L591" href="#L591">591</a>             column.setTypeCode(Types.BIGINT);
<a class="jxr_linenumber" name="L592" href="#L592">592</a>             column.setSize(<span class="jxr_string">"20"</span>);
<a class="jxr_linenumber" name="L593" href="#L593">593</a>             column.setPrimaryKey(false);
<a class="jxr_linenumber" name="L594" href="#L594">594</a>             column.setRequired(false);
<a class="jxr_linenumber" name="L595" href="#L595">595</a>           }
<a class="jxr_linenumber" name="L596" href="#L596">596</a>           
<a class="jxr_linenumber" name="L597" href="#L597">597</a>           
<a class="jxr_linenumber" name="L598" href="#L598">598</a>         }          
<a class="jxr_linenumber" name="L599" href="#L599">599</a>       }
<a class="jxr_linenumber" name="L600" href="#L600">600</a>       
<a class="jxr_linenumber" name="L601" href="#L601">601</a>       <em class="jxr_comment">//fix column lengths</em>
<a class="jxr_linenumber" name="L602" href="#L602">602</a>       {
<a class="jxr_linenumber" name="L603" href="#L603">603</a>         Table grouperAuditEntryTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L604" href="#L604">604</a>             AuditEntry.TABLE_GROUPER_AUDIT_ENTRY);
<a class="jxr_linenumber" name="L605" href="#L605">605</a>         
<a class="jxr_linenumber" name="L606" href="#L606">606</a>         GrouperDdlUtils.ddlutilsFixSizeColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L607" href="#L607">607</a>             <span class="jxr_string">"hibernate_version_number"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L608" href="#L608">608</a> 
<a class="jxr_linenumber" name="L609" href="#L609">609</a>         GrouperDdlUtils.ddlutilsFixSizeColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L610" href="#L610">610</a>             <span class="jxr_string">"int01"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L611" href="#L611">611</a> 
<a class="jxr_linenumber" name="L612" href="#L612">612</a>         GrouperDdlUtils.ddlutilsFixSizeColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L613" href="#L613">613</a>             <span class="jxr_string">"int02"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L614" href="#L614">614</a> 
<a class="jxr_linenumber" name="L615" href="#L615">615</a>         GrouperDdlUtils.ddlutilsFixSizeColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L616" href="#L616">616</a>             <span class="jxr_string">"int03"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L617" href="#L617">617</a> 
<a class="jxr_linenumber" name="L618" href="#L618">618</a>         GrouperDdlUtils.ddlutilsFixSizeColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L619" href="#L619">619</a>             <span class="jxr_string">"int04"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L620" href="#L620">620</a> 
<a class="jxr_linenumber" name="L621" href="#L621">621</a>         GrouperDdlUtils.ddlutilsFixSizeColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L622" href="#L622">622</a>             <span class="jxr_string">"int05"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L623" href="#L623">623</a> 
<a class="jxr_linenumber" name="L624" href="#L624">624</a>         GrouperDdlUtils.ddlutilsFixSizeColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L625" href="#L625">625</a>             <span class="jxr_string">"duration_microseconds"</span>, Types.BIGINT, <span class="jxr_string">"15"</span>, false, false); 
<a class="jxr_linenumber" name="L626" href="#L626">626</a>         
<a class="jxr_linenumber" name="L627" href="#L627">627</a> 
<a class="jxr_linenumber" name="L628" href="#L628">628</a>       }
<a class="jxr_linenumber" name="L629" href="#L629">629</a>       
<a class="jxr_linenumber" name="L630" href="#L630">630</a>       <strong class="jxr_keyword">if</strong> (!ddlVersionBean.isSqlServer()) {
<a class="jxr_linenumber" name="L631" href="#L631">631</a>         
<a class="jxr_linenumber" name="L632" href="#L632">632</a>         Table grouperAuditEntryTable = GrouperDdlUtils.ddlutilsFindTable(database,
<a class="jxr_linenumber" name="L633" href="#L633">633</a>             AuditEntry.TABLE_GROUPER_AUDIT_ENTRY, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L634" href="#L634">634</a> 
<a class="jxr_linenumber" name="L635" href="#L635">635</a>         <em class="jxr_comment">//do 8 string indexes, probably dont need them on the other string cols</em>
<a class="jxr_linenumber" name="L636" href="#L636">636</a>         <strong class="jxr_keyword">for</strong> (<strong class="jxr_keyword">int</strong> i=6;i&lt;=8;i++) {
<a class="jxr_linenumber" name="L637" href="#L637">637</a>           <em class="jxr_comment">//see if we have a custom script here, do this since some versions of mysql cant handle indexes on columns that large</em>
<a class="jxr_linenumber" name="L638" href="#L638">638</a>           String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX audit_entry_string0"</span> + i + <span class="jxr_string">"_idx "</span> +
<a class="jxr_linenumber" name="L639" href="#L639">639</a>               <span class="jxr_string">"ON grouper_audit_entry (string0"</span> + i + <span class="jxr_string">"(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L640" href="#L640">640</a>           
<a class="jxr_linenumber" name="L641" href="#L641">641</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, grouperAuditEntryTable.getName(), 
<a class="jxr_linenumber" name="L642" href="#L642">642</a>               <span class="jxr_string">"audit_entry_string0"</span> + i + <span class="jxr_string">"_idx"</span>, scriptOverride, false, <span class="jxr_string">"string0"</span> + i);
<a class="jxr_linenumber" name="L643" href="#L643">643</a>           
<a class="jxr_linenumber" name="L644" href="#L644">644</a>         }
<a class="jxr_linenumber" name="L645" href="#L645">645</a>       }
<a class="jxr_linenumber" name="L646" href="#L646">646</a>       
<a class="jxr_linenumber" name="L647" href="#L647">647</a>       addGrouperLoaderJobNameIndex(database, ddlVersionBean);
<a class="jxr_linenumber" name="L648" href="#L648">648</a>       
<a class="jxr_linenumber" name="L649" href="#L649">649</a>     }
<a class="jxr_linenumber" name="L650" href="#L650">650</a>   },
<a class="jxr_linenumber" name="L651" href="#L651">651</a>   
<a class="jxr_linenumber" name="L652" href="#L652">652</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L653" href="#L653">653</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L654" href="#L654">654</a> <em class="jxr_javadoccomment">   * Delete flat tables, add PIT tables, update unique index in grouper_group_set, add external subject tables,</em>
<a class="jxr_linenumber" name="L655" href="#L655">655</a> <em class="jxr_javadoccomment">   * add index for in table grouper_attribute_def</em>
<a class="jxr_linenumber" name="L656" href="#L656">656</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L657" href="#L657">657</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L658" href="#L658">658</a>   V24 {
<a class="jxr_linenumber" name="L659" href="#L659">659</a>     
<a class="jxr_linenumber" name="L660" href="#L660">660</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L661" href="#L661">661</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L662" href="#L662">662</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L663" href="#L663">663</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L664" href="#L664">664</a>     @Override
<a class="jxr_linenumber" name="L665" href="#L665">665</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L666" href="#L666">666</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L667" href="#L667">667</a> 
<a class="jxr_linenumber" name="L668" href="#L668">668</a>       Table table = database.findTable(<span class="jxr_string">"grouper_flat_memberships"</span>);
<a class="jxr_linenumber" name="L669" href="#L669">669</a>       <strong class="jxr_keyword">if</strong> (table != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L670" href="#L670">670</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_flat_memberships"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L671" href="#L671">671</a>       }
<a class="jxr_linenumber" name="L672" href="#L672">672</a>       
<a class="jxr_linenumber" name="L673" href="#L673">673</a>       table = database.findTable(<span class="jxr_string">"grouper_flat_groups"</span>);
<a class="jxr_linenumber" name="L674" href="#L674">674</a>       <strong class="jxr_keyword">if</strong> (table != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L675" href="#L675">675</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_flat_groups"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L676" href="#L676">676</a>       }
<a class="jxr_linenumber" name="L677" href="#L677">677</a>       
<a class="jxr_linenumber" name="L678" href="#L678">678</a>       table = database.findTable(<span class="jxr_string">"grouper_flat_stems"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L679" href="#L679">679</a>       <strong class="jxr_keyword">if</strong> (table != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L680" href="#L680">680</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_flat_stems"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L681" href="#L681">681</a>       }
<a class="jxr_linenumber" name="L682" href="#L682">682</a>       
<a class="jxr_linenumber" name="L683" href="#L683">683</a>       table = database.findTable(<span class="jxr_string">"grouper_flat_attribute_def"</span>);
<a class="jxr_linenumber" name="L684" href="#L684">684</a>       <strong class="jxr_keyword">if</strong> (table != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L685" href="#L685">685</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_flat_attribute_def"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L686" href="#L686">686</a>       }
<a class="jxr_linenumber" name="L687" href="#L687">687</a> 
<a class="jxr_linenumber" name="L688" href="#L688">688</a>       addPITTables(ddlVersionBean, database);
<a class="jxr_linenumber" name="L689" href="#L689">689</a>       
<a class="jxr_linenumber" name="L690" href="#L690">690</a>       Table grouperGroupSet = GrouperDdlUtils.ddlutilsFindTable(database, GroupSet.TABLE_GROUPER_GROUP_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L691" href="#L691">691</a> 
<a class="jxr_linenumber" name="L692" href="#L692">692</a>       GrouperDdlUtils.ddlutilsDropIndexes(grouperGroupSet, <span class="jxr_string">"owner_group_id_null"</span>);
<a class="jxr_linenumber" name="L693" href="#L693">693</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L694" href="#L694">694</a>           <span class="jxr_string">"group_set_uniq_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"member_id"</span>, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"owner_id"</span>, <span class="jxr_string">"parent_id"</span>, <span class="jxr_string">"mship_type"</span>);
<a class="jxr_linenumber" name="L695" href="#L695">695</a>       
<a class="jxr_linenumber" name="L696" href="#L696">696</a>       addExternalSubjectTables(ddlVersionBean, database);
<a class="jxr_linenumber" name="L697" href="#L697">697</a>      
<a class="jxr_linenumber" name="L698" href="#L698">698</a>       Table attributeDefTable = GrouperDdlUtils.ddlutilsFindTable(database, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L699" href="#L699">699</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeDefTable.getName(), 
<a class="jxr_linenumber" name="L700" href="#L700">700</a>           <span class="jxr_string">"attribute_def_type_idx"</span>, false, AttributeDef.COLUMN_ATTRIBUTE_DEF_TYPE);
<a class="jxr_linenumber" name="L701" href="#L701">701</a>       
<a class="jxr_linenumber" name="L702" href="#L702">702</a>       <strong class="jxr_keyword">if</strong> (!ddlVersionBean.getFullScript().toString().contains(<span class="jxr_string">"insert into grouper_pit_"</span>)) {
<a class="jxr_linenumber" name="L703" href="#L703">703</a>         populatePITTables(ddlVersionBean);
<a class="jxr_linenumber" name="L704" href="#L704">704</a>       }
<a class="jxr_linenumber" name="L705" href="#L705">705</a>       
<a class="jxr_linenumber" name="L706" href="#L706">706</a>       Table grouperChangeLogEntryTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L707" href="#L707">707</a>         ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY);
<a class="jxr_linenumber" name="L708" href="#L708">708</a> 
<a class="jxr_linenumber" name="L709" href="#L709">709</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, grouperChangeLogEntryTable.getName(), 
<a class="jxr_linenumber" name="L710" href="#L710">710</a>           <span class="jxr_string">"change_log_created_on_idx"</span>, <strong class="jxr_keyword">null</strong>, false, <span class="jxr_string">"created_on"</span>);
<a class="jxr_linenumber" name="L711" href="#L711">711</a>       
<a class="jxr_linenumber" name="L712" href="#L712">712</a>     }
<a class="jxr_linenumber" name="L713" href="#L713">713</a>   },
<a class="jxr_linenumber" name="L714" href="#L714">714</a>   
<a class="jxr_linenumber" name="L715" href="#L715">715</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L716" href="#L716">716</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L717" href="#L717">717</a> <em class="jxr_javadoccomment">   * Add point in time indexes, add additional subject data to member table, add last immediate membership change column to grouper_groups.</em>
<a class="jxr_linenumber" name="L718" href="#L718">718</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L719" href="#L719">719</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L720" href="#L720">720</a>   V25 {
<a class="jxr_linenumber" name="L721" href="#L721">721</a>     
<a class="jxr_linenumber" name="L722" href="#L722">722</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L723" href="#L723">723</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L724" href="#L724">724</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L725" href="#L725">725</a>     @Override
<a class="jxr_linenumber" name="L726" href="#L726">726</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L727" href="#L727">727</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L728" href="#L728">728</a> 
<a class="jxr_linenumber" name="L729" href="#L729">729</a>       addPITIndexes(ddlVersionBean, database);
<a class="jxr_linenumber" name="L730" href="#L730">730</a>       
<a class="jxr_linenumber" name="L731" href="#L731">731</a>       addMemberAttributes(database, ddlVersionBean);
<a class="jxr_linenumber" name="L732" href="#L732">732</a>       
<a class="jxr_linenumber" name="L733" href="#L733">733</a>       Table groupsTable = GrouperDdlUtils.ddlutilsFindTable(database, Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L734" href="#L734">734</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, Group.COLUMN_LAST_IMMEDIATE_MEMBERSHIP_CHANGE, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L735" href="#L735">735</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"group_last_imm_membership_idx"</span>, false, 
<a class="jxr_linenumber" name="L736" href="#L736">736</a>           Group.COLUMN_LAST_IMMEDIATE_MEMBERSHIP_CHANGE);
<a class="jxr_linenumber" name="L737" href="#L737">737</a>       
<a class="jxr_linenumber" name="L738" href="#L738">738</a>       addAttributeAssignDisallowed(database);
<a class="jxr_linenumber" name="L739" href="#L739">739</a>       addAttributeAssignPitDisallowed(database);
<a class="jxr_linenumber" name="L740" href="#L740">740</a>       
<a class="jxr_linenumber" name="L741" href="#L741">741</a>     }
<a class="jxr_linenumber" name="L742" href="#L742">742</a>   },
<a class="jxr_linenumber" name="L743" href="#L743">743</a>   
<a class="jxr_linenumber" name="L744" href="#L744">744</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L745" href="#L745">745</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L746" href="#L746">746</a> <em class="jxr_javadoccomment">   * Grouper 2.1: add alternate name for stems, add source_id columns to point in time tables</em>
<a class="jxr_linenumber" name="L747" href="#L747">747</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L748" href="#L748">748</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L749" href="#L749">749</a>   V26 {
<a class="jxr_linenumber" name="L750" href="#L750">750</a>     
<a class="jxr_linenumber" name="L751" href="#L751">751</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L752" href="#L752">752</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L753" href="#L753">753</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L754" href="#L754">754</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L755" href="#L755">755</a>     @Override
<a class="jxr_linenumber" name="L756" href="#L756">756</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L757" href="#L757">757</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L758" href="#L758">758</a> 
<a class="jxr_linenumber" name="L759" href="#L759">759</a>       Table stemsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L760" href="#L760">760</a>           Stem.TABLE_GROUPER_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L761" href="#L761">761</a> 
<a class="jxr_linenumber" name="L762" href="#L762">762</a>       addStemAlternateNameCol(database, ddlVersionBean, stemsTable);
<a class="jxr_linenumber" name="L763" href="#L763">763</a>       addPITSourceIdColumns(database, ddlVersionBean);
<a class="jxr_linenumber" name="L764" href="#L764">764</a>       
<a class="jxr_linenumber" name="L765" href="#L765">765</a>       Table compositeTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L766" href="#L766">766</a>           Composite.TABLE_GROUPER_COMPOSITES, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L767" href="#L767">767</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, compositeTable.getName(), 
<a class="jxr_linenumber" name="L768" href="#L768">768</a>           <span class="jxr_string">"composite_composite_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"owner"</span>);
<a class="jxr_linenumber" name="L769" href="#L769">769</a>     }
<a class="jxr_linenumber" name="L770" href="#L770">770</a> 
<a class="jxr_linenumber" name="L771" href="#L771">771</a>   },
<a class="jxr_linenumber" name="L772" href="#L772">772</a>   
<a class="jxr_linenumber" name="L773" href="#L773">773</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L774" href="#L774">774</a> <em class="jxr_javadoccomment">   * delete backup cols if configured to and if exist</em>
<a class="jxr_linenumber" name="L775" href="#L775">775</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L776" href="#L776">776</a>   V11 {
<a class="jxr_linenumber" name="L777" href="#L777">777</a>     
<a class="jxr_linenumber" name="L778" href="#L778">778</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L779" href="#L779">779</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L780" href="#L780">780</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L781" href="#L781">781</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L782" href="#L782">782</a>     @Override
<a class="jxr_linenumber" name="L783" href="#L783">783</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L784" href="#L784">784</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L785" href="#L785">785</a> 
<a class="jxr_linenumber" name="L786" href="#L786">786</a>       <em class="jxr_comment">//if not configured to drop, then leave alone</em>
<a class="jxr_linenumber" name="L787" href="#L787">787</a>       <strong class="jxr_keyword">if</strong> (!GrouperConfig.retrieveConfig().propertyValueBoolean(<span class="jxr_string">"ddlutils.dropBackupFieldNameTypeCols"</span>, false)) {
<a class="jxr_linenumber" name="L788" href="#L788">788</a>         <strong class="jxr_keyword">return</strong>;
<a class="jxr_linenumber" name="L789" href="#L789">789</a>       }
<a class="jxr_linenumber" name="L790" href="#L790">790</a> 
<a class="jxr_linenumber" name="L791" href="#L791">791</a>       <em class="jxr_comment">//only drop cols if there are there, and all of them (which means the conversion probably happened, and they</em>
<a class="jxr_linenumber" name="L792" href="#L792">792</a>       <em class="jxr_comment">//havent been dropped yet)</em>
<a class="jxr_linenumber" name="L793" href="#L793">793</a>       
<a class="jxr_linenumber" name="L794" href="#L794">794</a>       <em class="jxr_comment">/* -- Modifications to grouper_attributes no longer needed since table is deleted as of 2.2.</em>
<a class="jxr_linenumber" name="L795" href="#L795">795</a> <em class="jxr_comment">      if (GrouperDdlUtils.ddlutilsFindColumn(database, Attribute.TABLE_GROUPER_ATTRIBUTES, Attribute.COLUMN_OLDER_FIELD_NAME, false) != null) {</em>
<a class="jxr_linenumber" name="L796" href="#L796">796</a> <em class="jxr_comment">        GrouperDdlUtils.ddlutilsDropColumn(database, Attribute.TABLE_GROUPER_ATTRIBUTES, Attribute.COLUMN_OLDER_FIELD_NAME, ddlVersionBean);</em>
<a class="jxr_linenumber" name="L797" href="#L797">797</a> <em class="jxr_comment">      }*/</em>
<a class="jxr_linenumber" name="L798" href="#L798">798</a>       
<a class="jxr_linenumber" name="L799" href="#L799">799</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_LIST_NAME, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L800" href="#L800">800</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_LIST_TYPE, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L801" href="#L801">801</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_LIST_NAME, ddlVersionBean);
<a class="jxr_linenumber" name="L802" href="#L802">802</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_LIST_TYPE, ddlVersionBean);
<a class="jxr_linenumber" name="L803" href="#L803">803</a>       }
<a class="jxr_linenumber" name="L804" href="#L804">804</a>     }
<a class="jxr_linenumber" name="L805" href="#L805">805</a>   },
<a class="jxr_linenumber" name="L806" href="#L806">806</a> 
<a class="jxr_linenumber" name="L807" href="#L807">807</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L808" href="#L808">808</a> <em class="jxr_javadoccomment">   * delete field name/type if in the right situation</em>
<a class="jxr_linenumber" name="L809" href="#L809">809</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L810" href="#L810">810</a>   V10 {
<a class="jxr_linenumber" name="L811" href="#L811">811</a>     
<a class="jxr_linenumber" name="L812" href="#L812">812</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L813" href="#L813">813</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L814" href="#L814">814</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L815" href="#L815">815</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L816" href="#L816">816</a>     @Override
<a class="jxr_linenumber" name="L817" href="#L817">817</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L818" href="#L818">818</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L819" href="#L819">819</a> 
<a class="jxr_linenumber" name="L820" href="#L820">820</a>       <em class="jxr_comment">//only drop cols if there are there, and all of them (which means the conversion probably happened, and they</em>
<a class="jxr_linenumber" name="L821" href="#L821">821</a>       <em class="jxr_comment">//havent been dropped yet)</em>
<a class="jxr_linenumber" name="L822" href="#L822">822</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, Attribute.COLUMN_OLD_FIELD_NAME, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L823" href="#L823">823</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, Attribute.COLUMN_OLDER_FIELD_NAME, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L824" href="#L824">824</a>         
<a class="jxr_linenumber" name="L825" href="#L825">825</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, Attribute.COLUMN_OLD_FIELD_NAME, ddlVersionBean);
<a class="jxr_linenumber" name="L826" href="#L826">826</a>       }
<a class="jxr_linenumber" name="L827" href="#L827">827</a>       
<a class="jxr_linenumber" name="L828" href="#L828">828</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_LIST_NAME, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L829" href="#L829">829</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_LIST_TYPE, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L830" href="#L830">830</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_LIST_NAME, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L831" href="#L831">831</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_LIST_TYPE, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L832" href="#L832">832</a>         
<a class="jxr_linenumber" name="L833" href="#L833">833</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_LIST_NAME, ddlVersionBean);
<a class="jxr_linenumber" name="L834" href="#L834">834</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_LIST_TYPE, ddlVersionBean);
<a class="jxr_linenumber" name="L835" href="#L835">835</a>       }
<a class="jxr_linenumber" name="L836" href="#L836">836</a>     }
<a class="jxr_linenumber" name="L837" href="#L837">837</a>   },
<a class="jxr_linenumber" name="L838" href="#L838">838</a>   
<a class="jxr_linenumber" name="L839" href="#L839">839</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L840" href="#L840">840</a> <em class="jxr_javadoccomment">   * update the fields id as a foreign key, keep backups of old data</em>
<a class="jxr_linenumber" name="L841" href="#L841">841</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L842" href="#L842">842</a>   V9 {
<a class="jxr_linenumber" name="L843" href="#L843">843</a>     
<a class="jxr_linenumber" name="L844" href="#L844">844</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L845" href="#L845">845</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L846" href="#L846">846</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L847" href="#L847">847</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L848" href="#L848">848</a>     @Override
<a class="jxr_linenumber" name="L849" href="#L849">849</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L850" href="#L850">850</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L851" href="#L851">851</a> 
<a class="jxr_linenumber" name="L852" href="#L852">852</a>       <strong class="jxr_keyword">boolean</strong> isDestinationVersion = ddlVersionBean.isDestinationVersion();
<a class="jxr_linenumber" name="L853" href="#L853">853</a> 
<a class="jxr_linenumber" name="L854" href="#L854">854</a>       <strong class="jxr_keyword">final</strong> StringBuilder additionalScripts = ddlVersionBean.getAdditionalScripts();
<a class="jxr_linenumber" name="L855" href="#L855">855</a> 
<a class="jxr_linenumber" name="L856" href="#L856">856</a>       <strong class="jxr_keyword">boolean</strong> needsAttributeFieldIdConversion = needsAttributeFieldIdConversion(database);
<a class="jxr_linenumber" name="L857" href="#L857">857</a>       <strong class="jxr_keyword">boolean</strong> needsMembershipFieldIdConversion = needsMembershipFieldIdConversion(database);
<a class="jxr_linenumber" name="L858" href="#L858">858</a>       
<a class="jxr_linenumber" name="L859" href="#L859">859</a>       <strong class="jxr_keyword">if</strong> (needsAttributeFieldIdConversion) {
<a class="jxr_linenumber" name="L860" href="#L860">860</a>         
<a class="jxr_linenumber" name="L861" href="#L861">861</a>         Table attributesTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L862" href="#L862">862</a>             Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L863" href="#L863">863</a>         
<a class="jxr_linenumber" name="L864" href="#L864">864</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributesTable, Attribute.COLUMN_OLDER_FIELD_NAME,  
<a class="jxr_linenumber" name="L865" href="#L865">865</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, false);
<a class="jxr_linenumber" name="L866" href="#L866">866</a>         
<a class="jxr_linenumber" name="L867" href="#L867">867</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributesTable, Attribute.COLUMN_OLD_FIELD_ID, 
<a class="jxr_linenumber" name="L868" href="#L868">868</a>             Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L869" href="#L869">869</a>       }
<a class="jxr_linenumber" name="L870" href="#L870">870</a> 
<a class="jxr_linenumber" name="L871" href="#L871">871</a>       <strong class="jxr_keyword">if</strong> (needsMembershipFieldIdConversion) {
<a class="jxr_linenumber" name="L872" href="#L872">872</a>         
<a class="jxr_linenumber" name="L873" href="#L873">873</a>         Table membershipsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L874" href="#L874">874</a>             Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L875" href="#L875">875</a> 
<a class="jxr_linenumber" name="L876" href="#L876">876</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_OLD_LIST_NAME,  
<a class="jxr_linenumber" name="L877" href="#L877">877</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, false);
<a class="jxr_linenumber" name="L878" href="#L878">878</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_OLD_LIST_TYPE,  
<a class="jxr_linenumber" name="L879" href="#L879">879</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, false);
<a class="jxr_linenumber" name="L880" href="#L880">880</a> 
<a class="jxr_linenumber" name="L881" href="#L881">881</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_FIELD_ID, 
<a class="jxr_linenumber" name="L882" href="#L882">882</a>             Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L883" href="#L883">883</a>         
<a class="jxr_linenumber" name="L884" href="#L884">884</a>       }
<a class="jxr_linenumber" name="L885" href="#L885">885</a>       
<a class="jxr_linenumber" name="L886" href="#L886">886</a>       <em class="jxr_comment">//dont put scripts here if this isnt the right time (at this stage, not building toward a different one)</em>
<a class="jxr_linenumber" name="L887" href="#L887">887</a>       <em class="jxr_comment">//also we need to need the conversion in attributes or memberships</em>
<a class="jxr_linenumber" name="L888" href="#L888">888</a>       <strong class="jxr_keyword">if</strong> (isDestinationVersion &amp;&amp; (needsAttributeFieldIdConversion || needsMembershipFieldIdConversion)) {
<a class="jxr_linenumber" name="L889" href="#L889">889</a>         
<a class="jxr_linenumber" name="L890" href="#L890">890</a>         HibernateSession.callbackHibernateSession(
<a class="jxr_linenumber" name="L891" href="#L891">891</a>             GrouperTransactionType.READONLY_OR_USE_EXISTING, AuditControl.WILL_NOT_AUDIT, <strong class="jxr_keyword">new</strong> <a href="../../../../../edu/internet2/middleware/grouper/hibernate/HibernateHandler.html">HibernateHandler</a>() {
<a class="jxr_linenumber" name="L892" href="#L892">892</a> 
<a class="jxr_linenumber" name="L893" href="#L893">893</a>           @SuppressWarnings(<span class="jxr_string">"deprecation"</span>)
<a class="jxr_linenumber" name="L894" href="#L894">894</a>           <strong class="jxr_keyword">public</strong> Object callback(<a href="../../../../../edu/internet2/middleware/grouper/hibernate/HibernateHandlerBean.html">HibernateHandlerBean</a> hibernateHandlerBean)
<a class="jxr_linenumber" name="L895" href="#L895">895</a>               <strong class="jxr_keyword">throws</strong> <a href="../../../../../edu/internet2/middleware/grouper/internal/dao/GrouperDAOException.html">GrouperDAOException</a> {
<a class="jxr_linenumber" name="L896" href="#L896">896</a>             <a href="../../../../../edu/internet2/middleware/grouper/hibernate/HibernateSession.html">HibernateSession</a> hibernateSession = hibernateHandlerBean.getHibernateSession();
<a class="jxr_linenumber" name="L897" href="#L897">897</a>             
<a class="jxr_linenumber" name="L898" href="#L898">898</a>             Connection connection = hibernateSession.getSession().connection();
<a class="jxr_linenumber" name="L899" href="#L899">899</a>             PreparedStatement statement = <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L900" href="#L900">900</a>             ResultSet resultSet = <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L901" href="#L901">901</a>             
<a class="jxr_linenumber" name="L902" href="#L902">902</a>             <em class="jxr_comment">//we dont know where the user is in the upgrade steps, so see if the uuid is still there...</em>
<a class="jxr_linenumber" name="L903" href="#L903">903</a>             <strong class="jxr_keyword">boolean</strong> uuidStillExists = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L904" href="#L904">904</a>             <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L905" href="#L905">905</a>               statement = connection.prepareStatement(<span class="jxr_string">"select field_uuid from grouper_fields"</span>);
<a class="jxr_linenumber" name="L906" href="#L906">906</a>               resultSet = statement.executeQuery();
<a class="jxr_linenumber" name="L907" href="#L907">907</a>               <strong class="jxr_keyword">while</strong> (resultSet.next()) {
<a class="jxr_linenumber" name="L908" href="#L908">908</a>                 <em class="jxr_comment">//just testing</em>
<a class="jxr_linenumber" name="L909" href="#L909">909</a>               }
<a class="jxr_linenumber" name="L910" href="#L910">910</a>              
<a class="jxr_linenumber" name="L911" href="#L911">911</a>             } <strong class="jxr_keyword">catch</strong> (Exception e) {
<a class="jxr_linenumber" name="L912" href="#L912">912</a>               uuidStillExists = false;
<a class="jxr_linenumber" name="L913" href="#L913">913</a>             } <strong class="jxr_keyword">finally</strong> {
<a class="jxr_linenumber" name="L914" href="#L914">914</a>               GrouperUtil.closeQuietly(resultSet);
<a class="jxr_linenumber" name="L915" href="#L915">915</a>               GrouperUtil.closeQuietly(statement);
<a class="jxr_linenumber" name="L916" href="#L916">916</a>             }
<a class="jxr_linenumber" name="L917" href="#L917">917</a>             String idCol = uuidStillExists ? <span class="jxr_string">"field_uuid"</span> : <span class="jxr_string">"id"</span>;
<a class="jxr_linenumber" name="L918" href="#L918">918</a>             String query = <span class="jxr_string">"select "</span> + idCol + <span class="jxr_string">", name, type, id from grouper_fields"</span>;
<a class="jxr_linenumber" name="L919" href="#L919">919</a>             <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L920" href="#L920">920</a>               statement = connection.prepareStatement(query);
<a class="jxr_linenumber" name="L921" href="#L921">921</a>               resultSet = statement.executeQuery();
<a class="jxr_linenumber" name="L922" href="#L922">922</a>               <strong class="jxr_keyword">while</strong> (resultSet.next()) {
<a class="jxr_linenumber" name="L923" href="#L923">923</a>                 
<a class="jxr_linenumber" name="L924" href="#L924">924</a>                 String uuid = resultSet.getString(1);
<a class="jxr_linenumber" name="L925" href="#L925">925</a>                 String name = resultSet.getString(2);
<a class="jxr_linenumber" name="L926" href="#L926">926</a>                 String type = resultSet.getString(3);
<a class="jxr_linenumber" name="L927" href="#L927">927</a>                 String id = resultSet.getString(4);
<a class="jxr_linenumber" name="L928" href="#L928">928</a>                 
<a class="jxr_linenumber" name="L929" href="#L929">929</a>                 <em class="jxr_comment">//use id if uuid is blank</em>
<a class="jxr_linenumber" name="L930" href="#L930">930</a>                 uuid = GrouperUtil.defaultIfBlank(uuid, id);
<a class="jxr_linenumber" name="L931" href="#L931">931</a>                 
<a class="jxr_linenumber" name="L932" href="#L932">932</a>                 <strong class="jxr_keyword">if</strong> (StringUtils.isBlank(uuid)) {
<a class="jxr_linenumber" name="L933" href="#L933">933</a>                   <strong class="jxr_keyword">throw</strong> <strong class="jxr_keyword">new</strong> RuntimeException(<span class="jxr_string">"Something is wrong, why is uuid blank??? '"</span> + name + <span class="jxr_string">"', '"</span> + type + <span class="jxr_string">"', '"</span> + query + <span class="jxr_string">"'"</span>);
<a class="jxr_linenumber" name="L934" href="#L934">934</a>                 }
<a class="jxr_linenumber" name="L935" href="#L935">935</a>                 
<a class="jxr_linenumber" name="L936" href="#L936">936</a>                 <em class="jxr_comment">//attributes work on the attributes table, and non-attributes work on the memberships table</em>
<a class="jxr_linenumber" name="L937" href="#L937">937</a>                 <strong class="jxr_keyword">if</strong> (<span class="jxr_string">"attribute"</span>.equals(type)) {
<a class="jxr_linenumber" name="L938" href="#L938">938</a>                   
<a class="jxr_linenumber" name="L939" href="#L939">939</a>                   <em class="jxr_comment">//update records, move the name to the id, commit inline so that the db undo required is not too huge</em>
<a class="jxr_linenumber" name="L940" href="#L940">940</a>                   additionalScripts.append(<span class="jxr_string">"update grouper_attributes set old_field_name = field_name, "</span> +
<a class="jxr_linenumber" name="L941" href="#L941">941</a>                       <span class="jxr_string">"field_id = '"</span> + uuid + <span class="jxr_string">"' where field_name = '"</span> + name + <span class="jxr_string">"';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L942" href="#L942">942</a> 
<a class="jxr_linenumber" name="L943" href="#L943">943</a>                 } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L944" href="#L944">944</a>                   
<a class="jxr_linenumber" name="L945" href="#L945">945</a>                   <em class="jxr_comment">//update records, move the name to the id, commit inline so that the db undo required is not too huge</em>
<a class="jxr_linenumber" name="L946" href="#L946">946</a>                   additionalScripts.append(<span class="jxr_string">"update grouper_memberships set old_list_name = list_name, old_list_type = list_type, "</span> +
<a class="jxr_linenumber" name="L947" href="#L947">947</a>                       <span class="jxr_string">"field_id = '"</span> + uuid + <span class="jxr_string">"' "</span> +
<a class="jxr_linenumber" name="L948" href="#L948">948</a>                           <span class="jxr_string">"where list_name = '"</span> + name + <span class="jxr_string">"' and list_type = '"</span> + type + <span class="jxr_string">"';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L949" href="#L949">949</a>                   
<a class="jxr_linenumber" name="L950" href="#L950">950</a>                 }
<a class="jxr_linenumber" name="L951" href="#L951">951</a>                 
<a class="jxr_linenumber" name="L952" href="#L952">952</a>               }
<a class="jxr_linenumber" name="L953" href="#L953">953</a>             } <strong class="jxr_keyword">catch</strong> (Exception e) {
<a class="jxr_linenumber" name="L954" href="#L954">954</a>               <strong class="jxr_keyword">throw</strong> <strong class="jxr_keyword">new</strong> RuntimeException(<span class="jxr_string">"Problem with running query: "</span> + query, e);
<a class="jxr_linenumber" name="L955" href="#L955">955</a>             } <strong class="jxr_keyword">finally</strong> {
<a class="jxr_linenumber" name="L956" href="#L956">956</a>               GrouperUtil.closeQuietly(resultSet);
<a class="jxr_linenumber" name="L957" href="#L957">957</a>               GrouperUtil.closeQuietly(statement);
<a class="jxr_linenumber" name="L958" href="#L958">958</a>             }
<a class="jxr_linenumber" name="L959" href="#L959">959</a>             
<a class="jxr_linenumber" name="L960" href="#L960">960</a>             <strong class="jxr_keyword">return</strong> <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L961" href="#L961">961</a>           }
<a class="jxr_linenumber" name="L962" href="#L962">962</a>           
<a class="jxr_linenumber" name="L963" href="#L963">963</a>         });
<a class="jxr_linenumber" name="L964" href="#L964">964</a>         
<a class="jxr_linenumber" name="L965" href="#L965">965</a>         <em class="jxr_comment">//CH 20080823 THIS DIDNT WORK SINCE THE MAPPING DOESNT EXIST ANYMORE!!!!</em>
<a class="jxr_linenumber" name="L966" href="#L966">966</a>         <em class="jxr_comment">//loop through all fields:</em>
<a class="jxr_linenumber" name="L967" href="#L967">967</a>         <em class="jxr_comment">//List&lt;Field&gt; fields = HibernateSession.byCriteriaStatic().list(Field.class, null);</em>
<a class="jxr_linenumber" name="L968" href="#L968">968</a>         <em class="jxr_comment">//</em>
<a class="jxr_linenumber" name="L969" href="#L969">969</a>         <em class="jxr_comment">//for (Field field : fields) {</em>
<a class="jxr_linenumber" name="L970" href="#L970">970</a>         <em class="jxr_comment">//  </em>
<a class="jxr_linenumber" name="L971" href="#L971">971</a>         <em class="jxr_comment">//  </em>
<a class="jxr_linenumber" name="L972" href="#L972">972</a>         <em class="jxr_comment">//}</em>
<a class="jxr_linenumber" name="L973" href="#L973">973</a>       }
<a class="jxr_linenumber" name="L974" href="#L974">974</a> 
<a class="jxr_linenumber" name="L975" href="#L975">975</a>       
<a class="jxr_linenumber" name="L976" href="#L976">976</a>     }
<a class="jxr_linenumber" name="L977" href="#L977">977</a>   },
<a class="jxr_linenumber" name="L978" href="#L978">978</a>   
<a class="jxr_linenumber" name="L979" href="#L979">979</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L980" href="#L980">980</a> <em class="jxr_javadoccomment">   * drop grouper_sessions table if exists</em>
<a class="jxr_linenumber" name="L981" href="#L981">981</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L982" href="#L982">982</a>   V8 {
<a class="jxr_linenumber" name="L983" href="#L983">983</a>     
<a class="jxr_linenumber" name="L984" href="#L984">984</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L985" href="#L985">985</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L986" href="#L986">986</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L987" href="#L987">987</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L988" href="#L988">988</a>     @Override
<a class="jxr_linenumber" name="L989" href="#L989">989</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L990" href="#L990">990</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L991" href="#L991">991</a> 
<a class="jxr_linenumber" name="L992" href="#L992">992</a>       Table grouperSessionsTable = database.findTable(<span class="jxr_string">"grouper_sessions"</span>);
<a class="jxr_linenumber" name="L993" href="#L993">993</a>       <strong class="jxr_keyword">if</strong> (grouperSessionsTable != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L994" href="#L994">994</a>         database.removeTable(grouperSessionsTable);
<a class="jxr_linenumber" name="L995" href="#L995">995</a>       }
<a class="jxr_linenumber" name="L996" href="#L996">996</a>       
<a class="jxr_linenumber" name="L997" href="#L997">997</a>     }
<a class="jxr_linenumber" name="L998" href="#L998">998</a>   },
<a class="jxr_linenumber" name="L999" href="#L999">999</a>   
<a class="jxr_linenumber" name="L1000" href="#L1000">1000</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1001" href="#L1001">1001</a> <em class="jxr_javadoccomment">   * delete backup cols if configured to and is exist</em>
<a class="jxr_linenumber" name="L1002" href="#L1002">1002</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L1003" href="#L1003">1003</a>   V7 {
<a class="jxr_linenumber" name="L1004" href="#L1004">1004</a>     
<a class="jxr_linenumber" name="L1005" href="#L1005">1005</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1006" href="#L1006">1006</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L1007" href="#L1007">1007</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L1008" href="#L1008">1008</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L1009" href="#L1009">1009</a>     @Override
<a class="jxr_linenumber" name="L1010" href="#L1010">1010</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L1011" href="#L1011">1011</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L1012" href="#L1012">1012</a> 
<a class="jxr_linenumber" name="L1013" href="#L1013">1013</a>       <em class="jxr_comment">//if not configured to drop, then leave alone</em>
<a class="jxr_linenumber" name="L1014" href="#L1014">1014</a>       <strong class="jxr_keyword">if</strong> (!GrouperConfig.retrieveConfig().propertyValueBoolean(<span class="jxr_string">"ddlutils.dropBackupUuidCols"</span>, false)) {
<a class="jxr_linenumber" name="L1015" href="#L1015">1015</a>         <strong class="jxr_keyword">return</strong>;
<a class="jxr_linenumber" name="L1016" href="#L1016">1016</a>       }
<a class="jxr_linenumber" name="L1017" href="#L1017">1017</a> 
<a class="jxr_linenumber" name="L1018" href="#L1018">1018</a>       <em class="jxr_comment">//only drop cols if there are there, and all of them (which means the conversion probably happened, and they</em>
<a class="jxr_linenumber" name="L1019" href="#L1019">1019</a>       <em class="jxr_comment">//havent been dropped yet)</em>
<a class="jxr_linenumber" name="L1020" href="#L1020">1020</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_MEMBERSHIP_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1021" href="#L1021">1021</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1022" href="#L1022">1022</a>         
<a class="jxr_linenumber" name="L1023" href="#L1023">1023</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_MEMBERSHIP_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1024" href="#L1024">1024</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_ID, ddlVersionBean);
<a class="jxr_linenumber" name="L1025" href="#L1025">1025</a>       }
<a class="jxr_linenumber" name="L1026" href="#L1026">1026</a>       
<a class="jxr_linenumber" name="L1027" href="#L1027">1027</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_OLD_MEMBER_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1028" href="#L1028">1028</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1029" href="#L1029">1029</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_OLD_MEMBER_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1030" href="#L1030">1030</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_OLD_ID, ddlVersionBean);
<a class="jxr_linenumber" name="L1031" href="#L1031">1031</a>       }
<a class="jxr_linenumber" name="L1032" href="#L1032">1032</a> 
<a class="jxr_linenumber" name="L1033" href="#L1033">1033</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_OLD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1034" href="#L1034">1034</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1035" href="#L1035">1035</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_OLD_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1036" href="#L1036">1036</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_OLD_ID, ddlVersionBean);
<a class="jxr_linenumber" name="L1037" href="#L1037">1037</a>       }
<a class="jxr_linenumber" name="L1038" href="#L1038">1038</a> 
<a class="jxr_linenumber" name="L1039" href="#L1039">1039</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_OLD_FIELD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1040" href="#L1040">1040</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1041" href="#L1041">1041</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_OLD_FIELD_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1042" href="#L1042">1042</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_OLD_ID, ddlVersionBean);
<a class="jxr_linenumber" name="L1043" href="#L1043">1043</a>         
<a class="jxr_linenumber" name="L1044" href="#L1044">1044</a>       }
<a class="jxr_linenumber" name="L1045" href="#L1045">1045</a> 
<a class="jxr_linenumber" name="L1046" href="#L1046">1046</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_OLD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1047" href="#L1047">1047</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1048" href="#L1048">1048</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_OLD_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1049" href="#L1049">1049</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_OLD_ID, ddlVersionBean);
<a class="jxr_linenumber" name="L1050" href="#L1050">1050</a>         
<a class="jxr_linenumber" name="L1051" href="#L1051">1051</a>       }
<a class="jxr_linenumber" name="L1052" href="#L1052">1052</a> 
<a class="jxr_linenumber" name="L1053" href="#L1053">1053</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_OLD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1054" href="#L1054">1054</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1055" href="#L1055">1055</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_OLD_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1056" href="#L1056">1056</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_OLD_ID, ddlVersionBean);
<a class="jxr_linenumber" name="L1057" href="#L1057">1057</a>           
<a class="jxr_linenumber" name="L1058" href="#L1058">1058</a>       }
<a class="jxr_linenumber" name="L1059" href="#L1059">1059</a> 
<a class="jxr_linenumber" name="L1060" href="#L1060">1060</a>       
<a class="jxr_linenumber" name="L1061" href="#L1061">1061</a>     }
<a class="jxr_linenumber" name="L1062" href="#L1062">1062</a>   },
<a class="jxr_linenumber" name="L1063" href="#L1063">1063</a>   
<a class="jxr_linenumber" name="L1064" href="#L1064">1064</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1065" href="#L1065">1065</a> <em class="jxr_javadoccomment">   * delete uuid if in right situation</em>
<a class="jxr_linenumber" name="L1066" href="#L1066">1066</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L1067" href="#L1067">1067</a>   V6 {
<a class="jxr_linenumber" name="L1068" href="#L1068">1068</a>     
<a class="jxr_linenumber" name="L1069" href="#L1069">1069</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1070" href="#L1070">1070</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L1071" href="#L1071">1071</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L1072" href="#L1072">1072</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L1073" href="#L1073">1073</a>     @Override
<a class="jxr_linenumber" name="L1074" href="#L1074">1074</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L1075" href="#L1075">1075</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L1076" href="#L1076">1076</a> 
<a class="jxr_linenumber" name="L1077" href="#L1077">1077</a>       <em class="jxr_comment">//only drop cols if there are there, and all of them (which means the conversion probably happened, and they</em>
<a class="jxr_linenumber" name="L1078" href="#L1078">1078</a>       <em class="jxr_comment">//havent been dropped yet)</em>
<a class="jxr_linenumber" name="L1079" href="#L1079">1079</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, GroupType.TABLE_OLD_GROUPER_TYPES, GroupType.COLUMN_TYPE_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1080" href="#L1080">1080</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, GroupType.TABLE_OLD_GROUPER_TYPES, GroupType.COLUMN_OLD_TYPE_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1081" href="#L1081">1081</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, GroupType.TABLE_OLD_GROUPER_TYPES, GroupType.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1082" href="#L1082">1082</a>         
<a class="jxr_linenumber" name="L1083" href="#L1083">1083</a>         GrouperDdlUtils.ddlutilsDropColumn(database, GroupType.TABLE_OLD_GROUPER_TYPES, GroupType.COLUMN_TYPE_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1084" href="#L1084">1084</a>       }
<a class="jxr_linenumber" name="L1085" href="#L1085">1085</a>       
<a class="jxr_linenumber" name="L1086" href="#L1086">1086</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_MEMBERSHIP_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1087" href="#L1087">1087</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_MEMBERSHIP_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1088" href="#L1088">1088</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1089" href="#L1089">1089</a>         
<a class="jxr_linenumber" name="L1090" href="#L1090">1090</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_MEMBERSHIP_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1091" href="#L1091">1091</a>       }
<a class="jxr_linenumber" name="L1092" href="#L1092">1092</a>       
<a class="jxr_linenumber" name="L1093" href="#L1093">1093</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_MEMBER_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1094" href="#L1094">1094</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_OLD_MEMBER_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1095" href="#L1095">1095</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1096" href="#L1096">1096</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_MEMBER_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1097" href="#L1097">1097</a>       }
<a class="jxr_linenumber" name="L1098" href="#L1098">1098</a> 
<a class="jxr_linenumber" name="L1099" href="#L1099">1099</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1100" href="#L1100">1100</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_OLD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1101" href="#L1101">1101</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1102" href="#L1102">1102</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1103" href="#L1103">1103</a>       }
<a class="jxr_linenumber" name="L1104" href="#L1104">1104</a> 
<a class="jxr_linenumber" name="L1105" href="#L1105">1105</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_FIELD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1106" href="#L1106">1106</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_OLD_FIELD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1107" href="#L1107">1107</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1108" href="#L1108">1108</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_FIELD_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1109" href="#L1109">1109</a>         
<a class="jxr_linenumber" name="L1110" href="#L1110">1110</a>       }
<a class="jxr_linenumber" name="L1111" href="#L1111">1111</a> 
<a class="jxr_linenumber" name="L1112" href="#L1112">1112</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1113" href="#L1113">1113</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_OLD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1114" href="#L1114">1114</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1115" href="#L1115">1115</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1116" href="#L1116">1116</a>         
<a class="jxr_linenumber" name="L1117" href="#L1117">1117</a>       }
<a class="jxr_linenumber" name="L1118" href="#L1118">1118</a> 
<a class="jxr_linenumber" name="L1119" href="#L1119">1119</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1120" href="#L1120">1120</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_OLD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L1121" href="#L1121">1121</a>           &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_OLD_ID, false) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1122" href="#L1122">1122</a>         GrouperDdlUtils.ddlutilsDropColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_UUID, ddlVersionBean);
<a class="jxr_linenumber" name="L1123" href="#L1123">1123</a>           
<a class="jxr_linenumber" name="L1124" href="#L1124">1124</a>       }
<a class="jxr_linenumber" name="L1125" href="#L1125">1125</a> 
<a class="jxr_linenumber" name="L1126" href="#L1126">1126</a>       
<a class="jxr_linenumber" name="L1127" href="#L1127">1127</a>     }
<a class="jxr_linenumber" name="L1128" href="#L1128">1128</a>   },
<a class="jxr_linenumber" name="L1129" href="#L1129">1129</a>   
<a class="jxr_linenumber" name="L1130" href="#L1130">1130</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1131" href="#L1131">1131</a> <em class="jxr_javadoccomment">   * convert uuid/id to just id</em>
<a class="jxr_linenumber" name="L1132" href="#L1132">1132</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L1133" href="#L1133">1133</a>   V5 {
<a class="jxr_linenumber" name="L1134" href="#L1134">1134</a>     
<a class="jxr_linenumber" name="L1135" href="#L1135">1135</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1136" href="#L1136">1136</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L1137" href="#L1137">1137</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L1138" href="#L1138">1138</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L1139" href="#L1139">1139</a>     @Override
<a class="jxr_linenumber" name="L1140" href="#L1140">1140</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L1141" href="#L1141">1141</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L1142" href="#L1142">1142</a>       
<a class="jxr_linenumber" name="L1143" href="#L1143">1143</a>       <strong class="jxr_keyword">boolean</strong> isDestinationVersion = ddlVersionBean.isDestinationVersion();
<a class="jxr_linenumber" name="L1144" href="#L1144">1144</a>       
<a class="jxr_linenumber" name="L1145" href="#L1145">1145</a>       StringBuilder additionalScripts = ddlVersionBean.getAdditionalScripts();
<a class="jxr_linenumber" name="L1146" href="#L1146">1146</a>       
<a class="jxr_linenumber" name="L1147" href="#L1147">1147</a>       GrouperDdlUtils.ddlutilsDropIndexes(GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1148" href="#L1148">1148</a>           Composite.TABLE_GROUPER_COMPOSITES, <strong class="jxr_keyword">true</strong>), Composite.COLUMN_UUID);
<a class="jxr_linenumber" name="L1149" href="#L1149">1149</a>       <em class="jxr_comment">//we need conversion if there is a uuid col, and not an old_uuid col or old_id col</em>
<a class="jxr_linenumber" name="L1150" href="#L1150">1150</a>       <strong class="jxr_keyword">if</strong> (needsCompositeIdConversion(database)) {
<a class="jxr_linenumber" name="L1151" href="#L1151">1151</a> 
<a class="jxr_linenumber" name="L1152" href="#L1152">1152</a>         Table compositesTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1153" href="#L1153">1153</a>             Composite.TABLE_GROUPER_COMPOSITES, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1154" href="#L1154">1154</a> 
<a class="jxr_linenumber" name="L1155" href="#L1155">1155</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositesTable, Composite.COLUMN_OLD_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1156" href="#L1156">1156</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositesTable, Composite.COLUMN_OLD_UUID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1157" href="#L1157">1157</a>         <strong class="jxr_keyword">if</strong> (isDestinationVersion) {
<a class="jxr_linenumber" name="L1158" href="#L1158">1158</a> 
<a class="jxr_linenumber" name="L1159" href="#L1159">1159</a>           <em class="jxr_comment">//update records, move the uuid to the id</em>
<a class="jxr_linenumber" name="L1160" href="#L1160">1160</a>           additionalScripts.append(<span class="jxr_string">"update grouper_composites set old_id = id, id = uuid, old_uuid = uuid, uuid = ' ' where uuid != ' ' and uuid is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L1161" href="#L1161">1161</a>         }          
<a class="jxr_linenumber" name="L1162" href="#L1162">1162</a>       }
<a class="jxr_linenumber" name="L1163" href="#L1163">1163</a>       
<a class="jxr_linenumber" name="L1164" href="#L1164">1164</a>       GrouperDdlUtils.ddlutilsDropIndexes(GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1165" href="#L1165">1165</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>), Membership.COLUMN_MEMBERSHIP_UUID);
<a class="jxr_linenumber" name="L1166" href="#L1166">1166</a>       <em class="jxr_comment">//we need conversion if there is a uuid col, and not an old_uuid col or old_id col</em>
<a class="jxr_linenumber" name="L1167" href="#L1167">1167</a>       <strong class="jxr_keyword">if</strong> (needsMembershipIdConversion(database)) {
<a class="jxr_linenumber" name="L1168" href="#L1168">1168</a>         
<a class="jxr_linenumber" name="L1169" href="#L1169">1169</a>         Table membershipsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1170" href="#L1170">1170</a>             Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1171" href="#L1171">1171</a>         
<a class="jxr_linenumber" name="L1172" href="#L1172">1172</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_OLD_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1173" href="#L1173">1173</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_OLD_MEMBERSHIP_UUID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1174" href="#L1174">1174</a> 
<a class="jxr_linenumber" name="L1175" href="#L1175">1175</a>         <strong class="jxr_keyword">if</strong> (isDestinationVersion) {
<a class="jxr_linenumber" name="L1176" href="#L1176">1176</a> 
<a class="jxr_linenumber" name="L1177" href="#L1177">1177</a>           <em class="jxr_comment">//update records, move the uuid to the id</em>
<a class="jxr_linenumber" name="L1178" href="#L1178">1178</a>           additionalScripts.append(<span class="jxr_string">"update grouper_memberships set old_id = id, id = membership_uuid, old_membership_uuid = membership_uuid, membership_uuid = ' ' where membership_uuid != ' ' and membership_uuid is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L1179" href="#L1179">1179</a>         }          
<a class="jxr_linenumber" name="L1180" href="#L1180">1180</a>       }
<a class="jxr_linenumber" name="L1181" href="#L1181">1181</a>       
<a class="jxr_linenumber" name="L1182" href="#L1182">1182</a>       GrouperDdlUtils.ddlutilsDropIndexes(GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1183" href="#L1183">1183</a>           Field.TABLE_GROUPER_FIELDS, <strong class="jxr_keyword">true</strong>), Field.COLUMN_FIELD_UUID);
<a class="jxr_linenumber" name="L1184" href="#L1184">1184</a>       <em class="jxr_comment">//we need conversion if there is a uuid col, and not an old_uuid col or old_id col</em>
<a class="jxr_linenumber" name="L1185" href="#L1185">1185</a>       <strong class="jxr_keyword">if</strong> (needsFieldsIdConversion(database)) {
<a class="jxr_linenumber" name="L1186" href="#L1186">1186</a>         
<a class="jxr_linenumber" name="L1187" href="#L1187">1187</a>         Table fieldsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1188" href="#L1188">1188</a>             Field.TABLE_GROUPER_FIELDS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1189" href="#L1189">1189</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, Field.COLUMN_OLD_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1190" href="#L1190">1190</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, Field.COLUMN_OLD_FIELD_UUID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1191" href="#L1191">1191</a>         
<a class="jxr_linenumber" name="L1192" href="#L1192">1192</a>         <strong class="jxr_keyword">if</strong> (isDestinationVersion) {
<a class="jxr_linenumber" name="L1193" href="#L1193">1193</a>           <em class="jxr_comment">//update records, move the uuid to the id</em>
<a class="jxr_linenumber" name="L1194" href="#L1194">1194</a>           additionalScripts.append(<span class="jxr_string">"update grouper_fields set old_id = id, id = field_uuid, old_field_uuid = field_uuid, field_uuid = ' ' where field_uuid != ' ' and field_uuid is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L1195" href="#L1195">1195</a>         }          
<a class="jxr_linenumber" name="L1196" href="#L1196">1196</a>       }
<a class="jxr_linenumber" name="L1197" href="#L1197">1197</a>       
<a class="jxr_linenumber" name="L1198" href="#L1198">1198</a>       GrouperDdlUtils.ddlutilsDropIndexes(GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1199" href="#L1199">1199</a>           Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>), Group.COLUMN_UUID);
<a class="jxr_linenumber" name="L1200" href="#L1200">1200</a>       <em class="jxr_comment">//we need conversion if there is a uuid col, and not an old_uuid col or old_id col</em>
<a class="jxr_linenumber" name="L1201" href="#L1201">1201</a>       <strong class="jxr_keyword">if</strong> (needsGroupsIdConversion(database)) {
<a class="jxr_linenumber" name="L1202" href="#L1202">1202</a>         
<a class="jxr_linenumber" name="L1203" href="#L1203">1203</a>         Table groupsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1204" href="#L1204">1204</a>             Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1205" href="#L1205">1205</a>         
<a class="jxr_linenumber" name="L1206" href="#L1206">1206</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, Group.COLUMN_OLD_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1207" href="#L1207">1207</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, Group.COLUMN_OLD_UUID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1208" href="#L1208">1208</a>         
<a class="jxr_linenumber" name="L1209" href="#L1209">1209</a>         <strong class="jxr_keyword">if</strong> (isDestinationVersion) {
<a class="jxr_linenumber" name="L1210" href="#L1210">1210</a>           <em class="jxr_comment">//update records, move the uuid to the id</em>
<a class="jxr_linenumber" name="L1211" href="#L1211">1211</a>           additionalScripts.append(<span class="jxr_string">"update grouper_groups set old_id = id, id = uuid, old_uuid = uuid, uuid = ' ' where uuid != ' ' and uuid is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L1212" href="#L1212">1212</a>         }          
<a class="jxr_linenumber" name="L1213" href="#L1213">1213</a>       }
<a class="jxr_linenumber" name="L1214" href="#L1214">1214</a> 
<a class="jxr_linenumber" name="L1215" href="#L1215">1215</a>       GrouperDdlUtils.ddlutilsDropIndexes(GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1216" href="#L1216">1216</a>           Member.TABLE_GROUPER_MEMBERS, <strong class="jxr_keyword">true</strong>), Member.COLUMN_MEMBER_UUID);
<a class="jxr_linenumber" name="L1217" href="#L1217">1217</a>       <em class="jxr_comment">//we need conversion if there is a uuid col, and not an old_uuid col or old_id col</em>
<a class="jxr_linenumber" name="L1218" href="#L1218">1218</a>       <strong class="jxr_keyword">if</strong> (needsMembersIdConversion(database)) {
<a class="jxr_linenumber" name="L1219" href="#L1219">1219</a>         
<a class="jxr_linenumber" name="L1220" href="#L1220">1220</a>         Table membersTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1221" href="#L1221">1221</a>             Member.TABLE_GROUPER_MEMBERS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1222" href="#L1222">1222</a>         
<a class="jxr_linenumber" name="L1223" href="#L1223">1223</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_OLD_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1224" href="#L1224">1224</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_OLD_MEMBER_UUID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1225" href="#L1225">1225</a>         
<a class="jxr_linenumber" name="L1226" href="#L1226">1226</a>         <strong class="jxr_keyword">if</strong> (isDestinationVersion) {
<a class="jxr_linenumber" name="L1227" href="#L1227">1227</a>           <em class="jxr_comment">//update records, move the uuid to the id</em>
<a class="jxr_linenumber" name="L1228" href="#L1228">1228</a>           additionalScripts.append(<span class="jxr_string">"update grouper_members set old_id = id, id = member_uuid, old_member_uuid = member_uuid, member_uuid = ' ' where member_uuid != ' ' and member_uuid is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L1229" href="#L1229">1229</a>         }          
<a class="jxr_linenumber" name="L1230" href="#L1230">1230</a>       }
<a class="jxr_linenumber" name="L1231" href="#L1231">1231</a> 
<a class="jxr_linenumber" name="L1232" href="#L1232">1232</a>       GrouperDdlUtils.ddlutilsDropIndexes(GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1233" href="#L1233">1233</a>           Stem.TABLE_GROUPER_STEMS, <strong class="jxr_keyword">true</strong>), Stem.COLUMN_UUID);
<a class="jxr_linenumber" name="L1234" href="#L1234">1234</a>       <em class="jxr_comment">//we need conversion if there is a uuid col, and not an old_uuid col or old_id col</em>
<a class="jxr_linenumber" name="L1235" href="#L1235">1235</a>       <strong class="jxr_keyword">if</strong> (needsStemIdConversion(database)) {
<a class="jxr_linenumber" name="L1236" href="#L1236">1236</a>         
<a class="jxr_linenumber" name="L1237" href="#L1237">1237</a>         Table stemsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1238" href="#L1238">1238</a>             Stem.TABLE_GROUPER_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1239" href="#L1239">1239</a> 
<a class="jxr_linenumber" name="L1240" href="#L1240">1240</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, Stem.COLUMN_OLD_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1241" href="#L1241">1241</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, Stem.COLUMN_OLD_UUID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1242" href="#L1242">1242</a>         
<a class="jxr_linenumber" name="L1243" href="#L1243">1243</a>         <strong class="jxr_keyword">if</strong> (isDestinationVersion) {
<a class="jxr_linenumber" name="L1244" href="#L1244">1244</a>           <em class="jxr_comment">//update records, move the uuid to the id</em>
<a class="jxr_linenumber" name="L1245" href="#L1245">1245</a>           additionalScripts.append(<span class="jxr_string">"update grouper_stems set old_id = id, id = uuid, old_uuid = uuid, uuid = ' ' where uuid != ' ' and uuid is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L1246" href="#L1246">1246</a>         }          
<a class="jxr_linenumber" name="L1247" href="#L1247">1247</a>       }
<a class="jxr_linenumber" name="L1248" href="#L1248">1248</a> 
<a class="jxr_linenumber" name="L1249" href="#L1249">1249</a>       Table typesTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L1250" href="#L1250">1250</a>           GroupType.TABLE_OLD_GROUPER_TYPES, false);
<a class="jxr_linenumber" name="L1251" href="#L1251">1251</a>       <strong class="jxr_keyword">if</strong> (typesTable != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1252" href="#L1252">1252</a>         GrouperDdlUtils.ddlutilsDropIndexes(typesTable, GroupType.COLUMN_TYPE_UUID);
<a class="jxr_linenumber" name="L1253" href="#L1253">1253</a>         <em class="jxr_comment">//we need conversion if there is a uuid col, and not an old_uuid col or old_id col</em>
<a class="jxr_linenumber" name="L1254" href="#L1254">1254</a>         <strong class="jxr_keyword">if</strong> (needsTypesIdConversion(database)) {
<a class="jxr_linenumber" name="L1255" href="#L1255">1255</a>                 
<a class="jxr_linenumber" name="L1256" href="#L1256">1256</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(typesTable, GroupType.COLUMN_OLD_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1257" href="#L1257">1257</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(typesTable, GroupType.COLUMN_OLD_TYPE_UUID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1258" href="#L1258">1258</a>           
<a class="jxr_linenumber" name="L1259" href="#L1259">1259</a>           <strong class="jxr_keyword">if</strong> (isDestinationVersion) {
<a class="jxr_linenumber" name="L1260" href="#L1260">1260</a>             <em class="jxr_comment">//update records, move the uuid to the id</em>
<a class="jxr_linenumber" name="L1261" href="#L1261">1261</a>             additionalScripts.append(<span class="jxr_string">"update grouper_types set old_id = id, id = type_uuid, old_type_uuid = type_uuid, type_uuid = ' ' where type_uuid != ' ' and type_uuid is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L1262" href="#L1262">1262</a>           }          
<a class="jxr_linenumber" name="L1263" href="#L1263">1263</a>         }
<a class="jxr_linenumber" name="L1264" href="#L1264">1264</a>       }
<a class="jxr_linenumber" name="L1265" href="#L1265">1265</a>     }
<a class="jxr_linenumber" name="L1266" href="#L1266">1266</a> 
<a class="jxr_linenumber" name="L1267" href="#L1267">1267</a>   },
<a class="jxr_linenumber" name="L1268" href="#L1268">1268</a> 
<a class="jxr_linenumber" name="L1269" href="#L1269">1269</a>   <em class="jxr_javadoccomment">/** add in the hibernate_version_number cols */</em>
<a class="jxr_linenumber" name="L1270" href="#L1270">1270</a>   V4 {
<a class="jxr_linenumber" name="L1271" href="#L1271">1271</a>     
<a class="jxr_linenumber" name="L1272" href="#L1272">1272</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1273" href="#L1273">1273</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L1274" href="#L1274">1274</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L1275" href="#L1275">1275</a>     @Override
<a class="jxr_linenumber" name="L1276" href="#L1276">1276</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L1277" href="#L1277">1277</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L1278" href="#L1278">1278</a>       
<a class="jxr_linenumber" name="L1279" href="#L1279">1279</a>       versionNumberColumnAdd(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1280" href="#L1280">1280</a>       versionNumberColumnAdd(ddlVersionBean, Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, false);
<a class="jxr_linenumber" name="L1281" href="#L1281">1281</a>       versionNumberColumnAdd(ddlVersionBean, GroupTypeTuple.TABLE_OLD_GROUPER_GROUPS_TYPES, false);
<a class="jxr_linenumber" name="L1282" href="#L1282">1282</a>       versionNumberColumnAdd(ddlVersionBean, Field.TABLE_GROUPER_FIELDS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1283" href="#L1283">1283</a>       versionNumberColumnAdd(ddlVersionBean, Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1284" href="#L1284">1284</a>       versionNumberColumnAdd(ddlVersionBean, Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1285" href="#L1285">1285</a>       versionNumberColumnAdd(ddlVersionBean, Member.TABLE_GROUPER_MEMBERS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1286" href="#L1286">1286</a>       versionNumberColumnAdd(ddlVersionBean, Stem.TABLE_GROUPER_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1287" href="#L1287">1287</a>       versionNumberColumnAdd(ddlVersionBean, GroupType.TABLE_OLD_GROUPER_TYPES, false);
<a class="jxr_linenumber" name="L1288" href="#L1288">1288</a>       
<a class="jxr_linenumber" name="L1289" href="#L1289">1289</a>     }
<a class="jxr_linenumber" name="L1290" href="#L1290">1290</a>   },
<a class="jxr_linenumber" name="L1291" href="#L1291">1291</a>   
<a class="jxr_linenumber" name="L1292" href="#L1292">1292</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1293" href="#L1293">1293</a> <em class="jxr_javadoccomment">   * add grouper loader</em>
<a class="jxr_linenumber" name="L1294" href="#L1294">1294</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L1295" href="#L1295">1295</a>   V3 {
<a class="jxr_linenumber" name="L1296" href="#L1296">1296</a>     
<a class="jxr_linenumber" name="L1297" href="#L1297">1297</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1298" href="#L1298">1298</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L1299" href="#L1299">1299</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L1300" href="#L1300">1300</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L1301" href="#L1301">1301</a>     @Override
<a class="jxr_linenumber" name="L1302" href="#L1302">1302</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L1303" href="#L1303">1303</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L1304" href="#L1304">1304</a> 
<a class="jxr_linenumber" name="L1305" href="#L1305">1305</a>       <em class="jxr_comment">//see if the grouper_ext_loader_log table is there</em>
<a class="jxr_linenumber" name="L1306" href="#L1306">1306</a>       Table grouploaderLogTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,<span class="jxr_string">"grouper_loader_log"</span>);
<a class="jxr_linenumber" name="L1307" href="#L1307">1307</a>       
<a class="jxr_linenumber" name="L1308" href="#L1308">1308</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L1309" href="#L1309">1309</a>           Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1310" href="#L1310">1310</a>       
<a class="jxr_linenumber" name="L1311" href="#L1311">1311</a>       
<a class="jxr_linenumber" name="L1312" href="#L1312">1312</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"job_name"</span>, 
<a class="jxr_linenumber" name="L1313" href="#L1313">1313</a>           Types.VARCHAR, <span class="jxr_string">"512"</span>, false, false);
<a class="jxr_linenumber" name="L1314" href="#L1314">1314</a>       
<a class="jxr_linenumber" name="L1315" href="#L1315">1315</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"status"</span>, 
<a class="jxr_linenumber" name="L1316" href="#L1316">1316</a>           Types.VARCHAR, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L1317" href="#L1317">1317</a> 
<a class="jxr_linenumber" name="L1318" href="#L1318">1318</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"started_time"</span>, 
<a class="jxr_linenumber" name="L1319" href="#L1319">1319</a>           Types.TIMESTAMP, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1320" href="#L1320">1320</a> 
<a class="jxr_linenumber" name="L1321" href="#L1321">1321</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"ended_time"</span>, 
<a class="jxr_linenumber" name="L1322" href="#L1322">1322</a>           Types.TIMESTAMP, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1323" href="#L1323">1323</a> 
<a class="jxr_linenumber" name="L1324" href="#L1324">1324</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"millis"</span>, 
<a class="jxr_linenumber" name="L1325" href="#L1325">1325</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1326" href="#L1326">1326</a> 
<a class="jxr_linenumber" name="L1327" href="#L1327">1327</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"millis_get_data"</span>, 
<a class="jxr_linenumber" name="L1328" href="#L1328">1328</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1329" href="#L1329">1329</a> 
<a class="jxr_linenumber" name="L1330" href="#L1330">1330</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"millis_load_data"</span>, 
<a class="jxr_linenumber" name="L1331" href="#L1331">1331</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1332" href="#L1332">1332</a> 
<a class="jxr_linenumber" name="L1333" href="#L1333">1333</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"job_type"</span>, 
<a class="jxr_linenumber" name="L1334" href="#L1334">1334</a>           Types.VARCHAR, <span class="jxr_string">"128"</span>, false, false);
<a class="jxr_linenumber" name="L1335" href="#L1335">1335</a>       
<a class="jxr_linenumber" name="L1336" href="#L1336">1336</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"job_schedule_type"</span>, 
<a class="jxr_linenumber" name="L1337" href="#L1337">1337</a>           Types.VARCHAR, <span class="jxr_string">"128"</span>, false, false);
<a class="jxr_linenumber" name="L1338" href="#L1338">1338</a>       
<a class="jxr_linenumber" name="L1339" href="#L1339">1339</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"job_description"</span>, 
<a class="jxr_linenumber" name="L1340" href="#L1340">1340</a>           Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false);
<a class="jxr_linenumber" name="L1341" href="#L1341">1341</a>       
<a class="jxr_linenumber" name="L1342" href="#L1342">1342</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"job_message"</span>, 
<a class="jxr_linenumber" name="L1343" href="#L1343">1343</a>           Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false);
<a class="jxr_linenumber" name="L1344" href="#L1344">1344</a>       
<a class="jxr_linenumber" name="L1345" href="#L1345">1345</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"host"</span>, 
<a class="jxr_linenumber" name="L1346" href="#L1346">1346</a>           Types.VARCHAR, <span class="jxr_string">"128"</span>, false, false);
<a class="jxr_linenumber" name="L1347" href="#L1347">1347</a>       
<a class="jxr_linenumber" name="L1348" href="#L1348">1348</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"group_uuid"</span>, 
<a class="jxr_linenumber" name="L1349" href="#L1349">1349</a>           Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1350" href="#L1350">1350</a>       
<a class="jxr_linenumber" name="L1351" href="#L1351">1351</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"job_schedule_quartz_cron"</span>, 
<a class="jxr_linenumber" name="L1352" href="#L1352">1352</a>           Types.VARCHAR, <span class="jxr_string">"128"</span>, false, false);
<a class="jxr_linenumber" name="L1353" href="#L1353">1353</a>       
<a class="jxr_linenumber" name="L1354" href="#L1354">1354</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"job_schedule_interval_seconds"</span>, 
<a class="jxr_linenumber" name="L1355" href="#L1355">1355</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1356" href="#L1356">1356</a> 
<a class="jxr_linenumber" name="L1357" href="#L1357">1357</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"last_updated"</span>, 
<a class="jxr_linenumber" name="L1358" href="#L1358">1358</a>           Types.TIMESTAMP, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1359" href="#L1359">1359</a> 
<a class="jxr_linenumber" name="L1360" href="#L1360">1360</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"unresolvable_subject_count"</span>, 
<a class="jxr_linenumber" name="L1361" href="#L1361">1361</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1362" href="#L1362">1362</a> 
<a class="jxr_linenumber" name="L1363" href="#L1363">1363</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"insert_count"</span>, 
<a class="jxr_linenumber" name="L1364" href="#L1364">1364</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1365" href="#L1365">1365</a> 
<a class="jxr_linenumber" name="L1366" href="#L1366">1366</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"update_count"</span>, 
<a class="jxr_linenumber" name="L1367" href="#L1367">1367</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1368" href="#L1368">1368</a> 
<a class="jxr_linenumber" name="L1369" href="#L1369">1369</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"delete_count"</span>, 
<a class="jxr_linenumber" name="L1370" href="#L1370">1370</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1371" href="#L1371">1371</a> 
<a class="jxr_linenumber" name="L1372" href="#L1372">1372</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"total_count"</span>, 
<a class="jxr_linenumber" name="L1373" href="#L1373">1373</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1374" href="#L1374">1374</a> 
<a class="jxr_linenumber" name="L1375" href="#L1375">1375</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"parent_job_name"</span>, 
<a class="jxr_linenumber" name="L1376" href="#L1376">1376</a>           Types.VARCHAR, <span class="jxr_string">"512"</span>, false, false);
<a class="jxr_linenumber" name="L1377" href="#L1377">1377</a> 
<a class="jxr_linenumber" name="L1378" href="#L1378">1378</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"parent_job_id"</span>, 
<a class="jxr_linenumber" name="L1379" href="#L1379">1379</a>           Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1380" href="#L1380">1380</a> 
<a class="jxr_linenumber" name="L1381" href="#L1381">1381</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"and_group_names"</span>, 
<a class="jxr_linenumber" name="L1382" href="#L1382">1382</a>           Types.VARCHAR, <span class="jxr_string">"512"</span>, false, false);
<a class="jxr_linenumber" name="L1383" href="#L1383">1383</a> 
<a class="jxr_linenumber" name="L1384" href="#L1384">1384</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouploaderLogTable, <span class="jxr_string">"job_schedule_priority"</span>, 
<a class="jxr_linenumber" name="L1385" href="#L1385">1385</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1386" href="#L1386">1386</a> 
<a class="jxr_linenumber" name="L1387" href="#L1387">1387</a>       addGrouperLoaderJobNameIndex(database, ddlVersionBean);
<a class="jxr_linenumber" name="L1388" href="#L1388">1388</a> 
<a class="jxr_linenumber" name="L1389" href="#L1389">1389</a>       addContextIdColsLoader(database);
<a class="jxr_linenumber" name="L1390" href="#L1390">1390</a>     }
<a class="jxr_linenumber" name="L1391" href="#L1391">1391</a>     
<a class="jxr_linenumber" name="L1392" href="#L1392">1392</a>     
<a class="jxr_linenumber" name="L1393" href="#L1393">1393</a>   },
<a class="jxr_linenumber" name="L1394" href="#L1394">1394</a>     
<a class="jxr_linenumber" name="L1395" href="#L1395">1395</a>   <em class="jxr_javadoccomment">/** all tables and indexes from grouper v1.3 */</em>
<a class="jxr_linenumber" name="L1396" href="#L1396">1396</a>   V2 {
<a class="jxr_linenumber" name="L1397" href="#L1397">1397</a>     
<a class="jxr_linenumber" name="L1398" href="#L1398">1398</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1399" href="#L1399">1399</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L1400" href="#L1400">1400</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L1401" href="#L1401">1401</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L1402" href="#L1402">1402</a>     @Override
<a class="jxr_linenumber" name="L1403" href="#L1403">1403</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L1404" href="#L1404">1404</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L1405" href="#L1405">1405</a>       
<a class="jxr_linenumber" name="L1406" href="#L1406">1406</a>       <strong class="jxr_keyword">int</strong> buildingToVersion = ddlVersionBean.getBuildingToVersion();
<a class="jxr_linenumber" name="L1407" href="#L1407">1407</a>       
<a class="jxr_linenumber" name="L1408" href="#L1408">1408</a>       <strong class="jxr_keyword">boolean</strong> buildingToThisVersion = V4.getVersion() &gt;= buildingToVersion;
<a class="jxr_linenumber" name="L1409" href="#L1409">1409</a> 
<a class="jxr_linenumber" name="L1410" href="#L1410">1410</a>       <strong class="jxr_keyword">boolean</strong> groupsTableNew = database.findTable(Group.TABLE_GROUPER_GROUPS) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L1411" href="#L1411">1411</a>       <strong class="jxr_keyword">boolean</strong> stemsTableNew = database.findTable(Stem.TABLE_GROUPER_STEMS) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L1412" href="#L1412">1412</a>       <strong class="jxr_keyword">boolean</strong> attributeDefsTableNew = database.findTable(AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L1413" href="#L1413">1413</a>       <strong class="jxr_keyword">boolean</strong> attributeDefNamesTableNew = database.findTable(AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L1414" href="#L1414">1414</a>       
<a class="jxr_linenumber" name="L1415" href="#L1415">1415</a>       {
<a class="jxr_linenumber" name="L1416" href="#L1416">1416</a>         Table compositeTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L1417" href="#L1417">1417</a>             Composite.TABLE_GROUPER_COMPOSITES);
<a class="jxr_linenumber" name="L1418" href="#L1418">1418</a>   
<a class="jxr_linenumber" name="L1419" href="#L1419">1419</a>         <strong class="jxr_keyword">boolean</strong> needsConversion = needsCompositeIdConversion(database);
<a class="jxr_linenumber" name="L1420" href="#L1420">1420</a>       
<a class="jxr_linenumber" name="L1421" href="#L1421">1421</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L1422" href="#L1422">1422</a>             Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1423" href="#L1423">1423</a> 
<a class="jxr_linenumber" name="L1424" href="#L1424">1424</a>         <strong class="jxr_keyword">if</strong> (needsConversion || buildingToThisVersion) {
<a class="jxr_linenumber" name="L1425" href="#L1425">1425</a> 
<a class="jxr_linenumber" name="L1426" href="#L1426">1426</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, <span class="jxr_string">"uuid"</span>, 
<a class="jxr_linenumber" name="L1427" href="#L1427">1427</a>               Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1428" href="#L1428">1428</a> 
<a class="jxr_linenumber" name="L1429" href="#L1429">1429</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, compositeTable.getName(), 
<a class="jxr_linenumber" name="L1430" href="#L1430">1430</a>               <span class="jxr_string">"composite_uuid_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"uuid"</span>);
<a class="jxr_linenumber" name="L1431" href="#L1431">1431</a> 
<a class="jxr_linenumber" name="L1432" href="#L1432">1432</a>         }
<a class="jxr_linenumber" name="L1433" href="#L1433">1433</a>         
<a class="jxr_linenumber" name="L1434" href="#L1434">1434</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, <span class="jxr_string">"owner"</span>, 
<a class="jxr_linenumber" name="L1435" href="#L1435">1435</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1436" href="#L1436">1436</a>   
<a class="jxr_linenumber" name="L1437" href="#L1437">1437</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, <span class="jxr_string">"left_factor"</span>, 
<a class="jxr_linenumber" name="L1438" href="#L1438">1438</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1439" href="#L1439">1439</a>   
<a class="jxr_linenumber" name="L1440" href="#L1440">1440</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, <span class="jxr_string">"right_factor"</span>, 
<a class="jxr_linenumber" name="L1441" href="#L1441">1441</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1442" href="#L1442">1442</a>   
<a class="jxr_linenumber" name="L1443" href="#L1443">1443</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, <span class="jxr_string">"type"</span>, 
<a class="jxr_linenumber" name="L1444" href="#L1444">1444</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1445" href="#L1445">1445</a>   
<a class="jxr_linenumber" name="L1446" href="#L1446">1446</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, <span class="jxr_string">"creator_id"</span>, 
<a class="jxr_linenumber" name="L1447" href="#L1447">1447</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1448" href="#L1448">1448</a>   
<a class="jxr_linenumber" name="L1449" href="#L1449">1449</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, <span class="jxr_string">"create_time"</span>, 
<a class="jxr_linenumber" name="L1450" href="#L1450">1450</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1451" href="#L1451">1451</a>   
<a class="jxr_linenumber" name="L1452" href="#L1452">1452</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, compositeTable.getName(), 
<a class="jxr_linenumber" name="L1453" href="#L1453">1453</a>             <span class="jxr_string">"composite_composite_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"owner"</span>);
<a class="jxr_linenumber" name="L1454" href="#L1454">1454</a>   
<a class="jxr_linenumber" name="L1455" href="#L1455">1455</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, compositeTable.getName(), 
<a class="jxr_linenumber" name="L1456" href="#L1456">1456</a>             <span class="jxr_string">"composite_createtime_idx"</span>, false, <span class="jxr_string">"create_time"</span>);
<a class="jxr_linenumber" name="L1457" href="#L1457">1457</a>         
<a class="jxr_linenumber" name="L1458" href="#L1458">1458</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, compositeTable.getName(), 
<a class="jxr_linenumber" name="L1459" href="#L1459">1459</a>             <span class="jxr_string">"composite_creator_idx"</span>, false, <span class="jxr_string">"creator_id"</span>);
<a class="jxr_linenumber" name="L1460" href="#L1460">1460</a>   
<a class="jxr_linenumber" name="L1461" href="#L1461">1461</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, compositeTable.getName(), 
<a class="jxr_linenumber" name="L1462" href="#L1462">1462</a>             <span class="jxr_string">"composite_factor_idx"</span>, false, <span class="jxr_string">"left_factor"</span>, <span class="jxr_string">"right_factor"</span>);
<a class="jxr_linenumber" name="L1463" href="#L1463">1463</a> 
<a class="jxr_linenumber" name="L1464" href="#L1464">1464</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, compositeTable.getName(), 
<a class="jxr_linenumber" name="L1465" href="#L1465">1465</a>             <span class="jxr_string">"composite_left_factor_idx"</span>, false, <span class="jxr_string">"left_factor"</span>);
<a class="jxr_linenumber" name="L1466" href="#L1466">1466</a> 
<a class="jxr_linenumber" name="L1467" href="#L1467">1467</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, compositeTable.getName(), 
<a class="jxr_linenumber" name="L1468" href="#L1468">1468</a>             <span class="jxr_string">"composite_right_factor_idx"</span>, false, <span class="jxr_string">"right_factor"</span>);
<a class="jxr_linenumber" name="L1469" href="#L1469">1469</a> 
<a class="jxr_linenumber" name="L1470" href="#L1470">1470</a>         versionNumberColumnFindOrCreate(compositeTable);
<a class="jxr_linenumber" name="L1471" href="#L1471">1471</a> 
<a class="jxr_linenumber" name="L1472" href="#L1472">1472</a>       }
<a class="jxr_linenumber" name="L1473" href="#L1473">1473</a> 
<a class="jxr_linenumber" name="L1474" href="#L1474">1474</a>       {
<a class="jxr_linenumber" name="L1475" href="#L1475">1475</a> 
<a class="jxr_linenumber" name="L1476" href="#L1476">1476</a>         Table fieldsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L1477" href="#L1477">1477</a>             Field.TABLE_GROUPER_FIELDS);
<a class="jxr_linenumber" name="L1478" href="#L1478">1478</a>   
<a class="jxr_linenumber" name="L1479" href="#L1479">1479</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L1480" href="#L1480">1480</a>             Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1481" href="#L1481">1481</a> 
<a class="jxr_linenumber" name="L1482" href="#L1482">1482</a>         <strong class="jxr_keyword">boolean</strong> needsConversion = needsFieldsIdConversion(database);
<a class="jxr_linenumber" name="L1483" href="#L1483">1483</a>     
<a class="jxr_linenumber" name="L1484" href="#L1484">1484</a>         <strong class="jxr_keyword">if</strong> (needsConversion || buildingToThisVersion) {
<a class="jxr_linenumber" name="L1485" href="#L1485">1485</a> 
<a class="jxr_linenumber" name="L1486" href="#L1486">1486</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, <span class="jxr_string">"field_uuid"</span>, 
<a class="jxr_linenumber" name="L1487" href="#L1487">1487</a>               Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1488" href="#L1488">1488</a> 
<a class="jxr_linenumber" name="L1489" href="#L1489">1489</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, fieldsTable.getName(), 
<a class="jxr_linenumber" name="L1490" href="#L1490">1490</a>               <span class="jxr_string">"field_uuid_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"field_uuid"</span>);
<a class="jxr_linenumber" name="L1491" href="#L1491">1491</a> 
<a class="jxr_linenumber" name="L1492" href="#L1492">1492</a>         }
<a class="jxr_linenumber" name="L1493" href="#L1493">1493</a>   
<a class="jxr_linenumber" name="L1494" href="#L1494">1494</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, <span class="jxr_string">"name"</span>, 
<a class="jxr_linenumber" name="L1495" href="#L1495">1495</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1496" href="#L1496">1496</a>   
<a class="jxr_linenumber" name="L1497" href="#L1497">1497</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, <span class="jxr_string">"read_privilege"</span>, 
<a class="jxr_linenumber" name="L1498" href="#L1498">1498</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1499" href="#L1499">1499</a>   
<a class="jxr_linenumber" name="L1500" href="#L1500">1500</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, <span class="jxr_string">"type"</span>, 
<a class="jxr_linenumber" name="L1501" href="#L1501">1501</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1502" href="#L1502">1502</a>   
<a class="jxr_linenumber" name="L1503" href="#L1503">1503</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, <span class="jxr_string">"write_privilege"</span>, 
<a class="jxr_linenumber" name="L1504" href="#L1504">1504</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1505" href="#L1505">1505</a>   
<a class="jxr_linenumber" name="L1506" href="#L1506">1506</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, fieldsTable.getName(), 
<a class="jxr_linenumber" name="L1507" href="#L1507">1507</a>             <span class="jxr_string">"name_and_type"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"name"</span>, <span class="jxr_string">"type"</span>);
<a class="jxr_linenumber" name="L1508" href="#L1508">1508</a>         
<a class="jxr_linenumber" name="L1509" href="#L1509">1509</a>         versionNumberColumnFindOrCreate(fieldsTable);
<a class="jxr_linenumber" name="L1510" href="#L1510">1510</a> 
<a class="jxr_linenumber" name="L1511" href="#L1511">1511</a>       }
<a class="jxr_linenumber" name="L1512" href="#L1512">1512</a>     
<a class="jxr_linenumber" name="L1513" href="#L1513">1513</a>       {
<a class="jxr_linenumber" name="L1514" href="#L1514">1514</a>         Table groupsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L1515" href="#L1515">1515</a>             Group.TABLE_GROUPER_GROUPS);
<a class="jxr_linenumber" name="L1516" href="#L1516">1516</a>   
<a class="jxr_linenumber" name="L1517" href="#L1517">1517</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L1518" href="#L1518">1518</a>             Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1519" href="#L1519">1519</a>   
<a class="jxr_linenumber" name="L1520" href="#L1520">1520</a>         <strong class="jxr_keyword">boolean</strong> needsConversion = needsGroupsIdConversion(database);
<a class="jxr_linenumber" name="L1521" href="#L1521">1521</a>         
<a class="jxr_linenumber" name="L1522" href="#L1522">1522</a>         <strong class="jxr_keyword">if</strong> (needsConversion || buildingToThisVersion) {
<a class="jxr_linenumber" name="L1523" href="#L1523">1523</a> 
<a class="jxr_linenumber" name="L1524" href="#L1524">1524</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"uuid"</span>, 
<a class="jxr_linenumber" name="L1525" href="#L1525">1525</a>               Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1526" href="#L1526">1526</a> 
<a class="jxr_linenumber" name="L1527" href="#L1527">1527</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, groupsTable.getName(), 
<a class="jxr_linenumber" name="L1528" href="#L1528">1528</a>               <span class="jxr_string">"group_uuid_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"uuid"</span>);
<a class="jxr_linenumber" name="L1529" href="#L1529">1529</a> 
<a class="jxr_linenumber" name="L1530" href="#L1530">1530</a>         }
<a class="jxr_linenumber" name="L1531" href="#L1531">1531</a>         
<a class="jxr_linenumber" name="L1532" href="#L1532">1532</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"parent_stem"</span>, 
<a class="jxr_linenumber" name="L1533" href="#L1533">1533</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1534" href="#L1534">1534</a>   
<a class="jxr_linenumber" name="L1535" href="#L1535">1535</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"creator_id"</span>, 
<a class="jxr_linenumber" name="L1536" href="#L1536">1536</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1537" href="#L1537">1537</a>   
<a class="jxr_linenumber" name="L1538" href="#L1538">1538</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"create_time"</span>, 
<a class="jxr_linenumber" name="L1539" href="#L1539">1539</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1540" href="#L1540">1540</a>   
<a class="jxr_linenumber" name="L1541" href="#L1541">1541</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"modifier_id"</span>, 
<a class="jxr_linenumber" name="L1542" href="#L1542">1542</a>             Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1543" href="#L1543">1543</a>   
<a class="jxr_linenumber" name="L1544" href="#L1544">1544</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"modify_time"</span>, 
<a class="jxr_linenumber" name="L1545" href="#L1545">1545</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L1546" href="#L1546">1546</a>   
<a class="jxr_linenumber" name="L1547" href="#L1547">1547</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, Group.COLUMN_LAST_MEMBERSHIP_CHANGE, 
<a class="jxr_linenumber" name="L1548" href="#L1548">1548</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L1549" href="#L1549">1549</a> 
<a class="jxr_linenumber" name="L1550" href="#L1550">1550</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, Group.COLUMN_LAST_IMMEDIATE_MEMBERSHIP_CHANGE, 
<a class="jxr_linenumber" name="L1551" href="#L1551">1551</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L1552" href="#L1552">1552</a> 
<a class="jxr_linenumber" name="L1553" href="#L1553">1553</a>         addGroupAlternateNameCol(database, ddlVersionBean, groupsTable);
<a class="jxr_linenumber" name="L1554" href="#L1554">1554</a>         
<a class="jxr_linenumber" name="L1555" href="#L1555">1555</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Group.TABLE_GROUPER_GROUPS,
<a class="jxr_linenumber" name="L1556" href="#L1556">1556</a>             <span class="jxr_string">"group_last_membership_idx"</span>, false, Group.COLUMN_LAST_MEMBERSHIP_CHANGE);
<a class="jxr_linenumber" name="L1557" href="#L1557">1557</a> 
<a class="jxr_linenumber" name="L1558" href="#L1558">1558</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L1559" href="#L1559">1559</a>             <span class="jxr_string">"group_last_imm_membership_idx"</span>, false, 
<a class="jxr_linenumber" name="L1560" href="#L1560">1560</a>             Group.COLUMN_LAST_IMMEDIATE_MEMBERSHIP_CHANGE);
<a class="jxr_linenumber" name="L1561" href="#L1561">1561</a> 
<a class="jxr_linenumber" name="L1562" href="#L1562">1562</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, groupsTable.getName(), 
<a class="jxr_linenumber" name="L1563" href="#L1563">1563</a>             <span class="jxr_string">"group_creator_idx"</span>, false, <span class="jxr_string">"creator_id"</span>);
<a class="jxr_linenumber" name="L1564" href="#L1564">1564</a>         
<a class="jxr_linenumber" name="L1565" href="#L1565">1565</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, groupsTable.getName(), 
<a class="jxr_linenumber" name="L1566" href="#L1566">1566</a>             <span class="jxr_string">"group_createtime_idx"</span>, false, <span class="jxr_string">"create_time"</span>);
<a class="jxr_linenumber" name="L1567" href="#L1567">1567</a>         
<a class="jxr_linenumber" name="L1568" href="#L1568">1568</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, groupsTable.getName(), 
<a class="jxr_linenumber" name="L1569" href="#L1569">1569</a>             <span class="jxr_string">"group_modifier_idx"</span>, false, <span class="jxr_string">"modifier_id"</span>);
<a class="jxr_linenumber" name="L1570" href="#L1570">1570</a>         
<a class="jxr_linenumber" name="L1571" href="#L1571">1571</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, groupsTable.getName(), 
<a class="jxr_linenumber" name="L1572" href="#L1572">1572</a>             <span class="jxr_string">"group_modifytime_idx"</span>, false, <span class="jxr_string">"modify_time"</span>);
<a class="jxr_linenumber" name="L1573" href="#L1573">1573</a>         
<a class="jxr_linenumber" name="L1574" href="#L1574">1574</a>         versionNumberColumnFindOrCreate(groupsTable);
<a class="jxr_linenumber" name="L1575" href="#L1575">1575</a>         
<a class="jxr_linenumber" name="L1576" href="#L1576">1576</a>         addGroupNameColumns(ddlVersionBean, database);
<a class="jxr_linenumber" name="L1577" href="#L1577">1577</a> 
<a class="jxr_linenumber" name="L1578" href="#L1578">1578</a>         <em class="jxr_comment">//only do this if there is a uuid col</em>
<a class="jxr_linenumber" name="L1579" href="#L1579">1579</a>         <strong class="jxr_keyword">if</strong> (groupsTable.findColumn(<span class="jxr_string">"UUID"</span>) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1580" href="#L1580">1580</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, groupsTable.getName(), 
<a class="jxr_linenumber" name="L1581" href="#L1581">1581</a>               <span class="jxr_string">"group_uuid_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"uuid"</span>);
<a class="jxr_linenumber" name="L1582" href="#L1582">1582</a>         }
<a class="jxr_linenumber" name="L1583" href="#L1583">1583</a>         
<a class="jxr_linenumber" name="L1584" href="#L1584">1584</a>       }
<a class="jxr_linenumber" name="L1585" href="#L1585">1585</a> 
<a class="jxr_linenumber" name="L1586" href="#L1586">1586</a>       {
<a class="jxr_linenumber" name="L1587" href="#L1587">1587</a>         Table membersTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L1588" href="#L1588">1588</a>             Member.TABLE_GROUPER_MEMBERS);
<a class="jxr_linenumber" name="L1589" href="#L1589">1589</a>   
<a class="jxr_linenumber" name="L1590" href="#L1590">1590</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L1591" href="#L1591">1591</a>             Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1592" href="#L1592">1592</a>   
<a class="jxr_linenumber" name="L1593" href="#L1593">1593</a>         <strong class="jxr_keyword">boolean</strong> needsConversion = needsMembersIdConversion(database);
<a class="jxr_linenumber" name="L1594" href="#L1594">1594</a>         
<a class="jxr_linenumber" name="L1595" href="#L1595">1595</a>         <strong class="jxr_keyword">if</strong> (needsConversion || buildingToThisVersion ) {
<a class="jxr_linenumber" name="L1596" href="#L1596">1596</a>           
<a class="jxr_linenumber" name="L1597" href="#L1597">1597</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, <span class="jxr_string">"member_uuid"</span>, 
<a class="jxr_linenumber" name="L1598" href="#L1598">1598</a>               Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1599" href="#L1599">1599</a>     
<a class="jxr_linenumber" name="L1600" href="#L1600">1600</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), 
<a class="jxr_linenumber" name="L1601" href="#L1601">1601</a>               <span class="jxr_string">"member_uuid_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"member_uuid"</span>);
<a class="jxr_linenumber" name="L1602" href="#L1602">1602</a> 
<a class="jxr_linenumber" name="L1603" href="#L1603">1603</a>         }
<a class="jxr_linenumber" name="L1604" href="#L1604">1604</a>         
<a class="jxr_linenumber" name="L1605" href="#L1605">1605</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, <span class="jxr_string">"subject_id"</span>, 
<a class="jxr_linenumber" name="L1606" href="#L1606">1606</a>             Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1607" href="#L1607">1607</a>   
<a class="jxr_linenumber" name="L1608" href="#L1608">1608</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, <span class="jxr_string">"subject_source"</span>, 
<a class="jxr_linenumber" name="L1609" href="#L1609">1609</a>             Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1610" href="#L1610">1610</a>   
<a class="jxr_linenumber" name="L1611" href="#L1611">1611</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, <span class="jxr_string">"subject_type"</span>, 
<a class="jxr_linenumber" name="L1612" href="#L1612">1612</a>             Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1613" href="#L1613">1613</a>   
<a class="jxr_linenumber" name="L1614" href="#L1614">1614</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), 
<a class="jxr_linenumber" name="L1615" href="#L1615">1615</a>             <span class="jxr_string">"member_subjectsourcetype_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"subject_id"</span>, <span class="jxr_string">"subject_source"</span>, 
<a class="jxr_linenumber" name="L1616" href="#L1616">1616</a>             <span class="jxr_string">"subject_type"</span>);
<a class="jxr_linenumber" name="L1617" href="#L1617">1617</a>         
<a class="jxr_linenumber" name="L1618" href="#L1618">1618</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), 
<a class="jxr_linenumber" name="L1619" href="#L1619">1619</a>             <span class="jxr_string">"member_subjectsource_idx"</span>, false, <span class="jxr_string">"subject_source"</span>);
<a class="jxr_linenumber" name="L1620" href="#L1620">1620</a>         
<a class="jxr_linenumber" name="L1621" href="#L1621">1621</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), 
<a class="jxr_linenumber" name="L1622" href="#L1622">1622</a>             <span class="jxr_string">"member_subjectid_idx"</span>, false, <span class="jxr_string">"subject_id"</span>);
<a class="jxr_linenumber" name="L1623" href="#L1623">1623</a>         
<a class="jxr_linenumber" name="L1624" href="#L1624">1624</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), 
<a class="jxr_linenumber" name="L1625" href="#L1625">1625</a>             <span class="jxr_string">"member_subjecttype_idx"</span>, false, <span class="jxr_string">"subject_type"</span>);
<a class="jxr_linenumber" name="L1626" href="#L1626">1626</a>         
<a class="jxr_linenumber" name="L1627" href="#L1627">1627</a>         versionNumberColumnFindOrCreate(membersTable);
<a class="jxr_linenumber" name="L1628" href="#L1628">1628</a>         
<a class="jxr_linenumber" name="L1629" href="#L1629">1629</a>         addMemberAttributes(database, ddlVersionBean);
<a class="jxr_linenumber" name="L1630" href="#L1630">1630</a>       }
<a class="jxr_linenumber" name="L1631" href="#L1631">1631</a>     
<a class="jxr_linenumber" name="L1632" href="#L1632">1632</a>       {
<a class="jxr_linenumber" name="L1633" href="#L1633">1633</a>         <strong class="jxr_keyword">boolean</strong> membershipsTableExists = database.findTable(Membership.TABLE_GROUPER_MEMBERSHIPS) != <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L1634" href="#L1634">1634</a>         Table membershipsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L1635" href="#L1635">1635</a>             Membership.TABLE_GROUPER_MEMBERSHIPS);
<a class="jxr_linenumber" name="L1636" href="#L1636">1636</a>   
<a class="jxr_linenumber" name="L1637" href="#L1637">1637</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L1638" href="#L1638">1638</a>             Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1639" href="#L1639">1639</a>   
<a class="jxr_linenumber" name="L1640" href="#L1640">1640</a>         <strong class="jxr_keyword">boolean</strong> needsConversion = needsMembersIdConversion(database);
<a class="jxr_linenumber" name="L1641" href="#L1641">1641</a>         
<a class="jxr_linenumber" name="L1642" href="#L1642">1642</a>         <strong class="jxr_keyword">if</strong> (needsConversion || buildingToThisVersion ) {
<a class="jxr_linenumber" name="L1643" href="#L1643">1643</a>           
<a class="jxr_linenumber" name="L1644" href="#L1644">1644</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, <span class="jxr_string">"membership_uuid"</span>, 
<a class="jxr_linenumber" name="L1645" href="#L1645">1645</a>               Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1646" href="#L1646">1646</a>     
<a class="jxr_linenumber" name="L1647" href="#L1647">1647</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L1648" href="#L1648">1648</a>               <span class="jxr_string">"membership_uuid_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"membership_uuid"</span>);
<a class="jxr_linenumber" name="L1649" href="#L1649">1649</a> 
<a class="jxr_linenumber" name="L1650" href="#L1650">1650</a>         }
<a class="jxr_linenumber" name="L1651" href="#L1651">1651</a>         
<a class="jxr_linenumber" name="L1652" href="#L1652">1652</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, <span class="jxr_string">"member_id"</span>, 
<a class="jxr_linenumber" name="L1653" href="#L1653">1653</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1654" href="#L1654">1654</a>         
<a class="jxr_linenumber" name="L1655" href="#L1655">1655</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_OWNER_ID, 
<a class="jxr_linenumber" name="L1656" href="#L1656">1656</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1657" href="#L1657">1657</a>         
<a class="jxr_linenumber" name="L1658" href="#L1658">1658</a>         <em class="jxr_comment">//only add the col if a new table, else it is added in a subsequent version</em>
<a class="jxr_linenumber" name="L1659" href="#L1659">1659</a>         <strong class="jxr_keyword">if</strong> (!membershipsTableExists || membershipsTable.findColumn(Membership.COLUMN_FIELD_ID) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1660" href="#L1660">1660</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_FIELD_ID, 
<a class="jxr_linenumber" name="L1661" href="#L1661">1661</a>               Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1662" href="#L1662">1662</a>         }
<a class="jxr_linenumber" name="L1663" href="#L1663">1663</a>   
<a class="jxr_linenumber" name="L1664" href="#L1664">1664</a>         <em class="jxr_comment">//if it doesnt exist, then add these cols/indexes...</em>
<a class="jxr_linenumber" name="L1665" href="#L1665">1665</a>         <strong class="jxr_keyword">if</strong> (!membershipsTableExists) {
<a class="jxr_linenumber" name="L1666" href="#L1666">1666</a>           runMembershipAndGroupSetConversion(database, ddlVersionBean, !membershipsTableExists);
<a class="jxr_linenumber" name="L1667" href="#L1667">1667</a>           addMembershipUniqueIndex(database, membershipsTable);
<a class="jxr_linenumber" name="L1668" href="#L1668">1668</a>         }
<a class="jxr_linenumber" name="L1669" href="#L1669">1669</a>         
<a class="jxr_linenumber" name="L1670" href="#L1670">1670</a>         <em class="jxr_comment">//if not testing, dont worry about these columns</em>
<a class="jxr_linenumber" name="L1671" href="#L1671">1671</a>         <strong class="jxr_keyword">if</strong> (buildingToThisVersion) {
<a class="jxr_linenumber" name="L1672" href="#L1672">1672</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, <span class="jxr_string">"list_name"</span>, 
<a class="jxr_linenumber" name="L1673" href="#L1673">1673</a>               Types.VARCHAR, <span class="jxr_string">"32"</span>, false, false);
<a class="jxr_linenumber" name="L1674" href="#L1674">1674</a>     
<a class="jxr_linenumber" name="L1675" href="#L1675">1675</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, <span class="jxr_string">"list_type"</span>, 
<a class="jxr_linenumber" name="L1676" href="#L1676">1676</a>               Types.VARCHAR, <span class="jxr_string">"32"</span>, false, false);
<a class="jxr_linenumber" name="L1677" href="#L1677">1677</a>         }
<a class="jxr_linenumber" name="L1678" href="#L1678">1678</a>         
<a class="jxr_linenumber" name="L1679" href="#L1679">1679</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, <span class="jxr_string">"mship_type"</span>, 
<a class="jxr_linenumber" name="L1680" href="#L1680">1680</a>             Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1681" href="#L1681">1681</a>   
<a class="jxr_linenumber" name="L1682" href="#L1682">1682</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, <span class="jxr_string">"creator_id"</span>, 
<a class="jxr_linenumber" name="L1683" href="#L1683">1683</a>             Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1684" href="#L1684">1684</a>   
<a class="jxr_linenumber" name="L1685" href="#L1685">1685</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, <span class="jxr_string">"create_time"</span>, 
<a class="jxr_linenumber" name="L1686" href="#L1686">1686</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1687" href="#L1687">1687</a>   
<a class="jxr_linenumber" name="L1688" href="#L1688">1688</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L1689" href="#L1689">1689</a>             <span class="jxr_string">"membership_createtime_idx"</span>, false, <span class="jxr_string">"create_time"</span>);
<a class="jxr_linenumber" name="L1690" href="#L1690">1690</a> 
<a class="jxr_linenumber" name="L1691" href="#L1691">1691</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L1692" href="#L1692">1692</a>             <span class="jxr_string">"membership_creator_idx"</span>, false, <span class="jxr_string">"creator_id"</span>);
<a class="jxr_linenumber" name="L1693" href="#L1693">1693</a> 
<a class="jxr_linenumber" name="L1694" href="#L1694">1694</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L1695" href="#L1695">1695</a>             <span class="jxr_string">"membership_member_idx"</span>, false, <span class="jxr_string">"member_id"</span>);
<a class="jxr_linenumber" name="L1696" href="#L1696">1696</a> 
<a class="jxr_linenumber" name="L1697" href="#L1697">1697</a>         <em class="jxr_comment">//dont add foreign keys if col not there</em>
<a class="jxr_linenumber" name="L1698" href="#L1698">1698</a>         <strong class="jxr_keyword">if</strong> (membershipsTable.findColumn(Membership.COLUMN_FIELD_ID) != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1699" href="#L1699">1699</a> 
<a class="jxr_linenumber" name="L1700" href="#L1700">1700</a>           addMembershipFieldIndexes(database, membershipsTable);
<a class="jxr_linenumber" name="L1701" href="#L1701">1701</a> 
<a class="jxr_linenumber" name="L1702" href="#L1702">1702</a>         }
<a class="jxr_linenumber" name="L1703" href="#L1703">1703</a> 
<a class="jxr_linenumber" name="L1704" href="#L1704">1704</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L1705" href="#L1705">1705</a>             <span class="jxr_string">"membership_type_idx"</span>, false, <span class="jxr_string">"mship_type"</span>);
<a class="jxr_linenumber" name="L1706" href="#L1706">1706</a> 
<a class="jxr_linenumber" name="L1707" href="#L1707">1707</a>         versionNumberColumnFindOrCreate(membershipsTable);
<a class="jxr_linenumber" name="L1708" href="#L1708">1708</a>        
<a class="jxr_linenumber" name="L1709" href="#L1709">1709</a>       }
<a class="jxr_linenumber" name="L1710" href="#L1710">1710</a>       {
<a class="jxr_linenumber" name="L1711" href="#L1711">1711</a>         <strong class="jxr_keyword">if</strong> (buildingToThisVersion) {
<a class="jxr_linenumber" name="L1712" href="#L1712">1712</a>           Table sessionsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L1713" href="#L1713">1713</a>               <span class="jxr_string">"grouper_sessions"</span>);
<a class="jxr_linenumber" name="L1714" href="#L1714">1714</a>     
<a class="jxr_linenumber" name="L1715" href="#L1715">1715</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(sessionsTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L1716" href="#L1716">1716</a>               Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1717" href="#L1717">1717</a>           
<a class="jxr_linenumber" name="L1718" href="#L1718">1718</a>           <em class="jxr_comment">//note, this code is only here for unit testing... no need to do id conversion</em>
<a class="jxr_linenumber" name="L1719" href="#L1719">1719</a>           
<a class="jxr_linenumber" name="L1720" href="#L1720">1720</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(sessionsTable, <span class="jxr_string">"member_id"</span>, 
<a class="jxr_linenumber" name="L1721" href="#L1721">1721</a>               Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1722" href="#L1722">1722</a>     
<a class="jxr_linenumber" name="L1723" href="#L1723">1723</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(sessionsTable, <span class="jxr_string">"starttime"</span>, 
<a class="jxr_linenumber" name="L1724" href="#L1724">1724</a>               Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1725" href="#L1725">1725</a>     
<a class="jxr_linenumber" name="L1726" href="#L1726">1726</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, sessionsTable.getName(), 
<a class="jxr_linenumber" name="L1727" href="#L1727">1727</a>               <span class="jxr_string">"session_member_idx"</span>, false, <span class="jxr_string">"member_id"</span>);
<a class="jxr_linenumber" name="L1728" href="#L1728">1728</a>   
<a class="jxr_linenumber" name="L1729" href="#L1729">1729</a>           versionNumberColumnFindOrCreate(sessionsTable);
<a class="jxr_linenumber" name="L1730" href="#L1730">1730</a>         }
<a class="jxr_linenumber" name="L1731" href="#L1731">1731</a>       }
<a class="jxr_linenumber" name="L1732" href="#L1732">1732</a>       {
<a class="jxr_linenumber" name="L1733" href="#L1733">1733</a>         Table stemsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L1734" href="#L1734">1734</a>             Stem.TABLE_GROUPER_STEMS);
<a class="jxr_linenumber" name="L1735" href="#L1735">1735</a>   
<a class="jxr_linenumber" name="L1736" href="#L1736">1736</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L1737" href="#L1737">1737</a>             Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1738" href="#L1738">1738</a>   
<a class="jxr_linenumber" name="L1739" href="#L1739">1739</a>         <strong class="jxr_keyword">boolean</strong> needsConversion = needsStemIdConversion(database);
<a class="jxr_linenumber" name="L1740" href="#L1740">1740</a>         
<a class="jxr_linenumber" name="L1741" href="#L1741">1741</a>         <strong class="jxr_keyword">if</strong> (needsConversion || buildingToThisVersion) {
<a class="jxr_linenumber" name="L1742" href="#L1742">1742</a>           
<a class="jxr_linenumber" name="L1743" href="#L1743">1743</a>           GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"uuid"</span>, 
<a class="jxr_linenumber" name="L1744" href="#L1744">1744</a>               Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1745" href="#L1745">1745</a> 
<a class="jxr_linenumber" name="L1746" href="#L1746">1746</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1747" href="#L1747">1747</a>               <span class="jxr_string">"stem_uuid_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"uuid"</span>);
<a class="jxr_linenumber" name="L1748" href="#L1748">1748</a> 
<a class="jxr_linenumber" name="L1749" href="#L1749">1749</a>         }
<a class="jxr_linenumber" name="L1750" href="#L1750">1750</a>         
<a class="jxr_linenumber" name="L1751" href="#L1751">1751</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"parent_stem"</span>, 
<a class="jxr_linenumber" name="L1752" href="#L1752">1752</a>             Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1753" href="#L1753">1753</a>   
<a class="jxr_linenumber" name="L1754" href="#L1754">1754</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"name"</span>, 
<a class="jxr_linenumber" name="L1755" href="#L1755">1755</a>             Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1756" href="#L1756">1756</a>   
<a class="jxr_linenumber" name="L1757" href="#L1757">1757</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"display_name"</span>, 
<a class="jxr_linenumber" name="L1758" href="#L1758">1758</a>             Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1759" href="#L1759">1759</a>   
<a class="jxr_linenumber" name="L1760" href="#L1760">1760</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"creator_id"</span>, 
<a class="jxr_linenumber" name="L1761" href="#L1761">1761</a>             Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1762" href="#L1762">1762</a>   
<a class="jxr_linenumber" name="L1763" href="#L1763">1763</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"create_time"</span>, 
<a class="jxr_linenumber" name="L1764" href="#L1764">1764</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1765" href="#L1765">1765</a>   
<a class="jxr_linenumber" name="L1766" href="#L1766">1766</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"modifier_id"</span>, 
<a class="jxr_linenumber" name="L1767" href="#L1767">1767</a>             Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L1768" href="#L1768">1768</a>   
<a class="jxr_linenumber" name="L1769" href="#L1769">1769</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"modify_time"</span>, 
<a class="jxr_linenumber" name="L1770" href="#L1770">1770</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L1771" href="#L1771">1771</a>   
<a class="jxr_linenumber" name="L1772" href="#L1772">1772</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"display_extension"</span>, 
<a class="jxr_linenumber" name="L1773" href="#L1773">1773</a>             Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1774" href="#L1774">1774</a>   
<a class="jxr_linenumber" name="L1775" href="#L1775">1775</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"extension"</span>, 
<a class="jxr_linenumber" name="L1776" href="#L1776">1776</a>             Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1777" href="#L1777">1777</a>   
<a class="jxr_linenumber" name="L1778" href="#L1778">1778</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, <span class="jxr_string">"description"</span>, 
<a class="jxr_linenumber" name="L1779" href="#L1779">1779</a>             Types.VARCHAR, <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L1780" href="#L1780">1780</a>   
<a class="jxr_linenumber" name="L1781" href="#L1781">1781</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, Stem.COLUMN_LAST_MEMBERSHIP_CHANGE, 
<a class="jxr_linenumber" name="L1782" href="#L1782">1782</a>             Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L1783" href="#L1783">1783</a> 
<a class="jxr_linenumber" name="L1784" href="#L1784">1784</a>         addStemAlternateNameCol(database, ddlVersionBean, stemsTable);
<a class="jxr_linenumber" name="L1785" href="#L1785">1785</a> 
<a class="jxr_linenumber" name="L1786" href="#L1786">1786</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Stem.TABLE_GROUPER_STEMS,
<a class="jxr_linenumber" name="L1787" href="#L1787">1787</a>             <span class="jxr_string">"stem_last_membership_idx"</span>, false, Stem.COLUMN_LAST_MEMBERSHIP_CHANGE);
<a class="jxr_linenumber" name="L1788" href="#L1788">1788</a> 
<a class="jxr_linenumber" name="L1789" href="#L1789">1789</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1790" href="#L1790">1790</a>             <span class="jxr_string">"stem_createtime_idx"</span>, false, <span class="jxr_string">"create_time"</span>);
<a class="jxr_linenumber" name="L1791" href="#L1791">1791</a> 
<a class="jxr_linenumber" name="L1792" href="#L1792">1792</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1793" href="#L1793">1793</a>             <span class="jxr_string">"stem_creator_idx"</span>, false, <span class="jxr_string">"creator_id"</span>);
<a class="jxr_linenumber" name="L1794" href="#L1794">1794</a> 
<a class="jxr_linenumber" name="L1795" href="#L1795">1795</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1796" href="#L1796">1796</a>             <span class="jxr_string">"stem_dislpayextn_idx"</span>, false, <span class="jxr_string">"display_extension"</span>);
<a class="jxr_linenumber" name="L1797" href="#L1797">1797</a> 
<a class="jxr_linenumber" name="L1798" href="#L1798">1798</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1799" href="#L1799">1799</a>             <span class="jxr_string">"stem_displayname_idx"</span>, false, <span class="jxr_string">"display_name"</span>);
<a class="jxr_linenumber" name="L1800" href="#L1800">1800</a> 
<a class="jxr_linenumber" name="L1801" href="#L1801">1801</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1802" href="#L1802">1802</a>             <span class="jxr_string">"stem_extn_idx"</span>, false, <span class="jxr_string">"extension"</span>);
<a class="jxr_linenumber" name="L1803" href="#L1803">1803</a> 
<a class="jxr_linenumber" name="L1804" href="#L1804">1804</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1805" href="#L1805">1805</a>             <span class="jxr_string">"stem_modifier_idx"</span>, false, <span class="jxr_string">"modifier_id"</span>);
<a class="jxr_linenumber" name="L1806" href="#L1806">1806</a> 
<a class="jxr_linenumber" name="L1807" href="#L1807">1807</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1808" href="#L1808">1808</a>             <span class="jxr_string">"stem_modifytime_idx"</span>, false, <span class="jxr_string">"modify_time"</span>);
<a class="jxr_linenumber" name="L1809" href="#L1809">1809</a> 
<a class="jxr_linenumber" name="L1810" href="#L1810">1810</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1811" href="#L1811">1811</a>             <span class="jxr_string">"stem_name_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"name"</span>);
<a class="jxr_linenumber" name="L1812" href="#L1812">1812</a> 
<a class="jxr_linenumber" name="L1813" href="#L1813">1813</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L1814" href="#L1814">1814</a>             <span class="jxr_string">"stem_parent_idx"</span>, false, <span class="jxr_string">"parent_stem"</span>);
<a class="jxr_linenumber" name="L1815" href="#L1815">1815</a> 
<a class="jxr_linenumber" name="L1816" href="#L1816">1816</a>         versionNumberColumnFindOrCreate(stemsTable);
<a class="jxr_linenumber" name="L1817" href="#L1817">1817</a>       }
<a class="jxr_linenumber" name="L1818" href="#L1818">1818</a>       
<a class="jxr_linenumber" name="L1819" href="#L1819">1819</a>       addContextIdCols(database);
<a class="jxr_linenumber" name="L1820" href="#L1820">1820</a>       
<a class="jxr_linenumber" name="L1821" href="#L1821">1821</a>       addAuditTables(ddlVersionBean, database);
<a class="jxr_linenumber" name="L1822" href="#L1822">1822</a> 
<a class="jxr_linenumber" name="L1823" href="#L1823">1823</a>       addChangeLogTables(ddlVersionBean, database);
<a class="jxr_linenumber" name="L1824" href="#L1824">1824</a> 
<a class="jxr_linenumber" name="L1825" href="#L1825">1825</a>       addPrivilegeManagement(ddlVersionBean, database, groupsTableNew);
<a class="jxr_linenumber" name="L1826" href="#L1826">1826</a>             
<a class="jxr_linenumber" name="L1827" href="#L1827">1827</a>       addPITTables(ddlVersionBean, database);
<a class="jxr_linenumber" name="L1828" href="#L1828">1828</a>       addPITIndexes(ddlVersionBean, database);
<a class="jxr_linenumber" name="L1829" href="#L1829">1829</a>       
<a class="jxr_linenumber" name="L1830" href="#L1830">1830</a>       addExternalSubjectTables(ddlVersionBean, database);
<a class="jxr_linenumber" name="L1831" href="#L1831">1831</a> 
<a class="jxr_linenumber" name="L1832" href="#L1832">1832</a>       addStemSetTable(ddlVersionBean, database);
<a class="jxr_linenumber" name="L1833" href="#L1833">1833</a>       
<a class="jxr_linenumber" name="L1834" href="#L1834">1834</a>       addTableIndices(ddlVersionBean, database, groupsTableNew, stemsTableNew, attributeDefsTableNew, attributeDefNamesTableNew);
<a class="jxr_linenumber" name="L1835" href="#L1835">1835</a> 
<a class="jxr_linenumber" name="L1836" href="#L1836">1836</a>     }
<a class="jxr_linenumber" name="L1837" href="#L1837">1837</a> 
<a class="jxr_linenumber" name="L1838" href="#L1838">1838</a>   }, 
<a class="jxr_linenumber" name="L1839" href="#L1839">1839</a>   
<a class="jxr_linenumber" name="L1840" href="#L1840">1840</a>   <em class="jxr_javadoccomment">/** first version of grouper, make sure the ddl table is there */</em>
<a class="jxr_linenumber" name="L1841" href="#L1841">1841</a>   V1 {
<a class="jxr_linenumber" name="L1842" href="#L1842">1842</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1843" href="#L1843">1843</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L1844" href="#L1844">1844</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L1845" href="#L1845">1845</a>     @Override
<a class="jxr_linenumber" name="L1846" href="#L1846">1846</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L1847" href="#L1847">1847</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L1848" href="#L1848">1848</a> 
<a class="jxr_linenumber" name="L1849" href="#L1849">1849</a>       <em class="jxr_comment">//see if the grouper_ext_loader_log table is there</em>
<a class="jxr_linenumber" name="L1850" href="#L1850">1850</a>       Table grouperDdlTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,<span class="jxr_string">"grouper_ddl"</span>);
<a class="jxr_linenumber" name="L1851" href="#L1851">1851</a> 
<a class="jxr_linenumber" name="L1852" href="#L1852">1852</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperDdlTable, <span class="jxr_string">"id"</span>,
<a class="jxr_linenumber" name="L1853" href="#L1853">1853</a>           Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1854" href="#L1854">1854</a>       
<a class="jxr_linenumber" name="L1855" href="#L1855">1855</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperDdlTable, <span class="jxr_string">"object_name"</span>, 
<a class="jxr_linenumber" name="L1856" href="#L1856">1856</a>           Types.VARCHAR, <span class="jxr_string">"128"</span>, false, false);
<a class="jxr_linenumber" name="L1857" href="#L1857">1857</a>       
<a class="jxr_linenumber" name="L1858" href="#L1858">1858</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperDdlTable, <span class="jxr_string">"db_version"</span>, 
<a class="jxr_linenumber" name="L1859" href="#L1859">1859</a>           Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L1860" href="#L1860">1860</a>       
<a class="jxr_linenumber" name="L1861" href="#L1861">1861</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperDdlTable, <span class="jxr_string">"last_updated"</span>, 
<a class="jxr_linenumber" name="L1862" href="#L1862">1862</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false);
<a class="jxr_linenumber" name="L1863" href="#L1863">1863</a> 
<a class="jxr_linenumber" name="L1864" href="#L1864">1864</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperDdlTable, <span class="jxr_string">"history"</span>, 
<a class="jxr_linenumber" name="L1865" href="#L1865">1865</a>           Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false);
<a class="jxr_linenumber" name="L1866" href="#L1866">1866</a> 
<a class="jxr_linenumber" name="L1867" href="#L1867">1867</a>       <em class="jxr_comment">//object name is unique</em>
<a class="jxr_linenumber" name="L1868" href="#L1868">1868</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, <span class="jxr_string">"grouper_ddl"</span>, <span class="jxr_string">"grouper_ddl_object_name_idx"</span>, 
<a class="jxr_linenumber" name="L1869" href="#L1869">1869</a>           <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"object_name"</span>);
<a class="jxr_linenumber" name="L1870" href="#L1870">1870</a>       
<a class="jxr_linenumber" name="L1871" href="#L1871">1871</a>     }
<a class="jxr_linenumber" name="L1872" href="#L1872">1872</a>   }, 
<a class="jxr_linenumber" name="L1873" href="#L1873">1873</a>   
<a class="jxr_linenumber" name="L1874" href="#L1874">1874</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1875" href="#L1875">1875</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L1876" href="#L1876">1876</a> <em class="jxr_javadoccomment">   * Grouper 2.2: migrate from attributeDefType domain to service, add stem set table, add attribute read/update privs, take care of legacy attributes</em>
<a class="jxr_linenumber" name="L1877" href="#L1877">1877</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L1878" href="#L1878">1878</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L1879" href="#L1879">1879</a>   V27 {
<a class="jxr_linenumber" name="L1880" href="#L1880">1880</a>     
<a class="jxr_linenumber" name="L1881" href="#L1881">1881</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L1882" href="#L1882">1882</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L1883" href="#L1883">1883</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L1884" href="#L1884">1884</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L1885" href="#L1885">1885</a>     @Override
<a class="jxr_linenumber" name="L1886" href="#L1886">1886</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L1887" href="#L1887">1887</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L1888" href="#L1888">1888</a>       
<a class="jxr_linenumber" name="L1889" href="#L1889">1889</a>       <em class="jxr_comment">//migrate from attributeDefType domain to service</em>
<a class="jxr_linenumber" name="L1890" href="#L1890">1890</a>       ddlVersionBean.getAdditionalScripts().append(
<a class="jxr_linenumber" name="L1891" href="#L1891">1891</a>           <span class="jxr_string">"update grouper_attribute_def set attribute_def_type = 'service' where attribute_def_type = 'domain';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L1892" href="#L1892">1892</a>       
<a class="jxr_linenumber" name="L1893" href="#L1893">1893</a>       addStemSetTable(ddlVersionBean, database);
<a class="jxr_linenumber" name="L1894" href="#L1894">1894</a>       
<a class="jxr_linenumber" name="L1895" href="#L1895">1895</a>       addTableIndices(ddlVersionBean, database, false, false, false, false);
<a class="jxr_linenumber" name="L1896" href="#L1896">1896</a> 
<a class="jxr_linenumber" name="L1897" href="#L1897">1897</a>       
<a class="jxr_linenumber" name="L1898" href="#L1898">1898</a>       <em class="jxr_comment">// fix pit indexes to add unique indexes on each table</em>
<a class="jxr_linenumber" name="L1899" href="#L1899">1899</a>       <strong class="jxr_keyword">boolean</strong> fixPITIndexes = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L1900" href="#L1900">1900</a>       Table pitStem = GrouperDdlUtils.ddlutilsFindTable(database, PITStem.TABLE_GROUPER_PIT_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1901" href="#L1901">1901</a>       <strong class="jxr_keyword">for</strong> (Index index : pitStem.getIndices()) {
<a class="jxr_linenumber" name="L1902" href="#L1902">1902</a>         <strong class="jxr_keyword">if</strong> (index.getColumnCount() == 2 &amp;&amp; index.isUnique() &amp;&amp; 
<a class="jxr_linenumber" name="L1903" href="#L1903">1903</a>             StringUtils.equalsIgnoreCase(index.getColumn(0).getName(), PITStem.COLUMN_START_TIME) &amp;&amp;
<a class="jxr_linenumber" name="L1904" href="#L1904">1904</a>             StringUtils.equalsIgnoreCase(index.getColumn(1).getName(), PITStem.COLUMN_SOURCE_ID)) {
<a class="jxr_linenumber" name="L1905" href="#L1905">1905</a>           fixPITIndexes = false;
<a class="jxr_linenumber" name="L1906" href="#L1906">1906</a>           <strong class="jxr_keyword">break</strong>;
<a class="jxr_linenumber" name="L1907" href="#L1907">1907</a>         }
<a class="jxr_linenumber" name="L1908" href="#L1908">1908</a>       }
<a class="jxr_linenumber" name="L1909" href="#L1909">1909</a> 
<a class="jxr_linenumber" name="L1910" href="#L1910">1910</a>       <strong class="jxr_keyword">if</strong> (fixPITIndexes) {
<a class="jxr_linenumber" name="L1911" href="#L1911">1911</a>         <em class="jxr_comment">// ok we didn't find the new index, fix them all</em>
<a class="jxr_linenumber" name="L1912" href="#L1912">1912</a>         Table table = GrouperDdlUtils.ddlutilsFindTable(database, PITMember.TABLE_GROUPER_PIT_MEMBERS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1913" href="#L1913">1913</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITMember.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1914" href="#L1914">1914</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1915" href="#L1915">1915</a>             <span class="jxr_string">"pit_member_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITMember.COLUMN_START_TIME, PITMember.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1916" href="#L1916">1916</a>         
<a class="jxr_linenumber" name="L1917" href="#L1917">1917</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITField.TABLE_GROUPER_PIT_FIELDS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1918" href="#L1918">1918</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITField.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1919" href="#L1919">1919</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1920" href="#L1920">1920</a>             <span class="jxr_string">"pit_field_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITField.COLUMN_START_TIME, PITField.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1921" href="#L1921">1921</a>         
<a class="jxr_linenumber" name="L1922" href="#L1922">1922</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITGroup.TABLE_GROUPER_PIT_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1923" href="#L1923">1923</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITGroup.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1924" href="#L1924">1924</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1925" href="#L1925">1925</a>             <span class="jxr_string">"pit_group_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITGroup.COLUMN_START_TIME, PITGroup.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1926" href="#L1926">1926</a>         
<a class="jxr_linenumber" name="L1927" href="#L1927">1927</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1928" href="#L1928">1928</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITAttributeDef.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1929" href="#L1929">1929</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1930" href="#L1930">1930</a>             <span class="jxr_string">"pit_attribute_def_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeDef.COLUMN_START_TIME, PITAttributeDef.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1931" href="#L1931">1931</a>         
<a class="jxr_linenumber" name="L1932" href="#L1932">1932</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1933" href="#L1933">1933</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITMembership.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1934" href="#L1934">1934</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1935" href="#L1935">1935</a>             <span class="jxr_string">"pit_ms_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITMembership.COLUMN_START_TIME, PITMembership.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1936" href="#L1936">1936</a>         
<a class="jxr_linenumber" name="L1937" href="#L1937">1937</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1938" href="#L1938">1938</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITGroupSet.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1939" href="#L1939">1939</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1940" href="#L1940">1940</a>             <span class="jxr_string">"pit_gs_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITGroupSet.COLUMN_START_TIME, PITGroupSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1941" href="#L1941">1941</a>         
<a class="jxr_linenumber" name="L1942" href="#L1942">1942</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1943" href="#L1943">1943</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITAttributeAssign.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1944" href="#L1944">1944</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1945" href="#L1945">1945</a>             <span class="jxr_string">"pit_attr_assn_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeAssign.COLUMN_START_TIME, PITAttributeAssign.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1946" href="#L1946">1946</a> 
<a class="jxr_linenumber" name="L1947" href="#L1947">1947</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1948" href="#L1948">1948</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITAttributeAssignValue.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1949" href="#L1949">1949</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1950" href="#L1950">1950</a>             <span class="jxr_string">"pit_attr_val_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeAssignValue.COLUMN_START_TIME, PITAttributeAssignValue.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1951" href="#L1951">1951</a> 
<a class="jxr_linenumber" name="L1952" href="#L1952">1952</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1953" href="#L1953">1953</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITAttributeAssignAction.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1954" href="#L1954">1954</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1955" href="#L1955">1955</a>             <span class="jxr_string">"pit_attr_assn_act_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeAssignAction.COLUMN_START_TIME, PITAttributeAssignAction.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1956" href="#L1956">1956</a> 
<a class="jxr_linenumber" name="L1957" href="#L1957">1957</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1958" href="#L1958">1958</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITAttributeDefName.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1959" href="#L1959">1959</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1960" href="#L1960">1960</a>             <span class="jxr_string">"pit_attr_def_name_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeDefName.COLUMN_START_TIME, PITAttributeDefName.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1961" href="#L1961">1961</a>         
<a class="jxr_linenumber" name="L1962" href="#L1962">1962</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1963" href="#L1963">1963</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITAttributeDefNameSet.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1964" href="#L1964">1964</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1965" href="#L1965">1965</a>             <span class="jxr_string">"pit_attr_def_name_set_strt_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeDefNameSet.COLUMN_START_TIME, PITAttributeDefNameSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1966" href="#L1966">1966</a>         
<a class="jxr_linenumber" name="L1967" href="#L1967">1967</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1968" href="#L1968">1968</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITAttributeAssignActionSet.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1969" href="#L1969">1969</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1970" href="#L1970">1970</a>             <span class="jxr_string">"pit_action_set_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeAssignActionSet.COLUMN_START_TIME, PITAttributeAssignActionSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1971" href="#L1971">1971</a>         
<a class="jxr_linenumber" name="L1972" href="#L1972">1972</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1973" href="#L1973">1973</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITRoleSet.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1974" href="#L1974">1974</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1975" href="#L1975">1975</a>             <span class="jxr_string">"pit_rs_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITRoleSet.COLUMN_START_TIME, PITRoleSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1976" href="#L1976">1976</a>         
<a class="jxr_linenumber" name="L1977" href="#L1977">1977</a>         table = GrouperDdlUtils.ddlutilsFindTable(database, PITStem.TABLE_GROUPER_PIT_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1978" href="#L1978">1978</a>         GrouperDdlUtils.ddlutilsDropIndexes(table, PITStem.COLUMN_START_TIME);
<a class="jxr_linenumber" name="L1979" href="#L1979">1979</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, table.getName(),
<a class="jxr_linenumber" name="L1980" href="#L1980">1980</a>             <span class="jxr_string">"pit_stem_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITStem.COLUMN_START_TIME, PITStem.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L1981" href="#L1981">1981</a>       }
<a class="jxr_linenumber" name="L1982" href="#L1982">1982</a>       
<a class="jxr_linenumber" name="L1983" href="#L1983">1983</a> 
<a class="jxr_linenumber" name="L1984" href="#L1984">1984</a>       <em class="jxr_comment">// add additional privileges for attribute read and update</em>
<a class="jxr_linenumber" name="L1985" href="#L1985">1985</a>       <strong class="jxr_keyword">boolean</strong> tableThere = GrouperDdlUtils.assertTablesThere(<strong class="jxr_keyword">true</strong>, false, <span class="jxr_string">"grouper_fields"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L1986" href="#L1986">1986</a>       <strong class="jxr_keyword">if</strong> (tableThere) {
<a class="jxr_linenumber" name="L1987" href="#L1987">1987</a>         <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L1988" href="#L1988">1988</a>           String typeUuidGroup = HibernateSession.bySqlStatic().select(String.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select grouptype_uuid from grouper_fields where name='admins'"</span>);
<a class="jxr_linenumber" name="L1989" href="#L1989">1989</a>           String typeUuidStem = HibernateSession.bySqlStatic().select(String.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select grouptype_uuid from grouper_fields where name='stemmers'"</span>);
<a class="jxr_linenumber" name="L1990" href="#L1990">1990</a>           String typeUuidAttributeDef = HibernateSession.bySqlStatic().select(String.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select grouptype_uuid from grouper_fields where name='attrAdmins'"</span>);
<a class="jxr_linenumber" name="L1991" href="#L1991">1991</a>           
<a class="jxr_linenumber" name="L1992" href="#L1992">1992</a>           <strong class="jxr_keyword">if</strong> (typeUuidGroup != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L1993" href="#L1993">1993</a>             <strong class="jxr_keyword">int</strong> count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L1994" href="#L1994">1994</a>                 <span class="jxr_string">"select count(*) from grouper_fields where name = 'groupAttrReaders'"</span>);
<a class="jxr_linenumber" name="L1995" href="#L1995">1995</a>             <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L1996" href="#L1996">1996</a>               ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, grouptype_uuid, "</span> +
<a class="jxr_linenumber" name="L1997" href="#L1997">1997</a>                   <span class="jxr_string">"is_nullable, name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L1998" href="#L1998">1998</a>                   <span class="jxr_string">"values ('1d86d9c855804990850a4e1ba44c7776', '"</span> + typeUuidGroup + <span class="jxr_string">"', "</span> + 
<a class="jxr_linenumber" name="L1999" href="#L1999">1999</a>                   (GrouperDdlUtils.isPostgres() ? <span class="jxr_string">"true"</span> : <span class="jxr_string">"1"</span>) 
<a class="jxr_linenumber" name="L2000" href="#L2000">2000</a>                   + <span class="jxr_string">", 'groupAttrReaders', "</span> +
<a class="jxr_linenumber" name="L2001" href="#L2001">2001</a>                   <span class="jxr_string">"'admin', 'access', 'admin', 0, '4fb2fba710bc42bdb9e1f01a65121f8c');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L2002" href="#L2002">2002</a>             }
<a class="jxr_linenumber" name="L2003" href="#L2003">2003</a>             
<a class="jxr_linenumber" name="L2004" href="#L2004">2004</a>             count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L2005" href="#L2005">2005</a>                 <span class="jxr_string">"select count(*) from grouper_fields where name = 'groupAttrUpdaters'"</span>);
<a class="jxr_linenumber" name="L2006" href="#L2006">2006</a>             <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L2007" href="#L2007">2007</a>               ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, grouptype_uuid, "</span> +
<a class="jxr_linenumber" name="L2008" href="#L2008">2008</a>                   <span class="jxr_string">"is_nullable, name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L2009" href="#L2009">2009</a>                   <span class="jxr_string">"values ('025402e07ae3462e8f8382aaab8b2acc', '"</span> + typeUuidGroup + <span class="jxr_string">"', "</span> + 
<a class="jxr_linenumber" name="L2010" href="#L2010">2010</a>                   (GrouperDdlUtils.isPostgres() ? <span class="jxr_string">"true"</span> : <span class="jxr_string">"1"</span>) 
<a class="jxr_linenumber" name="L2011" href="#L2011">2011</a>                   + <span class="jxr_string">", 'groupAttrUpdaters', "</span> +
<a class="jxr_linenumber" name="L2012" href="#L2012">2012</a>                   <span class="jxr_string">"'admin', 'access', 'admin', 0, '4fb2fba710bc42bdb9e1f01a65121f8c');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L2013" href="#L2013">2013</a>             }
<a class="jxr_linenumber" name="L2014" href="#L2014">2014</a>           }
<a class="jxr_linenumber" name="L2015" href="#L2015">2015</a>           
<a class="jxr_linenumber" name="L2016" href="#L2016">2016</a>           <strong class="jxr_keyword">if</strong> (typeUuidStem != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2017" href="#L2017">2017</a>             <strong class="jxr_keyword">int</strong> count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L2018" href="#L2018">2018</a>                 <span class="jxr_string">"select count(*) from grouper_fields where name = 'stemAttrReaders'"</span>);
<a class="jxr_linenumber" name="L2019" href="#L2019">2019</a>             <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L2020" href="#L2020">2020</a>               ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, grouptype_uuid, "</span> +
<a class="jxr_linenumber" name="L2021" href="#L2021">2021</a>                   <span class="jxr_string">"is_nullable, name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L2022" href="#L2022">2022</a>                   <span class="jxr_string">"values ('d0ad184aea2744f5a3a816874b15e44e', '"</span> + typeUuidStem + <span class="jxr_string">"', "</span> + 
<a class="jxr_linenumber" name="L2023" href="#L2023">2023</a>                   (GrouperDdlUtils.isPostgres() ? <span class="jxr_string">"true"</span> : <span class="jxr_string">"1"</span>) 
<a class="jxr_linenumber" name="L2024" href="#L2024">2024</a>                   + <span class="jxr_string">", 'stemAttrReaders', "</span> +
<a class="jxr_linenumber" name="L2025" href="#L2025">2025</a>                   <span class="jxr_string">"'stem', 'naming', 'stem', 0, '4fb2fba710bc42bdb9e1f01a65121f8c');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L2026" href="#L2026">2026</a>             }
<a class="jxr_linenumber" name="L2027" href="#L2027">2027</a>             
<a class="jxr_linenumber" name="L2028" href="#L2028">2028</a>             count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L2029" href="#L2029">2029</a>                 <span class="jxr_string">"select count(*) from grouper_fields where name = 'stemAttrUpdaters'"</span>);
<a class="jxr_linenumber" name="L2030" href="#L2030">2030</a>             <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L2031" href="#L2031">2031</a>               ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, grouptype_uuid, "</span> +
<a class="jxr_linenumber" name="L2032" href="#L2032">2032</a>                   <span class="jxr_string">"is_nullable, name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L2033" href="#L2033">2033</a>                   <span class="jxr_string">"values ('67221f1d0bc749f899325a85ab1afa1a', '"</span> + typeUuidStem + <span class="jxr_string">"', "</span> + 
<a class="jxr_linenumber" name="L2034" href="#L2034">2034</a>                   (GrouperDdlUtils.isPostgres() ? <span class="jxr_string">"true"</span> : <span class="jxr_string">"1"</span>) 
<a class="jxr_linenumber" name="L2035" href="#L2035">2035</a>                   + <span class="jxr_string">", 'stemAttrUpdaters', "</span> +
<a class="jxr_linenumber" name="L2036" href="#L2036">2036</a>                   <span class="jxr_string">"'stem', 'naming', 'stem', 0, '4fb2fba710bc42bdb9e1f01a65121f8c');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L2037" href="#L2037">2037</a>             }
<a class="jxr_linenumber" name="L2038" href="#L2038">2038</a>           }
<a class="jxr_linenumber" name="L2039" href="#L2039">2039</a>           
<a class="jxr_linenumber" name="L2040" href="#L2040">2040</a>           <strong class="jxr_keyword">if</strong> (typeUuidAttributeDef != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2041" href="#L2041">2041</a>             <strong class="jxr_keyword">int</strong> count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L2042" href="#L2042">2042</a>                 <span class="jxr_string">"select count(*) from grouper_fields where name = 'attrDefAttrReaders'"</span>);
<a class="jxr_linenumber" name="L2043" href="#L2043">2043</a>             <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L2044" href="#L2044">2044</a>               ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, grouptype_uuid, "</span> +
<a class="jxr_linenumber" name="L2045" href="#L2045">2045</a>                   <span class="jxr_string">"is_nullable, name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L2046" href="#L2046">2046</a>                   <span class="jxr_string">"values ('e078ddef342943369fb5236d6124c990', '"</span> + typeUuidAttributeDef + <span class="jxr_string">"', "</span> + 
<a class="jxr_linenumber" name="L2047" href="#L2047">2047</a>                   (GrouperDdlUtils.isPostgres() ? <span class="jxr_string">"true"</span> : <span class="jxr_string">"1"</span>) 
<a class="jxr_linenumber" name="L2048" href="#L2048">2048</a>                   + <span class="jxr_string">", 'attrDefAttrReaders', "</span> +
<a class="jxr_linenumber" name="L2049" href="#L2049">2049</a>                   <span class="jxr_string">"'attrAdmin', 'attributeDef', 'attrAdmin', 0, '4fb2fba710bc42bdb9e1f01a65121f8c');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L2050" href="#L2050">2050</a>             }
<a class="jxr_linenumber" name="L2051" href="#L2051">2051</a>             
<a class="jxr_linenumber" name="L2052" href="#L2052">2052</a>             count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L2053" href="#L2053">2053</a>                 <span class="jxr_string">"select count(*) from grouper_fields where name = 'attrDefAttrUpdaters'"</span>);
<a class="jxr_linenumber" name="L2054" href="#L2054">2054</a>             <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L2055" href="#L2055">2055</a>               ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, grouptype_uuid, "</span> +
<a class="jxr_linenumber" name="L2056" href="#L2056">2056</a>                   <span class="jxr_string">"is_nullable, name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L2057" href="#L2057">2057</a>                   <span class="jxr_string">"values ('6317e8811df448829c895b1f7f4bf5e0', '"</span> + typeUuidAttributeDef + <span class="jxr_string">"', "</span> + 
<a class="jxr_linenumber" name="L2058" href="#L2058">2058</a>                   (GrouperDdlUtils.isPostgres() ? <span class="jxr_string">"true"</span> : <span class="jxr_string">"1"</span>) 
<a class="jxr_linenumber" name="L2059" href="#L2059">2059</a>                   + <span class="jxr_string">", 'attrDefAttrUpdaters', "</span> +
<a class="jxr_linenumber" name="L2060" href="#L2060">2060</a>                   <span class="jxr_string">"'attrAdmin', 'attributeDef', 'attrAdmin', 0, '4fb2fba710bc42bdb9e1f01a65121f8c');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L2061" href="#L2061">2061</a>             }
<a class="jxr_linenumber" name="L2062" href="#L2062">2062</a>           }
<a class="jxr_linenumber" name="L2063" href="#L2063">2063</a>         } <strong class="jxr_keyword">catch</strong> (RuntimeException e) {
<a class="jxr_linenumber" name="L2064" href="#L2064">2064</a>           <em class="jxr_comment">//dont worry if exception, the table probably isnt there,and will get initted in good time</em>
<a class="jxr_linenumber" name="L2065" href="#L2065">2065</a>         }
<a class="jxr_linenumber" name="L2066" href="#L2066">2066</a>       }
<a class="jxr_linenumber" name="L2067" href="#L2067">2067</a>       
<a class="jxr_linenumber" name="L2068" href="#L2068">2068</a>       <em class="jxr_comment">// legacy attributes</em>
<a class="jxr_linenumber" name="L2069" href="#L2069">2069</a>       <strong class="jxr_keyword">boolean</strong> needsLegacyAttributesUpgrade = false;
<a class="jxr_linenumber" name="L2070" href="#L2070">2070</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_attributes"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2071" href="#L2071">2071</a>         needsLegacyAttributesUpgrade = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L2072" href="#L2072">2072</a>         
<a class="jxr_linenumber" name="L2073" href="#L2073">2073</a>         <em class="jxr_comment">// drop legacy table if it happens to exist for some reason</em>
<a class="jxr_linenumber" name="L2074" href="#L2074">2074</a>         <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_attributes_legacy"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2075" href="#L2075">2075</a>           GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_attributes_legacy"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2076" href="#L2076">2076</a>         }
<a class="jxr_linenumber" name="L2077" href="#L2077">2077</a>         
<a class="jxr_linenumber" name="L2078" href="#L2078">2078</a>         GrouperDdlUtils.ddlutilsBackupTable(ddlVersionBean, <span class="jxr_string">"grouper_attributes"</span>, <span class="jxr_string">"grouper_attributes_legacy"</span>);
<a class="jxr_linenumber" name="L2079" href="#L2079">2079</a>       }
<a class="jxr_linenumber" name="L2080" href="#L2080">2080</a>       
<a class="jxr_linenumber" name="L2081" href="#L2081">2081</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_types"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2082" href="#L2082">2082</a>         needsLegacyAttributesUpgrade = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L2083" href="#L2083">2083</a>         
<a class="jxr_linenumber" name="L2084" href="#L2084">2084</a>         <em class="jxr_comment">// drop legacy table if it happens to exist for some reason</em>
<a class="jxr_linenumber" name="L2085" href="#L2085">2085</a>         <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_types_legacy"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2086" href="#L2086">2086</a>           GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_types_legacy"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2087" href="#L2087">2087</a>         }
<a class="jxr_linenumber" name="L2088" href="#L2088">2088</a>         
<a class="jxr_linenumber" name="L2089" href="#L2089">2089</a>         GrouperDdlUtils.ddlutilsBackupTable(ddlVersionBean, <span class="jxr_string">"grouper_types"</span>, <span class="jxr_string">"grouper_types_legacy"</span>);
<a class="jxr_linenumber" name="L2090" href="#L2090">2090</a>       }
<a class="jxr_linenumber" name="L2091" href="#L2091">2091</a>       
<a class="jxr_linenumber" name="L2092" href="#L2092">2092</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_groups_types"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2093" href="#L2093">2093</a>         needsLegacyAttributesUpgrade = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L2094" href="#L2094">2094</a>         
<a class="jxr_linenumber" name="L2095" href="#L2095">2095</a>         <em class="jxr_comment">// drop legacy table if it happens to exist for some reason</em>
<a class="jxr_linenumber" name="L2096" href="#L2096">2096</a>         <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_groups_types_legacy"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2097" href="#L2097">2097</a>           GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_groups_types_legacy"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2098" href="#L2098">2098</a>         }
<a class="jxr_linenumber" name="L2099" href="#L2099">2099</a>         
<a class="jxr_linenumber" name="L2100" href="#L2100">2100</a>         GrouperDdlUtils.ddlutilsBackupTable(ddlVersionBean, <span class="jxr_string">"grouper_groups_types"</span>, <span class="jxr_string">"grouper_groups_types_legacy"</span>);
<a class="jxr_linenumber" name="L2101" href="#L2101">2101</a>       }
<a class="jxr_linenumber" name="L2102" href="#L2102">2102</a>       
<a class="jxr_linenumber" name="L2103" href="#L2103">2103</a>       <strong class="jxr_keyword">int</strong> legacyAttributesCount = 0;
<a class="jxr_linenumber" name="L2104" href="#L2104">2104</a>       
<a class="jxr_linenumber" name="L2105" href="#L2105">2105</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_fields"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2106" href="#L2106">2106</a>         legacyAttributesCount = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select count(*) from grouper_fields where type = 'attribute'"</span>);
<a class="jxr_linenumber" name="L2107" href="#L2107">2107</a>       
<a class="jxr_linenumber" name="L2108" href="#L2108">2108</a>         <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, <span class="jxr_string">"grouper_fields"</span>, <span class="jxr_string">"grouptype_uuid"</span>, false) != <strong class="jxr_keyword">null</strong> || 
<a class="jxr_linenumber" name="L2109" href="#L2109">2109</a>             GrouperDdlUtils.ddlutilsFindColumn(database, <span class="jxr_string">"grouper_fields"</span>, <span class="jxr_string">"is_nullable"</span>, false) != <strong class="jxr_keyword">null</strong> ||
<a class="jxr_linenumber" name="L2110" href="#L2110">2110</a>             legacyAttributesCount &gt; 0) {
<a class="jxr_linenumber" name="L2111" href="#L2111">2111</a>           needsLegacyAttributesUpgrade = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L2112" href="#L2112">2112</a>           
<a class="jxr_linenumber" name="L2113" href="#L2113">2113</a>           <em class="jxr_comment">// drop legacy table if it happens to exist for some reason</em>
<a class="jxr_linenumber" name="L2114" href="#L2114">2114</a>           <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_fields_legacy"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2115" href="#L2115">2115</a>             GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_fields_legacy"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2116" href="#L2116">2116</a>           }
<a class="jxr_linenumber" name="L2117" href="#L2117">2117</a>           
<a class="jxr_linenumber" name="L2118" href="#L2118">2118</a>           GrouperDdlUtils.ddlutilsBackupTable(ddlVersionBean, <span class="jxr_string">"grouper_fields"</span>, <span class="jxr_string">"grouper_fields_legacy"</span>);
<a class="jxr_linenumber" name="L2119" href="#L2119">2119</a>         }
<a class="jxr_linenumber" name="L2120" href="#L2120">2120</a>       }
<a class="jxr_linenumber" name="L2121" href="#L2121">2121</a>       
<a class="jxr_linenumber" name="L2122" href="#L2122">2122</a>       <em class="jxr_comment">// maybe remove backup tables</em>
<a class="jxr_linenumber" name="L2123" href="#L2123">2123</a>       <strong class="jxr_keyword">if</strong> (!needsLegacyAttributesUpgrade &amp;&amp; GrouperConfig.retrieveConfig().propertyValueBoolean(<span class="jxr_string">"ddlutils.dropLegacyAttributes"</span>, false)) {
<a class="jxr_linenumber" name="L2124" href="#L2124">2124</a>         <em class="jxr_comment">// ok drop any of the backed up tables</em>
<a class="jxr_linenumber" name="L2125" href="#L2125">2125</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_attributes_legacy"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2126" href="#L2126">2126</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_types_legacy"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2127" href="#L2127">2127</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_groups_types_legacy"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2128" href="#L2128">2128</a>         GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_fields_legacy"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2129" href="#L2129">2129</a>       }
<a class="jxr_linenumber" name="L2130" href="#L2130">2130</a>     }
<a class="jxr_linenumber" name="L2131" href="#L2131">2131</a>   },
<a class="jxr_linenumber" name="L2132" href="#L2132">2132</a>   
<a class="jxr_linenumber" name="L2133" href="#L2133">2133</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2134" href="#L2134">2134</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L2135" href="#L2135">2135</a> <em class="jxr_javadoccomment">   * Grouper 2.2 - continued: finish legacy attributes</em>
<a class="jxr_linenumber" name="L2136" href="#L2136">2136</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L2137" href="#L2137">2137</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2138" href="#L2138">2138</a>   V28 {
<a class="jxr_linenumber" name="L2139" href="#L2139">2139</a>     
<a class="jxr_linenumber" name="L2140" href="#L2140">2140</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2141" href="#L2141">2141</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L2142" href="#L2142">2142</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L2143" href="#L2143">2143</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L2144" href="#L2144">2144</a>     @Override
<a class="jxr_linenumber" name="L2145" href="#L2145">2145</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L2146" href="#L2146">2146</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L2147" href="#L2147">2147</a>       
<a class="jxr_linenumber" name="L2148" href="#L2148">2148</a>       <em class="jxr_comment">//create index GROUPER_FIELDS_TYPE_IDX on GROUPER_FIELDS (TYPE)</em>
<a class="jxr_linenumber" name="L2149" href="#L2149">2149</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Field.TABLE_GROUPER_FIELDS,
<a class="jxr_linenumber" name="L2150" href="#L2150">2150</a>           <span class="jxr_string">"grouper_fields_type_idx"</span>, false, Field.COLUMN_TYPE);
<a class="jxr_linenumber" name="L2151" href="#L2151">2151</a>        
<a class="jxr_linenumber" name="L2152" href="#L2152">2152</a>       <em class="jxr_comment">//create index GROUPMEM_OWNID_FIELDID_IDX on GROUPER_MEMBERSHIPS (OWNER_ID,FIELD_ID)</em>
<a class="jxr_linenumber" name="L2153" href="#L2153">2153</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Membership.TABLE_GROUPER_MEMBERSHIPS,
<a class="jxr_linenumber" name="L2154" href="#L2154">2154</a>           <span class="jxr_string">"groupmem_ownid_fieldid_idx"</span>, false, Membership.COLUMN_OWNER_ID, Membership.COLUMN_FIELD_ID);
<a class="jxr_linenumber" name="L2155" href="#L2155">2155</a>       
<a class="jxr_linenumber" name="L2156" href="#L2156">2156</a>       <strong class="jxr_keyword">int</strong> legacyAttributesCount = 0;
<a class="jxr_linenumber" name="L2157" href="#L2157">2157</a>       
<a class="jxr_linenumber" name="L2158" href="#L2158">2158</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_fields"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2159" href="#L2159">2159</a>         legacyAttributesCount = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select count(*) from grouper_fields where type = 'attribute'"</span>);
<a class="jxr_linenumber" name="L2160" href="#L2160">2160</a>       
<a class="jxr_linenumber" name="L2161" href="#L2161">2161</a>         <em class="jxr_comment">// remove the old tables/columns</em>
<a class="jxr_linenumber" name="L2162" href="#L2162">2162</a>         <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_attributes"</span>, <strong class="jxr_keyword">true</strong>) ||
<a class="jxr_linenumber" name="L2163" href="#L2163">2163</a>             GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_types"</span>, <strong class="jxr_keyword">true</strong>) ||
<a class="jxr_linenumber" name="L2164" href="#L2164">2164</a>             GrouperDdlUtils.assertTablesThere(false, false, <span class="jxr_string">"grouper_groups_types"</span>, <strong class="jxr_keyword">true</strong>) ||
<a class="jxr_linenumber" name="L2165" href="#L2165">2165</a>             GrouperDdlUtils.ddlutilsFindColumn(database, <span class="jxr_string">"grouper_fields"</span>, <span class="jxr_string">"grouptype_uuid"</span>, false) != <strong class="jxr_keyword">null</strong> || 
<a class="jxr_linenumber" name="L2166" href="#L2166">2166</a>             GrouperDdlUtils.ddlutilsFindColumn(database, <span class="jxr_string">"grouper_fields"</span>, <span class="jxr_string">"is_nullable"</span>, false) != <strong class="jxr_keyword">null</strong> || 
<a class="jxr_linenumber" name="L2167" href="#L2167">2167</a>             legacyAttributesCount &gt; 0) {
<a class="jxr_linenumber" name="L2168" href="#L2168">2168</a> 
<a class="jxr_linenumber" name="L2169" href="#L2169">2169</a>           GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_attributes"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2170" href="#L2170">2170</a>           GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_types"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2171" href="#L2171">2171</a>           GrouperDdlUtils.ddlutilsDropTable(ddlVersionBean, <span class="jxr_string">"grouper_groups_types"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2172" href="#L2172">2172</a> 
<a class="jxr_linenumber" name="L2173" href="#L2173">2173</a>           GrouperDdlUtils.ddlutilsDropColumn(database, <span class="jxr_string">"grouper_fields"</span>, <span class="jxr_string">"grouptype_uuid"</span>, ddlVersionBean);
<a class="jxr_linenumber" name="L2174" href="#L2174">2174</a>           GrouperDdlUtils.ddlutilsDropColumn(database, <span class="jxr_string">"grouper_fields"</span>, <span class="jxr_string">"is_nullable"</span>, ddlVersionBean);
<a class="jxr_linenumber" name="L2175" href="#L2175">2175</a>           
<a class="jxr_linenumber" name="L2176" href="#L2176">2176</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ndelete from grouper_fields where type = 'attribute';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2177" href="#L2177">2177</a>         }
<a class="jxr_linenumber" name="L2178" href="#L2178">2178</a>       }
<a class="jxr_linenumber" name="L2179" href="#L2179">2179</a>     }
<a class="jxr_linenumber" name="L2180" href="#L2180">2180</a>   
<a class="jxr_linenumber" name="L2181" href="#L2181">2181</a>   },
<a class="jxr_linenumber" name="L2182" href="#L2182">2182</a>   
<a class="jxr_linenumber" name="L2183" href="#L2183">2183</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2184" href="#L2184">2184</a> <em class="jxr_javadoccomment">   * &lt;pre&gt;</em>
<a class="jxr_linenumber" name="L2185" href="#L2185">2185</a> <em class="jxr_javadoccomment">   * Grouper 2.3</em>
<a class="jxr_linenumber" name="L2186" href="#L2186">2186</a> <em class="jxr_javadoccomment">   * &lt;/pre&gt;</em>
<a class="jxr_linenumber" name="L2187" href="#L2187">2187</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2188" href="#L2188">2188</a>   V29 {
<a class="jxr_linenumber" name="L2189" href="#L2189">2189</a>     
<a class="jxr_linenumber" name="L2190" href="#L2190">2190</a>     <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2191" href="#L2191">2191</a> <em class="jxr_javadoccomment">     * </em>
<a class="jxr_linenumber" name="L2192" href="#L2192">2192</a> <em class="jxr_javadoccomment">     * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L2193" href="#L2193">2193</a> <em class="jxr_javadoccomment">     */</em>
<a class="jxr_linenumber" name="L2194" href="#L2194">2194</a>     @Override
<a class="jxr_linenumber" name="L2195" href="#L2195">2195</a>     <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L2196" href="#L2196">2196</a>         <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L2197" href="#L2197">2197</a>       
<a class="jxr_linenumber" name="L2198" href="#L2198">2198</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,
<a class="jxr_linenumber" name="L2199" href="#L2199">2199</a>           <span class="jxr_string">"audit_entry_act_as_created_idx"</span>, false, <span class="jxr_string">"act_as_member_id"</span>, <span class="jxr_string">"created_on"</span>);
<a class="jxr_linenumber" name="L2200" href="#L2200">2200</a>       
<a class="jxr_linenumber" name="L2201" href="#L2201">2201</a>       <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.assertTablesThere(false, false, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L2202" href="#L2202">2202</a>         <strong class="jxr_keyword">int</strong> count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select count(*) from grouper_audit_entry where act_as_member_id is null and logged_in_member_id is not null"</span>);
<a class="jxr_linenumber" name="L2203" href="#L2203">2203</a>         <strong class="jxr_keyword">if</strong> (count &gt; 0) {
<a class="jxr_linenumber" name="L2204" href="#L2204">2204</a>           ddlVersionBean.getAdditionalScripts().append(
<a class="jxr_linenumber" name="L2205" href="#L2205">2205</a>             <span class="jxr_string">"update grouper_audit_entry set act_as_member_id=logged_in_member_id where act_as_member_id is null and logged_in_member_id is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2206" href="#L2206">2206</a>         }
<a class="jxr_linenumber" name="L2207" href="#L2207">2207</a>       }
<a class="jxr_linenumber" name="L2208" href="#L2208">2208</a>     }
<a class="jxr_linenumber" name="L2209" href="#L2209">2209</a>   };
<a class="jxr_linenumber" name="L2210" href="#L2210">2210</a> 
<a class="jxr_linenumber" name="L2211" href="#L2211">2211</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2212" href="#L2212">2212</a> <em class="jxr_javadoccomment">   * context id column name</em>
<a class="jxr_linenumber" name="L2213" href="#L2213">2213</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2214" href="#L2214">2214</a>   <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">final</strong> String COLUMN_CONTEXT_ID = <span class="jxr_string">"context_id"</span>;
<a class="jxr_linenumber" name="L2215" href="#L2215">2215</a> 
<a class="jxr_linenumber" name="L2216" href="#L2216">2216</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2217" href="#L2217">2217</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L2218" href="#L2218">2218</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2219" href="#L2219">2219</a>   <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">final</strong> String BAK_GROUPER_ATTRIBUTES = <span class="jxr_string">"bak_grouper_attributes"</span>;
<a class="jxr_linenumber" name="L2220" href="#L2220">2220</a> 
<a class="jxr_linenumber" name="L2221" href="#L2221">2221</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2222" href="#L2222">2222</a> <em class="jxr_javadoccomment">   * size of id cols</em>
<a class="jxr_linenumber" name="L2223" href="#L2223">2223</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2224" href="#L2224">2224</a>   <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">final</strong> String ID_SIZE = <span class="jxr_string">"40"</span>;
<a class="jxr_linenumber" name="L2225" href="#L2225">2225</a> 
<a class="jxr_linenumber" name="L2226" href="#L2226">2226</a>   
<a class="jxr_linenumber" name="L2227" href="#L2227">2227</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2228" href="#L2228">2228</a> <em class="jxr_javadoccomment">   * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#getVersion()</em>
<a class="jxr_linenumber" name="L2229" href="#L2229">2229</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2230" href="#L2230">2230</a>   <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">int</strong> getVersion() {
<a class="jxr_linenumber" name="L2231" href="#L2231">2231</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.versionIntFromEnum(<strong class="jxr_keyword">this</strong>);
<a class="jxr_linenumber" name="L2232" href="#L2232">2232</a>   }
<a class="jxr_linenumber" name="L2233" href="#L2233">2233</a> 
<a class="jxr_linenumber" name="L2234" href="#L2234">2234</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2235" href="#L2235">2235</a> <em class="jxr_javadoccomment">   * cache this</em>
<a class="jxr_linenumber" name="L2236" href="#L2236">2236</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2237" href="#L2237">2237</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">int</strong> currentVersion = -1;
<a class="jxr_linenumber" name="L2238" href="#L2238">2238</a>   
<a class="jxr_linenumber" name="L2239" href="#L2239">2239</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2240" href="#L2240">2240</a> <em class="jxr_javadoccomment">   * add version number col if not there</em>
<a class="jxr_linenumber" name="L2241" href="#L2241">2241</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean </em>
<a class="jxr_linenumber" name="L2242" href="#L2242">2242</a> <em class="jxr_javadoccomment">   * @param tableName</em>
<a class="jxr_linenumber" name="L2243" href="#L2243">2243</a> <em class="jxr_javadoccomment">   * @param exceptionIfTableNotFound</em>
<a class="jxr_linenumber" name="L2244" href="#L2244">2244</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2245" href="#L2245">2245</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> versionNumberColumnAdd(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, String tableName, <strong class="jxr_keyword">boolean</strong> exceptionIfTableNotFound) {
<a class="jxr_linenumber" name="L2246" href="#L2246">2246</a>     Database database = ddlVersionBean.getDatabase();
<a class="jxr_linenumber" name="L2247" href="#L2247">2247</a> 
<a class="jxr_linenumber" name="L2248" href="#L2248">2248</a>     <em class="jxr_comment">//if there is no uuid col, then forget it, or if there is a old_uuid col forget it</em>
<a class="jxr_linenumber" name="L2249" href="#L2249">2249</a>     Table table = GrouperDdlUtils.ddlutilsFindTable(database, tableName, exceptionIfTableNotFound);
<a class="jxr_linenumber" name="L2250" href="#L2250">2250</a>     
<a class="jxr_linenumber" name="L2251" href="#L2251">2251</a>     <strong class="jxr_keyword">if</strong> (table == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2252" href="#L2252">2252</a>       <strong class="jxr_keyword">return</strong>;
<a class="jxr_linenumber" name="L2253" href="#L2253">2253</a>     }
<a class="jxr_linenumber" name="L2254" href="#L2254">2254</a>     
<a class="jxr_linenumber" name="L2255" href="#L2255">2255</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, tableName, COLUMN_HIBERNATE_VERSION_NUMBER, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2256" href="#L2256">2256</a>       
<a class="jxr_linenumber" name="L2257" href="#L2257">2257</a>       <strong class="jxr_keyword">boolean</strong> destinationVersion = ddlVersionBean.isDestinationVersion();
<a class="jxr_linenumber" name="L2258" href="#L2258">2258</a> 
<a class="jxr_linenumber" name="L2259" href="#L2259">2259</a>       <strong class="jxr_keyword">if</strong> (destinationVersion &amp;&amp; ddlVersionBean.getPlatform().getName().toLowerCase().contains(<span class="jxr_string">"postgres"</span>)) {
<a class="jxr_linenumber" name="L2260" href="#L2260">2260</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"ALTER TABLE "</span> + tableName + <span class="jxr_string">" ADD COLUMN hibernate_version_number bigint DEFAULT 0;\n"</span>);
<a class="jxr_linenumber" name="L2261" href="#L2261">2261</a>       } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L2262" href="#L2262">2262</a>         versionNumberColumnFindOrCreate(table);
<a class="jxr_linenumber" name="L2263" href="#L2263">2263</a>       }
<a class="jxr_linenumber" name="L2264" href="#L2264">2264</a>       <strong class="jxr_keyword">if</strong> (destinationVersion) {
<a class="jxr_linenumber" name="L2265" href="#L2265">2265</a>         ddlVersionBean.getAdditionalScripts().append(
<a class="jxr_linenumber" name="L2266" href="#L2266">2266</a>             <span class="jxr_string">"update "</span> + tableName + <span class="jxr_string">" set hibernate_version_number = 0 where hibernate_version_number is null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2267" href="#L2267">2267</a>       }
<a class="jxr_linenumber" name="L2268" href="#L2268">2268</a>     }
<a class="jxr_linenumber" name="L2269" href="#L2269">2269</a> 
<a class="jxr_linenumber" name="L2270" href="#L2270">2270</a>   }
<a class="jxr_linenumber" name="L2271" href="#L2271">2271</a> 
<a class="jxr_linenumber" name="L2272" href="#L2272">2272</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2273" href="#L2273">2273</a> <em class="jxr_javadoccomment">   * @param table</em>
<a class="jxr_linenumber" name="L2274" href="#L2274">2274</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2275" href="#L2275">2275</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> versionNumberColumnFindOrCreate(Table table) {
<a class="jxr_linenumber" name="L2276" href="#L2276">2276</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(table, COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L2277" href="#L2277">2277</a>         Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L2278" href="#L2278">2278</a>   }
<a class="jxr_linenumber" name="L2279" href="#L2279">2279</a>   
<a class="jxr_linenumber" name="L2280" href="#L2280">2280</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2281" href="#L2281">2281</a> <em class="jxr_javadoccomment">   * keep the current version here, increment as things change</em>
<a class="jxr_linenumber" name="L2282" href="#L2282">2282</a> <em class="jxr_javadoccomment">   * @return the current version</em>
<a class="jxr_linenumber" name="L2283" href="#L2283">2283</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2284" href="#L2284">2284</a>   <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">int</strong> currentVersion() {
<a class="jxr_linenumber" name="L2285" href="#L2285">2285</a>     <strong class="jxr_keyword">if</strong> (currentVersion == -1) {
<a class="jxr_linenumber" name="L2286" href="#L2286">2286</a>       <strong class="jxr_keyword">int</strong> max = -1;
<a class="jxr_linenumber" name="L2287" href="#L2287">2287</a>       <strong class="jxr_keyword">for</strong> (GrouperDdl grouperDdl : GrouperDdl.values()) {
<a class="jxr_linenumber" name="L2288" href="#L2288">2288</a>         String number = grouperDdl.name().substring(1);
<a class="jxr_linenumber" name="L2289" href="#L2289">2289</a>         <strong class="jxr_keyword">int</strong> theInt = Integer.parseInt(number);
<a class="jxr_linenumber" name="L2290" href="#L2290">2290</a>         max = Math.max(max, theInt);
<a class="jxr_linenumber" name="L2291" href="#L2291">2291</a>       }
<a class="jxr_linenumber" name="L2292" href="#L2292">2292</a>       currentVersion = max;
<a class="jxr_linenumber" name="L2293" href="#L2293">2293</a>     }
<a class="jxr_linenumber" name="L2294" href="#L2294">2294</a>     <strong class="jxr_keyword">return</strong> currentVersion;
<a class="jxr_linenumber" name="L2295" href="#L2295">2295</a>   }
<a class="jxr_linenumber" name="L2296" href="#L2296">2296</a> 
<a class="jxr_linenumber" name="L2297" href="#L2297">2297</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2298" href="#L2298">2298</a> <em class="jxr_javadoccomment">   * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#getObjectName()</em>
<a class="jxr_linenumber" name="L2299" href="#L2299">2299</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2300" href="#L2300">2300</a>   <strong class="jxr_keyword">public</strong> String getObjectName() {
<a class="jxr_linenumber" name="L2301" href="#L2301">2301</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.objectName(<strong class="jxr_keyword">this</strong>);
<a class="jxr_linenumber" name="L2302" href="#L2302">2302</a>   }
<a class="jxr_linenumber" name="L2303" href="#L2303">2303</a> 
<a class="jxr_linenumber" name="L2304" href="#L2304">2304</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2305" href="#L2305">2305</a> <em class="jxr_javadoccomment">   * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#getDefaultTablePattern()</em>
<a class="jxr_linenumber" name="L2306" href="#L2306">2306</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2307" href="#L2307">2307</a>   <strong class="jxr_keyword">public</strong> String getDefaultTablePattern() {
<a class="jxr_linenumber" name="L2308" href="#L2308">2308</a>     <strong class="jxr_keyword">return</strong> <span class="jxr_string">"GROUPER%"</span>;
<a class="jxr_linenumber" name="L2309" href="#L2309">2309</a>   }
<a class="jxr_linenumber" name="L2310" href="#L2310">2310</a>   
<a class="jxr_linenumber" name="L2311" href="#L2311">2311</a>   <em class="jxr_javadoccomment">/** column for hibernate version number */</em>
<a class="jxr_linenumber" name="L2312" href="#L2312">2312</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">final</strong> String COLUMN_HIBERNATE_VERSION_NUMBER = <span class="jxr_string">"hibernate_version_number"</span>;
<a class="jxr_linenumber" name="L2313" href="#L2313">2313</a>   
<a class="jxr_linenumber" name="L2314" href="#L2314">2314</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2315" href="#L2315">2315</a> <em class="jxr_javadoccomment">   * @see edu.internet2.middleware.grouper.ddl.DdlVersionable#updateVersionFromPrevious(org.apache.ddlutils.model.Database, DdlVersionBean)</em>
<a class="jxr_linenumber" name="L2316" href="#L2316">2316</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2317" href="#L2317">2317</a>   <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">abstract</strong> <strong class="jxr_keyword">void</strong> updateVersionFromPrevious(Database database, 
<a class="jxr_linenumber" name="L2318" href="#L2318">2318</a>       <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean);
<a class="jxr_linenumber" name="L2319" href="#L2319">2319</a> 
<a class="jxr_linenumber" name="L2320" href="#L2320">2320</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2321" href="#L2321">2321</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2322" href="#L2322">2322</a> <em class="jxr_javadoccomment">   * @return true if needs</em>
<a class="jxr_linenumber" name="L2323" href="#L2323">2323</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2324" href="#L2324">2324</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsTypesIdConversion(Database database) {
<a class="jxr_linenumber" name="L2325" href="#L2325">2325</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, GroupType.TABLE_OLD_GROUPER_TYPES, GroupType.COLUMN_TYPE_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2326" href="#L2326">2326</a>     &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, GroupType.TABLE_OLD_GROUPER_TYPES, GroupType.COLUMN_OLD_TYPE_UUID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2327" href="#L2327">2327</a>     &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, GroupType.TABLE_OLD_GROUPER_TYPES, GroupType.COLUMN_OLD_ID, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2328" href="#L2328">2328</a>   }
<a class="jxr_linenumber" name="L2329" href="#L2329">2329</a> 
<a class="jxr_linenumber" name="L2330" href="#L2330">2330</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2331" href="#L2331">2331</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2332" href="#L2332">2332</a> <em class="jxr_javadoccomment">   * @return true if needs</em>
<a class="jxr_linenumber" name="L2333" href="#L2333">2333</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2334" href="#L2334">2334</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsMembersIdConversion(Database database) {
<a class="jxr_linenumber" name="L2335" href="#L2335">2335</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_MEMBER_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2336" href="#L2336">2336</a>     &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_OLD_MEMBER_UUID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2337" href="#L2337">2337</a>     &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_OLD_ID, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2338" href="#L2338">2338</a>   }
<a class="jxr_linenumber" name="L2339" href="#L2339">2339</a> 
<a class="jxr_linenumber" name="L2340" href="#L2340">2340</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2341" href="#L2341">2341</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2342" href="#L2342">2342</a> <em class="jxr_javadoccomment">   * @return true if needs</em>
<a class="jxr_linenumber" name="L2343" href="#L2343">2343</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2344" href="#L2344">2344</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsGroupsIdConversion(Database database) {
<a class="jxr_linenumber" name="L2345" href="#L2345">2345</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2346" href="#L2346">2346</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_OLD_UUID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2347" href="#L2347">2347</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Group.TABLE_GROUPER_GROUPS, Group.COLUMN_OLD_ID, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2348" href="#L2348">2348</a>   }
<a class="jxr_linenumber" name="L2349" href="#L2349">2349</a> 
<a class="jxr_linenumber" name="L2350" href="#L2350">2350</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2351" href="#L2351">2351</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2352" href="#L2352">2352</a> <em class="jxr_javadoccomment">   * @return true if needs it</em>
<a class="jxr_linenumber" name="L2353" href="#L2353">2353</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2354" href="#L2354">2354</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsFieldsIdConversion(Database database) {
<a class="jxr_linenumber" name="L2355" href="#L2355">2355</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_FIELD_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2356" href="#L2356">2356</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_OLD_FIELD_UUID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2357" href="#L2357">2357</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Field.TABLE_GROUPER_FIELDS, Field.COLUMN_OLD_ID, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2358" href="#L2358">2358</a>   }
<a class="jxr_linenumber" name="L2359" href="#L2359">2359</a> 
<a class="jxr_linenumber" name="L2360" href="#L2360">2360</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2361" href="#L2361">2361</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2362" href="#L2362">2362</a> <em class="jxr_javadoccomment">   * @return true if needs composite conversion</em>
<a class="jxr_linenumber" name="L2363" href="#L2363">2363</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2364" href="#L2364">2364</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsCompositeIdConversion(Database database) {
<a class="jxr_linenumber" name="L2365" href="#L2365">2365</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2366" href="#L2366">2366</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_OLD_UUID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2367" href="#L2367">2367</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Composite.TABLE_GROUPER_COMPOSITES, Composite.COLUMN_OLD_ID, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2368" href="#L2368">2368</a>   }  
<a class="jxr_linenumber" name="L2369" href="#L2369">2369</a> 
<a class="jxr_linenumber" name="L2370" href="#L2370">2370</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2371" href="#L2371">2371</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2372" href="#L2372">2372</a> <em class="jxr_javadoccomment">   * @return true if needs composite conversion</em>
<a class="jxr_linenumber" name="L2373" href="#L2373">2373</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2374" href="#L2374">2374</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsMembershipIdConversion(Database database) {
<a class="jxr_linenumber" name="L2375" href="#L2375">2375</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_MEMBERSHIP_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2376" href="#L2376">2376</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_MEMBERSHIP_UUID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2377" href="#L2377">2377</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_ID, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2378" href="#L2378">2378</a>   }  
<a class="jxr_linenumber" name="L2379" href="#L2379">2379</a> 
<a class="jxr_linenumber" name="L2380" href="#L2380">2380</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2381" href="#L2381">2381</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2382" href="#L2382">2382</a> <em class="jxr_javadoccomment">   * @return true if needs composite conversion</em>
<a class="jxr_linenumber" name="L2383" href="#L2383">2383</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2384" href="#L2384">2384</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsMembershipFieldIdConversion(Database database) {
<a class="jxr_linenumber" name="L2385" href="#L2385">2385</a>     <em class="jxr_comment">//no field_id</em>
<a class="jxr_linenumber" name="L2386" href="#L2386">2386</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2387" href="#L2387">2387</a>         Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_FIELD_ID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2388" href="#L2388">2388</a>         <em class="jxr_comment">//has list name and type</em>
<a class="jxr_linenumber" name="L2389" href="#L2389">2389</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2390" href="#L2390">2390</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_LIST_NAME, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2391" href="#L2391">2391</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2392" href="#L2392">2392</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_LIST_TYPE, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2393" href="#L2393">2393</a>         <em class="jxr_comment">//no old list name or type</em>
<a class="jxr_linenumber" name="L2394" href="#L2394">2394</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2395" href="#L2395">2395</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_LIST_NAME, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2396" href="#L2396">2396</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2397" href="#L2397">2397</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OLD_LIST_TYPE, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2398" href="#L2398">2398</a>   }  
<a class="jxr_linenumber" name="L2399" href="#L2399">2399</a> 
<a class="jxr_linenumber" name="L2400" href="#L2400">2400</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2401" href="#L2401">2401</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2402" href="#L2402">2402</a> <em class="jxr_javadoccomment">   * @return true if we're upgrading to use group set</em>
<a class="jxr_linenumber" name="L2403" href="#L2403">2403</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2404" href="#L2404">2404</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsMembershipAndGroupSetConversion(Database database) {
<a class="jxr_linenumber" name="L2405" href="#L2405">2405</a>     <em class="jxr_comment">//has via_id</em>
<a class="jxr_linenumber" name="L2406" href="#L2406">2406</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2407" href="#L2407">2407</a>         Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_VIA_ID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2408" href="#L2408">2408</a>         <em class="jxr_comment">//not has via_composite_id</em>
<a class="jxr_linenumber" name="L2409" href="#L2409">2409</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2410" href="#L2410">2410</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_VIA_COMPOSITE_ID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2411" href="#L2411">2411</a>       <em class="jxr_comment">//not has via bak</em>
<a class="jxr_linenumber" name="L2412" href="#L2412">2412</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2413" href="#L2413">2413</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_VIA_ID_BAK, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2414" href="#L2414">2414</a> 
<a class="jxr_linenumber" name="L2415" href="#L2415">2415</a>       <em class="jxr_comment">//not has owner_group_id, or owner_stem_id</em>
<a class="jxr_linenumber" name="L2416" href="#L2416">2416</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2417" href="#L2417">2417</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OWNER_GROUP_ID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2418" href="#L2418">2418</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2419" href="#L2419">2419</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_OWNER_STEM_ID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2420" href="#L2420">2420</a>       
<a class="jxr_linenumber" name="L2421" href="#L2421">2421</a>       <em class="jxr_comment">// has depth</em>
<a class="jxr_linenumber" name="L2422" href="#L2422">2422</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2423" href="#L2423">2423</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_DEPTH, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2424" href="#L2424">2424</a>       
<a class="jxr_linenumber" name="L2425" href="#L2425">2425</a>       <em class="jxr_comment">// not has depth bak</em>
<a class="jxr_linenumber" name="L2426" href="#L2426">2426</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2427" href="#L2427">2427</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_DEPTH_BAK, false) == <strong class="jxr_keyword">null</strong>    
<a class="jxr_linenumber" name="L2428" href="#L2428">2428</a>       
<a class="jxr_linenumber" name="L2429" href="#L2429">2429</a>       <em class="jxr_comment">// has parent membership</em>
<a class="jxr_linenumber" name="L2430" href="#L2430">2430</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2431" href="#L2431">2431</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_PARENT_MEMBERSHIP, false) != <strong class="jxr_keyword">null</strong>  
<a class="jxr_linenumber" name="L2432" href="#L2432">2432</a>       
<a class="jxr_linenumber" name="L2433" href="#L2433">2433</a>       <em class="jxr_comment">// not has parent membership bak</em>
<a class="jxr_linenumber" name="L2434" href="#L2434">2434</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2435" href="#L2435">2435</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, Membership.COLUMN_PARENT_MEMBERSHIP_BAK, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2436" href="#L2436">2436</a>   }  
<a class="jxr_linenumber" name="L2437" href="#L2437">2437</a> 
<a class="jxr_linenumber" name="L2438" href="#L2438">2438</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2439" href="#L2439">2439</a> <em class="jxr_javadoccomment">   * add group alternate name col</em>
<a class="jxr_linenumber" name="L2440" href="#L2440">2440</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2441" href="#L2441">2441</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L2442" href="#L2442">2442</a> <em class="jxr_javadoccomment">   * @param groupsTable</em>
<a class="jxr_linenumber" name="L2443" href="#L2443">2443</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2444" href="#L2444">2444</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addGroupAlternateNameCol(Database database,
<a class="jxr_linenumber" name="L2445" href="#L2445">2445</a>       <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Table groupsTable) {
<a class="jxr_linenumber" name="L2446" href="#L2446">2446</a>     
<a class="jxr_linenumber" name="L2447" href="#L2447">2447</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, Group.COLUMN_ALTERNATE_NAME, Types.VARCHAR, 
<a class="jxr_linenumber" name="L2448" href="#L2448">2448</a>         ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, false); 
<a class="jxr_linenumber" name="L2449" href="#L2449">2449</a>     
<a class="jxr_linenumber" name="L2450" href="#L2450">2450</a>     <strong class="jxr_keyword">if</strong> (!ddlVersionBean.isSqlServer()) {
<a class="jxr_linenumber" name="L2451" href="#L2451">2451</a>       String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX group_alternate_name_idx "</span> +
<a class="jxr_linenumber" name="L2452" href="#L2452">2452</a>               <span class="jxr_string">"ON grouper_groups (alternate_name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2453" href="#L2453">2453</a>           
<a class="jxr_linenumber" name="L2454" href="#L2454">2454</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, Group.TABLE_GROUPER_GROUPS,
<a class="jxr_linenumber" name="L2455" href="#L2455">2455</a>           <span class="jxr_string">"group_alternate_name_idx"</span>, scriptOverride, false, Group.COLUMN_ALTERNATE_NAME);
<a class="jxr_linenumber" name="L2456" href="#L2456">2456</a>     } 
<a class="jxr_linenumber" name="L2457" href="#L2457">2457</a>   }
<a class="jxr_linenumber" name="L2458" href="#L2458">2458</a>   
<a class="jxr_linenumber" name="L2459" href="#L2459">2459</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2460" href="#L2460">2460</a> <em class="jxr_javadoccomment">   * add stem alternate name col</em>
<a class="jxr_linenumber" name="L2461" href="#L2461">2461</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2462" href="#L2462">2462</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L2463" href="#L2463">2463</a> <em class="jxr_javadoccomment">   * @param stemsTable </em>
<a class="jxr_linenumber" name="L2464" href="#L2464">2464</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2465" href="#L2465">2465</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addStemAlternateNameCol(Database database,
<a class="jxr_linenumber" name="L2466" href="#L2466">2466</a>       <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Table stemsTable) {
<a class="jxr_linenumber" name="L2467" href="#L2467">2467</a>     
<a class="jxr_linenumber" name="L2468" href="#L2468">2468</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, Stem.COLUMN_ALTERNATE_NAME, Types.VARCHAR, 
<a class="jxr_linenumber" name="L2469" href="#L2469">2469</a>         <span class="jxr_string">"255"</span>, false, false); 
<a class="jxr_linenumber" name="L2470" href="#L2470">2470</a>     
<a class="jxr_linenumber" name="L2471" href="#L2471">2471</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemsTable.getName(), 
<a class="jxr_linenumber" name="L2472" href="#L2472">2472</a>         <span class="jxr_string">"stem_alternate_name_idx"</span>, false, Stem.COLUMN_ALTERNATE_NAME);
<a class="jxr_linenumber" name="L2473" href="#L2473">2473</a>   }
<a class="jxr_linenumber" name="L2474" href="#L2474">2474</a>   
<a class="jxr_linenumber" name="L2475" href="#L2475">2475</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2476" href="#L2476">2476</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2477" href="#L2477">2477</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L2478" href="#L2478">2478</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2479" href="#L2479">2479</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addPITSourceIdColumns(Database database, <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L2480" href="#L2480">2480</a>     Table pitMembersTable = GrouperDdlUtils.ddlutilsFindTable(database, PITMember.TABLE_GROUPER_PIT_MEMBERS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2481" href="#L2481">2481</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitMembersTable.getName(), PITMember.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2482" href="#L2482">2482</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2483" href="#L2483">2483</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitMembersTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2484" href="#L2484">2484</a>     }
<a class="jxr_linenumber" name="L2485" href="#L2485">2485</a> 
<a class="jxr_linenumber" name="L2486" href="#L2486">2486</a>     Table pitFieldsTable = GrouperDdlUtils.ddlutilsFindTable(database, PITField.TABLE_GROUPER_PIT_FIELDS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2487" href="#L2487">2487</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitFieldsTable.getName(), PITField.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2488" href="#L2488">2488</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2489" href="#L2489">2489</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitFieldsTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2490" href="#L2490">2490</a>     }
<a class="jxr_linenumber" name="L2491" href="#L2491">2491</a>     
<a class="jxr_linenumber" name="L2492" href="#L2492">2492</a>     Table pitGroupsTable = GrouperDdlUtils.ddlutilsFindTable(database, PITGroup.TABLE_GROUPER_PIT_GROUPS, <strong class="jxr_keyword">true</strong>);    
<a class="jxr_linenumber" name="L2493" href="#L2493">2493</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitGroupsTable.getName(), PITGroup.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2494" href="#L2494">2494</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2495" href="#L2495">2495</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitGroupsTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2496" href="#L2496">2496</a>     }
<a class="jxr_linenumber" name="L2497" href="#L2497">2497</a>     
<a class="jxr_linenumber" name="L2498" href="#L2498">2498</a>     Table pitStemsTable = GrouperDdlUtils.ddlutilsFindTable(database, PITStem.TABLE_GROUPER_PIT_STEMS, <strong class="jxr_keyword">true</strong>);    
<a class="jxr_linenumber" name="L2499" href="#L2499">2499</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitStemsTable.getName(), PITStem.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2500" href="#L2500">2500</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2501" href="#L2501">2501</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitStemsTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2502" href="#L2502">2502</a>     }
<a class="jxr_linenumber" name="L2503" href="#L2503">2503</a>     
<a class="jxr_linenumber" name="L2504" href="#L2504">2504</a>     Table pitAttributeDefTable = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, <strong class="jxr_keyword">true</strong>);    
<a class="jxr_linenumber" name="L2505" href="#L2505">2505</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitAttributeDefTable.getName(), PITAttributeDef.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2506" href="#L2506">2506</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2507" href="#L2507">2507</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitAttributeDefTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2508" href="#L2508">2508</a>     }
<a class="jxr_linenumber" name="L2509" href="#L2509">2509</a>     
<a class="jxr_linenumber" name="L2510" href="#L2510">2510</a>     Table pitMembershipTable = GrouperDdlUtils.ddlutilsFindTable(database, PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);    
<a class="jxr_linenumber" name="L2511" href="#L2511">2511</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitMembershipTable.getName(), PITMembership.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2512" href="#L2512">2512</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2513" href="#L2513">2513</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitMembershipTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2514" href="#L2514">2514</a>     }
<a class="jxr_linenumber" name="L2515" href="#L2515">2515</a>     
<a class="jxr_linenumber" name="L2516" href="#L2516">2516</a>     Table pitGroupSetTable = GrouperDdlUtils.ddlutilsFindTable(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2517" href="#L2517">2517</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitGroupSetTable.getName(), PITGroupSet.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2518" href="#L2518">2518</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2519" href="#L2519">2519</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitGroupSetTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2520" href="#L2520">2520</a>     }
<a class="jxr_linenumber" name="L2521" href="#L2521">2521</a>     
<a class="jxr_linenumber" name="L2522" href="#L2522">2522</a>     Table pitAttributeAssignTable = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, <strong class="jxr_keyword">true</strong>);   
<a class="jxr_linenumber" name="L2523" href="#L2523">2523</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitAttributeAssignTable.getName(), PITAttributeAssign.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2524" href="#L2524">2524</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2525" href="#L2525">2525</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitAttributeAssignTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2526" href="#L2526">2526</a>     }
<a class="jxr_linenumber" name="L2527" href="#L2527">2527</a>     
<a class="jxr_linenumber" name="L2528" href="#L2528">2528</a>     Table pitAttributeAssignValueTable = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE, <strong class="jxr_keyword">true</strong>);  
<a class="jxr_linenumber" name="L2529" href="#L2529">2529</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitAttributeAssignValueTable.getName(), PITAttributeAssignValue.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2530" href="#L2530">2530</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2531" href="#L2531">2531</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitAttributeAssignValueTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2532" href="#L2532">2532</a>     }
<a class="jxr_linenumber" name="L2533" href="#L2533">2533</a>     
<a class="jxr_linenumber" name="L2534" href="#L2534">2534</a>     Table pitAttributeAssignActionTable = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2535" href="#L2535">2535</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitAttributeAssignActionTable.getName(), PITAttributeAssignAction.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2536" href="#L2536">2536</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2537" href="#L2537">2537</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitAttributeAssignActionTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2538" href="#L2538">2538</a>     }
<a class="jxr_linenumber" name="L2539" href="#L2539">2539</a>     
<a class="jxr_linenumber" name="L2540" href="#L2540">2540</a>     Table pitAttributeDefNameTable = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2541" href="#L2541">2541</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitAttributeDefNameTable.getName(), PITAttributeDefName.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2542" href="#L2542">2542</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2543" href="#L2543">2543</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitAttributeDefNameTable.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2544" href="#L2544">2544</a>     }
<a class="jxr_linenumber" name="L2545" href="#L2545">2545</a>     
<a class="jxr_linenumber" name="L2546" href="#L2546">2546</a>     Table pitAttributeDefNameSet = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2547" href="#L2547">2547</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitAttributeDefNameSet.getName(), PITAttributeDefNameSet.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2548" href="#L2548">2548</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2549" href="#L2549">2549</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitAttributeDefNameSet.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2550" href="#L2550">2550</a>     }
<a class="jxr_linenumber" name="L2551" href="#L2551">2551</a>     
<a class="jxr_linenumber" name="L2552" href="#L2552">2552</a>     Table pitAttributeAssignActionSet = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2553" href="#L2553">2553</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitAttributeAssignActionSet.getName(), PITAttributeAssignActionSet.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2554" href="#L2554">2554</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2555" href="#L2555">2555</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitAttributeAssignActionSet.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2556" href="#L2556">2556</a>     }
<a class="jxr_linenumber" name="L2557" href="#L2557">2557</a>     
<a class="jxr_linenumber" name="L2558" href="#L2558">2558</a>     Table pitRoleSet = GrouperDdlUtils.ddlutilsFindTable(database, PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L2559" href="#L2559">2559</a>     <strong class="jxr_keyword">if</strong> (GrouperDdlUtils.ddlutilsFindColumn(database, pitRoleSet.getName(), PITRoleSet.COLUMN_SOURCE_ID, false) == <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L2560" href="#L2560">2560</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_SOURCE_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L2561" href="#L2561">2561</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate "</span> + pitRoleSet.getName() + <span class="jxr_string">" set source_id = id;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L2562" href="#L2562">2562</a>     }
<a class="jxr_linenumber" name="L2563" href="#L2563">2563</a>     
<a class="jxr_linenumber" name="L2564" href="#L2564">2564</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembersTable.getName(), <span class="jxr_string">"pit_member_source_id_idx"</span>, false, PITMember.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2565" href="#L2565">2565</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitFieldsTable.getName(), <span class="jxr_string">"pit_field_source_id_idx"</span>, false, PITField.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2566" href="#L2566">2566</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupsTable.getName(), <span class="jxr_string">"pit_group_source_id_idx"</span>, false, PITGroup.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2567" href="#L2567">2567</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitStemsTable.getName(), <span class="jxr_string">"pit_stem_source_id_idx"</span>, false, PITStem.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2568" href="#L2568">2568</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefTable.getName(), <span class="jxr_string">"pit_attr_def_source_id_idx"</span>, false, PITAttributeDef.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2569" href="#L2569">2569</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), <span class="jxr_string">"pit_ms_source_id_idx"</span>, false, PITMembership.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2570" href="#L2570">2570</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), <span class="jxr_string">"pit_gs_source_id_idx"</span>, false, PITGroupSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2571" href="#L2571">2571</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), <span class="jxr_string">"pit_attr_assn_source_id_idx"</span>, false, PITAttributeAssign.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2572" href="#L2572">2572</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignValueTable.getName(), <span class="jxr_string">"pit_attr_val_source_id_idx"</span>, false, PITAttributeAssignValue.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2573" href="#L2573">2573</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionTable.getName(), <span class="jxr_string">"pit_attr_asn_act_source_id_idx"</span>, false, PITAttributeAssignAction.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2574" href="#L2574">2574</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameTable.getName(), <span class="jxr_string">"pit_attrdef_name_srcid_idx"</span>, false, PITAttributeDefName.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2575" href="#L2575">2575</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameSet.getName(), <span class="jxr_string">"pit_attrdef_name_set_srcid_idx"</span>, false, PITAttributeDefNameSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2576" href="#L2576">2576</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionSet.getName(), <span class="jxr_string">"pit_action_set_source_id_idx"</span>, false, PITAttributeAssignActionSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2577" href="#L2577">2577</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitRoleSet.getName(), <span class="jxr_string">"pit_rs_source_id_idx"</span>, false, PITRoleSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L2578" href="#L2578">2578</a>   }
<a class="jxr_linenumber" name="L2579" href="#L2579">2579</a> 
<a class="jxr_linenumber" name="L2580" href="#L2580">2580</a>   
<a class="jxr_linenumber" name="L2581" href="#L2581">2581</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2582" href="#L2582">2582</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2583" href="#L2583">2583</a> <em class="jxr_javadoccomment">   * @return true if needs composite conversion</em>
<a class="jxr_linenumber" name="L2584" href="#L2584">2584</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2585" href="#L2585">2585</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsAttributeFieldIdConversion(Database database) {
<a class="jxr_linenumber" name="L2586" href="#L2586">2586</a>     <em class="jxr_comment">//no field_id</em>
<a class="jxr_linenumber" name="L2587" href="#L2587">2587</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2588" href="#L2588">2588</a>         Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, Attribute.COLUMN_OLD_FIELD_ID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2589" href="#L2589">2589</a>       <em class="jxr_comment">//has field name</em>
<a class="jxr_linenumber" name="L2590" href="#L2590">2590</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2591" href="#L2591">2591</a>           Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, Attribute.COLUMN_OLD_FIELD_NAME, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2592" href="#L2592">2592</a>       <em class="jxr_comment">//no old field name</em>
<a class="jxr_linenumber" name="L2593" href="#L2593">2593</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, 
<a class="jxr_linenumber" name="L2594" href="#L2594">2594</a>           Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, Attribute.COLUMN_OLDER_FIELD_NAME, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2595" href="#L2595">2595</a>   }  
<a class="jxr_linenumber" name="L2596" href="#L2596">2596</a> 
<a class="jxr_linenumber" name="L2597" href="#L2597">2597</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2598" href="#L2598">2598</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L2599" href="#L2599">2599</a> <em class="jxr_javadoccomment">   * @return true if needs</em>
<a class="jxr_linenumber" name="L2600" href="#L2600">2600</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2601" href="#L2601">2601</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> needsStemIdConversion(Database database) {
<a class="jxr_linenumber" name="L2602" href="#L2602">2602</a>     <strong class="jxr_keyword">return</strong> GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_UUID, false) != <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2603" href="#L2603">2603</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_OLD_UUID, false) == <strong class="jxr_keyword">null</strong>
<a class="jxr_linenumber" name="L2604" href="#L2604">2604</a>       &amp;&amp; GrouperDdlUtils.ddlutilsFindColumn(database, Stem.TABLE_GROUPER_STEMS, Stem.COLUMN_OLD_ID, false) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L2605" href="#L2605">2605</a>   }
<a class="jxr_linenumber" name="L2606" href="#L2606">2606</a>   
<a class="jxr_linenumber" name="L2607" href="#L2607">2607</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2608" href="#L2608">2608</a> <em class="jxr_javadoccomment">   * drop all views</em>
<a class="jxr_linenumber" name="L2609" href="#L2609">2609</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean </em>
<a class="jxr_linenumber" name="L2610" href="#L2610">2610</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2611" href="#L2611">2611</a>   <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> dropAllViews(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L2612" href="#L2612">2612</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attributes_v"</span>, false);
<a class="jxr_linenumber" name="L2613" href="#L2613">2613</a> 
<a class="jxr_linenumber" name="L2614" href="#L2614">2614</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_ext_subj_v"</span>, false);
<a class="jxr_linenumber" name="L2615" href="#L2615">2615</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_ext_subj_invite_v"</span>, false);
<a class="jxr_linenumber" name="L2616" href="#L2616">2616</a> 
<a class="jxr_linenumber" name="L2617" href="#L2617">2617</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_group_v"</span>, false);
<a class="jxr_linenumber" name="L2618" href="#L2618">2618</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_efmship_v"</span>, false);
<a class="jxr_linenumber" name="L2619" href="#L2619">2619</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_stem_v"</span>, false);
<a class="jxr_linenumber" name="L2620" href="#L2620">2620</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_member_v"</span>, false);
<a class="jxr_linenumber" name="L2621" href="#L2621">2621</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_mship_v"</span>, false);
<a class="jxr_linenumber" name="L2622" href="#L2622">2622</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_attrdef_v"</span>, false);
<a class="jxr_linenumber" name="L2623" href="#L2623">2623</a> 
<a class="jxr_linenumber" name="L2624" href="#L2624">2624</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_group_v"</span>, false);
<a class="jxr_linenumber" name="L2625" href="#L2625">2625</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_stem_v"</span>, false);
<a class="jxr_linenumber" name="L2626" href="#L2626">2626</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_member_v"</span>, false);
<a class="jxr_linenumber" name="L2627" href="#L2627">2627</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_mship_v"</span>, false);
<a class="jxr_linenumber" name="L2628" href="#L2628">2628</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_efmship_v"</span>, false);
<a class="jxr_linenumber" name="L2629" href="#L2629">2629</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_attrdef_v"</span>, false);
<a class="jxr_linenumber" name="L2630" href="#L2630">2630</a>     
<a class="jxr_linenumber" name="L2631" href="#L2631">2631</a>     
<a class="jxr_linenumber" name="L2632" href="#L2632">2632</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_group_v"</span>, false);
<a class="jxr_linenumber" name="L2633" href="#L2633">2633</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_efmship_v"</span>, false);
<a class="jxr_linenumber" name="L2634" href="#L2634">2634</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_stem_v"</span>, false);
<a class="jxr_linenumber" name="L2635" href="#L2635">2635</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_member_v"</span>, false);
<a class="jxr_linenumber" name="L2636" href="#L2636">2636</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_mship_v"</span>, false);
<a class="jxr_linenumber" name="L2637" href="#L2637">2637</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_attrdef_v"</span>, false);
<a class="jxr_linenumber" name="L2638" href="#L2638">2638</a> 
<a class="jxr_linenumber" name="L2639" href="#L2639">2639</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_group_v"</span>, false);
<a class="jxr_linenumber" name="L2640" href="#L2640">2640</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_stem_v"</span>, false);
<a class="jxr_linenumber" name="L2641" href="#L2641">2641</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_member_v"</span>, false);
<a class="jxr_linenumber" name="L2642" href="#L2642">2642</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_mship_v"</span>, false);
<a class="jxr_linenumber" name="L2643" href="#L2643">2643</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_efmship_v"</span>, false);
<a class="jxr_linenumber" name="L2644" href="#L2644">2644</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_attrdef_v"</span>, false);
<a class="jxr_linenumber" name="L2645" href="#L2645">2645</a>     
<a class="jxr_linenumber" name="L2646" href="#L2646">2646</a>     
<a class="jxr_linenumber" name="L2647" href="#L2647">2647</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_def_name_set_v"</span>, false);
<a class="jxr_linenumber" name="L2648" href="#L2648">2648</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_assn_action_set_v"</span>, false);
<a class="jxr_linenumber" name="L2649" href="#L2649">2649</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_attr_def_priv_v"</span>, false);
<a class="jxr_linenumber" name="L2650" href="#L2650">2650</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_audit_entry_v"</span>, false);
<a class="jxr_linenumber" name="L2651" href="#L2651">2651</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_change_log_entry_v"</span>, false);
<a class="jxr_linenumber" name="L2652" href="#L2652">2652</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_composites_v"</span>, false);
<a class="jxr_linenumber" name="L2653" href="#L2653">2653</a> 
<a class="jxr_linenumber" name="L2654" href="#L2654">2654</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_groups_types_v"</span>, false);
<a class="jxr_linenumber" name="L2655" href="#L2655">2655</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_groups_v"</span>, false);
<a class="jxr_linenumber" name="L2656" href="#L2656">2656</a>     
<a class="jxr_linenumber" name="L2657" href="#L2657">2657</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_perms_all_v"</span>, false);
<a class="jxr_linenumber" name="L2658" href="#L2658">2658</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_perms_role_v"</span>, false);
<a class="jxr_linenumber" name="L2659" href="#L2659">2659</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_perms_role_subject_v"</span>, false);
<a class="jxr_linenumber" name="L2660" href="#L2660">2660</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_perms_assigned_role_v"</span>, false);
<a class="jxr_linenumber" name="L2661" href="#L2661">2661</a>     
<a class="jxr_linenumber" name="L2662" href="#L2662">2662</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_pit_attr_asn_value_v"</span>, false);
<a class="jxr_linenumber" name="L2663" href="#L2663">2663</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_pit_perms_all_v"</span>, false);
<a class="jxr_linenumber" name="L2664" href="#L2664">2664</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_pit_perms_role_v"</span>, false);
<a class="jxr_linenumber" name="L2665" href="#L2665">2665</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_pit_perms_role_subj_v"</span>, false);
<a class="jxr_linenumber" name="L2666" href="#L2666">2666</a>     
<a class="jxr_linenumber" name="L2667" href="#L2667">2667</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_roles_v"</span>, false);
<a class="jxr_linenumber" name="L2668" href="#L2668">2668</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_memberships_v"</span>, false);
<a class="jxr_linenumber" name="L2669" href="#L2669">2669</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_memberships_lw_v"</span>, false);
<a class="jxr_linenumber" name="L2670" href="#L2670">2670</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_mship_attrdef_lw_v"</span>, false);
<a class="jxr_linenumber" name="L2671" href="#L2671">2671</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_mship_attr_flat_lw_v"</span>, false);
<a class="jxr_linenumber" name="L2672" href="#L2672">2672</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_mship_group_flat_lw_v"</span>, false);
<a class="jxr_linenumber" name="L2673" href="#L2673">2673</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_mship_stem_flat_lw_v"</span>, false);
<a class="jxr_linenumber" name="L2674" href="#L2674">2674</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_mship_stem_lw_v"</span>, false);
<a class="jxr_linenumber" name="L2675" href="#L2675">2675</a>     
<a class="jxr_linenumber" name="L2676" href="#L2676">2676</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_memberships_all_v"</span>, false);
<a class="jxr_linenumber" name="L2677" href="#L2677">2677</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_pit_memberships_all_v"</span>, false);
<a class="jxr_linenumber" name="L2678" href="#L2678">2678</a>     
<a class="jxr_linenumber" name="L2679" href="#L2679">2679</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_role_set_v"</span>, false);
<a class="jxr_linenumber" name="L2680" href="#L2680">2680</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rpt_attributes_v"</span>, false);
<a class="jxr_linenumber" name="L2681" href="#L2681">2681</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rpt_composites_v"</span>, false);
<a class="jxr_linenumber" name="L2682" href="#L2682">2682</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rpt_group_field_v"</span>, false);
<a class="jxr_linenumber" name="L2683" href="#L2683">2683</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rpt_groups_v"</span>, false);
<a class="jxr_linenumber" name="L2684" href="#L2684">2684</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rpt_members_v"</span>, false);
<a class="jxr_linenumber" name="L2685" href="#L2685">2685</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rpt_roles_v"</span>, false);
<a class="jxr_linenumber" name="L2686" href="#L2686">2686</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rpt_stems_v"</span>, false);
<a class="jxr_linenumber" name="L2687" href="#L2687">2687</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rpt_types_v"</span>, false);
<a class="jxr_linenumber" name="L2688" href="#L2688">2688</a>     
<a class="jxr_linenumber" name="L2689" href="#L2689">2689</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_rules_v"</span>, false);
<a class="jxr_linenumber" name="L2690" href="#L2690">2690</a>     
<a class="jxr_linenumber" name="L2691" href="#L2691">2691</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_service_role_v"</span>, false);
<a class="jxr_linenumber" name="L2692" href="#L2692">2692</a>     
<a class="jxr_linenumber" name="L2693" href="#L2693">2693</a>     
<a class="jxr_linenumber" name="L2694" href="#L2694">2694</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_stems_v"</span>, false);
<a class="jxr_linenumber" name="L2695" href="#L2695">2695</a>     GrouperDdlUtils.ddlutilsDropViewIfExists(ddlVersionBean, <span class="jxr_string">"grouper_stem_set_v"</span>, false);
<a class="jxr_linenumber" name="L2696" href="#L2696">2696</a>         
<a class="jxr_linenumber" name="L2697" href="#L2697">2697</a>   }
<a class="jxr_linenumber" name="L2698" href="#L2698">2698</a> 
<a class="jxr_linenumber" name="L2699" href="#L2699">2699</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L2700" href="#L2700">2700</a> <em class="jxr_javadoccomment">   * add all foreign keys</em>
<a class="jxr_linenumber" name="L2701" href="#L2701">2701</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean </em>
<a class="jxr_linenumber" name="L2702" href="#L2702">2702</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L2703" href="#L2703">2703</a>   <strong class="jxr_keyword">public</strong> <strong class="jxr_keyword">void</strong> addAllForeignKeysViewsEtc(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L2704" href="#L2704">2704</a> 
<a class="jxr_linenumber" name="L2705" href="#L2705">2705</a>     Database database = ddlVersionBean.getDatabase();
<a class="jxr_linenumber" name="L2706" href="#L2706">2706</a>     
<a class="jxr_linenumber" name="L2707" href="#L2707">2707</a>     <strong class="jxr_keyword">int</strong> buildingToVersion = ddlVersionBean.getBuildingToVersion();
<a class="jxr_linenumber" name="L2708" href="#L2708">2708</a>     
<a class="jxr_linenumber" name="L2709" href="#L2709">2709</a>     <em class="jxr_comment">//dont do anything if version is less than 2, or if not putting all cols in there</em>
<a class="jxr_linenumber" name="L2710" href="#L2710">2710</a>     <strong class="jxr_keyword">if</strong> (buildingToVersion &lt; V2.getVersion() || !addGroupNameColumns) {
<a class="jxr_linenumber" name="L2711" href="#L2711">2711</a>       <strong class="jxr_keyword">return</strong>;
<a class="jxr_linenumber" name="L2712" href="#L2712">2712</a>     }
<a class="jxr_linenumber" name="L2713" href="#L2713">2713</a>     
<a class="jxr_linenumber" name="L2714" href="#L2714">2714</a>     <em class="jxr_comment">//add comments on tables, comments</em>
<a class="jxr_linenumber" name="L2715" href="#L2715">2715</a>     <em class="jxr_comment">//see if the grouper_ext_loader_log table is there</em>
<a class="jxr_linenumber" name="L2716" href="#L2716">2716</a>     GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,<span class="jxr_string">"grouper_ddl"</span>, 
<a class="jxr_linenumber" name="L2717" href="#L2717">2717</a>         <span class="jxr_string">"holds a record for each database object name, and db version, and java version"</span>);
<a class="jxr_linenumber" name="L2718" href="#L2718">2718</a> 
<a class="jxr_linenumber" name="L2719" href="#L2719">2719</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_ddl"</span>, <span class="jxr_string">"id"</span>, <span class="jxr_string">"uuid of this ddl record"</span>);
<a class="jxr_linenumber" name="L2720" href="#L2720">2720</a>     
<a class="jxr_linenumber" name="L2721" href="#L2721">2721</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_ddl"</span>, <span class="jxr_string">"object_name"</span>, 
<a class="jxr_linenumber" name="L2722" href="#L2722">2722</a>         <span class="jxr_string">"Corresponds to an enum in grouper.ddl package (with Ddl on end), represents one module, "</span> +
<a class="jxr_linenumber" name="L2723" href="#L2723">2723</a>         <span class="jxr_string">"so grouper itself is one object"</span>);
<a class="jxr_linenumber" name="L2724" href="#L2724">2724</a>     
<a class="jxr_linenumber" name="L2725" href="#L2725">2725</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_ddl"</span>, <span class="jxr_string">"db_version"</span>, 
<a class="jxr_linenumber" name="L2726" href="#L2726">2726</a>         <span class="jxr_string">"Version of this object as far as DB knows about"</span>);
<a class="jxr_linenumber" name="L2727" href="#L2727">2727</a>     
<a class="jxr_linenumber" name="L2728" href="#L2728">2728</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_ddl"</span>, <span class="jxr_string">"last_updated"</span>, 
<a class="jxr_linenumber" name="L2729" href="#L2729">2729</a>         <span class="jxr_string">"last update timestamp, string so it can easily be used from update statement"</span>);
<a class="jxr_linenumber" name="L2730" href="#L2730">2730</a> 
<a class="jxr_linenumber" name="L2731" href="#L2731">2731</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_ddl"</span>, <span class="jxr_string">"history"</span>, 
<a class="jxr_linenumber" name="L2732" href="#L2732">2732</a>         <span class="jxr_string">"history of this object name, with most recent first (truncated after 4k)"</span>);
<a class="jxr_linenumber" name="L2733" href="#L2733">2733</a> 
<a class="jxr_linenumber" name="L2734" href="#L2734">2734</a>     {
<a class="jxr_linenumber" name="L2735" href="#L2735">2735</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L2736" href="#L2736">2736</a>           AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, <span class="jxr_string">"list of actions that are available for attributes"</span>);
<a class="jxr_linenumber" name="L2737" href="#L2737">2737</a> 
<a class="jxr_linenumber" name="L2738" href="#L2738">2738</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2739" href="#L2739">2739</a>           AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2740" href="#L2740">2740</a>           AttributeAssignAction.COLUMN_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L2741" href="#L2741">2741</a>           <span class="jxr_string">"attribute definition foreign key"</span>);
<a class="jxr_linenumber" name="L2742" href="#L2742">2742</a> 
<a class="jxr_linenumber" name="L2743" href="#L2743">2743</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2744" href="#L2744">2744</a>           AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2745" href="#L2745">2745</a>           AttributeAssignAction.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L2746" href="#L2746">2746</a>           <span class="jxr_string">"context id in the auditing table"</span>);
<a class="jxr_linenumber" name="L2747" href="#L2747">2747</a> 
<a class="jxr_linenumber" name="L2748" href="#L2748">2748</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2749" href="#L2749">2749</a>           AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2750" href="#L2750">2750</a>           AttributeAssignAction.COLUMN_CREATED_ON, 
<a class="jxr_linenumber" name="L2751" href="#L2751">2751</a>           <span class="jxr_string">"number of millis since 1970 when this was created"</span>);
<a class="jxr_linenumber" name="L2752" href="#L2752">2752</a> 
<a class="jxr_linenumber" name="L2753" href="#L2753">2753</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2754" href="#L2754">2754</a>           AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2755" href="#L2755">2755</a>           AttributeAssignAction.COLUMN_ID, 
<a class="jxr_linenumber" name="L2756" href="#L2756">2756</a>           <span class="jxr_string">"uuid of this record"</span>);
<a class="jxr_linenumber" name="L2757" href="#L2757">2757</a> 
<a class="jxr_linenumber" name="L2758" href="#L2758">2758</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2759" href="#L2759">2759</a>           AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2760" href="#L2760">2760</a>           AttributeAssignAction.COLUMN_LAST_UPDATED, 
<a class="jxr_linenumber" name="L2761" href="#L2761">2761</a>           <span class="jxr_string">"number of millis since 1970 when this was created"</span>);
<a class="jxr_linenumber" name="L2762" href="#L2762">2762</a> 
<a class="jxr_linenumber" name="L2763" href="#L2763">2763</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2764" href="#L2764">2764</a>           AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2765" href="#L2765">2765</a>           AttributeAssignAction.COLUMN_NAME, 
<a class="jxr_linenumber" name="L2766" href="#L2766">2766</a>           <span class="jxr_string">"name of this action"</span>);
<a class="jxr_linenumber" name="L2767" href="#L2767">2767</a> 
<a class="jxr_linenumber" name="L2768" href="#L2768">2768</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2769" href="#L2769">2769</a>           AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2770" href="#L2770">2770</a>           AttributeAssignAction.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L2771" href="#L2771">2771</a>           <span class="jxr_string">"optimistic locking for grouper updates/deletes"</span>);
<a class="jxr_linenumber" name="L2772" href="#L2772">2772</a>     }    
<a class="jxr_linenumber" name="L2773" href="#L2773">2773</a> 
<a class="jxr_linenumber" name="L2774" href="#L2774">2774</a>     {
<a class="jxr_linenumber" name="L2775" href="#L2775">2775</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L2776" href="#L2776">2776</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2777" href="#L2777">2777</a>           <span class="jxr_string">"point in time: list of actions that are available for attributes"</span>);
<a class="jxr_linenumber" name="L2778" href="#L2778">2778</a> 
<a class="jxr_linenumber" name="L2779" href="#L2779">2779</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2780" href="#L2780">2780</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2781" href="#L2781">2781</a>           PITAttributeAssignAction.COLUMN_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L2782" href="#L2782">2782</a>           <span class="jxr_string">"attribute definition foreign key"</span>);
<a class="jxr_linenumber" name="L2783" href="#L2783">2783</a> 
<a class="jxr_linenumber" name="L2784" href="#L2784">2784</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2785" href="#L2785">2785</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2786" href="#L2786">2786</a>           PITAttributeAssignAction.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L2787" href="#L2787">2787</a>           <span class="jxr_string">"context id in the auditing table"</span>);
<a class="jxr_linenumber" name="L2788" href="#L2788">2788</a> 
<a class="jxr_linenumber" name="L2789" href="#L2789">2789</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2790" href="#L2790">2790</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2791" href="#L2791">2791</a>           PITAttributeAssignAction.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L2792" href="#L2792">2792</a>           <span class="jxr_string">"T or F for if this row is active, based on start and end time"</span>);
<a class="jxr_linenumber" name="L2793" href="#L2793">2793</a> 
<a class="jxr_linenumber" name="L2794" href="#L2794">2794</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2795" href="#L2795">2795</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2796" href="#L2796">2796</a>           PITAttributeAssignAction.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L2797" href="#L2797">2797</a>           <span class="jxr_string">"number of millis since 1970 when this row was inserted"</span>);
<a class="jxr_linenumber" name="L2798" href="#L2798">2798</a> 
<a class="jxr_linenumber" name="L2799" href="#L2799">2799</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2800" href="#L2800">2800</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2801" href="#L2801">2801</a>           PITAttributeAssignAction.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L2802" href="#L2802">2802</a>           <span class="jxr_string">"number of millis since 1970 when this row was deleted"</span>);
<a class="jxr_linenumber" name="L2803" href="#L2803">2803</a> 
<a class="jxr_linenumber" name="L2804" href="#L2804">2804</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2805" href="#L2805">2805</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2806" href="#L2806">2806</a>           PITAttributeAssignAction.COLUMN_ID, 
<a class="jxr_linenumber" name="L2807" href="#L2807">2807</a>           <span class="jxr_string">"uuid of this record"</span>);
<a class="jxr_linenumber" name="L2808" href="#L2808">2808</a> 
<a class="jxr_linenumber" name="L2809" href="#L2809">2809</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2810" href="#L2810">2810</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2811" href="#L2811">2811</a>           PITAttributeAssignAction.COLUMN_NAME, 
<a class="jxr_linenumber" name="L2812" href="#L2812">2812</a>           <span class="jxr_string">"name of this action"</span>);
<a class="jxr_linenumber" name="L2813" href="#L2813">2813</a> 
<a class="jxr_linenumber" name="L2814" href="#L2814">2814</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2815" href="#L2815">2815</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L2816" href="#L2816">2816</a>           PITAttributeAssignAction.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L2817" href="#L2817">2817</a>           <span class="jxr_string">"optimistic locking for grouper updates/deletes"</span>);
<a class="jxr_linenumber" name="L2818" href="#L2818">2818</a> 
<a class="jxr_linenumber" name="L2819" href="#L2819">2819</a> 
<a class="jxr_linenumber" name="L2820" href="#L2820">2820</a>     }    
<a class="jxr_linenumber" name="L2821" href="#L2821">2821</a> 
<a class="jxr_linenumber" name="L2822" href="#L2822">2822</a>     {
<a class="jxr_linenumber" name="L2823" href="#L2823">2823</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L2824" href="#L2824">2824</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2825" href="#L2825">2825</a>           <span class="jxr_string">"relationships in action inheritance... e.g. admin action implies read and write actions.  also holds effective relationships"</span>);
<a class="jxr_linenumber" name="L2826" href="#L2826">2826</a> 
<a class="jxr_linenumber" name="L2827" href="#L2827">2827</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2828" href="#L2828">2828</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2829" href="#L2829">2829</a>           AttributeAssignActionSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L2830" href="#L2830">2830</a>           <span class="jxr_string">"uuid for the audit table"</span>);
<a class="jxr_linenumber" name="L2831" href="#L2831">2831</a> 
<a class="jxr_linenumber" name="L2832" href="#L2832">2832</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2833" href="#L2833">2833</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2834" href="#L2834">2834</a>           AttributeAssignActionSet.COLUMN_CREATED_ON, 
<a class="jxr_linenumber" name="L2835" href="#L2835">2835</a>           <span class="jxr_string">"millis since 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L2836" href="#L2836">2836</a> 
<a class="jxr_linenumber" name="L2837" href="#L2837">2837</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2838" href="#L2838">2838</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2839" href="#L2839">2839</a>           AttributeAssignActionSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L2840" href="#L2840">2840</a>           <span class="jxr_string">"number of hops from one node to another, immediate is one"</span>);
<a class="jxr_linenumber" name="L2841" href="#L2841">2841</a> 
<a class="jxr_linenumber" name="L2842" href="#L2842">2842</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2843" href="#L2843">2843</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2844" href="#L2844">2844</a>           AttributeAssignActionSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L2845" href="#L2845">2845</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L2846" href="#L2846">2846</a> 
<a class="jxr_linenumber" name="L2847" href="#L2847">2847</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2848" href="#L2848">2848</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2849" href="#L2849">2849</a>           AttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L2850" href="#L2850">2850</a>           <span class="jxr_string">"uuid foreign key of left hand side of this relationship, if you have this action, it implies the then_has action"</span>);
<a class="jxr_linenumber" name="L2851" href="#L2851">2851</a> 
<a class="jxr_linenumber" name="L2852" href="#L2852">2852</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2853" href="#L2853">2853</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2854" href="#L2854">2854</a>           AttributeAssignActionSet.COLUMN_LAST_UPDATED, 
<a class="jxr_linenumber" name="L2855" href="#L2855">2855</a>           <span class="jxr_string">"millis since 1970 when this was last updated"</span>);
<a class="jxr_linenumber" name="L2856" href="#L2856">2856</a> 
<a class="jxr_linenumber" name="L2857" href="#L2857">2857</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2858" href="#L2858">2858</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2859" href="#L2859">2859</a>           AttributeAssignActionSet.COLUMN_PARENT_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L2860" href="#L2860">2860</a>           <span class="jxr_string">"if this is not immediate, then this is the row that puts this relationship n-1 almost there"</span>);
<a class="jxr_linenumber" name="L2861" href="#L2861">2861</a> 
<a class="jxr_linenumber" name="L2862" href="#L2862">2862</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2863" href="#L2863">2863</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2864" href="#L2864">2864</a>           AttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L2865" href="#L2865">2865</a>           <span class="jxr_string">"uuid foreign key of the right hand side of this relationship, if you have the if_has action, then you have this one"</span>);
<a class="jxr_linenumber" name="L2866" href="#L2866">2866</a> 
<a class="jxr_linenumber" name="L2867" href="#L2867">2867</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2868" href="#L2868">2868</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2869" href="#L2869">2869</a>           AttributeAssignActionSet.COLUMN_TYPE, 
<a class="jxr_linenumber" name="L2870" href="#L2870">2870</a>           <span class="jxr_string">"from enum AttributeAssignActionType: self, immediate, effective"</span>);
<a class="jxr_linenumber" name="L2871" href="#L2871">2871</a> 
<a class="jxr_linenumber" name="L2872" href="#L2872">2872</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2873" href="#L2873">2873</a>           AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2874" href="#L2874">2874</a>           AttributeAssignActionSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L2875" href="#L2875">2875</a>           <span class="jxr_string">"hibernate optimistic locking number for updates and deletes"</span>);
<a class="jxr_linenumber" name="L2876" href="#L2876">2876</a> 
<a class="jxr_linenumber" name="L2877" href="#L2877">2877</a>     }
<a class="jxr_linenumber" name="L2878" href="#L2878">2878</a> 
<a class="jxr_linenumber" name="L2879" href="#L2879">2879</a>     {
<a class="jxr_linenumber" name="L2880" href="#L2880">2880</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L2881" href="#L2881">2881</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2882" href="#L2882">2882</a>           <span class="jxr_string">"point in time relationships in action inheritance... e.g. admin action implies read and write actions.  also holds effective relationships"</span>);
<a class="jxr_linenumber" name="L2883" href="#L2883">2883</a> 
<a class="jxr_linenumber" name="L2884" href="#L2884">2884</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2885" href="#L2885">2885</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2886" href="#L2886">2886</a>           PITAttributeAssignActionSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L2887" href="#L2887">2887</a>           <span class="jxr_string">"uuid for the audit table"</span>);
<a class="jxr_linenumber" name="L2888" href="#L2888">2888</a> 
<a class="jxr_linenumber" name="L2889" href="#L2889">2889</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2890" href="#L2890">2890</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2891" href="#L2891">2891</a>           PITAttributeAssignActionSet.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L2892" href="#L2892">2892</a>           <span class="jxr_string">"T or F for if this row is active based on start and end times"</span>);
<a class="jxr_linenumber" name="L2893" href="#L2893">2893</a> 
<a class="jxr_linenumber" name="L2894" href="#L2894">2894</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2895" href="#L2895">2895</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2896" href="#L2896">2896</a>           PITAttributeAssignActionSet.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L2897" href="#L2897">2897</a>           <span class="jxr_string">"millis since 1970 that this row was inserted"</span>);
<a class="jxr_linenumber" name="L2898" href="#L2898">2898</a> 
<a class="jxr_linenumber" name="L2899" href="#L2899">2899</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2900" href="#L2900">2900</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2901" href="#L2901">2901</a>           PITAttributeAssignActionSet.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L2902" href="#L2902">2902</a>           <span class="jxr_string">"millis since 1970 that this row was deleted"</span>);
<a class="jxr_linenumber" name="L2903" href="#L2903">2903</a> 
<a class="jxr_linenumber" name="L2904" href="#L2904">2904</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2905" href="#L2905">2905</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2906" href="#L2906">2906</a>           PITAttributeAssignActionSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L2907" href="#L2907">2907</a>           <span class="jxr_string">"number of hops from one node to another, immediate is one"</span>);
<a class="jxr_linenumber" name="L2908" href="#L2908">2908</a> 
<a class="jxr_linenumber" name="L2909" href="#L2909">2909</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2910" href="#L2910">2910</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2911" href="#L2911">2911</a>           PITAttributeAssignActionSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L2912" href="#L2912">2912</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L2913" href="#L2913">2913</a> 
<a class="jxr_linenumber" name="L2914" href="#L2914">2914</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2915" href="#L2915">2915</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2916" href="#L2916">2916</a>           PITAttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L2917" href="#L2917">2917</a>           <span class="jxr_string">"uuid foreign key of left hand side of this relationship, if you have this action, it implies the then_has action"</span>);
<a class="jxr_linenumber" name="L2918" href="#L2918">2918</a> 
<a class="jxr_linenumber" name="L2919" href="#L2919">2919</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2920" href="#L2920">2920</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2921" href="#L2921">2921</a>           PITAttributeAssignActionSet.COLUMN_PARENT_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L2922" href="#L2922">2922</a>           <span class="jxr_string">"if this is not immediate, then this is the row that puts this relationship n-1 almost there"</span>);
<a class="jxr_linenumber" name="L2923" href="#L2923">2923</a> 
<a class="jxr_linenumber" name="L2924" href="#L2924">2924</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2925" href="#L2925">2925</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2926" href="#L2926">2926</a>           PITAttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L2927" href="#L2927">2927</a>           <span class="jxr_string">"uuid foreign key of the right hand side of this relationship, if you have the if_has action, then you have this one"</span>);
<a class="jxr_linenumber" name="L2928" href="#L2928">2928</a> 
<a class="jxr_linenumber" name="L2929" href="#L2929">2929</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2930" href="#L2930">2930</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L2931" href="#L2931">2931</a>           PITAttributeAssignActionSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L2932" href="#L2932">2932</a>           <span class="jxr_string">"hibernate optimistic locking number for updates and deletes"</span>);
<a class="jxr_linenumber" name="L2933" href="#L2933">2933</a> 
<a class="jxr_linenumber" name="L2934" href="#L2934">2934</a>     }
<a class="jxr_linenumber" name="L2935" href="#L2935">2935</a> 
<a class="jxr_linenumber" name="L2936" href="#L2936">2936</a>     {
<a class="jxr_linenumber" name="L2937" href="#L2937">2937</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L2938" href="#L2938">2938</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN,
<a class="jxr_linenumber" name="L2939" href="#L2939">2939</a>           <span class="jxr_string">"table that assigns an attribute def name to an owner (one of various types), and has an action"</span>);
<a class="jxr_linenumber" name="L2940" href="#L2940">2940</a> 
<a class="jxr_linenumber" name="L2941" href="#L2941">2941</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2942" href="#L2942">2942</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2943" href="#L2943">2943</a>           AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID,
<a class="jxr_linenumber" name="L2944" href="#L2944">2944</a>           <span class="jxr_string">"foreign key to the action which is in this attribute assignment, or permissions, it could be custom, for attributes, it is assign"</span>);
<a class="jxr_linenumber" name="L2945" href="#L2945">2945</a> 
<a class="jxr_linenumber" name="L2946" href="#L2946">2946</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2947" href="#L2947">2947</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2948" href="#L2948">2948</a>           AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_DELEGATABLE, 
<a class="jxr_linenumber" name="L2949" href="#L2949">2949</a>           <span class="jxr_string">"AttributeAssignDelegatable enum, TRUE, FALSE, or GRANT (can grant to someone else)"</span>);
<a class="jxr_linenumber" name="L2950" href="#L2950">2950</a> 
<a class="jxr_linenumber" name="L2951" href="#L2951">2951</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2952" href="#L2952">2952</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2953" href="#L2953">2953</a>           AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_TYPE, 
<a class="jxr_linenumber" name="L2954" href="#L2954">2954</a>           <span class="jxr_string">"AttributeAssignType enum, what is the type of owner: any_mem, any_mem_asgn, attr_def, attr_def_asgn, group, group_asgn, imm_mem, imm_mem_asgn, mem_asgn, member, stem, stem_asgn"</span>);
<a class="jxr_linenumber" name="L2955" href="#L2955">2955</a> 
<a class="jxr_linenumber" name="L2956" href="#L2956">2956</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2957" href="#L2957">2957</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2958" href="#L2958">2958</a>           AttributeAssign.COLUMN_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L2959" href="#L2959">2959</a>           <span class="jxr_string">"foreign key to the attribute def name is which attribute is assigned"</span>);
<a class="jxr_linenumber" name="L2960" href="#L2960">2960</a> 
<a class="jxr_linenumber" name="L2961" href="#L2961">2961</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2962" href="#L2962">2962</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2963" href="#L2963">2963</a>           AttributeAssign.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L2964" href="#L2964">2964</a>           <span class="jxr_string">"links this row to an audit record"</span>);
<a class="jxr_linenumber" name="L2965" href="#L2965">2965</a> 
<a class="jxr_linenumber" name="L2966" href="#L2966">2966</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2967" href="#L2967">2967</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2968" href="#L2968">2968</a>           AttributeAssign.COLUMN_CREATED_ON, 
<a class="jxr_linenumber" name="L2969" href="#L2969">2969</a>           <span class="jxr_string">"number of millis since 1970 when this was created"</span>);
<a class="jxr_linenumber" name="L2970" href="#L2970">2970</a> 
<a class="jxr_linenumber" name="L2971" href="#L2971">2971</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2972" href="#L2972">2972</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2973" href="#L2973">2973</a>           AttributeAssign.COLUMN_DISABLED_TIME, 
<a class="jxr_linenumber" name="L2974" href="#L2974">2974</a>           <span class="jxr_string">"null if not disabled, or the number of millis since 1970 when this was or will be disabled.  if in the future, Grouper will disable this row at that time."</span>);
<a class="jxr_linenumber" name="L2975" href="#L2975">2975</a> 
<a class="jxr_linenumber" name="L2976" href="#L2976">2976</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2977" href="#L2977">2977</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2978" href="#L2978">2978</a>           AttributeAssign.COLUMN_DISALLOWED, 
<a class="jxr_linenumber" name="L2979" href="#L2979">2979</a>           <span class="jxr_string">"T or F for if disallowed"</span>);
<a class="jxr_linenumber" name="L2980" href="#L2980">2980</a> 
<a class="jxr_linenumber" name="L2981" href="#L2981">2981</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2982" href="#L2982">2982</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2983" href="#L2983">2983</a>           AttributeAssign.COLUMN_ENABLED_TIME, 
<a class="jxr_linenumber" name="L2984" href="#L2984">2984</a>           <span class="jxr_string">"number of millis since 1970 when this was or will be enabled.  if it future then this row will not be enabled"</span>);
<a class="jxr_linenumber" name="L2985" href="#L2985">2985</a> 
<a class="jxr_linenumber" name="L2986" href="#L2986">2986</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2987" href="#L2987">2987</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2988" href="#L2988">2988</a>           AttributeAssign.COLUMN_ID, 
<a class="jxr_linenumber" name="L2989" href="#L2989">2989</a>           <span class="jxr_string">"uuid of row"</span>);
<a class="jxr_linenumber" name="L2990" href="#L2990">2990</a> 
<a class="jxr_linenumber" name="L2991" href="#L2991">2991</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2992" href="#L2992">2992</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2993" href="#L2993">2993</a>           AttributeAssign.COLUMN_LAST_UPDATED, 
<a class="jxr_linenumber" name="L2994" href="#L2994">2994</a>           <span class="jxr_string">"millis since 1970 when this row was last updated"</span>);
<a class="jxr_linenumber" name="L2995" href="#L2995">2995</a> 
<a class="jxr_linenumber" name="L2996" href="#L2996">2996</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L2997" href="#L2997">2997</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L2998" href="#L2998">2998</a>           AttributeAssign.COLUMN_NOTES, 
<a class="jxr_linenumber" name="L2999" href="#L2999">2999</a>           <span class="jxr_string">"notes about this assignment to describe why it exists or anything else, freeform"</span>);
<a class="jxr_linenumber" name="L3000" href="#L3000">3000</a> 
<a class="jxr_linenumber" name="L3001" href="#L3001">3001</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3002" href="#L3002">3002</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3003" href="#L3003">3003</a>           AttributeAssign.COLUMN_OWNER_ATTRIBUTE_ASSIGN_ID, 
<a class="jxr_linenumber" name="L3004" href="#L3004">3004</a>           <span class="jxr_string">"if this is an assignment on an assignment, then this is the foreign key to this table which is which assignment owns this assignment"</span>);
<a class="jxr_linenumber" name="L3005" href="#L3005">3005</a> 
<a class="jxr_linenumber" name="L3006" href="#L3006">3006</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3007" href="#L3007">3007</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3008" href="#L3008">3008</a>           AttributeAssign.COLUMN_OWNER_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L3009" href="#L3009">3009</a>           <span class="jxr_string">"if this is an assignment on an attribute definition, then this is the foreign key to the attribute definition table"</span>);
<a class="jxr_linenumber" name="L3010" href="#L3010">3010</a> 
<a class="jxr_linenumber" name="L3011" href="#L3011">3011</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3012" href="#L3012">3012</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3013" href="#L3013">3013</a>           AttributeAssign.COLUMN_OWNER_GROUP_ID,
<a class="jxr_linenumber" name="L3014" href="#L3014">3014</a>           <span class="jxr_string">"if this is an assignment on a group or role or effective membership then this is the foreign key to the grouper_groups table"</span>);
<a class="jxr_linenumber" name="L3015" href="#L3015">3015</a> 
<a class="jxr_linenumber" name="L3016" href="#L3016">3016</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3017" href="#L3017">3017</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3018" href="#L3018">3018</a>           AttributeAssign.COLUMN_OWNER_MEMBER_ID, 
<a class="jxr_linenumber" name="L3019" href="#L3019">3019</a>           <span class="jxr_string">"if this is an assignment on a member or effective membership, then this is the foreign key to the grouper_members table"</span>);
<a class="jxr_linenumber" name="L3020" href="#L3020">3020</a> 
<a class="jxr_linenumber" name="L3021" href="#L3021">3021</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3022" href="#L3022">3022</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3023" href="#L3023">3023</a>           AttributeAssign.COLUMN_OWNER_MEMBERSHIP_ID, 
<a class="jxr_linenumber" name="L3024" href="#L3024">3024</a>           <span class="jxr_string">"if this is an assignment on an immediate membership, then this is the foreign key to the grouper_memberships table"</span>);
<a class="jxr_linenumber" name="L3025" href="#L3025">3025</a> 
<a class="jxr_linenumber" name="L3026" href="#L3026">3026</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3027" href="#L3027">3027</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3028" href="#L3028">3028</a>           AttributeAssign.COLUMN_OWNER_STEM_ID, 
<a class="jxr_linenumber" name="L3029" href="#L3029">3029</a>           <span class="jxr_string">"if this is an assignment on a stem aka folder, then this is the foreign key to the grouper_stems table"</span>);
<a class="jxr_linenumber" name="L3030" href="#L3030">3030</a> 
<a class="jxr_linenumber" name="L3031" href="#L3031">3031</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3032" href="#L3032">3032</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3033" href="#L3033">3033</a>           AttributeAssign.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L3034" href="#L3034">3034</a>           <span class="jxr_string">"optimistic locking column for hibernate on updates or deletes"</span>);
<a class="jxr_linenumber" name="L3035" href="#L3035">3035</a> 
<a class="jxr_linenumber" name="L3036" href="#L3036">3036</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3037" href="#L3037">3037</a>           AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3038" href="#L3038">3038</a>           AttributeAssign.COLUMN_ENABLED, 
<a class="jxr_linenumber" name="L3039" href="#L3039">3039</a>           <span class="jxr_string">"T or F to indicate if this assignment is enabled"</span>);
<a class="jxr_linenumber" name="L3040" href="#L3040">3040</a> 
<a class="jxr_linenumber" name="L3041" href="#L3041">3041</a>     }
<a class="jxr_linenumber" name="L3042" href="#L3042">3042</a>     {
<a class="jxr_linenumber" name="L3043" href="#L3043">3043</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3044" href="#L3044">3044</a>          PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN,
<a class="jxr_linenumber" name="L3045" href="#L3045">3045</a>           <span class="jxr_string">"point in time table that assigns an attribute def name to an owner (one of various types), and has an action"</span>);
<a class="jxr_linenumber" name="L3046" href="#L3046">3046</a> 
<a class="jxr_linenumber" name="L3047" href="#L3047">3047</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3048" href="#L3048">3048</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3049" href="#L3049">3049</a>           PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID,
<a class="jxr_linenumber" name="L3050" href="#L3050">3050</a>           <span class="jxr_string">"foreign key to the action which is in this attribute assignment, or permissions, it could be custom, for attributes, it is assign"</span>);
<a class="jxr_linenumber" name="L3051" href="#L3051">3051</a> 
<a class="jxr_linenumber" name="L3052" href="#L3052">3052</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3053" href="#L3053">3053</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3054" href="#L3054">3054</a>           PITAttributeAssign.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L3055" href="#L3055">3055</a>           <span class="jxr_string">"T of F for if this row is active or not based on start and end dates"</span>);
<a class="jxr_linenumber" name="L3056" href="#L3056">3056</a> 
<a class="jxr_linenumber" name="L3057" href="#L3057">3057</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3058" href="#L3058">3058</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3059" href="#L3059">3059</a>           PITAttributeAssign.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L3060" href="#L3060">3060</a>           <span class="jxr_string">"number of millis since 1970 that this row was inserted"</span>);
<a class="jxr_linenumber" name="L3061" href="#L3061">3061</a> 
<a class="jxr_linenumber" name="L3062" href="#L3062">3062</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3063" href="#L3063">3063</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3064" href="#L3064">3064</a>           PITAttributeAssign.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L3065" href="#L3065">3065</a>           <span class="jxr_string">"number of millis since 1970 that this row was deleted"</span>);
<a class="jxr_linenumber" name="L3066" href="#L3066">3066</a> 
<a class="jxr_linenumber" name="L3067" href="#L3067">3067</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3068" href="#L3068">3068</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3069" href="#L3069">3069</a>           PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_TYPE, 
<a class="jxr_linenumber" name="L3070" href="#L3070">3070</a>           <span class="jxr_string">"AttributeAssignType enum, what is the type of owner: any_mem, any_mem_asgn, attr_def, attr_def_asgn, group, group_asgn, imm_mem, imm_mem_asgn, mem_asgn, member, stem, stem_asgn"</span>);
<a class="jxr_linenumber" name="L3071" href="#L3071">3071</a> 
<a class="jxr_linenumber" name="L3072" href="#L3072">3072</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3073" href="#L3073">3073</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3074" href="#L3074">3074</a>           PITAttributeAssign.COLUMN_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L3075" href="#L3075">3075</a>           <span class="jxr_string">"foreign key to the attribute def name is which attribute is assigned"</span>);
<a class="jxr_linenumber" name="L3076" href="#L3076">3076</a> 
<a class="jxr_linenumber" name="L3077" href="#L3077">3077</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3078" href="#L3078">3078</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3079" href="#L3079">3079</a>           PITAttributeAssign.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L3080" href="#L3080">3080</a>           <span class="jxr_string">"links this row to an audit record"</span>);
<a class="jxr_linenumber" name="L3081" href="#L3081">3081</a> 
<a class="jxr_linenumber" name="L3082" href="#L3082">3082</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3083" href="#L3083">3083</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3084" href="#L3084">3084</a>           PITAttributeAssign.COLUMN_DISALLOWED, 
<a class="jxr_linenumber" name="L3085" href="#L3085">3085</a>           <span class="jxr_string">"T or F for if disallowed or not"</span>);
<a class="jxr_linenumber" name="L3086" href="#L3086">3086</a> 
<a class="jxr_linenumber" name="L3087" href="#L3087">3087</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3088" href="#L3088">3088</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3089" href="#L3089">3089</a>           PITAttributeAssign.COLUMN_ID, 
<a class="jxr_linenumber" name="L3090" href="#L3090">3090</a>           <span class="jxr_string">"uuid of row"</span>);
<a class="jxr_linenumber" name="L3091" href="#L3091">3091</a> 
<a class="jxr_linenumber" name="L3092" href="#L3092">3092</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3093" href="#L3093">3093</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3094" href="#L3094">3094</a>           PITAttributeAssign.COLUMN_OWNER_ATTRIBUTE_ASSIGN_ID, 
<a class="jxr_linenumber" name="L3095" href="#L3095">3095</a>           <span class="jxr_string">"if this is an assignment on an assignment, then this is the foreign key to this table which is which assignment owns this assignment"</span>);
<a class="jxr_linenumber" name="L3096" href="#L3096">3096</a> 
<a class="jxr_linenumber" name="L3097" href="#L3097">3097</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3098" href="#L3098">3098</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3099" href="#L3099">3099</a>           PITAttributeAssign.COLUMN_OWNER_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L3100" href="#L3100">3100</a>           <span class="jxr_string">"if this is an assignment on an attribute definition, then this is the foreign key to the attribute definition table"</span>);
<a class="jxr_linenumber" name="L3101" href="#L3101">3101</a> 
<a class="jxr_linenumber" name="L3102" href="#L3102">3102</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3103" href="#L3103">3103</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3104" href="#L3104">3104</a>           PITAttributeAssign.COLUMN_OWNER_GROUP_ID,
<a class="jxr_linenumber" name="L3105" href="#L3105">3105</a>           <span class="jxr_string">"if this is an assignment on a group or role or effective membership then this is the foreign key to the grouper_pit_groups table"</span>);
<a class="jxr_linenumber" name="L3106" href="#L3106">3106</a> 
<a class="jxr_linenumber" name="L3107" href="#L3107">3107</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3108" href="#L3108">3108</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3109" href="#L3109">3109</a>           PITAttributeAssign.COLUMN_OWNER_MEMBER_ID, 
<a class="jxr_linenumber" name="L3110" href="#L3110">3110</a>           <span class="jxr_string">"if this is an assignment on a member or effective membership, then this is the foreign key to the grouper_pit_members table"</span>);
<a class="jxr_linenumber" name="L3111" href="#L3111">3111</a> 
<a class="jxr_linenumber" name="L3112" href="#L3112">3112</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3113" href="#L3113">3113</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3114" href="#L3114">3114</a>           PITAttributeAssign.COLUMN_OWNER_MEMBERSHIP_ID, 
<a class="jxr_linenumber" name="L3115" href="#L3115">3115</a>           <span class="jxr_string">"if this is an assignment on an immediate membership, then this is the foreign key to the grouper_pit_memberships table"</span>);
<a class="jxr_linenumber" name="L3116" href="#L3116">3116</a> 
<a class="jxr_linenumber" name="L3117" href="#L3117">3117</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3118" href="#L3118">3118</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3119" href="#L3119">3119</a>           PITAttributeAssign.COLUMN_OWNER_STEM_ID, 
<a class="jxr_linenumber" name="L3120" href="#L3120">3120</a>           <span class="jxr_string">"if this is an assignment on a stem aka folder, then this is the foreign key to the grouper_pit_stems table"</span>);
<a class="jxr_linenumber" name="L3121" href="#L3121">3121</a> 
<a class="jxr_linenumber" name="L3122" href="#L3122">3122</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3123" href="#L3123">3123</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L3124" href="#L3124">3124</a>           PITAttributeAssign.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L3125" href="#L3125">3125</a>           <span class="jxr_string">"optimistic locking column for hibernate on updates or deletes"</span>);
<a class="jxr_linenumber" name="L3126" href="#L3126">3126</a> 
<a class="jxr_linenumber" name="L3127" href="#L3127">3127</a>     }
<a class="jxr_linenumber" name="L3128" href="#L3128">3128</a> 
<a class="jxr_linenumber" name="L3129" href="#L3129">3129</a>     {
<a class="jxr_linenumber" name="L3130" href="#L3130">3130</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3131" href="#L3131">3131</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3132" href="#L3132">3132</a>           <span class="jxr_string">"table that holds attribute definitions, which is the first part of the attribute framework"</span>);
<a class="jxr_linenumber" name="L3133" href="#L3133">3133</a> 
<a class="jxr_linenumber" name="L3134" href="#L3134">3134</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3135" href="#L3135">3135</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3136" href="#L3136">3136</a>           AttributeDef.COLUMN_ASSIGN_TO_ATTRIBUTE_DEF, <span class="jxr_string">"T or F if you can assign this attribute to an attribute definition"</span>);
<a class="jxr_linenumber" name="L3137" href="#L3137">3137</a> 
<a class="jxr_linenumber" name="L3138" href="#L3138">3138</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3139" href="#L3139">3139</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3140" href="#L3140">3140</a>           AttributeDef.COLUMN_ASSIGN_TO_ATTRIBUTE_DEF_ASSN, <span class="jxr_string">"T or F if you can assign this attribute to an assignment on an attribute definition"</span>);
<a class="jxr_linenumber" name="L3141" href="#L3141">3141</a> 
<a class="jxr_linenumber" name="L3142" href="#L3142">3142</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3143" href="#L3143">3143</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3144" href="#L3144">3144</a>           AttributeDef.COLUMN_ASSIGN_TO_EFF_MEMBERSHIP, <span class="jxr_string">"T or F if you you can assign this attribute to an effective membership: group/member pair"</span>);
<a class="jxr_linenumber" name="L3145" href="#L3145">3145</a> 
<a class="jxr_linenumber" name="L3146" href="#L3146">3146</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3147" href="#L3147">3147</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3148" href="#L3148">3148</a>           AttributeDef.COLUMN_ASSIGN_TO_EFF_MEMBERSHIP_ASSN, <span class="jxr_string">"T or F if you can assign this attribute to an effective membership attribute assignment: group/member pair"</span>);
<a class="jxr_linenumber" name="L3149" href="#L3149">3149</a> 
<a class="jxr_linenumber" name="L3150" href="#L3150">3150</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3151" href="#L3151">3151</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3152" href="#L3152">3152</a>           AttributeDef.COLUMN_ASSIGN_TO_GROUP, <span class="jxr_string">"T or F if you can assign this attribute to a group or role"</span>);
<a class="jxr_linenumber" name="L3153" href="#L3153">3153</a> 
<a class="jxr_linenumber" name="L3154" href="#L3154">3154</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3155" href="#L3155">3155</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3156" href="#L3156">3156</a>           AttributeDef.COLUMN_ASSIGN_TO_GROUP_ASSN, <span class="jxr_string">"T or F if you can assign this attribute to an assignment on a group or role"</span>);
<a class="jxr_linenumber" name="L3157" href="#L3157">3157</a> 
<a class="jxr_linenumber" name="L3158" href="#L3158">3158</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3159" href="#L3159">3159</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3160" href="#L3160">3160</a>           AttributeDef.COLUMN_ASSIGN_TO_IMM_MEMBERSHIP, <span class="jxr_string">"T or F if you can assign this attribute to an immediate membership"</span>);
<a class="jxr_linenumber" name="L3161" href="#L3161">3161</a> 
<a class="jxr_linenumber" name="L3162" href="#L3162">3162</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3163" href="#L3163">3163</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3164" href="#L3164">3164</a>           AttributeDef.COLUMN_ASSIGN_TO_IMM_MEMBERSHIP_ASSN, <span class="jxr_string">"T or F if you can assign this attribute to an attribute assignment on an immediate membership"</span>);
<a class="jxr_linenumber" name="L3165" href="#L3165">3165</a> 
<a class="jxr_linenumber" name="L3166" href="#L3166">3166</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3167" href="#L3167">3167</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3168" href="#L3168">3168</a>           AttributeDef.COLUMN_ASSIGN_TO_MEMBER, <span class="jxr_string">"T or F if you can assign this attribute to a member"</span>);
<a class="jxr_linenumber" name="L3169" href="#L3169">3169</a> 
<a class="jxr_linenumber" name="L3170" href="#L3170">3170</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3171" href="#L3171">3171</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3172" href="#L3172">3172</a>           AttributeDef.COLUMN_ASSIGN_TO_MEMBER_ASSN, <span class="jxr_string">"T or F if you can assign this attribute to an assignment on a member"</span>);
<a class="jxr_linenumber" name="L3173" href="#L3173">3173</a> 
<a class="jxr_linenumber" name="L3174" href="#L3174">3174</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3175" href="#L3175">3175</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3176" href="#L3176">3176</a>           AttributeDef.COLUMN_ASSIGN_TO_STEM, <span class="jxr_string">"T or F if you can assign this attribute to a stem/folder"</span>);
<a class="jxr_linenumber" name="L3177" href="#L3177">3177</a> 
<a class="jxr_linenumber" name="L3178" href="#L3178">3178</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3179" href="#L3179">3179</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3180" href="#L3180">3180</a>           AttributeDef.COLUMN_ASSIGN_TO_STEM_ASSN, <span class="jxr_string">"T or F if you can assign this attribute to an assignment on an attribute definition"</span>);
<a class="jxr_linenumber" name="L3181" href="#L3181">3181</a> 
<a class="jxr_linenumber" name="L3182" href="#L3182">3182</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3183" href="#L3183">3183</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3184" href="#L3184">3184</a>           AttributeDef.COLUMN_ATTRIBUTE_DEF_PUBLIC, <span class="jxr_string">"T or F if this is a public attribute"</span>);
<a class="jxr_linenumber" name="L3185" href="#L3185">3185</a> 
<a class="jxr_linenumber" name="L3186" href="#L3186">3186</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3187" href="#L3187">3187</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3188" href="#L3188">3188</a>           AttributeDef.COLUMN_ATTRIBUTE_DEF_TYPE, <span class="jxr_string">"AttributeDefType enum: attr, domain, type, limit, perm"</span>);
<a class="jxr_linenumber" name="L3189" href="#L3189">3189</a> 
<a class="jxr_linenumber" name="L3190" href="#L3190">3190</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3191" href="#L3191">3191</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3192" href="#L3192">3192</a>           AttributeDef.COLUMN_CONTEXT_ID, <span class="jxr_string">"links back to the grouper audit entry table"</span>);
<a class="jxr_linenumber" name="L3193" href="#L3193">3193</a> 
<a class="jxr_linenumber" name="L3194" href="#L3194">3194</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3195" href="#L3195">3195</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3196" href="#L3196">3196</a>           AttributeDef.COLUMN_CREATED_ON, <span class="jxr_string">"number of millis since 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L3197" href="#L3197">3197</a> 
<a class="jxr_linenumber" name="L3198" href="#L3198">3198</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3199" href="#L3199">3199</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3200" href="#L3200">3200</a>           AttributeDef.COLUMN_CREATOR_ID, <span class="jxr_string">"member id of the subject who created this row"</span>);
<a class="jxr_linenumber" name="L3201" href="#L3201">3201</a> 
<a class="jxr_linenumber" name="L3202" href="#L3202">3202</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3203" href="#L3203">3203</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3204" href="#L3204">3204</a>           AttributeDef.COLUMN_DESCRIPTION, <span class="jxr_string">"freeform text that describes this attribute definition"</span>);
<a class="jxr_linenumber" name="L3205" href="#L3205">3205</a> 
<a class="jxr_linenumber" name="L3206" href="#L3206">3206</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3207" href="#L3207">3207</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3208" href="#L3208">3208</a>           AttributeDef.COLUMN_EXTENSION, <span class="jxr_string">"system name in the folder of this attribute definition"</span>);
<a class="jxr_linenumber" name="L3209" href="#L3209">3209</a> 
<a class="jxr_linenumber" name="L3210" href="#L3210">3210</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3211" href="#L3211">3211</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3212" href="#L3212">3212</a>           AttributeDef.COLUMN_ID, <span class="jxr_string">"uuid of this record"</span>);
<a class="jxr_linenumber" name="L3213" href="#L3213">3213</a> 
<a class="jxr_linenumber" name="L3214" href="#L3214">3214</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3215" href="#L3215">3215</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3216" href="#L3216">3216</a>           AttributeDef.COLUMN_LAST_UPDATED, <span class="jxr_string">"number of millis since 1970 when this row was last updated"</span>);
<a class="jxr_linenumber" name="L3217" href="#L3217">3217</a> 
<a class="jxr_linenumber" name="L3218" href="#L3218">3218</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3219" href="#L3219">3219</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3220" href="#L3220">3220</a>           AttributeDef.COLUMN_MULTI_ASSIGNABLE, <span class="jxr_string">"T or F if you can assign this attribute to the same owner twice"</span>);
<a class="jxr_linenumber" name="L3221" href="#L3221">3221</a> 
<a class="jxr_linenumber" name="L3222" href="#L3222">3222</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3223" href="#L3223">3223</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3224" href="#L3224">3224</a>           AttributeDef.COLUMN_MULTI_VALUED, <span class="jxr_string">"T or F if this assignment can have multiple values"</span>);
<a class="jxr_linenumber" name="L3225" href="#L3225">3225</a> 
<a class="jxr_linenumber" name="L3226" href="#L3226">3226</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3227" href="#L3227">3227</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3228" href="#L3228">3228</a>           AttributeDef.COLUMN_NAME, <span class="jxr_string">"full system name including system folder names separated by colons"</span>);
<a class="jxr_linenumber" name="L3229" href="#L3229">3229</a> 
<a class="jxr_linenumber" name="L3230" href="#L3230">3230</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3231" href="#L3231">3231</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3232" href="#L3232">3232</a>           AttributeDef.COLUMN_STEM_ID, <span class="jxr_string">"uuid of the stem/folder where this attribute definition lives"</span>);
<a class="jxr_linenumber" name="L3233" href="#L3233">3233</a> 
<a class="jxr_linenumber" name="L3234" href="#L3234">3234</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3235" href="#L3235">3235</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3236" href="#L3236">3236</a>           AttributeDef.COLUMN_VALUE_TYPE, <span class="jxr_string">"AttributeAssignValueType enum: floating, integerValue, memberId, nullValue, string"</span>);
<a class="jxr_linenumber" name="L3237" href="#L3237">3237</a> 
<a class="jxr_linenumber" name="L3238" href="#L3238">3238</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3239" href="#L3239">3239</a>           AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L3240" href="#L3240">3240</a>           AttributeDef.COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate version number for optimistic locking during updates and deletes"</span>);
<a class="jxr_linenumber" name="L3241" href="#L3241">3241</a> 
<a class="jxr_linenumber" name="L3242" href="#L3242">3242</a>     }
<a class="jxr_linenumber" name="L3243" href="#L3243">3243</a> 
<a class="jxr_linenumber" name="L3244" href="#L3244">3244</a>     {
<a class="jxr_linenumber" name="L3245" href="#L3245">3245</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3246" href="#L3246">3246</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3247" href="#L3247">3247</a>           <span class="jxr_string">"point in time table that holds attribute definitions, which is the first part of the attribute framework"</span>);
<a class="jxr_linenumber" name="L3248" href="#L3248">3248</a> 
<a class="jxr_linenumber" name="L3249" href="#L3249">3249</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3250" href="#L3250">3250</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3251" href="#L3251">3251</a>           PITAttributeDef.COLUMN_ATTRIBUTE_DEF_TYPE, 
<a class="jxr_linenumber" name="L3252" href="#L3252">3252</a>           <span class="jxr_string">"AttributeDefType enum: attr, domain, type, limit, perm"</span>);
<a class="jxr_linenumber" name="L3253" href="#L3253">3253</a> 
<a class="jxr_linenumber" name="L3254" href="#L3254">3254</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3255" href="#L3255">3255</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3256" href="#L3256">3256</a>           PITAttributeDef.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L3257" href="#L3257">3257</a>           <span class="jxr_string">"links back to the grouper audit entry table"</span>);
<a class="jxr_linenumber" name="L3258" href="#L3258">3258</a> 
<a class="jxr_linenumber" name="L3259" href="#L3259">3259</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3260" href="#L3260">3260</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3261" href="#L3261">3261</a>           PITAttributeDef.COLUMN_ID, 
<a class="jxr_linenumber" name="L3262" href="#L3262">3262</a>           <span class="jxr_string">"uuid of this record"</span>);
<a class="jxr_linenumber" name="L3263" href="#L3263">3263</a> 
<a class="jxr_linenumber" name="L3264" href="#L3264">3264</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3265" href="#L3265">3265</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3266" href="#L3266">3266</a>           PITAttributeDef.COLUMN_NAME, 
<a class="jxr_linenumber" name="L3267" href="#L3267">3267</a>           <span class="jxr_string">"full system name including system folder names separated by colons"</span>);
<a class="jxr_linenumber" name="L3268" href="#L3268">3268</a> 
<a class="jxr_linenumber" name="L3269" href="#L3269">3269</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3270" href="#L3270">3270</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3271" href="#L3271">3271</a>           PITAttributeDef.COLUMN_STEM_ID, 
<a class="jxr_linenumber" name="L3272" href="#L3272">3272</a>           <span class="jxr_string">"uuid of the stem/folder where this attribute definition lives"</span>);
<a class="jxr_linenumber" name="L3273" href="#L3273">3273</a> 
<a class="jxr_linenumber" name="L3274" href="#L3274">3274</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3275" href="#L3275">3275</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3276" href="#L3276">3276</a>           PITAttributeDef.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L3277" href="#L3277">3277</a>           <span class="jxr_string">"hibernate version number for optimistic locking during updates and deletes"</span>);
<a class="jxr_linenumber" name="L3278" href="#L3278">3278</a> 
<a class="jxr_linenumber" name="L3279" href="#L3279">3279</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3280" href="#L3280">3280</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3281" href="#L3281">3281</a>           PITAttributeDef.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L3282" href="#L3282">3282</a>           <span class="jxr_string">"T or F if this row is active based on start and end time"</span>);
<a class="jxr_linenumber" name="L3283" href="#L3283">3283</a> 
<a class="jxr_linenumber" name="L3284" href="#L3284">3284</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3285" href="#L3285">3285</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3286" href="#L3286">3286</a>           PITAttributeDef.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L3287" href="#L3287">3287</a>           <span class="jxr_string">"millis since 1970 that this row was inserted"</span>);
<a class="jxr_linenumber" name="L3288" href="#L3288">3288</a> 
<a class="jxr_linenumber" name="L3289" href="#L3289">3289</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3290" href="#L3290">3290</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF,
<a class="jxr_linenumber" name="L3291" href="#L3291">3291</a>           PITAttributeDef.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L3292" href="#L3292">3292</a>           <span class="jxr_string">"millis since 1970 that this row was deleted"</span>);
<a class="jxr_linenumber" name="L3293" href="#L3293">3293</a> 
<a class="jxr_linenumber" name="L3294" href="#L3294">3294</a>     }
<a class="jxr_linenumber" name="L3295" href="#L3295">3295</a> 
<a class="jxr_linenumber" name="L3296" href="#L3296">3296</a>     {
<a class="jxr_linenumber" name="L3297" href="#L3297">3297</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3298" href="#L3298">3298</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME,
<a class="jxr_linenumber" name="L3299" href="#L3299">3299</a>           <span class="jxr_string">"table that holds attribute names, which is the second part of the attribute framework, along with the attribute definition"</span>);
<a class="jxr_linenumber" name="L3300" href="#L3300">3300</a> 
<a class="jxr_linenumber" name="L3301" href="#L3301">3301</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3302" href="#L3302">3302</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3303" href="#L3303">3303</a>           AttributeDefName.COLUMN_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L3304" href="#L3304">3304</a>           <span class="jxr_string">"uuid foreign key links back to the attribute definition"</span>);
<a class="jxr_linenumber" name="L3305" href="#L3305">3305</a> 
<a class="jxr_linenumber" name="L3306" href="#L3306">3306</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3307" href="#L3307">3307</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3308" href="#L3308">3308</a>           AttributeDefName.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L3309" href="#L3309">3309</a>           <span class="jxr_string">"uuid that links to the audit entry table"</span>);
<a class="jxr_linenumber" name="L3310" href="#L3310">3310</a> 
<a class="jxr_linenumber" name="L3311" href="#L3311">3311</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3312" href="#L3312">3312</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3313" href="#L3313">3313</a>           AttributeDefName.COLUMN_CREATED_ON, 
<a class="jxr_linenumber" name="L3314" href="#L3314">3314</a>           <span class="jxr_string">"number of millis since 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L3315" href="#L3315">3315</a> 
<a class="jxr_linenumber" name="L3316" href="#L3316">3316</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3317" href="#L3317">3317</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3318" href="#L3318">3318</a>           AttributeDefName.COLUMN_DESCRIPTION, 
<a class="jxr_linenumber" name="L3319" href="#L3319">3319</a>           <span class="jxr_string">"freeform description of this attribute name"</span>);
<a class="jxr_linenumber" name="L3320" href="#L3320">3320</a> 
<a class="jxr_linenumber" name="L3321" href="#L3321">3321</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3322" href="#L3322">3322</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3323" href="#L3323">3323</a>           AttributeDefName.COLUMN_DISPLAY_EXTENSION, 
<a class="jxr_linenumber" name="L3324" href="#L3324">3324</a>           <span class="jxr_string">"display name (can change) of this attribute name, not including the stem/folder names"</span>);
<a class="jxr_linenumber" name="L3325" href="#L3325">3325</a> 
<a class="jxr_linenumber" name="L3326" href="#L3326">3326</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3327" href="#L3327">3327</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3328" href="#L3328">3328</a>           AttributeDefName.COLUMN_DISPLAY_NAME, 
<a class="jxr_linenumber" name="L3329" href="#L3329">3329</a>           <span class="jxr_string">"display name (can change) of this attribute name, including the display names of folders separated by colons"</span>);
<a class="jxr_linenumber" name="L3330" href="#L3330">3330</a> 
<a class="jxr_linenumber" name="L3331" href="#L3331">3331</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3332" href="#L3332">3332</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3333" href="#L3333">3333</a>           AttributeDefName.COLUMN_EXTENSION, 
<a class="jxr_linenumber" name="L3334" href="#L3334">3334</a>           <span class="jxr_string">"system name (should not change often) of this attribute name, not including the stem/folder names"</span>);
<a class="jxr_linenumber" name="L3335" href="#L3335">3335</a> 
<a class="jxr_linenumber" name="L3336" href="#L3336">3336</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3337" href="#L3337">3337</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3338" href="#L3338">3338</a>           AttributeDefName.COLUMN_ID, 
<a class="jxr_linenumber" name="L3339" href="#L3339">3339</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3340" href="#L3340">3340</a> 
<a class="jxr_linenumber" name="L3341" href="#L3341">3341</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3342" href="#L3342">3342</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3343" href="#L3343">3343</a>           AttributeDefName.COLUMN_LAST_UPDATED, 
<a class="jxr_linenumber" name="L3344" href="#L3344">3344</a>           <span class="jxr_string">"number of millis since 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L3345" href="#L3345">3345</a> 
<a class="jxr_linenumber" name="L3346" href="#L3346">3346</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3347" href="#L3347">3347</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3348" href="#L3348">3348</a>           AttributeDefName.COLUMN_NAME, 
<a class="jxr_linenumber" name="L3349" href="#L3349">3349</a>           <span class="jxr_string">"system name (should not change often) of this attribute name, including the stem/folder system names separated by colons"</span>);
<a class="jxr_linenumber" name="L3350" href="#L3350">3350</a> 
<a class="jxr_linenumber" name="L3351" href="#L3351">3351</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3352" href="#L3352">3352</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3353" href="#L3353">3353</a>           AttributeDefName.COLUMN_STEM_ID, 
<a class="jxr_linenumber" name="L3354" href="#L3354">3354</a>           <span class="jxr_string">"uuid of the stem where this attribute name lives"</span>);
<a class="jxr_linenumber" name="L3355" href="#L3355">3355</a> 
<a class="jxr_linenumber" name="L3356" href="#L3356">3356</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3357" href="#L3357">3357</a>           AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3358" href="#L3358">3358</a>           AttributeDefName.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L3359" href="#L3359">3359</a>           <span class="jxr_string">"optimistic locking column for this row for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3360" href="#L3360">3360</a>     }
<a class="jxr_linenumber" name="L3361" href="#L3361">3361</a> 
<a class="jxr_linenumber" name="L3362" href="#L3362">3362</a>     {
<a class="jxr_linenumber" name="L3363" href="#L3363">3363</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3364" href="#L3364">3364</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME,
<a class="jxr_linenumber" name="L3365" href="#L3365">3365</a>           <span class="jxr_string">"point in time table that holds attribute names, which is the second part of the attribute framework, along with the attribute definition"</span>);
<a class="jxr_linenumber" name="L3366" href="#L3366">3366</a> 
<a class="jxr_linenumber" name="L3367" href="#L3367">3367</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3368" href="#L3368">3368</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3369" href="#L3369">3369</a>           PITAttributeDefName.COLUMN_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L3370" href="#L3370">3370</a>           <span class="jxr_string">"uuid foreign key links back to the attribute definition"</span>);
<a class="jxr_linenumber" name="L3371" href="#L3371">3371</a> 
<a class="jxr_linenumber" name="L3372" href="#L3372">3372</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3373" href="#L3373">3373</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3374" href="#L3374">3374</a>           PITAttributeDefName.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L3375" href="#L3375">3375</a>           <span class="jxr_string">"uuid that links to the audit entry table"</span>);
<a class="jxr_linenumber" name="L3376" href="#L3376">3376</a> 
<a class="jxr_linenumber" name="L3377" href="#L3377">3377</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3378" href="#L3378">3378</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3379" href="#L3379">3379</a>           PITAttributeDefName.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L3380" href="#L3380">3380</a>           <span class="jxr_string">"T or F if this row is active based on start and end times"</span>);
<a class="jxr_linenumber" name="L3381" href="#L3381">3381</a> 
<a class="jxr_linenumber" name="L3382" href="#L3382">3382</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3383" href="#L3383">3383</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3384" href="#L3384">3384</a>           PITAttributeDefName.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L3385" href="#L3385">3385</a>           <span class="jxr_string">"millis since 1970 that this row was inserted"</span>);
<a class="jxr_linenumber" name="L3386" href="#L3386">3386</a> 
<a class="jxr_linenumber" name="L3387" href="#L3387">3387</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3388" href="#L3388">3388</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3389" href="#L3389">3389</a>           PITAttributeDefName.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L3390" href="#L3390">3390</a>           <span class="jxr_string">"millis since 1970 that this row was deleted"</span>);
<a class="jxr_linenumber" name="L3391" href="#L3391">3391</a> 
<a class="jxr_linenumber" name="L3392" href="#L3392">3392</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3393" href="#L3393">3393</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3394" href="#L3394">3394</a>           PITAttributeDefName.COLUMN_ID, 
<a class="jxr_linenumber" name="L3395" href="#L3395">3395</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3396" href="#L3396">3396</a> 
<a class="jxr_linenumber" name="L3397" href="#L3397">3397</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3398" href="#L3398">3398</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3399" href="#L3399">3399</a>           PITAttributeDefName.COLUMN_NAME, 
<a class="jxr_linenumber" name="L3400" href="#L3400">3400</a>           <span class="jxr_string">"system name (should not change often) of this attribute name, including the stem/folder system names separated by colons"</span>);
<a class="jxr_linenumber" name="L3401" href="#L3401">3401</a> 
<a class="jxr_linenumber" name="L3402" href="#L3402">3402</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3403" href="#L3403">3403</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3404" href="#L3404">3404</a>           PITAttributeDefName.COLUMN_STEM_ID, 
<a class="jxr_linenumber" name="L3405" href="#L3405">3405</a>           <span class="jxr_string">"uuid of the stem where this attribute name lives"</span>);
<a class="jxr_linenumber" name="L3406" href="#L3406">3406</a> 
<a class="jxr_linenumber" name="L3407" href="#L3407">3407</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3408" href="#L3408">3408</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L3409" href="#L3409">3409</a>           PITAttributeDefName.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L3410" href="#L3410">3410</a>           <span class="jxr_string">"optimistic locking column for this row for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3411" href="#L3411">3411</a>     }
<a class="jxr_linenumber" name="L3412" href="#L3412">3412</a> 
<a class="jxr_linenumber" name="L3413" href="#L3413">3413</a>     {
<a class="jxr_linenumber" name="L3414" href="#L3414">3414</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3415" href="#L3415">3415</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3416" href="#L3416">3416</a>           <span class="jxr_string">"table that holds rules for where attributes can be assigned (i.e. only to objects in a certain folder etc)"</span>);
<a class="jxr_linenumber" name="L3417" href="#L3417">3417</a> 
<a class="jxr_linenumber" name="L3418" href="#L3418">3418</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3419" href="#L3419">3419</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3420" href="#L3420">3420</a>           AttributeDefScope.COLUMN_ATTRIBUTE_DEF_ID, <span class="jxr_string">"foreign key to the uuid of the attribute definition: grouper_attribute_def"</span>);
<a class="jxr_linenumber" name="L3421" href="#L3421">3421</a> 
<a class="jxr_linenumber" name="L3422" href="#L3422">3422</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3423" href="#L3423">3423</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3424" href="#L3424">3424</a>           AttributeDefScope.COLUMN_ATTRIBUTE_DEF_SCOPE_TYPE, 
<a class="jxr_linenumber" name="L3425" href="#L3425">3425</a>           <span class="jxr_string">"AttributeDefScopeType enum: attributeDefNameIdAssigned, idEquals, inStem, nameEquals, nameLike, sourceId"</span>);
<a class="jxr_linenumber" name="L3426" href="#L3426">3426</a> 
<a class="jxr_linenumber" name="L3427" href="#L3427">3427</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3428" href="#L3428">3428</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3429" href="#L3429">3429</a>           AttributeDefScope.COLUMN_CONTEXT_ID, <span class="jxr_string">"uuid of the audit entry"</span>);
<a class="jxr_linenumber" name="L3430" href="#L3430">3430</a> 
<a class="jxr_linenumber" name="L3431" href="#L3431">3431</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3432" href="#L3432">3432</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3433" href="#L3433">3433</a>           AttributeDefScope.COLUMN_CREATED_ON, <span class="jxr_string">"number of millis since 1970 when this was created"</span>);
<a class="jxr_linenumber" name="L3434" href="#L3434">3434</a> 
<a class="jxr_linenumber" name="L3435" href="#L3435">3435</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3436" href="#L3436">3436</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3437" href="#L3437">3437</a>           AttributeDefScope.COLUMN_ID, <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3438" href="#L3438">3438</a> 
<a class="jxr_linenumber" name="L3439" href="#L3439">3439</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3440" href="#L3440">3440</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3441" href="#L3441">3441</a>           AttributeDefScope.COLUMN_LAST_UPDATED, <span class="jxr_string">"number of millis since 1970 when this attribute was last updated"</span>);
<a class="jxr_linenumber" name="L3442" href="#L3442">3442</a> 
<a class="jxr_linenumber" name="L3443" href="#L3443">3443</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3444" href="#L3444">3444</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3445" href="#L3445">3445</a>           AttributeDefScope.COLUMN_SCOPE_STRING, <span class="jxr_string">"describes where this can be assigned depending on the type of this constraint"</span>);
<a class="jxr_linenumber" name="L3446" href="#L3446">3446</a> 
<a class="jxr_linenumber" name="L3447" href="#L3447">3447</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3448" href="#L3448">3448</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3449" href="#L3449">3449</a>           AttributeDefScope.COLUMN_SCOPE_STRING2, <span class="jxr_string">"describes where this can be assigned depending on the type of this constraint"</span>);
<a class="jxr_linenumber" name="L3450" href="#L3450">3450</a> 
<a class="jxr_linenumber" name="L3451" href="#L3451">3451</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3452" href="#L3452">3452</a>           AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE,
<a class="jxr_linenumber" name="L3453" href="#L3453">3453</a>           AttributeDefScope.COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"optimistic locking column used by hibernate for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3454" href="#L3454">3454</a>     }
<a class="jxr_linenumber" name="L3455" href="#L3455">3455</a> 
<a class="jxr_linenumber" name="L3456" href="#L3456">3456</a>     {
<a class="jxr_linenumber" name="L3457" href="#L3457">3457</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3458" href="#L3458">3458</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3459" href="#L3459">3459</a>           <span class="jxr_string">"table that holds immediate and effective relationships for attribute names that are permissions for inheritance... e.g. artsAndSciences implies english"</span>);
<a class="jxr_linenumber" name="L3460" href="#L3460">3460</a> 
<a class="jxr_linenumber" name="L3461" href="#L3461">3461</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3462" href="#L3462">3462</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3463" href="#L3463">3463</a>           AttributeDefNameSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L3464" href="#L3464">3464</a>           <span class="jxr_string">"uuid of the audit entry for the last change of this record"</span>);
<a class="jxr_linenumber" name="L3465" href="#L3465">3465</a> 
<a class="jxr_linenumber" name="L3466" href="#L3466">3466</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3467" href="#L3467">3467</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3468" href="#L3468">3468</a>           AttributeDefNameSet.COLUMN_CREATED_ON, 
<a class="jxr_linenumber" name="L3469" href="#L3469">3469</a>           <span class="jxr_string">"number of millis since 1970 when this record was created"</span>);
<a class="jxr_linenumber" name="L3470" href="#L3470">3470</a> 
<a class="jxr_linenumber" name="L3471" href="#L3471">3471</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3472" href="#L3472">3472</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3473" href="#L3473">3473</a>           AttributeDefNameSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L3474" href="#L3474">3474</a>           <span class="jxr_string">"number of hops from one node to another: 0 is self, 1 is immediate, etc"</span>);
<a class="jxr_linenumber" name="L3475" href="#L3475">3475</a> 
<a class="jxr_linenumber" name="L3476" href="#L3476">3476</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3477" href="#L3477">3477</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3478" href="#L3478">3478</a>           AttributeDefNameSet.COLUMN_ID,
<a class="jxr_linenumber" name="L3479" href="#L3479">3479</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3480" href="#L3480">3480</a> 
<a class="jxr_linenumber" name="L3481" href="#L3481">3481</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3482" href="#L3482">3482</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3483" href="#L3483">3483</a>           AttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L3484" href="#L3484">3484</a>           <span class="jxr_string">"left hand side of this relationship: if it has this uuid of foreign key of grouper_attribute_def_name then it implies the then_has column"</span>);
<a class="jxr_linenumber" name="L3485" href="#L3485">3485</a> 
<a class="jxr_linenumber" name="L3486" href="#L3486">3486</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3487" href="#L3487">3487</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3488" href="#L3488">3488</a>           AttributeDefNameSet.COLUMN_LAST_UPDATED, 
<a class="jxr_linenumber" name="L3489" href="#L3489">3489</a>           <span class="jxr_string">"number of millis since 1970 when this row was last updated"</span>);
<a class="jxr_linenumber" name="L3490" href="#L3490">3490</a> 
<a class="jxr_linenumber" name="L3491" href="#L3491">3491</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3492" href="#L3492">3492</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3493" href="#L3493">3493</a>           AttributeDefNameSet.COLUMN_PARENT_ATTR_DEF_NAME_SET_ID, 
<a class="jxr_linenumber" name="L3494" href="#L3494">3494</a>           <span class="jxr_string">"link to the relationship above this one (hops-1)"</span>);
<a class="jxr_linenumber" name="L3495" href="#L3495">3495</a> 
<a class="jxr_linenumber" name="L3496" href="#L3496">3496</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3497" href="#L3497">3497</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3498" href="#L3498">3498</a>           AttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L3499" href="#L3499">3499</a>           <span class="jxr_string">"right hand side of this relationship: if it has the if_has then it implies this uuid of the foreign key of the grouper_attribute_def_name"</span>);
<a class="jxr_linenumber" name="L3500" href="#L3500">3500</a> 
<a class="jxr_linenumber" name="L3501" href="#L3501">3501</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3502" href="#L3502">3502</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3503" href="#L3503">3503</a>           AttributeDefNameSet.COLUMN_TYPE, 
<a class="jxr_linenumber" name="L3504" href="#L3504">3504</a>           <span class="jxr_string">"AttributeDefAssignmentType enum: effective, immediate, self"</span>);
<a class="jxr_linenumber" name="L3505" href="#L3505">3505</a> 
<a class="jxr_linenumber" name="L3506" href="#L3506">3506</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3507" href="#L3507">3507</a>           AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3508" href="#L3508">3508</a>           AttributeDefNameSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L3509" href="#L3509">3509</a>           <span class="jxr_string">"column for hibernate optimistic locking for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3510" href="#L3510">3510</a>     }
<a class="jxr_linenumber" name="L3511" href="#L3511">3511</a> 
<a class="jxr_linenumber" name="L3512" href="#L3512">3512</a>     {
<a class="jxr_linenumber" name="L3513" href="#L3513">3513</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3514" href="#L3514">3514</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3515" href="#L3515">3515</a>           <span class="jxr_string">"point in time: table that holds immediate and effective relationships for attribute names that are permissions for inheritance... e.g. artsAndSciences implies english"</span>);
<a class="jxr_linenumber" name="L3516" href="#L3516">3516</a> 
<a class="jxr_linenumber" name="L3517" href="#L3517">3517</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3518" href="#L3518">3518</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3519" href="#L3519">3519</a>           PITAttributeDefNameSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L3520" href="#L3520">3520</a>           <span class="jxr_string">"uuid of the audit entry for the last change of this record"</span>);
<a class="jxr_linenumber" name="L3521" href="#L3521">3521</a> 
<a class="jxr_linenumber" name="L3522" href="#L3522">3522</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3523" href="#L3523">3523</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3524" href="#L3524">3524</a>           PITAttributeDefNameSet.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L3525" href="#L3525">3525</a>           <span class="jxr_string">"T or F if this row is active based on start and end times"</span>);
<a class="jxr_linenumber" name="L3526" href="#L3526">3526</a> 
<a class="jxr_linenumber" name="L3527" href="#L3527">3527</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3528" href="#L3528">3528</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3529" href="#L3529">3529</a>           PITAttributeDefNameSet.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L3530" href="#L3530">3530</a>           <span class="jxr_string">"number of millis since 1970 when this row was inserted"</span>);
<a class="jxr_linenumber" name="L3531" href="#L3531">3531</a> 
<a class="jxr_linenumber" name="L3532" href="#L3532">3532</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3533" href="#L3533">3533</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3534" href="#L3534">3534</a>           PITAttributeDefNameSet.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L3535" href="#L3535">3535</a>           <span class="jxr_string">"number of millis since 1970 when this row was deleted"</span>);
<a class="jxr_linenumber" name="L3536" href="#L3536">3536</a> 
<a class="jxr_linenumber" name="L3537" href="#L3537">3537</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3538" href="#L3538">3538</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3539" href="#L3539">3539</a>           PITAttributeDefNameSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L3540" href="#L3540">3540</a>           <span class="jxr_string">"number of hops from one node to another: 0 is self, 1 is immediate, etc"</span>);
<a class="jxr_linenumber" name="L3541" href="#L3541">3541</a> 
<a class="jxr_linenumber" name="L3542" href="#L3542">3542</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3543" href="#L3543">3543</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3544" href="#L3544">3544</a>           PITAttributeDefNameSet.COLUMN_ID,
<a class="jxr_linenumber" name="L3545" href="#L3545">3545</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3546" href="#L3546">3546</a> 
<a class="jxr_linenumber" name="L3547" href="#L3547">3547</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3548" href="#L3548">3548</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3549" href="#L3549">3549</a>           PITAttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L3550" href="#L3550">3550</a>           <span class="jxr_string">"left hand side of this relationship: if it has this uuid of foreign key of grouper_pit_attr_def_name then it implies the then_has column"</span>);
<a class="jxr_linenumber" name="L3551" href="#L3551">3551</a> 
<a class="jxr_linenumber" name="L3552" href="#L3552">3552</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3553" href="#L3553">3553</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3554" href="#L3554">3554</a>           PITAttributeDefNameSet.COLUMN_PARENT_ATTR_DEF_NAME_SET_ID, 
<a class="jxr_linenumber" name="L3555" href="#L3555">3555</a>           <span class="jxr_string">"link to the relationship above this one (hops-1)"</span>);
<a class="jxr_linenumber" name="L3556" href="#L3556">3556</a> 
<a class="jxr_linenumber" name="L3557" href="#L3557">3557</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3558" href="#L3558">3558</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3559" href="#L3559">3559</a>           PITAttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L3560" href="#L3560">3560</a>           <span class="jxr_string">"right hand side of this relationship: if it has the if_has then it implies this uuid of the foreign key of the grouper_pit_attr_def_name"</span>);
<a class="jxr_linenumber" name="L3561" href="#L3561">3561</a> 
<a class="jxr_linenumber" name="L3562" href="#L3562">3562</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3563" href="#L3563">3563</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET,
<a class="jxr_linenumber" name="L3564" href="#L3564">3564</a>           PITAttributeDefNameSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L3565" href="#L3565">3565</a>           <span class="jxr_string">"column for hibernate optimistic locking for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3566" href="#L3566">3566</a>     }
<a class="jxr_linenumber" name="L3567" href="#L3567">3567</a> 
<a class="jxr_linenumber" name="L3568" href="#L3568">3568</a>     {
<a class="jxr_linenumber" name="L3569" href="#L3569">3569</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3570" href="#L3570">3570</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3571" href="#L3571">3571</a>           <span class="jxr_string">"value assignment on an attribute assignment"</span>);
<a class="jxr_linenumber" name="L3572" href="#L3572">3572</a> 
<a class="jxr_linenumber" name="L3573" href="#L3573">3573</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3574" href="#L3574">3574</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3575" href="#L3575">3575</a>           AttributeAssignValue.COLUMN_ATTRIBUTE_ASSIGN_ID, <span class="jxr_string">"foreign key to the attribute assignment grouper_attribute_assign for this assignment"</span>);
<a class="jxr_linenumber" name="L3576" href="#L3576">3576</a> 
<a class="jxr_linenumber" name="L3577" href="#L3577">3577</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3578" href="#L3578">3578</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3579" href="#L3579">3579</a>           AttributeAssignValue.COLUMN_CONTEXT_ID, <span class="jxr_string">"uuid of the audit entry for the last action on this row"</span>);
<a class="jxr_linenumber" name="L3580" href="#L3580">3580</a> 
<a class="jxr_linenumber" name="L3581" href="#L3581">3581</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3582" href="#L3582">3582</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3583" href="#L3583">3583</a>           AttributeAssignValue.COLUMN_CREATED_ON, <span class="jxr_string">"number of millis since 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L3584" href="#L3584">3584</a> 
<a class="jxr_linenumber" name="L3585" href="#L3585">3585</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3586" href="#L3586">3586</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3587" href="#L3587">3587</a>           AttributeAssignValue.COLUMN_ID, <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3588" href="#L3588">3588</a> 
<a class="jxr_linenumber" name="L3589" href="#L3589">3589</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3590" href="#L3590">3590</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3591" href="#L3591">3591</a>           AttributeAssignValue.COLUMN_LAST_UPDATED, <span class="jxr_string">"number of millis since 1970 when this row was last updated"</span>);
<a class="jxr_linenumber" name="L3592" href="#L3592">3592</a> 
<a class="jxr_linenumber" name="L3593" href="#L3593">3593</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3594" href="#L3594">3594</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3595" href="#L3595">3595</a>           AttributeAssignValue.COLUMN_VALUE_FLOATING, <span class="jxr_string">"if this is a floating type attribute definition, this is the value"</span>);
<a class="jxr_linenumber" name="L3596" href="#L3596">3596</a> 
<a class="jxr_linenumber" name="L3597" href="#L3597">3597</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3598" href="#L3598">3598</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3599" href="#L3599">3599</a>           AttributeAssignValue.COLUMN_VALUE_INTEGER, <span class="jxr_string">"if this is an integer type attribute definition, this is the value"</span>);
<a class="jxr_linenumber" name="L3600" href="#L3600">3600</a> 
<a class="jxr_linenumber" name="L3601" href="#L3601">3601</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3602" href="#L3602">3602</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3603" href="#L3603">3603</a>           AttributeAssignValue.COLUMN_VALUE_MEMBER_ID, <span class="jxr_string">"if this is a member type attribute definition, this is the value"</span>);
<a class="jxr_linenumber" name="L3604" href="#L3604">3604</a> 
<a class="jxr_linenumber" name="L3605" href="#L3605">3605</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3606" href="#L3606">3606</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3607" href="#L3607">3607</a>           AttributeAssignValue.COLUMN_VALUE_STRING, <span class="jxr_string">"if this is a string type attribute definition, this is the value"</span>);
<a class="jxr_linenumber" name="L3608" href="#L3608">3608</a> 
<a class="jxr_linenumber" name="L3609" href="#L3609">3609</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3610" href="#L3610">3610</a>           AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3611" href="#L3611">3611</a>           AttributeAssignValue.COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate optimistic locking column for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3612" href="#L3612">3612</a>     }
<a class="jxr_linenumber" name="L3613" href="#L3613">3613</a> 
<a class="jxr_linenumber" name="L3614" href="#L3614">3614</a>     {
<a class="jxr_linenumber" name="L3615" href="#L3615">3615</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3616" href="#L3616">3616</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3617" href="#L3617">3617</a>           <span class="jxr_string">"point in time history of value assignment on an attribute assignment"</span>);
<a class="jxr_linenumber" name="L3618" href="#L3618">3618</a> 
<a class="jxr_linenumber" name="L3619" href="#L3619">3619</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3620" href="#L3620">3620</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3621" href="#L3621">3621</a>           PITAttributeAssignValue.COLUMN_ATTRIBUTE_ASSIGN_ID, <span class="jxr_string">"foreign key to the attribute assignment grouper_pit_attribute_assign for this assignment"</span>);
<a class="jxr_linenumber" name="L3622" href="#L3622">3622</a> 
<a class="jxr_linenumber" name="L3623" href="#L3623">3623</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3624" href="#L3624">3624</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3625" href="#L3625">3625</a>           PITAttributeAssignValue.COLUMN_CONTEXT_ID, <span class="jxr_string">"uuid of the audit entry for the last action on this row"</span>);
<a class="jxr_linenumber" name="L3626" href="#L3626">3626</a> 
<a class="jxr_linenumber" name="L3627" href="#L3627">3627</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3628" href="#L3628">3628</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3629" href="#L3629">3629</a>           PITAttributeAssignValue.COLUMN_START_TIME, <span class="jxr_string">"number of millis since 1970 when this row started in point in time"</span>);
<a class="jxr_linenumber" name="L3630" href="#L3630">3630</a> 
<a class="jxr_linenumber" name="L3631" href="#L3631">3631</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3632" href="#L3632">3632</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3633" href="#L3633">3633</a>           PITAttributeAssignValue.COLUMN_END_TIME, <span class="jxr_string">"number of millis since 1970 when this row ended in point in time"</span>);
<a class="jxr_linenumber" name="L3634" href="#L3634">3634</a> 
<a class="jxr_linenumber" name="L3635" href="#L3635">3635</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3636" href="#L3636">3636</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,  
<a class="jxr_linenumber" name="L3637" href="#L3637">3637</a>           PITAttributeAssignValue.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L3638" href="#L3638">3638</a>             <span class="jxr_string">"T or F if this is an active record based on start and end dates"</span>);
<a class="jxr_linenumber" name="L3639" href="#L3639">3639</a> 
<a class="jxr_linenumber" name="L3640" href="#L3640">3640</a> 
<a class="jxr_linenumber" name="L3641" href="#L3641">3641</a>       
<a class="jxr_linenumber" name="L3642" href="#L3642">3642</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3643" href="#L3643">3643</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3644" href="#L3644">3644</a>           PITAttributeAssignValue.COLUMN_ID, <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3645" href="#L3645">3645</a> 
<a class="jxr_linenumber" name="L3646" href="#L3646">3646</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3647" href="#L3647">3647</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3648" href="#L3648">3648</a>           PITAttributeAssignValue.COLUMN_END_TIME, <span class="jxr_string">"number of millis since 1970 when this row row ended in point in time"</span>);
<a class="jxr_linenumber" name="L3649" href="#L3649">3649</a> 
<a class="jxr_linenumber" name="L3650" href="#L3650">3650</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3651" href="#L3651">3651</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3652" href="#L3652">3652</a>           PITAttributeAssignValue.COLUMN_VALUE_FLOATING, <span class="jxr_string">"if this is a floating type attribute definition, this is the value"</span>);
<a class="jxr_linenumber" name="L3653" href="#L3653">3653</a> 
<a class="jxr_linenumber" name="L3654" href="#L3654">3654</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3655" href="#L3655">3655</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3656" href="#L3656">3656</a>           PITAttributeAssignValue.COLUMN_VALUE_INTEGER, <span class="jxr_string">"if this is an integer type attribute definition, this is the value"</span>);
<a class="jxr_linenumber" name="L3657" href="#L3657">3657</a> 
<a class="jxr_linenumber" name="L3658" href="#L3658">3658</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3659" href="#L3659">3659</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3660" href="#L3660">3660</a>           PITAttributeAssignValue.COLUMN_VALUE_MEMBER_ID, <span class="jxr_string">"if this is a member type attribute definition, this is the value"</span>);
<a class="jxr_linenumber" name="L3661" href="#L3661">3661</a> 
<a class="jxr_linenumber" name="L3662" href="#L3662">3662</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3663" href="#L3663">3663</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3664" href="#L3664">3664</a>           PITAttributeAssignValue.COLUMN_VALUE_STRING, <span class="jxr_string">"if this is a string type attribute definition, this is the value"</span>);
<a class="jxr_linenumber" name="L3665" href="#L3665">3665</a> 
<a class="jxr_linenumber" name="L3666" href="#L3666">3666</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3667" href="#L3667">3667</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE,
<a class="jxr_linenumber" name="L3668" href="#L3668">3668</a>           PITAttributeAssignValue.COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate optimistic locking column for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3669" href="#L3669">3669</a>     }
<a class="jxr_linenumber" name="L3670" href="#L3670">3670</a> 
<a class="jxr_linenumber" name="L3671" href="#L3671">3671</a>     {
<a class="jxr_linenumber" name="L3672" href="#L3672">3672</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3673" href="#L3673">3673</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3674" href="#L3674">3674</a>           <span class="jxr_string">"type of this change log entry, e.g. an insert into grouper groups"</span>);
<a class="jxr_linenumber" name="L3675" href="#L3675">3675</a> 
<a class="jxr_linenumber" name="L3676" href="#L3676">3676</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3677" href="#L3677">3677</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3678" href="#L3678">3678</a>           ChangeLogType.COLUMN_ACTION_NAME, <span class="jxr_string">"action name, e.g. addGroup, deleteMember"</span>);
<a class="jxr_linenumber" name="L3679" href="#L3679">3679</a> 
<a class="jxr_linenumber" name="L3680" href="#L3680">3680</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3681" href="#L3681">3681</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3682" href="#L3682">3682</a>           ChangeLogType.COLUMN_CHANGE_LOG_CATEGORY, <span class="jxr_string">"action category, e.g. group, member"</span>);
<a class="jxr_linenumber" name="L3683" href="#L3683">3683</a> 
<a class="jxr_linenumber" name="L3684" href="#L3684">3684</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3685" href="#L3685">3685</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3686" href="#L3686">3686</a>           ChangeLogType.COLUMN_CONTEXT_ID, <span class="jxr_string">"uuid of the change log entry for this row"</span>);
<a class="jxr_linenumber" name="L3687" href="#L3687">3687</a> 
<a class="jxr_linenumber" name="L3688" href="#L3688">3688</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3689" href="#L3689">3689</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3690" href="#L3690">3690</a>           ChangeLogType.COLUMN_CREATED_ON, <span class="jxr_string">"number of millis since 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L3691" href="#L3691">3691</a> 
<a class="jxr_linenumber" name="L3692" href="#L3692">3692</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3693" href="#L3693">3693</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3694" href="#L3694">3694</a>           ChangeLogType.COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate version for optimistic locking for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3695" href="#L3695">3695</a> 
<a class="jxr_linenumber" name="L3696" href="#L3696">3696</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3697" href="#L3697">3697</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3698" href="#L3698">3698</a>           ChangeLogType.COLUMN_ID, <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3699" href="#L3699">3699</a> 
<a class="jxr_linenumber" name="L3700" href="#L3700">3700</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3701" href="#L3701">3701</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3702" href="#L3702">3702</a>           ChangeLogType.COLUMN_LABEL_STRING01, <span class="jxr_string">"label of the 01 string entry"</span>);
<a class="jxr_linenumber" name="L3703" href="#L3703">3703</a> 
<a class="jxr_linenumber" name="L3704" href="#L3704">3704</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3705" href="#L3705">3705</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3706" href="#L3706">3706</a>           ChangeLogType.COLUMN_LABEL_STRING02, <span class="jxr_string">"label of the 02 string entry"</span>);
<a class="jxr_linenumber" name="L3707" href="#L3707">3707</a> 
<a class="jxr_linenumber" name="L3708" href="#L3708">3708</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3709" href="#L3709">3709</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3710" href="#L3710">3710</a>           ChangeLogType.COLUMN_LABEL_STRING03, <span class="jxr_string">"label of the 03 string entry"</span>);
<a class="jxr_linenumber" name="L3711" href="#L3711">3711</a> 
<a class="jxr_linenumber" name="L3712" href="#L3712">3712</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3713" href="#L3713">3713</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3714" href="#L3714">3714</a>           ChangeLogType.COLUMN_LABEL_STRING04, <span class="jxr_string">"label of the 04 string entry"</span>);
<a class="jxr_linenumber" name="L3715" href="#L3715">3715</a> 
<a class="jxr_linenumber" name="L3716" href="#L3716">3716</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3717" href="#L3717">3717</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3718" href="#L3718">3718</a>           ChangeLogType.COLUMN_LABEL_STRING05, <span class="jxr_string">"label of the 05 string entry"</span>);
<a class="jxr_linenumber" name="L3719" href="#L3719">3719</a> 
<a class="jxr_linenumber" name="L3720" href="#L3720">3720</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3721" href="#L3721">3721</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3722" href="#L3722">3722</a>           ChangeLogType.COLUMN_LABEL_STRING06, <span class="jxr_string">"label of the 06 string entry"</span>);
<a class="jxr_linenumber" name="L3723" href="#L3723">3723</a> 
<a class="jxr_linenumber" name="L3724" href="#L3724">3724</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3725" href="#L3725">3725</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3726" href="#L3726">3726</a>           ChangeLogType.COLUMN_LABEL_STRING07, <span class="jxr_string">"label of the 07 string entry"</span>);
<a class="jxr_linenumber" name="L3727" href="#L3727">3727</a> 
<a class="jxr_linenumber" name="L3728" href="#L3728">3728</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3729" href="#L3729">3729</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3730" href="#L3730">3730</a>           ChangeLogType.COLUMN_LABEL_STRING08, <span class="jxr_string">"label of the 08 string entry"</span>);
<a class="jxr_linenumber" name="L3731" href="#L3731">3731</a> 
<a class="jxr_linenumber" name="L3732" href="#L3732">3732</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3733" href="#L3733">3733</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3734" href="#L3734">3734</a>           ChangeLogType.COLUMN_LABEL_STRING09, <span class="jxr_string">"label of the 09 string entry"</span>);
<a class="jxr_linenumber" name="L3735" href="#L3735">3735</a> 
<a class="jxr_linenumber" name="L3736" href="#L3736">3736</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3737" href="#L3737">3737</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3738" href="#L3738">3738</a>           ChangeLogType.COLUMN_LABEL_STRING10, <span class="jxr_string">"label of the 10 string entry"</span>);
<a class="jxr_linenumber" name="L3739" href="#L3739">3739</a> 
<a class="jxr_linenumber" name="L3740" href="#L3740">3740</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3741" href="#L3741">3741</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3742" href="#L3742">3742</a>           ChangeLogType.COLUMN_LABEL_STRING11, <span class="jxr_string">"label of the 11 string entry"</span>);
<a class="jxr_linenumber" name="L3743" href="#L3743">3743</a> 
<a class="jxr_linenumber" name="L3744" href="#L3744">3744</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3745" href="#L3745">3745</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3746" href="#L3746">3746</a>           ChangeLogType.COLUMN_LABEL_STRING12, <span class="jxr_string">"label of the 12 string entry"</span>);
<a class="jxr_linenumber" name="L3747" href="#L3747">3747</a> 
<a class="jxr_linenumber" name="L3748" href="#L3748">3748</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3749" href="#L3749">3749</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE,
<a class="jxr_linenumber" name="L3750" href="#L3750">3750</a>           ChangeLogType.COLUMN_LAST_UPDATED, <span class="jxr_string">"number of millis since 1970 when this row was last changed"</span>);
<a class="jxr_linenumber" name="L3751" href="#L3751">3751</a> 
<a class="jxr_linenumber" name="L3752" href="#L3752">3752</a>     }
<a class="jxr_linenumber" name="L3753" href="#L3753">3753</a> 
<a class="jxr_linenumber" name="L3754" href="#L3754">3754</a>     {
<a class="jxr_linenumber" name="L3755" href="#L3755">3755</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3756" href="#L3756">3756</a>           ChangeLogConsumer.TABLE_GROUPER_CHANGE_LOG_CONSUMER,
<a class="jxr_linenumber" name="L3757" href="#L3757">3757</a>           <span class="jxr_string">"table keeps track of change log consumers so if they stop, they will start at the place where they left off in processing change log entries"</span>);
<a class="jxr_linenumber" name="L3758" href="#L3758">3758</a> 
<a class="jxr_linenumber" name="L3759" href="#L3759">3759</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3760" href="#L3760">3760</a>           ChangeLogConsumer.TABLE_GROUPER_CHANGE_LOG_CONSUMER,
<a class="jxr_linenumber" name="L3761" href="#L3761">3761</a>           ChangeLogConsumer.COLUMN_CREATED_ON, <span class="jxr_string">"number of millis since 1970 when this record was created"</span>);
<a class="jxr_linenumber" name="L3762" href="#L3762">3762</a> 
<a class="jxr_linenumber" name="L3763" href="#L3763">3763</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3764" href="#L3764">3764</a>           ChangeLogConsumer.TABLE_GROUPER_CHANGE_LOG_CONSUMER,
<a class="jxr_linenumber" name="L3765" href="#L3765">3765</a>           ChangeLogConsumer.COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate optimistic locking versioning column for updates and deletes"</span>);
<a class="jxr_linenumber" name="L3766" href="#L3766">3766</a> 
<a class="jxr_linenumber" name="L3767" href="#L3767">3767</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3768" href="#L3768">3768</a>           ChangeLogConsumer.TABLE_GROUPER_CHANGE_LOG_CONSUMER,
<a class="jxr_linenumber" name="L3769" href="#L3769">3769</a>           ChangeLogConsumer.COLUMN_ID, <span class="jxr_string">"UUID of this row"</span>);
<a class="jxr_linenumber" name="L3770" href="#L3770">3770</a> 
<a class="jxr_linenumber" name="L3771" href="#L3771">3771</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3772" href="#L3772">3772</a>           ChangeLogConsumer.TABLE_GROUPER_CHANGE_LOG_CONSUMER,
<a class="jxr_linenumber" name="L3773" href="#L3773">3773</a>           ChangeLogConsumer.COLUMN_LAST_SEQUENCE_PROCESSED, <span class="jxr_string">"index of the change log row which was last processed by this consumer"</span>);
<a class="jxr_linenumber" name="L3774" href="#L3774">3774</a> 
<a class="jxr_linenumber" name="L3775" href="#L3775">3775</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3776" href="#L3776">3776</a>           ChangeLogConsumer.TABLE_GROUPER_CHANGE_LOG_CONSUMER,
<a class="jxr_linenumber" name="L3777" href="#L3777">3777</a>           ChangeLogConsumer.COLUMN_LAST_UPDATED, <span class="jxr_string">"millis since 1970 that this row was last updated"</span>);
<a class="jxr_linenumber" name="L3778" href="#L3778">3778</a> 
<a class="jxr_linenumber" name="L3779" href="#L3779">3779</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3780" href="#L3780">3780</a>           ChangeLogConsumer.TABLE_GROUPER_CHANGE_LOG_CONSUMER,
<a class="jxr_linenumber" name="L3781" href="#L3781">3781</a>           ChangeLogConsumer.COLUMN_NAME, <span class="jxr_string">"name of the consumer"</span>);
<a class="jxr_linenumber" name="L3782" href="#L3782">3782</a>     }
<a class="jxr_linenumber" name="L3783" href="#L3783">3783</a>     
<a class="jxr_linenumber" name="L3784" href="#L3784">3784</a>     {
<a class="jxr_linenumber" name="L3785" href="#L3785">3785</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3786" href="#L3786">3786</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3787" href="#L3787">3787</a>           <span class="jxr_string">"rows are inserted here in the transaction of the actual action, e.g. an add member.  The change log daemon will move records from here to the change log entry table in order, to be processed by consumers"</span>);
<a class="jxr_linenumber" name="L3788" href="#L3788">3788</a> 
<a class="jxr_linenumber" name="L3789" href="#L3789">3789</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3790" href="#L3790">3790</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3791" href="#L3791">3791</a>           ChangeLogEntry.COLUMN_CHANGE_LOG_TYPE_ID, <span class="jxr_string">"foreign key to the grouper_change_log_type table"</span>);
<a class="jxr_linenumber" name="L3792" href="#L3792">3792</a> 
<a class="jxr_linenumber" name="L3793" href="#L3793">3793</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3794" href="#L3794">3794</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3795" href="#L3795">3795</a>           ChangeLogEntry.COLUMN_CONTEXT_ID, <span class="jxr_string">"uuid to the grouper_audit_entry table"</span>);
<a class="jxr_linenumber" name="L3796" href="#L3796">3796</a> 
<a class="jxr_linenumber" name="L3797" href="#L3797">3797</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3798" href="#L3798">3798</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3799" href="#L3799">3799</a>           ChangeLogEntry.COLUMN_ID, <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3800" href="#L3800">3800</a> 
<a class="jxr_linenumber" name="L3801" href="#L3801">3801</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3802" href="#L3802">3802</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3803" href="#L3803">3803</a>           ChangeLogEntry.COLUMN_STRING01, <span class="jxr_string">"value of the string for value 01 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3804" href="#L3804">3804</a> 
<a class="jxr_linenumber" name="L3805" href="#L3805">3805</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3806" href="#L3806">3806</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3807" href="#L3807">3807</a>           ChangeLogEntry.COLUMN_STRING02, <span class="jxr_string">"value of the string for value 02 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3808" href="#L3808">3808</a> 
<a class="jxr_linenumber" name="L3809" href="#L3809">3809</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3810" href="#L3810">3810</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3811" href="#L3811">3811</a>           ChangeLogEntry.COLUMN_STRING03, <span class="jxr_string">"value of the string for value 03 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3812" href="#L3812">3812</a> 
<a class="jxr_linenumber" name="L3813" href="#L3813">3813</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3814" href="#L3814">3814</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3815" href="#L3815">3815</a>           ChangeLogEntry.COLUMN_STRING04, <span class="jxr_string">"value of the string for value 04 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3816" href="#L3816">3816</a> 
<a class="jxr_linenumber" name="L3817" href="#L3817">3817</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3818" href="#L3818">3818</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3819" href="#L3819">3819</a>           ChangeLogEntry.COLUMN_STRING05, <span class="jxr_string">"value of the string for value 05 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3820" href="#L3820">3820</a> 
<a class="jxr_linenumber" name="L3821" href="#L3821">3821</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3822" href="#L3822">3822</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3823" href="#L3823">3823</a>           ChangeLogEntry.COLUMN_STRING06, <span class="jxr_string">"value of the string for value 06 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3824" href="#L3824">3824</a> 
<a class="jxr_linenumber" name="L3825" href="#L3825">3825</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3826" href="#L3826">3826</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3827" href="#L3827">3827</a>           ChangeLogEntry.COLUMN_STRING07, <span class="jxr_string">"value of the string for value 07 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3828" href="#L3828">3828</a> 
<a class="jxr_linenumber" name="L3829" href="#L3829">3829</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3830" href="#L3830">3830</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3831" href="#L3831">3831</a>           ChangeLogEntry.COLUMN_STRING08, <span class="jxr_string">"value of the string for value 08 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3832" href="#L3832">3832</a> 
<a class="jxr_linenumber" name="L3833" href="#L3833">3833</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3834" href="#L3834">3834</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3835" href="#L3835">3835</a>           ChangeLogEntry.COLUMN_STRING09, <span class="jxr_string">"value of the string for value 09 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3836" href="#L3836">3836</a> 
<a class="jxr_linenumber" name="L3837" href="#L3837">3837</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3838" href="#L3838">3838</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3839" href="#L3839">3839</a>           ChangeLogEntry.COLUMN_STRING10, <span class="jxr_string">"value of the string for value 10 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3840" href="#L3840">3840</a> 
<a class="jxr_linenumber" name="L3841" href="#L3841">3841</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3842" href="#L3842">3842</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3843" href="#L3843">3843</a>           ChangeLogEntry.COLUMN_STRING11, <span class="jxr_string">"value of the string for value 11 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3844" href="#L3844">3844</a> 
<a class="jxr_linenumber" name="L3845" href="#L3845">3845</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3846" href="#L3846">3846</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3847" href="#L3847">3847</a>           ChangeLogEntry.COLUMN_STRING12, <span class="jxr_string">"value of the string for value 12 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3848" href="#L3848">3848</a> 
<a class="jxr_linenumber" name="L3849" href="#L3849">3849</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3850" href="#L3850">3850</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP,
<a class="jxr_linenumber" name="L3851" href="#L3851">3851</a>           ChangeLogEntry.COLUMN_CREATED_ON, <span class="jxr_string">"number of thousandths of millis from 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L3852" href="#L3852">3852</a>     }    
<a class="jxr_linenumber" name="L3853" href="#L3853">3853</a> 
<a class="jxr_linenumber" name="L3854" href="#L3854">3854</a>     {
<a class="jxr_linenumber" name="L3855" href="#L3855">3855</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3856" href="#L3856">3856</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3857" href="#L3857">3857</a>           <span class="jxr_string">"The change log daemon will move records from grouper_change_log_entry_temp to this table in time order, to be processed by consumers"</span>);
<a class="jxr_linenumber" name="L3858" href="#L3858">3858</a> 
<a class="jxr_linenumber" name="L3859" href="#L3859">3859</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3860" href="#L3860">3860</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3861" href="#L3861">3861</a>           ChangeLogEntry.COLUMN_CHANGE_LOG_TYPE_ID, <span class="jxr_string">"foreign key to the grouper_change_log_type table, the type of action"</span>);
<a class="jxr_linenumber" name="L3862" href="#L3862">3862</a> 
<a class="jxr_linenumber" name="L3863" href="#L3863">3863</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3864" href="#L3864">3864</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3865" href="#L3865">3865</a>           ChangeLogEntry.COLUMN_CONTEXT_ID, <span class="jxr_string">"uuid referencing the grouper_audit_entry table"</span>);
<a class="jxr_linenumber" name="L3866" href="#L3866">3866</a> 
<a class="jxr_linenumber" name="L3867" href="#L3867">3867</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3868" href="#L3868">3868</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3869" href="#L3869">3869</a>           ChangeLogEntry.COLUMN_CREATED_ON, <span class="jxr_string">"number of thousandths of millis from 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L3870" href="#L3870">3870</a> 
<a class="jxr_linenumber" name="L3871" href="#L3871">3871</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3872" href="#L3872">3872</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3873" href="#L3873">3873</a>           ChangeLogEntry.COLUMN_SEQUENCE_NUMBER, <span class="jxr_string">"integer which is in order which these records should be processed by change log consumers"</span>);
<a class="jxr_linenumber" name="L3874" href="#L3874">3874</a> 
<a class="jxr_linenumber" name="L3875" href="#L3875">3875</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3876" href="#L3876">3876</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3877" href="#L3877">3877</a>           ChangeLogEntry.COLUMN_STRING01, <span class="jxr_string">"value of the string for value 01 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3878" href="#L3878">3878</a> 
<a class="jxr_linenumber" name="L3879" href="#L3879">3879</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3880" href="#L3880">3880</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3881" href="#L3881">3881</a>           ChangeLogEntry.COLUMN_STRING02, <span class="jxr_string">"value of the string for value 02 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3882" href="#L3882">3882</a> 
<a class="jxr_linenumber" name="L3883" href="#L3883">3883</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3884" href="#L3884">3884</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3885" href="#L3885">3885</a>           ChangeLogEntry.COLUMN_STRING03, <span class="jxr_string">"value of the string for value 03 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3886" href="#L3886">3886</a> 
<a class="jxr_linenumber" name="L3887" href="#L3887">3887</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3888" href="#L3888">3888</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3889" href="#L3889">3889</a>           ChangeLogEntry.COLUMN_STRING04, <span class="jxr_string">"value of the string for value 04 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3890" href="#L3890">3890</a> 
<a class="jxr_linenumber" name="L3891" href="#L3891">3891</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3892" href="#L3892">3892</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3893" href="#L3893">3893</a>           ChangeLogEntry.COLUMN_STRING05, <span class="jxr_string">"value of the string for value 05 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3894" href="#L3894">3894</a> 
<a class="jxr_linenumber" name="L3895" href="#L3895">3895</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3896" href="#L3896">3896</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3897" href="#L3897">3897</a>           ChangeLogEntry.COLUMN_STRING06, <span class="jxr_string">"value of the string for value 06 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3898" href="#L3898">3898</a> 
<a class="jxr_linenumber" name="L3899" href="#L3899">3899</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3900" href="#L3900">3900</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3901" href="#L3901">3901</a>           ChangeLogEntry.COLUMN_STRING07, <span class="jxr_string">"value of the string for value 07 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3902" href="#L3902">3902</a> 
<a class="jxr_linenumber" name="L3903" href="#L3903">3903</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3904" href="#L3904">3904</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3905" href="#L3905">3905</a>           ChangeLogEntry.COLUMN_STRING08, <span class="jxr_string">"value of the string for value 08 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3906" href="#L3906">3906</a> 
<a class="jxr_linenumber" name="L3907" href="#L3907">3907</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3908" href="#L3908">3908</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3909" href="#L3909">3909</a>           ChangeLogEntry.COLUMN_STRING09, <span class="jxr_string">"value of the string for value 09 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3910" href="#L3910">3910</a> 
<a class="jxr_linenumber" name="L3911" href="#L3911">3911</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3912" href="#L3912">3912</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3913" href="#L3913">3913</a>           ChangeLogEntry.COLUMN_STRING10, <span class="jxr_string">"value of the string for value 10 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3914" href="#L3914">3914</a> 
<a class="jxr_linenumber" name="L3915" href="#L3915">3915</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3916" href="#L3916">3916</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3917" href="#L3917">3917</a>           ChangeLogEntry.COLUMN_STRING11, <span class="jxr_string">"value of the string for value 11 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3918" href="#L3918">3918</a> 
<a class="jxr_linenumber" name="L3919" href="#L3919">3919</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3920" href="#L3920">3920</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY,
<a class="jxr_linenumber" name="L3921" href="#L3921">3921</a>           ChangeLogEntry.COLUMN_STRING12, <span class="jxr_string">"value of the string for value 12 which corresponds to the grouper_change_log_type table label"</span>);
<a class="jxr_linenumber" name="L3922" href="#L3922">3922</a> 
<a class="jxr_linenumber" name="L3923" href="#L3923">3923</a>     }
<a class="jxr_linenumber" name="L3924" href="#L3924">3924</a> 
<a class="jxr_linenumber" name="L3925" href="#L3925">3925</a>     {
<a class="jxr_linenumber" name="L3926" href="#L3926">3926</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L3927" href="#L3927">3927</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3928" href="#L3928">3928</a>           <span class="jxr_string">"This table holds relationships for memberships or privileges on groups, stems, attributes.  This allows quick joining of who is in a group effectively"</span>);
<a class="jxr_linenumber" name="L3929" href="#L3929">3929</a> 
<a class="jxr_linenumber" name="L3930" href="#L3930">3930</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3931" href="#L3931">3931</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3932" href="#L3932">3932</a>           GroupSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L3933" href="#L3933">3933</a>           <span class="jxr_string">"uuid that links to the grouper_audit_entry"</span>);
<a class="jxr_linenumber" name="L3934" href="#L3934">3934</a> 
<a class="jxr_linenumber" name="L3935" href="#L3935">3935</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3936" href="#L3936">3936</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3937" href="#L3937">3937</a>           GroupSet.COLUMN_CREATE_TIME, 
<a class="jxr_linenumber" name="L3938" href="#L3938">3938</a>           <span class="jxr_string">"number of millis since 1970 that this row was created"</span>);
<a class="jxr_linenumber" name="L3939" href="#L3939">3939</a> 
<a class="jxr_linenumber" name="L3940" href="#L3940">3940</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3941" href="#L3941">3941</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3942" href="#L3942">3942</a>           GroupSet.COLUMN_CREATOR_ID, 
<a class="jxr_linenumber" name="L3943" href="#L3943">3943</a>           <span class="jxr_string">"uuid of grouper_members of who created this row"</span>);
<a class="jxr_linenumber" name="L3944" href="#L3944">3944</a> 
<a class="jxr_linenumber" name="L3945" href="#L3945">3945</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3946" href="#L3946">3946</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3947" href="#L3947">3947</a>           GroupSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L3948" href="#L3948">3948</a>           <span class="jxr_string">"0 for self, 1 for immediate, or more for effective.  this is the number of hops between nodes"</span>);
<a class="jxr_linenumber" name="L3949" href="#L3949">3949</a> 
<a class="jxr_linenumber" name="L3950" href="#L3950">3950</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3951" href="#L3951">3951</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3952" href="#L3952">3952</a>           GroupSet.COLUMN_FIELD_ID, 
<a class="jxr_linenumber" name="L3953" href="#L3953">3953</a>           <span class="jxr_string">"uuid foreign key from grouper_fields which is the list of the membership, normally members or the privilege in question"</span>);
<a class="jxr_linenumber" name="L3954" href="#L3954">3954</a> 
<a class="jxr_linenumber" name="L3955" href="#L3955">3955</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3956" href="#L3956">3956</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3957" href="#L3957">3957</a>           GroupSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L3958" href="#L3958">3958</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L3959" href="#L3959">3959</a> 
<a class="jxr_linenumber" name="L3960" href="#L3960">3960</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3961" href="#L3961">3961</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3962" href="#L3962">3962</a>           GroupSet.COLUMN_MEMBER_ATTR_DEF_ID, 
<a class="jxr_linenumber" name="L3963" href="#L3963">3963</a>           <span class="jxr_string">"foreign key of grouper_attribute_def of the member record"</span>);
<a class="jxr_linenumber" name="L3964" href="#L3964">3964</a> 
<a class="jxr_linenumber" name="L3965" href="#L3965">3965</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3966" href="#L3966">3966</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3967" href="#L3967">3967</a>           GroupSet.COLUMN_MEMBER_FIELD_ID, 
<a class="jxr_linenumber" name="L3968" href="#L3968">3968</a>           <span class="jxr_string">"uuid foreign key from grouper_fields which is the list of the membership, normally members"</span>);
<a class="jxr_linenumber" name="L3969" href="#L3969">3969</a> 
<a class="jxr_linenumber" name="L3970" href="#L3970">3970</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3971" href="#L3971">3971</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3972" href="#L3972">3972</a>           GroupSet.COLUMN_MEMBER_GROUP_ID, 
<a class="jxr_linenumber" name="L3973" href="#L3973">3973</a>           <span class="jxr_string">"uuid to the grouper_groups table which is the group that is a member of the owner"</span>);
<a class="jxr_linenumber" name="L3974" href="#L3974">3974</a> 
<a class="jxr_linenumber" name="L3975" href="#L3975">3975</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3976" href="#L3976">3976</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3977" href="#L3977">3977</a>           GroupSet.COLUMN_MEMBER_ID, 
<a class="jxr_linenumber" name="L3978" href="#L3978">3978</a>           <span class="jxr_string">"whether this is groups, stems, or attribute definitions, this is the member"</span>);
<a class="jxr_linenumber" name="L3979" href="#L3979">3979</a> 
<a class="jxr_linenumber" name="L3980" href="#L3980">3980</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3981" href="#L3981">3981</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3982" href="#L3982">3982</a>           GroupSet.COLUMN_MEMBER_STEM_ID, 
<a class="jxr_linenumber" name="L3983" href="#L3983">3983</a>           <span class="jxr_string">"uuid to the grouper_stems table which is the stem that is implied by the owner"</span>);
<a class="jxr_linenumber" name="L3984" href="#L3984">3984</a> 
<a class="jxr_linenumber" name="L3985" href="#L3985">3985</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3986" href="#L3986">3986</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3987" href="#L3987">3987</a>           GroupSet.COLUMN_MSHIP_TYPE, 
<a class="jxr_linenumber" name="L3988" href="#L3988">3988</a>           <span class="jxr_string">"MembershipType enum, effective or immediate"</span>);
<a class="jxr_linenumber" name="L3989" href="#L3989">3989</a> 
<a class="jxr_linenumber" name="L3990" href="#L3990">3990</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3991" href="#L3991">3991</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3992" href="#L3992">3992</a>           GroupSet.COLUMN_OWNER_ATTR_DEF_ID, 
<a class="jxr_linenumber" name="L3993" href="#L3993">3993</a>           <span class="jxr_string">"uuid to the grouper_attribute_def table which is the owner of this record, which implies a relationship to the member, if null, it will have (NULL) which helps with some DB vendors"</span>);
<a class="jxr_linenumber" name="L3994" href="#L3994">3994</a> 
<a class="jxr_linenumber" name="L3995" href="#L3995">3995</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L3996" href="#L3996">3996</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L3997" href="#L3997">3997</a>           GroupSet.COLUMN_OWNER_ATTR_DEF_ID_NULL, 
<a class="jxr_linenumber" name="L3998" href="#L3998">3998</a>           <span class="jxr_string">"uuid to the grouper_attribute_def table which is the owner of this record, which implies a relationship to the member, if null, it will be null"</span>);
<a class="jxr_linenumber" name="L3999" href="#L3999">3999</a> 
<a class="jxr_linenumber" name="L4000" href="#L4000">4000</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4001" href="#L4001">4001</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L4002" href="#L4002">4002</a>           GroupSet.COLUMN_OWNER_GROUP_ID, 
<a class="jxr_linenumber" name="L4003" href="#L4003">4003</a>           <span class="jxr_string">"uuid to the grouper_groups table which is the owner of this record, which implies a membership to the member uuid, if null, it will be (NULL) which helps with some DB vendors"</span>);
<a class="jxr_linenumber" name="L4004" href="#L4004">4004</a> 
<a class="jxr_linenumber" name="L4005" href="#L4005">4005</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4006" href="#L4006">4006</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L4007" href="#L4007">4007</a>           GroupSet.COLUMN_OWNER_GROUP_ID_NULL, 
<a class="jxr_linenumber" name="L4008" href="#L4008">4008</a>           <span class="jxr_string">"uuid to the grouper_groups table which is the owner of this record, which implies a membership to the member uuid, if null, it will be null"</span>);
<a class="jxr_linenumber" name="L4009" href="#L4009">4009</a> 
<a class="jxr_linenumber" name="L4010" href="#L4010">4010</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4011" href="#L4011">4011</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L4012" href="#L4012">4012</a>           GroupSet.COLUMN_OWNER_ID, 
<a class="jxr_linenumber" name="L4013" href="#L4013">4013</a>           <span class="jxr_string">"whether this is "</span>);
<a class="jxr_linenumber" name="L4014" href="#L4014">4014</a> 
<a class="jxr_linenumber" name="L4015" href="#L4015">4015</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4016" href="#L4016">4016</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L4017" href="#L4017">4017</a>           GroupSet.COLUMN_OWNER_STEM_ID, 
<a class="jxr_linenumber" name="L4018" href="#L4018">4018</a>           <span class="jxr_string">"uuid to the grouper_stems table which is the owner of this record, which implies a privilege to the member uuid, if null, it will be (NULL) which helps with some DB vendors"</span>);
<a class="jxr_linenumber" name="L4019" href="#L4019">4019</a> 
<a class="jxr_linenumber" name="L4020" href="#L4020">4020</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4021" href="#L4021">4021</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L4022" href="#L4022">4022</a>           GroupSet.COLUMN_OWNER_STEM_ID_NULL, 
<a class="jxr_linenumber" name="L4023" href="#L4023">4023</a>           <span class="jxr_string">"uuid to the grouper_stems table which is the owner of this record, which implies a privilege to the member uuid, if null, it will be null"</span>);
<a class="jxr_linenumber" name="L4024" href="#L4024">4024</a> 
<a class="jxr_linenumber" name="L4025" href="#L4025">4025</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4026" href="#L4026">4026</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L4027" href="#L4027">4027</a>           GroupSet.COLUMN_PARENT_ID, 
<a class="jxr_linenumber" name="L4028" href="#L4028">4028</a>           <span class="jxr_string">"this is the link back to the grouper_group_set table which is the one one hop away and related to this one..."</span>);
<a class="jxr_linenumber" name="L4029" href="#L4029">4029</a> 
<a class="jxr_linenumber" name="L4030" href="#L4030">4030</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4031" href="#L4031">4031</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L4032" href="#L4032">4032</a>           GroupSet.COLUMN_VIA_GROUP_ID, 
<a class="jxr_linenumber" name="L4033" href="#L4033">4033</a>           <span class="jxr_string">"same as member_group_id if depth is not 0 otherwise null"</span>);
<a class="jxr_linenumber" name="L4034" href="#L4034">4034</a> 
<a class="jxr_linenumber" name="L4035" href="#L4035">4035</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4036" href="#L4036">4036</a>           GroupSet.TABLE_GROUPER_GROUP_SET,
<a class="jxr_linenumber" name="L4037" href="#L4037">4037</a>           GroupSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4038" href="#L4038">4038</a>           <span class="jxr_string">"optimistic locking column for hibernate used for updates and deletes"</span>);
<a class="jxr_linenumber" name="L4039" href="#L4039">4039</a> 
<a class="jxr_linenumber" name="L4040" href="#L4040">4040</a>     }
<a class="jxr_linenumber" name="L4041" href="#L4041">4041</a> 
<a class="jxr_linenumber" name="L4042" href="#L4042">4042</a>     {
<a class="jxr_linenumber" name="L4043" href="#L4043">4043</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L4044" href="#L4044">4044</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4045" href="#L4045">4045</a>           <span class="jxr_string">"point in time: This table holds relationships for memberships or privileges on groups, stems, attributes.  This allows quick joining of who is in a group effectively"</span>);
<a class="jxr_linenumber" name="L4046" href="#L4046">4046</a> 
<a class="jxr_linenumber" name="L4047" href="#L4047">4047</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4048" href="#L4048">4048</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4049" href="#L4049">4049</a>           PITGroupSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4050" href="#L4050">4050</a>           <span class="jxr_string">"uuid that links to the grouper_audit_entry"</span>);
<a class="jxr_linenumber" name="L4051" href="#L4051">4051</a> 
<a class="jxr_linenumber" name="L4052" href="#L4052">4052</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4053" href="#L4053">4053</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4054" href="#L4054">4054</a>           PITGroupSet.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L4055" href="#L4055">4055</a>           <span class="jxr_string">"T or F for if this is active, based on start and end time"</span>);
<a class="jxr_linenumber" name="L4056" href="#L4056">4056</a> 
<a class="jxr_linenumber" name="L4057" href="#L4057">4057</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4058" href="#L4058">4058</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4059" href="#L4059">4059</a>           PITGroupSet.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L4060" href="#L4060">4060</a>           <span class="jxr_string">"number of millis since 1970 that this row was created"</span>);
<a class="jxr_linenumber" name="L4061" href="#L4061">4061</a> 
<a class="jxr_linenumber" name="L4062" href="#L4062">4062</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4063" href="#L4063">4063</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4064" href="#L4064">4064</a>           PITGroupSet.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L4065" href="#L4065">4065</a>           <span class="jxr_string">"number of millis since 1970 that this row was deleted"</span>);
<a class="jxr_linenumber" name="L4066" href="#L4066">4066</a> 
<a class="jxr_linenumber" name="L4067" href="#L4067">4067</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4068" href="#L4068">4068</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4069" href="#L4069">4069</a>           PITGroupSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L4070" href="#L4070">4070</a>           <span class="jxr_string">"0 for self, 1 for immediate, or more for effective.  this is the number of hops between nodes"</span>);
<a class="jxr_linenumber" name="L4071" href="#L4071">4071</a> 
<a class="jxr_linenumber" name="L4072" href="#L4072">4072</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4073" href="#L4073">4073</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4074" href="#L4074">4074</a>           PITGroupSet.COLUMN_FIELD_ID, 
<a class="jxr_linenumber" name="L4075" href="#L4075">4075</a>           <span class="jxr_string">"uuid foreign key from grouper_pit_fields which is the list of the membership, normally members or the privilege in question"</span>);
<a class="jxr_linenumber" name="L4076" href="#L4076">4076</a> 
<a class="jxr_linenumber" name="L4077" href="#L4077">4077</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4078" href="#L4078">4078</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4079" href="#L4079">4079</a>           PITGroupSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L4080" href="#L4080">4080</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L4081" href="#L4081">4081</a> 
<a class="jxr_linenumber" name="L4082" href="#L4082">4082</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4083" href="#L4083">4083</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4084" href="#L4084">4084</a>           PITGroupSet.COLUMN_MEMBER_ATTR_DEF_ID, 
<a class="jxr_linenumber" name="L4085" href="#L4085">4085</a>           <span class="jxr_string">"foreign key of grouper_pit_attribute_def of the member record"</span>);
<a class="jxr_linenumber" name="L4086" href="#L4086">4086</a> 
<a class="jxr_linenumber" name="L4087" href="#L4087">4087</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4088" href="#L4088">4088</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4089" href="#L4089">4089</a>           PITGroupSet.COLUMN_MEMBER_FIELD_ID, 
<a class="jxr_linenumber" name="L4090" href="#L4090">4090</a>           <span class="jxr_string">"uuid foreign key from grouper_pit_fields which is the list of the membership, normally members"</span>);
<a class="jxr_linenumber" name="L4091" href="#L4091">4091</a> 
<a class="jxr_linenumber" name="L4092" href="#L4092">4092</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4093" href="#L4093">4093</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4094" href="#L4094">4094</a>           PITGroupSet.COLUMN_MEMBER_GROUP_ID, 
<a class="jxr_linenumber" name="L4095" href="#L4095">4095</a>           <span class="jxr_string">"uuid to the grouper_pit_groups table which is the group that is a member of the owner"</span>);
<a class="jxr_linenumber" name="L4096" href="#L4096">4096</a> 
<a class="jxr_linenumber" name="L4097" href="#L4097">4097</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4098" href="#L4098">4098</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4099" href="#L4099">4099</a>           PITGroupSet.COLUMN_MEMBER_ID, 
<a class="jxr_linenumber" name="L4100" href="#L4100">4100</a>           <span class="jxr_string">"whether this is groups, stems, or attribute definitions, this is the member"</span>);
<a class="jxr_linenumber" name="L4101" href="#L4101">4101</a> 
<a class="jxr_linenumber" name="L4102" href="#L4102">4102</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4103" href="#L4103">4103</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4104" href="#L4104">4104</a>           PITGroupSet.COLUMN_MEMBER_STEM_ID, 
<a class="jxr_linenumber" name="L4105" href="#L4105">4105</a>           <span class="jxr_string">"uuid to the grouper_pit_stems table which is the stem that is implied by the owner"</span>);
<a class="jxr_linenumber" name="L4106" href="#L4106">4106</a> 
<a class="jxr_linenumber" name="L4107" href="#L4107">4107</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4108" href="#L4108">4108</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4109" href="#L4109">4109</a>           PITGroupSet.COLUMN_OWNER_ATTR_DEF_ID, 
<a class="jxr_linenumber" name="L4110" href="#L4110">4110</a>           <span class="jxr_string">"uuid to the grouper_pit_attribute_def table which is the owner of this record, which implies a relationship to the member, if null, it will have (NULL) which helps with some DB vendors"</span>);
<a class="jxr_linenumber" name="L4111" href="#L4111">4111</a> 
<a class="jxr_linenumber" name="L4112" href="#L4112">4112</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4113" href="#L4113">4113</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4114" href="#L4114">4114</a>           PITGroupSet.COLUMN_OWNER_GROUP_ID, 
<a class="jxr_linenumber" name="L4115" href="#L4115">4115</a>           <span class="jxr_string">"uuid to the grouper_pit_groups table which is the owner of this record, which implies a membership to the member uuid, if null, it will be (NULL) which helps with some DB vendors"</span>);
<a class="jxr_linenumber" name="L4116" href="#L4116">4116</a> 
<a class="jxr_linenumber" name="L4117" href="#L4117">4117</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4118" href="#L4118">4118</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4119" href="#L4119">4119</a>           PITGroupSet.COLUMN_OWNER_ID, 
<a class="jxr_linenumber" name="L4120" href="#L4120">4120</a>           <span class="jxr_string">"this is the owner id regardless of the type of owner"</span>);
<a class="jxr_linenumber" name="L4121" href="#L4121">4121</a> 
<a class="jxr_linenumber" name="L4122" href="#L4122">4122</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4123" href="#L4123">4123</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4124" href="#L4124">4124</a>           PITGroupSet.COLUMN_OWNER_STEM_ID, 
<a class="jxr_linenumber" name="L4125" href="#L4125">4125</a>           <span class="jxr_string">"uuid to the grouper_pit_stems table which is the owner of this record, which implies a privilege to the member uuid, if null, it will be (NULL) which helps with some DB vendors"</span>);
<a class="jxr_linenumber" name="L4126" href="#L4126">4126</a> 
<a class="jxr_linenumber" name="L4127" href="#L4127">4127</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4128" href="#L4128">4128</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4129" href="#L4129">4129</a>           PITGroupSet.COLUMN_PARENT_ID, 
<a class="jxr_linenumber" name="L4130" href="#L4130">4130</a>           <span class="jxr_string">"this is the link back to the grouper_pit_group_set table which is the one one hop away and related to this one..."</span>);
<a class="jxr_linenumber" name="L4131" href="#L4131">4131</a> 
<a class="jxr_linenumber" name="L4132" href="#L4132">4132</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4133" href="#L4133">4133</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L4134" href="#L4134">4134</a>           PITGroupSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4135" href="#L4135">4135</a>           <span class="jxr_string">"optimistic locking column for hibernate used for updates and deletes"</span>);
<a class="jxr_linenumber" name="L4136" href="#L4136">4136</a> 
<a class="jxr_linenumber" name="L4137" href="#L4137">4137</a>     }
<a class="jxr_linenumber" name="L4138" href="#L4138">4138</a> 
<a class="jxr_linenumber" name="L4139" href="#L4139">4139</a>     {
<a class="jxr_linenumber" name="L4140" href="#L4140">4140</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L4141" href="#L4141">4141</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4142" href="#L4142">4142</a>           <span class="jxr_string">"This table holds relationships between roles if one role inherits permissions from another role"</span>);
<a class="jxr_linenumber" name="L4143" href="#L4143">4143</a> 
<a class="jxr_linenumber" name="L4144" href="#L4144">4144</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4145" href="#L4145">4145</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4146" href="#L4146">4146</a>           RoleSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L4147" href="#L4147">4147</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L4148" href="#L4148">4148</a> 
<a class="jxr_linenumber" name="L4149" href="#L4149">4149</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4150" href="#L4150">4150</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4151" href="#L4151">4151</a>           RoleSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4152" href="#L4152">4152</a>           <span class="jxr_string">"links to the grouper_audit_entry for the last change of this row"</span>);
<a class="jxr_linenumber" name="L4153" href="#L4153">4153</a> 
<a class="jxr_linenumber" name="L4154" href="#L4154">4154</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4155" href="#L4155">4155</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4156" href="#L4156">4156</a>           RoleSet.COLUMN_CREATED_ON, 
<a class="jxr_linenumber" name="L4157" href="#L4157">4157</a>           <span class="jxr_string">"millis since 1970 that this row was created"</span>);
<a class="jxr_linenumber" name="L4158" href="#L4158">4158</a> 
<a class="jxr_linenumber" name="L4159" href="#L4159">4159</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4160" href="#L4160">4160</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4161" href="#L4161">4161</a>           RoleSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L4162" href="#L4162">4162</a>           <span class="jxr_string">"number of hops across the relationship, 0 means self, 1 is immediate, more is effective"</span>);
<a class="jxr_linenumber" name="L4163" href="#L4163">4163</a> 
<a class="jxr_linenumber" name="L4164" href="#L4164">4164</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4165" href="#L4165">4165</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4166" href="#L4166">4166</a>           RoleSet.COLUMN_IF_HAS_ROLE_ID, 
<a class="jxr_linenumber" name="L4167" href="#L4167">4167</a>           <span class="jxr_string">"this is the foreign key uuid in grouper_groups where if the user has this role then they get the permissions assigned to another role then_has"</span>);
<a class="jxr_linenumber" name="L4168" href="#L4168">4168</a> 
<a class="jxr_linenumber" name="L4169" href="#L4169">4169</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4170" href="#L4170">4170</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4171" href="#L4171">4171</a>           RoleSet.COLUMN_LAST_UPDATED, 
<a class="jxr_linenumber" name="L4172" href="#L4172">4172</a>           <span class="jxr_string">"millis since 1970 when this row was last updated"</span>);
<a class="jxr_linenumber" name="L4173" href="#L4173">4173</a> 
<a class="jxr_linenumber" name="L4174" href="#L4174">4174</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4175" href="#L4175">4175</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4176" href="#L4176">4176</a>           RoleSet.COLUMN_PARENT_ROLE_SET_ID, 
<a class="jxr_linenumber" name="L4177" href="#L4177">4177</a>           <span class="jxr_string">"this is the foreign key to the uuid in this table grouper_role_set which is the next closest to the underlying assignment"</span>);
<a class="jxr_linenumber" name="L4178" href="#L4178">4178</a> 
<a class="jxr_linenumber" name="L4179" href="#L4179">4179</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4180" href="#L4180">4180</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4181" href="#L4181">4181</a>           RoleSet.COLUMN_THEN_HAS_ROLE_ID, 
<a class="jxr_linenumber" name="L4182" href="#L4182">4182</a>           <span class="jxr_string">"this is the foreign key uuid in grouper_gropus where if the user has the if_has role then the user gets the permissions assigned to this then_has role"</span>);
<a class="jxr_linenumber" name="L4183" href="#L4183">4183</a> 
<a class="jxr_linenumber" name="L4184" href="#L4184">4184</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4185" href="#L4185">4185</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4186" href="#L4186">4186</a>           RoleSet.COLUMN_TYPE, 
<a class="jxr_linenumber" name="L4187" href="#L4187">4187</a>           <span class="jxr_string">"RoleHierarchyType enum: self, immediate, effective"</span>);
<a class="jxr_linenumber" name="L4188" href="#L4188">4188</a> 
<a class="jxr_linenumber" name="L4189" href="#L4189">4189</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4190" href="#L4190">4190</a>           RoleSet.TABLE_GROUPER_ROLE_SET,
<a class="jxr_linenumber" name="L4191" href="#L4191">4191</a>           RoleSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4192" href="#L4192">4192</a>           <span class="jxr_string">"optimistic logging integer used by hibernate during updates and deletes"</span>);
<a class="jxr_linenumber" name="L4193" href="#L4193">4193</a> 
<a class="jxr_linenumber" name="L4194" href="#L4194">4194</a>     }
<a class="jxr_linenumber" name="L4195" href="#L4195">4195</a>     
<a class="jxr_linenumber" name="L4196" href="#L4196">4196</a> 
<a class="jxr_linenumber" name="L4197" href="#L4197">4197</a>     {
<a class="jxr_linenumber" name="L4198" href="#L4198">4198</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L4199" href="#L4199">4199</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4200" href="#L4200">4200</a>           <span class="jxr_string">"point in time: This table holds relationships between roles if one role inherits permissions from another role"</span>);
<a class="jxr_linenumber" name="L4201" href="#L4201">4201</a> 
<a class="jxr_linenumber" name="L4202" href="#L4202">4202</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4203" href="#L4203">4203</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4204" href="#L4204">4204</a>           PITRoleSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4205" href="#L4205">4205</a>           <span class="jxr_string">"links to the grouper_audit_entry for the last change of this row"</span>);
<a class="jxr_linenumber" name="L4206" href="#L4206">4206</a> 
<a class="jxr_linenumber" name="L4207" href="#L4207">4207</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4208" href="#L4208">4208</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4209" href="#L4209">4209</a>           PITRoleSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L4210" href="#L4210">4210</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L4211" href="#L4211">4211</a> 
<a class="jxr_linenumber" name="L4212" href="#L4212">4212</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4213" href="#L4213">4213</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4214" href="#L4214">4214</a>           PITRoleSet.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L4215" href="#L4215">4215</a>           <span class="jxr_string">"T or F for if this row is active based on start time and end time"</span>);
<a class="jxr_linenumber" name="L4216" href="#L4216">4216</a> 
<a class="jxr_linenumber" name="L4217" href="#L4217">4217</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4218" href="#L4218">4218</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4219" href="#L4219">4219</a>           PITRoleSet.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L4220" href="#L4220">4220</a>           <span class="jxr_string">"number of millis since 1970 that this row was inserted"</span>);
<a class="jxr_linenumber" name="L4221" href="#L4221">4221</a> 
<a class="jxr_linenumber" name="L4222" href="#L4222">4222</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4223" href="#L4223">4223</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4224" href="#L4224">4224</a>           PITRoleSet.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L4225" href="#L4225">4225</a>           <span class="jxr_string">"number of millis since 1970 that this row was deleted"</span>);
<a class="jxr_linenumber" name="L4226" href="#L4226">4226</a> 
<a class="jxr_linenumber" name="L4227" href="#L4227">4227</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4228" href="#L4228">4228</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4229" href="#L4229">4229</a>           PITRoleSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L4230" href="#L4230">4230</a>           <span class="jxr_string">"number of hops across the relationship, 0 means self, 1 is immediate, more is effective"</span>);
<a class="jxr_linenumber" name="L4231" href="#L4231">4231</a> 
<a class="jxr_linenumber" name="L4232" href="#L4232">4232</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4233" href="#L4233">4233</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4234" href="#L4234">4234</a>           PITRoleSet.COLUMN_IF_HAS_ROLE_ID, 
<a class="jxr_linenumber" name="L4235" href="#L4235">4235</a>           <span class="jxr_string">"this is the foreign key uuid in grouper_pit_groups where if the user has this role then they get the permissions assigned to another role then_has"</span>);
<a class="jxr_linenumber" name="L4236" href="#L4236">4236</a> 
<a class="jxr_linenumber" name="L4237" href="#L4237">4237</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4238" href="#L4238">4238</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4239" href="#L4239">4239</a>           PITRoleSet.COLUMN_PARENT_ROLE_SET_ID, 
<a class="jxr_linenumber" name="L4240" href="#L4240">4240</a>           <span class="jxr_string">"this is the foreign key to the uuid in this table grouper_pit_role_set which is the next closest to the underlying assignment"</span>);
<a class="jxr_linenumber" name="L4241" href="#L4241">4241</a> 
<a class="jxr_linenumber" name="L4242" href="#L4242">4242</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4243" href="#L4243">4243</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4244" href="#L4244">4244</a>           PITRoleSet.COLUMN_THEN_HAS_ROLE_ID, 
<a class="jxr_linenumber" name="L4245" href="#L4245">4245</a>           <span class="jxr_string">"this is the foreign key uuid in grouper_pit_gropus where if the user has the if_has role then the user gets the permissions assigned to this then_has role"</span>);
<a class="jxr_linenumber" name="L4246" href="#L4246">4246</a> 
<a class="jxr_linenumber" name="L4247" href="#L4247">4247</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4248" href="#L4248">4248</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET,
<a class="jxr_linenumber" name="L4249" href="#L4249">4249</a>           PITRoleSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4250" href="#L4250">4250</a>           <span class="jxr_string">"optimistic logging integer used by hibernate during updates and deletes"</span>);
<a class="jxr_linenumber" name="L4251" href="#L4251">4251</a> 
<a class="jxr_linenumber" name="L4252" href="#L4252">4252</a>     }
<a class="jxr_linenumber" name="L4253" href="#L4253">4253</a>     
<a class="jxr_linenumber" name="L4254" href="#L4254">4254</a>     
<a class="jxr_linenumber" name="L4255" href="#L4255">4255</a>     
<a class="jxr_linenumber" name="L4256" href="#L4256">4256</a>     GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,AuditEntry.TABLE_GROUPER_AUDIT_ENTRY, 
<a class="jxr_linenumber" name="L4257" href="#L4257">4257</a>       <span class="jxr_string">"holds one record for each audit entry record which is a high level action that ties together lower level actions"</span>);
<a class="jxr_linenumber" name="L4258" href="#L4258">4258</a>     
<a class="jxr_linenumber" name="L4259" href="#L4259">4259</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4260" href="#L4260">4260</a>         <span class="jxr_string">"act_as_member_id"</span>, <span class="jxr_string">"Member id (foreign key) of the user who is being acted as"</span>);
<a class="jxr_linenumber" name="L4261" href="#L4261">4261</a>     
<a class="jxr_linenumber" name="L4262" href="#L4262">4262</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4263" href="#L4263">4263</a>         <span class="jxr_string">"audit_type_id"</span>, <span class="jxr_string">"foreign key to the grouper_audit_type table which is the type of this entry"</span>);
<a class="jxr_linenumber" name="L4264" href="#L4264">4264</a>     
<a class="jxr_linenumber" name="L4265" href="#L4265">4265</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4266" href="#L4266">4266</a>         <span class="jxr_string">"context_id"</span>, <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4267" href="#L4267">4267</a>     
<a class="jxr_linenumber" name="L4268" href="#L4268">4268</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4269" href="#L4269">4269</a>         <span class="jxr_string">"created_on"</span>, <span class="jxr_string">"When this audit entry record was created"</span>);
<a class="jxr_linenumber" name="L4270" href="#L4270">4270</a> 
<a class="jxr_linenumber" name="L4271" href="#L4271">4271</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4272" href="#L4272">4272</a>         <span class="jxr_string">"description"</span>, <span class="jxr_string">"Description is a sentence form expression of what is being audited"</span>);
<a class="jxr_linenumber" name="L4273" href="#L4273">4273</a>     
<a class="jxr_linenumber" name="L4274" href="#L4274">4274</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4275" href="#L4275">4275</a>         <span class="jxr_string">"env_name"</span>, <span class="jxr_string">"environment label of the system running, from grouper.properties"</span>);
<a class="jxr_linenumber" name="L4276" href="#L4276">4276</a> 
<a class="jxr_linenumber" name="L4277" href="#L4277">4277</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4278" href="#L4278">4278</a>         <span class="jxr_string">"grouper_engine"</span>, <span class="jxr_string">"Grouper engine is e.g. UI, WS, GSH, loader, etc"</span>);
<a class="jxr_linenumber" name="L4279" href="#L4279">4279</a> 
<a class="jxr_linenumber" name="L4280" href="#L4280">4280</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4281" href="#L4281">4281</a>         <span class="jxr_string">"grouper_version"</span>, <span class="jxr_string">"Grouper version of the API executing"</span>);
<a class="jxr_linenumber" name="L4282" href="#L4282">4282</a>     
<a class="jxr_linenumber" name="L4283" href="#L4283">4283</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4284" href="#L4284">4284</a>         <span class="jxr_string">"hibernate_version_number"</span>, <span class="jxr_string">"hibernate version number keeps track of if multiple sessions step on toes"</span>);
<a class="jxr_linenumber" name="L4285" href="#L4285">4285</a> 
<a class="jxr_linenumber" name="L4286" href="#L4286">4286</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4287" href="#L4287">4287</a>         <span class="jxr_string">"id"</span>, <span class="jxr_string">"db id of this audit entry record"</span>);
<a class="jxr_linenumber" name="L4288" href="#L4288">4288</a>     
<a class="jxr_linenumber" name="L4289" href="#L4289">4289</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4290" href="#L4290">4290</a>         <span class="jxr_string">"int01"</span>, <span class="jxr_string">"The int 01 value"</span>);
<a class="jxr_linenumber" name="L4291" href="#L4291">4291</a> 
<a class="jxr_linenumber" name="L4292" href="#L4292">4292</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4293" href="#L4293">4293</a>         <span class="jxr_string">"int02"</span>, <span class="jxr_string">"The int 02 value"</span>);
<a class="jxr_linenumber" name="L4294" href="#L4294">4294</a>     
<a class="jxr_linenumber" name="L4295" href="#L4295">4295</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4296" href="#L4296">4296</a>         <span class="jxr_string">"int03"</span>, <span class="jxr_string">"The int 03 value"</span>);
<a class="jxr_linenumber" name="L4297" href="#L4297">4297</a> 
<a class="jxr_linenumber" name="L4298" href="#L4298">4298</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4299" href="#L4299">4299</a>         <span class="jxr_string">"int04"</span>, <span class="jxr_string">"The int 04 value"</span>);
<a class="jxr_linenumber" name="L4300" href="#L4300">4300</a> 
<a class="jxr_linenumber" name="L4301" href="#L4301">4301</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4302" href="#L4302">4302</a>         <span class="jxr_string">"int05"</span>, <span class="jxr_string">"The int 05 value"</span>);
<a class="jxr_linenumber" name="L4303" href="#L4303">4303</a> 
<a class="jxr_linenumber" name="L4304" href="#L4304">4304</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4305" href="#L4305">4305</a>         <span class="jxr_string">"last_updated"</span>, <span class="jxr_string">"When this audit entry was last updated"</span>);
<a class="jxr_linenumber" name="L4306" href="#L4306">4306</a> 
<a class="jxr_linenumber" name="L4307" href="#L4307">4307</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4308" href="#L4308">4308</a>         <span class="jxr_string">"logged_in_member_id"</span>, <span class="jxr_string">"Member id (foreign key) of the user logged in"</span>);
<a class="jxr_linenumber" name="L4309" href="#L4309">4309</a> 
<a class="jxr_linenumber" name="L4310" href="#L4310">4310</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4311" href="#L4311">4311</a>         <span class="jxr_string">"server_host"</span>, <span class="jxr_string">"Host of the system running the grouper API"</span>);
<a class="jxr_linenumber" name="L4312" href="#L4312">4312</a> 
<a class="jxr_linenumber" name="L4313" href="#L4313">4313</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4314" href="#L4314">4314</a>         <span class="jxr_string">"string01"</span>, <span class="jxr_string">"The string 01 value"</span>);
<a class="jxr_linenumber" name="L4315" href="#L4315">4315</a> 
<a class="jxr_linenumber" name="L4316" href="#L4316">4316</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4317" href="#L4317">4317</a>         <span class="jxr_string">"string02"</span>, <span class="jxr_string">"The string 02 value"</span>);
<a class="jxr_linenumber" name="L4318" href="#L4318">4318</a> 
<a class="jxr_linenumber" name="L4319" href="#L4319">4319</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4320" href="#L4320">4320</a>         <span class="jxr_string">"string03"</span>, <span class="jxr_string">"The string 03 value"</span>);
<a class="jxr_linenumber" name="L4321" href="#L4321">4321</a> 
<a class="jxr_linenumber" name="L4322" href="#L4322">4322</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4323" href="#L4323">4323</a>         <span class="jxr_string">"string04"</span>, <span class="jxr_string">"The string 04 value"</span>);
<a class="jxr_linenumber" name="L4324" href="#L4324">4324</a> 
<a class="jxr_linenumber" name="L4325" href="#L4325">4325</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4326" href="#L4326">4326</a>         <span class="jxr_string">"string05"</span>, <span class="jxr_string">"The string 05 value"</span>);
<a class="jxr_linenumber" name="L4327" href="#L4327">4327</a> 
<a class="jxr_linenumber" name="L4328" href="#L4328">4328</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4329" href="#L4329">4329</a>         <span class="jxr_string">"string06"</span>, <span class="jxr_string">"The string 06 value"</span>);
<a class="jxr_linenumber" name="L4330" href="#L4330">4330</a> 
<a class="jxr_linenumber" name="L4331" href="#L4331">4331</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4332" href="#L4332">4332</a>         <span class="jxr_string">"string07"</span>, <span class="jxr_string">"The string 07 value"</span>);
<a class="jxr_linenumber" name="L4333" href="#L4333">4333</a> 
<a class="jxr_linenumber" name="L4334" href="#L4334">4334</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4335" href="#L4335">4335</a>         <span class="jxr_string">"string08"</span>, <span class="jxr_string">"The string 08 value"</span>);
<a class="jxr_linenumber" name="L4336" href="#L4336">4336</a> 
<a class="jxr_linenumber" name="L4337" href="#L4337">4337</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4338" href="#L4338">4338</a>         <span class="jxr_string">"user_ip_address"</span>, <span class="jxr_string">"IP address of the user connecting to the system (e.g. from UI or WS)"</span>);
<a class="jxr_linenumber" name="L4339" href="#L4339">4339</a> 
<a class="jxr_linenumber" name="L4340" href="#L4340">4340</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4341" href="#L4341">4341</a>         <span class="jxr_string">"duration_microseconds"</span>, <span class="jxr_string">"Duration of the context, in microseconds (millionths of a second)"</span>);
<a class="jxr_linenumber" name="L4342" href="#L4342">4342</a> 
<a class="jxr_linenumber" name="L4343" href="#L4343">4343</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4344" href="#L4344">4344</a>         <span class="jxr_string">"query_count"</span>, <span class="jxr_string">"Number of database queries required for this context"</span>);
<a class="jxr_linenumber" name="L4345" href="#L4345">4345</a> 
<a class="jxr_linenumber" name="L4346" href="#L4346">4346</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY,  
<a class="jxr_linenumber" name="L4347" href="#L4347">4347</a>         <span class="jxr_string">"server_user_name"</span>, <span class="jxr_string">"Username of the OS user running the API.  This might identify who ran a GSH call"</span>);
<a class="jxr_linenumber" name="L4348" href="#L4348">4348</a> 
<a class="jxr_linenumber" name="L4349" href="#L4349">4349</a>     
<a class="jxr_linenumber" name="L4350" href="#L4350">4350</a>     
<a class="jxr_linenumber" name="L4351" href="#L4351">4351</a>     GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,AuditType.TABLE_GROUPER_AUDIT_TYPE, 
<a class="jxr_linenumber" name="L4352" href="#L4352">4352</a>       <span class="jxr_string">"audit type is a category and an action that organizes audits.  Also holds labels for all the misc string and int fields"</span>);
<a class="jxr_linenumber" name="L4353" href="#L4353">4353</a>     
<a class="jxr_linenumber" name="L4354" href="#L4354">4354</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4355" href="#L4355">4355</a>         <span class="jxr_string">"action_name"</span>, <span class="jxr_string">"The action in this audit category to differentiate from others"</span>);
<a class="jxr_linenumber" name="L4356" href="#L4356">4356</a>     
<a class="jxr_linenumber" name="L4357" href="#L4357">4357</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4358" href="#L4358">4358</a>         <span class="jxr_string">"audit_category"</span>, <span class="jxr_string">"The category of this audit in logical grouping"</span>);
<a class="jxr_linenumber" name="L4359" href="#L4359">4359</a>     
<a class="jxr_linenumber" name="L4360" href="#L4360">4360</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4361" href="#L4361">4361</a>         <span class="jxr_string">"context_id"</span>, <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4362" href="#L4362">4362</a>     
<a class="jxr_linenumber" name="L4363" href="#L4363">4363</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4364" href="#L4364">4364</a>         <span class="jxr_string">"created_on"</span>, <span class="jxr_string">"When this audit type was created"</span>);
<a class="jxr_linenumber" name="L4365" href="#L4365">4365</a>     
<a class="jxr_linenumber" name="L4366" href="#L4366">4366</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4367" href="#L4367">4367</a>         <span class="jxr_string">"hibernate_version_number"</span>, <span class="jxr_string">"Hibernate version number makes sure multiple sessions do not step on toes"</span>);
<a class="jxr_linenumber" name="L4368" href="#L4368">4368</a>     
<a class="jxr_linenumber" name="L4369" href="#L4369">4369</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4370" href="#L4370">4370</a>         <span class="jxr_string">"id"</span>, <span class="jxr_string">"Unique id of this audit entry"</span>);
<a class="jxr_linenumber" name="L4371" href="#L4371">4371</a>     
<a class="jxr_linenumber" name="L4372" href="#L4372">4372</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4373" href="#L4373">4373</a>         <span class="jxr_string">"label_int01"</span>, <span class="jxr_string">"The int 01 value"</span>);
<a class="jxr_linenumber" name="L4374" href="#L4374">4374</a>     
<a class="jxr_linenumber" name="L4375" href="#L4375">4375</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4376" href="#L4376">4376</a>         <span class="jxr_string">"label_int02"</span>, <span class="jxr_string">"The int 02 value"</span>);
<a class="jxr_linenumber" name="L4377" href="#L4377">4377</a>     
<a class="jxr_linenumber" name="L4378" href="#L4378">4378</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4379" href="#L4379">4379</a>         <span class="jxr_string">"label_int03"</span>, <span class="jxr_string">"The int 03 value"</span>);
<a class="jxr_linenumber" name="L4380" href="#L4380">4380</a>     
<a class="jxr_linenumber" name="L4381" href="#L4381">4381</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4382" href="#L4382">4382</a>         <span class="jxr_string">"label_int04"</span>, <span class="jxr_string">"The int 04 value"</span>);
<a class="jxr_linenumber" name="L4383" href="#L4383">4383</a>     
<a class="jxr_linenumber" name="L4384" href="#L4384">4384</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4385" href="#L4385">4385</a>         <span class="jxr_string">"label_int05"</span>, <span class="jxr_string">"The int 05 value"</span>);
<a class="jxr_linenumber" name="L4386" href="#L4386">4386</a>     
<a class="jxr_linenumber" name="L4387" href="#L4387">4387</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4388" href="#L4388">4388</a>         <span class="jxr_string">"label_string01"</span>, <span class="jxr_string">"The label of the string field 01 from grouper_audit_type"</span>);
<a class="jxr_linenumber" name="L4389" href="#L4389">4389</a>     
<a class="jxr_linenumber" name="L4390" href="#L4390">4390</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4391" href="#L4391">4391</a>         <span class="jxr_string">"label_string02"</span>, <span class="jxr_string">"The label of the string field 02 from grouper_audit_type"</span>);
<a class="jxr_linenumber" name="L4392" href="#L4392">4392</a>     
<a class="jxr_linenumber" name="L4393" href="#L4393">4393</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4394" href="#L4394">4394</a>         <span class="jxr_string">"label_string03"</span>, <span class="jxr_string">"The label of the string field 03 from grouper_audit_type"</span>);
<a class="jxr_linenumber" name="L4395" href="#L4395">4395</a>     
<a class="jxr_linenumber" name="L4396" href="#L4396">4396</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4397" href="#L4397">4397</a>         <span class="jxr_string">"label_string04"</span>, <span class="jxr_string">"The label of the string field 04 from grouper_audit_type"</span>);
<a class="jxr_linenumber" name="L4398" href="#L4398">4398</a>     
<a class="jxr_linenumber" name="L4399" href="#L4399">4399</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4400" href="#L4400">4400</a>         <span class="jxr_string">"label_string05"</span>, <span class="jxr_string">"The label of the string field 05 from grouper_audit_type"</span>);
<a class="jxr_linenumber" name="L4401" href="#L4401">4401</a>     
<a class="jxr_linenumber" name="L4402" href="#L4402">4402</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4403" href="#L4403">4403</a>         <span class="jxr_string">"label_string06"</span>, <span class="jxr_string">"The label of the string field 06 from grouper_audit_type"</span>);
<a class="jxr_linenumber" name="L4404" href="#L4404">4404</a>     
<a class="jxr_linenumber" name="L4405" href="#L4405">4405</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4406" href="#L4406">4406</a>         <span class="jxr_string">"label_string07"</span>, <span class="jxr_string">"The label of the string field 07 from grouper_audit_type"</span>);
<a class="jxr_linenumber" name="L4407" href="#L4407">4407</a>     
<a class="jxr_linenumber" name="L4408" href="#L4408">4408</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4409" href="#L4409">4409</a>         <span class="jxr_string">"label_string08"</span>, <span class="jxr_string">"The label of the string field 08 from grouper_audit_type"</span>);
<a class="jxr_linenumber" name="L4410" href="#L4410">4410</a>     
<a class="jxr_linenumber" name="L4411" href="#L4411">4411</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, AuditType.TABLE_GROUPER_AUDIT_TYPE,  
<a class="jxr_linenumber" name="L4412" href="#L4412">4412</a>         <span class="jxr_string">"last_updated"</span>, <span class="jxr_string">"When this audit type was last updated"</span>);
<a class="jxr_linenumber" name="L4413" href="#L4413">4413</a> 
<a class="jxr_linenumber" name="L4414" href="#L4414">4414</a>     
<a class="jxr_linenumber" name="L4415" href="#L4415">4415</a>     GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L4416" href="#L4416">4416</a>           Composite.TABLE_GROUPER_COMPOSITES, <span class="jxr_string">"records the composite group, and its factors"</span>);
<a class="jxr_linenumber" name="L4417" href="#L4417">4417</a> 
<a class="jxr_linenumber" name="L4418" href="#L4418">4418</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L4419" href="#L4419">4419</a>           <span class="jxr_string">"db id of this composite record"</span>);
<a class="jxr_linenumber" name="L4420" href="#L4420">4420</a> 
<a class="jxr_linenumber" name="L4421" href="#L4421">4421</a>     
<a class="jxr_linenumber" name="L4422" href="#L4422">4422</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES,  <span class="jxr_string">"owner"</span>, 
<a class="jxr_linenumber" name="L4423" href="#L4423">4423</a>           <span class="jxr_string">"group uuid of the composite group"</span>);
<a class="jxr_linenumber" name="L4424" href="#L4424">4424</a> 
<a class="jxr_linenumber" name="L4425" href="#L4425">4425</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES,  <span class="jxr_string">"left_factor"</span>, 
<a class="jxr_linenumber" name="L4426" href="#L4426">4426</a>           <span class="jxr_string">"left factor of the composite group"</span>);
<a class="jxr_linenumber" name="L4427" href="#L4427">4427</a> 
<a class="jxr_linenumber" name="L4428" href="#L4428">4428</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES,  <span class="jxr_string">"right_factor"</span>, 
<a class="jxr_linenumber" name="L4429" href="#L4429">4429</a>           <span class="jxr_string">"right factor of the composite group"</span>);
<a class="jxr_linenumber" name="L4430" href="#L4430">4430</a> 
<a class="jxr_linenumber" name="L4431" href="#L4431">4431</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES,  <span class="jxr_string">"type"</span>, 
<a class="jxr_linenumber" name="L4432" href="#L4432">4432</a>           <span class="jxr_string">"e.g. union, complement, intersection"</span>);
<a class="jxr_linenumber" name="L4433" href="#L4433">4433</a> 
<a class="jxr_linenumber" name="L4434" href="#L4434">4434</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES,  <span class="jxr_string">"creator_id"</span>, 
<a class="jxr_linenumber" name="L4435" href="#L4435">4435</a>           <span class="jxr_string">"member uuid of who created this"</span>);
<a class="jxr_linenumber" name="L4436" href="#L4436">4436</a> 
<a class="jxr_linenumber" name="L4437" href="#L4437">4437</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES,  <span class="jxr_string">"create_time"</span>, 
<a class="jxr_linenumber" name="L4438" href="#L4438">4438</a>           <span class="jxr_string">"number of millis since 1970 until when created"</span>);
<a class="jxr_linenumber" name="L4439" href="#L4439">4439</a> 
<a class="jxr_linenumber" name="L4440" href="#L4440">4440</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES, 
<a class="jxr_linenumber" name="L4441" href="#L4441">4441</a>         COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L4442" href="#L4442">4442</a> 
<a class="jxr_linenumber" name="L4443" href="#L4443">4443</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Composite.TABLE_GROUPER_COMPOSITES, 
<a class="jxr_linenumber" name="L4444" href="#L4444">4444</a>         COLUMN_CONTEXT_ID, <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4445" href="#L4445">4445</a> 
<a class="jxr_linenumber" name="L4446" href="#L4446">4446</a>     {
<a class="jxr_linenumber" name="L4447" href="#L4447">4447</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ, <span class="jxr_string">"external subjects stored in grouper"</span>);
<a class="jxr_linenumber" name="L4448" href="#L4448">4448</a>   
<a class="jxr_linenumber" name="L4449" href="#L4449">4449</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4450" href="#L4450">4450</a>         <span class="jxr_string">"context id links back to an auditing record"</span>);
<a class="jxr_linenumber" name="L4451" href="#L4451">4451</a>       
<a class="jxr_linenumber" name="L4452" href="#L4452">4452</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_CREATE_TIME, 
<a class="jxr_linenumber" name="L4453" href="#L4453">4453</a>         <span class="jxr_string">"when this record was created in millis from 1970"</span>);
<a class="jxr_linenumber" name="L4454" href="#L4454">4454</a>   
<a class="jxr_linenumber" name="L4455" href="#L4455">4455</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_CREATOR_MEMBER_ID, 
<a class="jxr_linenumber" name="L4456" href="#L4456">4456</a>         <span class="jxr_string">"member id of who created this record"</span>);
<a class="jxr_linenumber" name="L4457" href="#L4457">4457</a>   
<a class="jxr_linenumber" name="L4458" href="#L4458">4458</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_DESCRIPTION, 
<a class="jxr_linenumber" name="L4459" href="#L4459">4459</a>         <span class="jxr_string">"description field of the subject object"</span>);
<a class="jxr_linenumber" name="L4460" href="#L4460">4460</a>   
<a class="jxr_linenumber" name="L4461" href="#L4461">4461</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_EMAIL, 
<a class="jxr_linenumber" name="L4462" href="#L4462">4462</a>         <span class="jxr_string">"email address of subject (optional)"</span>);
<a class="jxr_linenumber" name="L4463" href="#L4463">4463</a>   
<a class="jxr_linenumber" name="L4464" href="#L4464">4464</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_IDENTIFIER, 
<a class="jxr_linenumber" name="L4465" href="#L4465">4465</a>         <span class="jxr_string">"identifier of subject, e.g. the eppn."</span>);
<a class="jxr_linenumber" name="L4466" href="#L4466">4466</a>   
<a class="jxr_linenumber" name="L4467" href="#L4467">4467</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_INSTITUTION, 
<a class="jxr_linenumber" name="L4468" href="#L4468">4468</a>         <span class="jxr_string">"institution name where the subject is from"</span>);
<a class="jxr_linenumber" name="L4469" href="#L4469">4469</a>   
<a class="jxr_linenumber" name="L4470" href="#L4470">4470</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_MODIFIER_MEMBER_ID, 
<a class="jxr_linenumber" name="L4471" href="#L4471">4471</a>         <span class="jxr_string">"member id of who last edited the record"</span>);
<a class="jxr_linenumber" name="L4472" href="#L4472">4472</a>   
<a class="jxr_linenumber" name="L4473" href="#L4473">4473</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_MODIFY_TIME, 
<a class="jxr_linenumber" name="L4474" href="#L4474">4474</a>         <span class="jxr_string">"when the record was last modified"</span>);
<a class="jxr_linenumber" name="L4475" href="#L4475">4475</a>   
<a class="jxr_linenumber" name="L4476" href="#L4476">4476</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_NAME, 
<a class="jxr_linenumber" name="L4477" href="#L4477">4477</a>         <span class="jxr_string">"name field of the subject object"</span>);
<a class="jxr_linenumber" name="L4478" href="#L4478">4478</a>   
<a class="jxr_linenumber" name="L4479" href="#L4479">4479</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_SEARCH_STRING_LOWER, 
<a class="jxr_linenumber" name="L4480" href="#L4480">4480</a>         <span class="jxr_string">"subject searches will use this field, it should contain most of the other fields, lower case"</span>);
<a class="jxr_linenumber" name="L4481" href="#L4481">4481</a>       
<a class="jxr_linenumber" name="L4482" href="#L4482">4482</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_UUID, 
<a class="jxr_linenumber" name="L4483" href="#L4483">4483</a>         <span class="jxr_string">"unique identifier for row"</span>);
<a class="jxr_linenumber" name="L4484" href="#L4484">4484</a> 
<a class="jxr_linenumber" name="L4485" href="#L4485">4485</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  ExternalSubject.COLUMN_ENABLED, 
<a class="jxr_linenumber" name="L4486" href="#L4486">4486</a>         <span class="jxr_string">"T or F for if this subject is enabled"</span>);
<a class="jxr_linenumber" name="L4487" href="#L4487">4487</a> 
<a class="jxr_linenumber" name="L4488" href="#L4488">4488</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  
<a class="jxr_linenumber" name="L4489" href="#L4489">4489</a>           ExternalSubject.COLUMN_DISABLED_TIME, 
<a class="jxr_linenumber" name="L4490" href="#L4490">4490</a>         <span class="jxr_string">"number of millis since 1970 when this row was disabled"</span>);
<a class="jxr_linenumber" name="L4491" href="#L4491">4491</a> 
<a class="jxr_linenumber" name="L4492" href="#L4492">4492</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  
<a class="jxr_linenumber" name="L4493" href="#L4493">4493</a>           ExternalSubject.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4494" href="#L4494">4494</a>         <span class="jxr_string">"hibernate optimistic locking value for updates and deletes"</span>);
<a class="jxr_linenumber" name="L4495" href="#L4495">4495</a> 
<a class="jxr_linenumber" name="L4496" href="#L4496">4496</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubject.TABLE_GROUPER_EXT_SUBJ,  
<a class="jxr_linenumber" name="L4497" href="#L4497">4497</a>           ExternalSubject.COLUMN_VETTED_EMAIL_ADDRESSES, 
<a class="jxr_linenumber" name="L4498" href="#L4498">4498</a>         <span class="jxr_string">"comma separated email addresses that this user has responded to"</span>);
<a class="jxr_linenumber" name="L4499" href="#L4499">4499</a>     }
<a class="jxr_linenumber" name="L4500" href="#L4500">4500</a>     
<a class="jxr_linenumber" name="L4501" href="#L4501">4501</a>     {
<a class="jxr_linenumber" name="L4502" href="#L4502">4502</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR, <span class="jxr_string">"external subjects stored in grouper"</span>);
<a class="jxr_linenumber" name="L4503" href="#L4503">4503</a>   
<a class="jxr_linenumber" name="L4504" href="#L4504">4504</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_ATTRIBUTE_SYSTEM_NAME, 
<a class="jxr_linenumber" name="L4505" href="#L4505">4505</a>         <span class="jxr_string">"system name of the attribute, should not change, used as column name in view"</span>);
<a class="jxr_linenumber" name="L4506" href="#L4506">4506</a>     
<a class="jxr_linenumber" name="L4507" href="#L4507">4507</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_ATTRIBUTE_VALUE, 
<a class="jxr_linenumber" name="L4508" href="#L4508">4508</a>         <span class="jxr_string">"value of the attribute"</span>);
<a class="jxr_linenumber" name="L4509" href="#L4509">4509</a>     
<a class="jxr_linenumber" name="L4510" href="#L4510">4510</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4511" href="#L4511">4511</a>         <span class="jxr_string">"context id links back to an auditing record"</span>);
<a class="jxr_linenumber" name="L4512" href="#L4512">4512</a>       
<a class="jxr_linenumber" name="L4513" href="#L4513">4513</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_CREATE_TIME, 
<a class="jxr_linenumber" name="L4514" href="#L4514">4514</a>         <span class="jxr_string">"when this record was created in millis from 1970"</span>);
<a class="jxr_linenumber" name="L4515" href="#L4515">4515</a>   
<a class="jxr_linenumber" name="L4516" href="#L4516">4516</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_CREATOR_MEMBER_ID, 
<a class="jxr_linenumber" name="L4517" href="#L4517">4517</a>         <span class="jxr_string">"member id of who created this record"</span>);
<a class="jxr_linenumber" name="L4518" href="#L4518">4518</a>   
<a class="jxr_linenumber" name="L4519" href="#L4519">4519</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_MODIFIER_MEMBER_ID, 
<a class="jxr_linenumber" name="L4520" href="#L4520">4520</a>         <span class="jxr_string">"member id of who last edited the record"</span>);
<a class="jxr_linenumber" name="L4521" href="#L4521">4521</a>   
<a class="jxr_linenumber" name="L4522" href="#L4522">4522</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_MODIFY_TIME, 
<a class="jxr_linenumber" name="L4523" href="#L4523">4523</a>         <span class="jxr_string">"when the record was last modified"</span>);
<a class="jxr_linenumber" name="L4524" href="#L4524">4524</a>   
<a class="jxr_linenumber" name="L4525" href="#L4525">4525</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_SUBJECT_UUID, 
<a class="jxr_linenumber" name="L4526" href="#L4526">4526</a>         <span class="jxr_string">"foreign key back to external subject"</span>);
<a class="jxr_linenumber" name="L4527" href="#L4527">4527</a>   
<a class="jxr_linenumber" name="L4528" href="#L4528">4528</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4529" href="#L4529">4529</a>           ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  ExternalSubjectAttribute.COLUMN_UUID, 
<a class="jxr_linenumber" name="L4530" href="#L4530">4530</a>         <span class="jxr_string">"unique identifier for row"</span>);
<a class="jxr_linenumber" name="L4531" href="#L4531">4531</a> 
<a class="jxr_linenumber" name="L4532" href="#L4532">4532</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR,  
<a class="jxr_linenumber" name="L4533" href="#L4533">4533</a>           ExternalSubjectAttribute.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4534" href="#L4534">4534</a>         <span class="jxr_string">"hibernate optimistic locking value for updates and deletes"</span>);
<a class="jxr_linenumber" name="L4535" href="#L4535">4535</a> 
<a class="jxr_linenumber" name="L4536" href="#L4536">4536</a>     }
<a class="jxr_linenumber" name="L4537" href="#L4537">4537</a>     
<a class="jxr_linenumber" name="L4538" href="#L4538">4538</a>     {
<a class="jxr_linenumber" name="L4539" href="#L4539">4539</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4540" href="#L4540">4540</a>           Field.TABLE_GROUPER_FIELDS, 
<a class="jxr_linenumber" name="L4541" href="#L4541">4541</a>           <span class="jxr_string">"describes fields related to types"</span>);
<a class="jxr_linenumber" name="L4542" href="#L4542">4542</a>   
<a class="jxr_linenumber" name="L4543" href="#L4543">4543</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4544" href="#L4544">4544</a>           Field.TABLE_GROUPER_FIELDS,  
<a class="jxr_linenumber" name="L4545" href="#L4545">4545</a>           Field.COLUMN_ID, 
<a class="jxr_linenumber" name="L4546" href="#L4546">4546</a>             <span class="jxr_string">"db id of this field record"</span>);
<a class="jxr_linenumber" name="L4547" href="#L4547">4547</a>   
<a class="jxr_linenumber" name="L4548" href="#L4548">4548</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4549" href="#L4549">4549</a>           Field.TABLE_GROUPER_FIELDS,  
<a class="jxr_linenumber" name="L4550" href="#L4550">4550</a>           Field.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4551" href="#L4551">4551</a>             <span class="jxr_string">"hibernate optimistic locking version number for updates and deletes"</span>);
<a class="jxr_linenumber" name="L4552" href="#L4552">4552</a> 
<a class="jxr_linenumber" name="L4553" href="#L4553">4553</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4554" href="#L4554">4554</a>           Field.TABLE_GROUPER_FIELDS,
<a class="jxr_linenumber" name="L4555" href="#L4555">4555</a>           Field.COLUMN_NAME, 
<a class="jxr_linenumber" name="L4556" href="#L4556">4556</a>             <span class="jxr_string">"name of the field"</span>);
<a class="jxr_linenumber" name="L4557" href="#L4557">4557</a>   
<a class="jxr_linenumber" name="L4558" href="#L4558">4558</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4559" href="#L4559">4559</a>           Field.TABLE_GROUPER_FIELDS,  
<a class="jxr_linenumber" name="L4560" href="#L4560">4560</a>           Field.COLUMN_READ_PRIVILEGE, 
<a class="jxr_linenumber" name="L4561" href="#L4561">4561</a>             <span class="jxr_string">"which privilege is required to read this field"</span>);
<a class="jxr_linenumber" name="L4562" href="#L4562">4562</a>   
<a class="jxr_linenumber" name="L4563" href="#L4563">4563</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4564" href="#L4564">4564</a>           Field.TABLE_GROUPER_FIELDS,  
<a class="jxr_linenumber" name="L4565" href="#L4565">4565</a>           Field.COLUMN_TYPE,
<a class="jxr_linenumber" name="L4566" href="#L4566">4566</a>             <span class="jxr_string">"type of field (e.g. attribute, list, access, naming)"</span>);
<a class="jxr_linenumber" name="L4567" href="#L4567">4567</a>   
<a class="jxr_linenumber" name="L4568" href="#L4568">4568</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4569" href="#L4569">4569</a>           Field.TABLE_GROUPER_FIELDS, 
<a class="jxr_linenumber" name="L4570" href="#L4570">4570</a>           Field.COLUMN_WRITE_PRIVILEGE, 
<a class="jxr_linenumber" name="L4571" href="#L4571">4571</a>             <span class="jxr_string">"which privilege is required to write this attribute"</span>);
<a class="jxr_linenumber" name="L4572" href="#L4572">4572</a>   
<a class="jxr_linenumber" name="L4573" href="#L4573">4573</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4574" href="#L4574">4574</a>           Field.TABLE_GROUPER_FIELDS, 
<a class="jxr_linenumber" name="L4575" href="#L4575">4575</a>           Field.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4576" href="#L4576">4576</a>           <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4577" href="#L4577">4577</a> 
<a class="jxr_linenumber" name="L4578" href="#L4578">4578</a>     }
<a class="jxr_linenumber" name="L4579" href="#L4579">4579</a>     
<a class="jxr_linenumber" name="L4580" href="#L4580">4580</a>     {
<a class="jxr_linenumber" name="L4581" href="#L4581">4581</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4582" href="#L4582">4582</a>           PITField.TABLE_GROUPER_PIT_FIELDS, 
<a class="jxr_linenumber" name="L4583" href="#L4583">4583</a>           <span class="jxr_string">"point in time history that describes fields related to types"</span>);
<a class="jxr_linenumber" name="L4584" href="#L4584">4584</a> 
<a class="jxr_linenumber" name="L4585" href="#L4585">4585</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4586" href="#L4586">4586</a>           PITField.TABLE_GROUPER_PIT_FIELDS,  
<a class="jxr_linenumber" name="L4587" href="#L4587">4587</a>           PITField.COLUMN_ID, 
<a class="jxr_linenumber" name="L4588" href="#L4588">4588</a>             <span class="jxr_string">"db id of this field record"</span>);
<a class="jxr_linenumber" name="L4589" href="#L4589">4589</a>   
<a class="jxr_linenumber" name="L4590" href="#L4590">4590</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4591" href="#L4591">4591</a>         PITField.TABLE_GROUPER_PIT_FIELDS,  
<a class="jxr_linenumber" name="L4592" href="#L4592">4592</a>         PITField.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L4593" href="#L4593">4593</a>           <span class="jxr_string">"T or F if this record is currently active"</span>);
<a class="jxr_linenumber" name="L4594" href="#L4594">4594</a> 
<a class="jxr_linenumber" name="L4595" href="#L4595">4595</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4596" href="#L4596">4596</a>         PITField.TABLE_GROUPER_PIT_FIELDS,  
<a class="jxr_linenumber" name="L4597" href="#L4597">4597</a>         PITField.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L4598" href="#L4598">4598</a>           <span class="jxr_string">"number of millis since 1970 that this record was inserted"</span>);
<a class="jxr_linenumber" name="L4599" href="#L4599">4599</a> 
<a class="jxr_linenumber" name="L4600" href="#L4600">4600</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4601" href="#L4601">4601</a>         PITField.TABLE_GROUPER_PIT_FIELDS,  
<a class="jxr_linenumber" name="L4602" href="#L4602">4602</a>         PITField.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L4603" href="#L4603">4603</a>           <span class="jxr_string">"number of millis since 1970 that this record was deleted"</span>);
<a class="jxr_linenumber" name="L4604" href="#L4604">4604</a> 
<a class="jxr_linenumber" name="L4605" href="#L4605">4605</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4606" href="#L4606">4606</a>         PITField.TABLE_GROUPER_PIT_FIELDS,  
<a class="jxr_linenumber" name="L4607" href="#L4607">4607</a>         PITField.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4608" href="#L4608">4608</a>           <span class="jxr_string">"hibernate optimistic locking id for updates and deletes"</span>);
<a class="jxr_linenumber" name="L4609" href="#L4609">4609</a> 
<a class="jxr_linenumber" name="L4610" href="#L4610">4610</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4611" href="#L4611">4611</a>           PITField.TABLE_GROUPER_PIT_FIELDS,
<a class="jxr_linenumber" name="L4612" href="#L4612">4612</a>           PITField.COLUMN_NAME, 
<a class="jxr_linenumber" name="L4613" href="#L4613">4613</a>             <span class="jxr_string">"name of the field"</span>);
<a class="jxr_linenumber" name="L4614" href="#L4614">4614</a>   
<a class="jxr_linenumber" name="L4615" href="#L4615">4615</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4616" href="#L4616">4616</a>           PITField.TABLE_GROUPER_PIT_FIELDS,  
<a class="jxr_linenumber" name="L4617" href="#L4617">4617</a>           PITField.COLUMN_TYPE,
<a class="jxr_linenumber" name="L4618" href="#L4618">4618</a>             <span class="jxr_string">"type of field (e.g. attribute, list, access, naming)"</span>);
<a class="jxr_linenumber" name="L4619" href="#L4619">4619</a>   
<a class="jxr_linenumber" name="L4620" href="#L4620">4620</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4621" href="#L4621">4621</a>           PITField.TABLE_GROUPER_PIT_FIELDS, 
<a class="jxr_linenumber" name="L4622" href="#L4622">4622</a>           PITField.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4623" href="#L4623">4623</a>           <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4624" href="#L4624">4624</a> 
<a class="jxr_linenumber" name="L4625" href="#L4625">4625</a>     }
<a class="jxr_linenumber" name="L4626" href="#L4626">4626</a>     
<a class="jxr_linenumber" name="L4627" href="#L4627">4627</a>     {
<a class="jxr_linenumber" name="L4628" href="#L4628">4628</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4629" href="#L4629">4629</a>             Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"holds the groups in the grouper system"</span>);
<a class="jxr_linenumber" name="L4630" href="#L4630">4630</a>   
<a class="jxr_linenumber" name="L4631" href="#L4631">4631</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4632" href="#L4632">4632</a>           Group.TABLE_GROUPER_GROUPS,  
<a class="jxr_linenumber" name="L4633" href="#L4633">4633</a>          Group.COLUMN_ID, 
<a class="jxr_linenumber" name="L4634" href="#L4634">4634</a>             <span class="jxr_string">"db id of this group record"</span>);
<a class="jxr_linenumber" name="L4635" href="#L4635">4635</a>   
<a class="jxr_linenumber" name="L4636" href="#L4636">4636</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4637" href="#L4637">4637</a>           Group.TABLE_GROUPER_GROUPS,   
<a class="jxr_linenumber" name="L4638" href="#L4638">4638</a>           Group.COLUMN_PARENT_STEM, 
<a class="jxr_linenumber" name="L4639" href="#L4639">4639</a>             <span class="jxr_string">"uuid of the stem that this group refers to"</span>);
<a class="jxr_linenumber" name="L4640" href="#L4640">4640</a>   
<a class="jxr_linenumber" name="L4641" href="#L4641">4641</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4642" href="#L4642">4642</a>           Group.TABLE_GROUPER_GROUPS,  
<a class="jxr_linenumber" name="L4643" href="#L4643">4643</a>           Group.COLUMN_CREATOR_ID, 
<a class="jxr_linenumber" name="L4644" href="#L4644">4644</a>             <span class="jxr_string">"member uuid of the creator of this group"</span>);
<a class="jxr_linenumber" name="L4645" href="#L4645">4645</a>   
<a class="jxr_linenumber" name="L4646" href="#L4646">4646</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4647" href="#L4647">4647</a>           Group.TABLE_GROUPER_GROUPS,   
<a class="jxr_linenumber" name="L4648" href="#L4648">4648</a>           Group.COLUMN_CREATE_TIME, 
<a class="jxr_linenumber" name="L4649" href="#L4649">4649</a>             <span class="jxr_string">"number of millis since 1970 that this group was created"</span>);
<a class="jxr_linenumber" name="L4650" href="#L4650">4650</a>   
<a class="jxr_linenumber" name="L4651" href="#L4651">4651</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4652" href="#L4652">4652</a>           Group.TABLE_GROUPER_GROUPS,   
<a class="jxr_linenumber" name="L4653" href="#L4653">4653</a>           Group.COLUMN_MODIFIER_ID, 
<a class="jxr_linenumber" name="L4654" href="#L4654">4654</a>             <span class="jxr_string">"member uuid of the last modifier of this group"</span>);
<a class="jxr_linenumber" name="L4655" href="#L4655">4655</a>   
<a class="jxr_linenumber" name="L4656" href="#L4656">4656</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4657" href="#L4657">4657</a>           Group.TABLE_GROUPER_GROUPS,   
<a class="jxr_linenumber" name="L4658" href="#L4658">4658</a>           Group.COLUMN_MODIFY_TIME, 
<a class="jxr_linenumber" name="L4659" href="#L4659">4659</a>             <span class="jxr_string">"number of millis since 1970 that this group was modified"</span>);
<a class="jxr_linenumber" name="L4660" href="#L4660">4660</a>   
<a class="jxr_linenumber" name="L4661" href="#L4661">4661</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4662" href="#L4662">4662</a>           Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L4663" href="#L4663">4663</a>           COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4664" href="#L4664">4664</a>           <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L4665" href="#L4665">4665</a>   
<a class="jxr_linenumber" name="L4666" href="#L4666">4666</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4667" href="#L4667">4667</a>           Group.TABLE_GROUPER_GROUPS,   
<a class="jxr_linenumber" name="L4668" href="#L4668">4668</a>           Group.COLUMN_NAME, 
<a class="jxr_linenumber" name="L4669" href="#L4669">4669</a>         <span class="jxr_string">"group name is the fully qualified extension of group and all parent stems.  It shouldnt change much, and can be used to reference group from external systems"</span>);
<a class="jxr_linenumber" name="L4670" href="#L4670">4670</a>       
<a class="jxr_linenumber" name="L4671" href="#L4671">4671</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4672" href="#L4672">4672</a>           Group.TABLE_GROUPER_GROUPS,   
<a class="jxr_linenumber" name="L4673" href="#L4673">4673</a>           Group.COLUMN_DISPLAY_NAME, 
<a class="jxr_linenumber" name="L4674" href="#L4674">4674</a>         <span class="jxr_string">"group display name is the fully qualified display extension of group and all parent stems.  It can change as needed, and can not be used to reference group from external systems"</span>);
<a class="jxr_linenumber" name="L4675" href="#L4675">4675</a>     
<a class="jxr_linenumber" name="L4676" href="#L4676">4676</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4677" href="#L4677">4677</a>           Group.TABLE_GROUPER_GROUPS,   
<a class="jxr_linenumber" name="L4678" href="#L4678">4678</a>           Group.COLUMN_EXTENSION, 
<a class="jxr_linenumber" name="L4679" href="#L4679">4679</a>         <span class="jxr_string">"group extension is the label for this group inside a stem.  It shouldnt change much, and can be used to reference group from external systems (in conjunction with parent stem id)"</span>);
<a class="jxr_linenumber" name="L4680" href="#L4680">4680</a>     
<a class="jxr_linenumber" name="L4681" href="#L4681">4681</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4682" href="#L4682">4682</a>           Group.TABLE_GROUPER_GROUPS,   
<a class="jxr_linenumber" name="L4683" href="#L4683">4683</a>           Group.COLUMN_DISPLAY_EXTENSION, 
<a class="jxr_linenumber" name="L4684" href="#L4684">4684</a>         <span class="jxr_string">"group display extension is the display label for this group inside a stem.  It cant change as needed, and can not be used to reference group from external systems"</span>);
<a class="jxr_linenumber" name="L4685" href="#L4685">4685</a>     
<a class="jxr_linenumber" name="L4686" href="#L4686">4686</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4687" href="#L4687">4687</a>           Group.TABLE_GROUPER_GROUPS,  
<a class="jxr_linenumber" name="L4688" href="#L4688">4688</a>           Group.COLUMN_DESCRIPTION, 
<a class="jxr_linenumber" name="L4689" href="#L4689">4689</a>         <span class="jxr_string">"group description is an optional text blurb that can be used to describe the group"</span>);
<a class="jxr_linenumber" name="L4690" href="#L4690">4690</a>       
<a class="jxr_linenumber" name="L4691" href="#L4691">4691</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4692" href="#L4692">4692</a>           Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L4693" href="#L4693">4693</a>           Group.COLUMN_LAST_MEMBERSHIP_CHANGE, 
<a class="jxr_linenumber" name="L4694" href="#L4694">4694</a>           <span class="jxr_string">"If configured to keep track, this is the last membership change for this group"</span>);
<a class="jxr_linenumber" name="L4695" href="#L4695">4695</a>       
<a class="jxr_linenumber" name="L4696" href="#L4696">4696</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4697" href="#L4697">4697</a>           Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L4698" href="#L4698">4698</a>           Group.COLUMN_LAST_IMMEDIATE_MEMBERSHIP_CHANGE, <span class="jxr_string">"If configured to keep track, this is the last immediate membership change for this group"</span>);
<a class="jxr_linenumber" name="L4699" href="#L4699">4699</a>       
<a class="jxr_linenumber" name="L4700" href="#L4700">4700</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L4701" href="#L4701">4701</a>           Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L4702" href="#L4702">4702</a>           Group.COLUMN_ALTERNATE_NAME, 
<a class="jxr_linenumber" name="L4703" href="#L4703">4703</a>           <span class="jxr_string">"An alternate name for this group"</span>);
<a class="jxr_linenumber" name="L4704" href="#L4704">4704</a>       
<a class="jxr_linenumber" name="L4705" href="#L4705">4705</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4706" href="#L4706">4706</a>           Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L4707" href="#L4707">4707</a>           COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4708" href="#L4708">4708</a>           <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4709" href="#L4709">4709</a>       
<a class="jxr_linenumber" name="L4710" href="#L4710">4710</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4711" href="#L4711">4711</a>           Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L4712" href="#L4712">4712</a>           Group.COLUMN_TYPE_OF_GROUP, 
<a class="jxr_linenumber" name="L4713" href="#L4713">4713</a>           <span class="jxr_string">"if this is a group or role"</span>);
<a class="jxr_linenumber" name="L4714" href="#L4714">4714</a>     }
<a class="jxr_linenumber" name="L4715" href="#L4715">4715</a>     
<a class="jxr_linenumber" name="L4716" href="#L4716">4716</a>     {
<a class="jxr_linenumber" name="L4717" href="#L4717">4717</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4718" href="#L4718">4718</a>             PITGroup.TABLE_GROUPER_PIT_GROUPS, <span class="jxr_string">"point in time info about groups in the grouper system"</span>);
<a class="jxr_linenumber" name="L4719" href="#L4719">4719</a>   
<a class="jxr_linenumber" name="L4720" href="#L4720">4720</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4721" href="#L4721">4721</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS,  
<a class="jxr_linenumber" name="L4722" href="#L4722">4722</a>          PITGroup.COLUMN_ID, 
<a class="jxr_linenumber" name="L4723" href="#L4723">4723</a>             <span class="jxr_string">"db id of this group record"</span>);
<a class="jxr_linenumber" name="L4724" href="#L4724">4724</a>   
<a class="jxr_linenumber" name="L4725" href="#L4725">4725</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4726" href="#L4726">4726</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS,  
<a class="jxr_linenumber" name="L4727" href="#L4727">4727</a>          PITGroup.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L4728" href="#L4728">4728</a>             <span class="jxr_string">"millis since 1970 when this record was inserted"</span>);
<a class="jxr_linenumber" name="L4729" href="#L4729">4729</a>   
<a class="jxr_linenumber" name="L4730" href="#L4730">4730</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4731" href="#L4731">4731</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS,  
<a class="jxr_linenumber" name="L4732" href="#L4732">4732</a>          PITGroup.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L4733" href="#L4733">4733</a>             <span class="jxr_string">"millis since 1970 when this record was deleted"</span>);
<a class="jxr_linenumber" name="L4734" href="#L4734">4734</a>   
<a class="jxr_linenumber" name="L4735" href="#L4735">4735</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4736" href="#L4736">4736</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS,  
<a class="jxr_linenumber" name="L4737" href="#L4737">4737</a>          PITGroup.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L4738" href="#L4738">4738</a>             <span class="jxr_string">"T or F if this record is currently active"</span>);
<a class="jxr_linenumber" name="L4739" href="#L4739">4739</a>   
<a class="jxr_linenumber" name="L4740" href="#L4740">4740</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4741" href="#L4741">4741</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS,   
<a class="jxr_linenumber" name="L4742" href="#L4742">4742</a>           PITGroup.COLUMN_STEM_ID, 
<a class="jxr_linenumber" name="L4743" href="#L4743">4743</a>             <span class="jxr_string">"uuid of the stem that this group refers to"</span>);
<a class="jxr_linenumber" name="L4744" href="#L4744">4744</a>   
<a class="jxr_linenumber" name="L4745" href="#L4745">4745</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4746" href="#L4746">4746</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS, 
<a class="jxr_linenumber" name="L4747" href="#L4747">4747</a>           COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4748" href="#L4748">4748</a>           <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L4749" href="#L4749">4749</a>   
<a class="jxr_linenumber" name="L4750" href="#L4750">4750</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4751" href="#L4751">4751</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS,   
<a class="jxr_linenumber" name="L4752" href="#L4752">4752</a>           PITGroup.COLUMN_NAME, 
<a class="jxr_linenumber" name="L4753" href="#L4753">4753</a>         <span class="jxr_string">"group name is the fully qualified extension of group and all parent stems.  It shouldnt change much, and can be used to reference group from external systems"</span>);
<a class="jxr_linenumber" name="L4754" href="#L4754">4754</a>       
<a class="jxr_linenumber" name="L4755" href="#L4755">4755</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4756" href="#L4756">4756</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS, 
<a class="jxr_linenumber" name="L4757" href="#L4757">4757</a>           COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4758" href="#L4758">4758</a>           <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4759" href="#L4759">4759</a>       
<a class="jxr_linenumber" name="L4760" href="#L4760">4760</a>     }
<a class="jxr_linenumber" name="L4761" href="#L4761">4761</a>     
<a class="jxr_linenumber" name="L4762" href="#L4762">4762</a>     {
<a class="jxr_linenumber" name="L4763" href="#L4763">4763</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4764" href="#L4764">4764</a>             Member.TABLE_GROUPER_MEMBERS, 
<a class="jxr_linenumber" name="L4765" href="#L4765">4765</a>             <span class="jxr_string">"keeps track of subjects used in grouper.  Records are never deleted from this table"</span>);
<a class="jxr_linenumber" name="L4766" href="#L4766">4766</a>   
<a class="jxr_linenumber" name="L4767" href="#L4767">4767</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4768" href="#L4768">4768</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_ID, 
<a class="jxr_linenumber" name="L4769" href="#L4769">4769</a>             <span class="jxr_string">"db id of this row"</span>);
<a class="jxr_linenumber" name="L4770" href="#L4770">4770</a>   
<a class="jxr_linenumber" name="L4771" href="#L4771">4771</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4772" href="#L4772">4772</a>           Member.TABLE_GROUPER_MEMBERS, Member.COLUMN_SUBJECT_ID, 
<a class="jxr_linenumber" name="L4773" href="#L4773">4773</a>             <span class="jxr_string">"subject id is the id from the subject source"</span>);
<a class="jxr_linenumber" name="L4774" href="#L4774">4774</a>   
<a class="jxr_linenumber" name="L4775" href="#L4775">4775</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4776" href="#L4776">4776</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SUBJECT_SOURCE, 
<a class="jxr_linenumber" name="L4777" href="#L4777">4777</a>             <span class="jxr_string">"id of the source from sources.xml"</span>);
<a class="jxr_linenumber" name="L4778" href="#L4778">4778</a>   
<a class="jxr_linenumber" name="L4779" href="#L4779">4779</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4780" href="#L4780">4780</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SUBJECT_TYPE, 
<a class="jxr_linenumber" name="L4781" href="#L4781">4781</a>             <span class="jxr_string">"type of subject, e.g. person"</span>);
<a class="jxr_linenumber" name="L4782" href="#L4782">4782</a>   
<a class="jxr_linenumber" name="L4783" href="#L4783">4783</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4784" href="#L4784">4784</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SORT_STRING0, 
<a class="jxr_linenumber" name="L4785" href="#L4785">4785</a>             <span class="jxr_string">"string that can be used to sort results"</span>);
<a class="jxr_linenumber" name="L4786" href="#L4786">4786</a>       
<a class="jxr_linenumber" name="L4787" href="#L4787">4787</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4788" href="#L4788">4788</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SORT_STRING1, 
<a class="jxr_linenumber" name="L4789" href="#L4789">4789</a>             <span class="jxr_string">"string that can be used to sort results"</span>);
<a class="jxr_linenumber" name="L4790" href="#L4790">4790</a>   
<a class="jxr_linenumber" name="L4791" href="#L4791">4791</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4792" href="#L4792">4792</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SORT_STRING2, 
<a class="jxr_linenumber" name="L4793" href="#L4793">4793</a>             <span class="jxr_string">"string that can be used to sort results"</span>);
<a class="jxr_linenumber" name="L4794" href="#L4794">4794</a>   
<a class="jxr_linenumber" name="L4795" href="#L4795">4795</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4796" href="#L4796">4796</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SORT_STRING3, 
<a class="jxr_linenumber" name="L4797" href="#L4797">4797</a>             <span class="jxr_string">"string that can be used to sort results"</span>);
<a class="jxr_linenumber" name="L4798" href="#L4798">4798</a>   
<a class="jxr_linenumber" name="L4799" href="#L4799">4799</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L4800" href="#L4800">4800</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SORT_STRING4, 
<a class="jxr_linenumber" name="L4801" href="#L4801">4801</a>             <span class="jxr_string">"string that can be used to sort results"</span>);
<a class="jxr_linenumber" name="L4802" href="#L4802">4802</a>   
<a class="jxr_linenumber" name="L4803" href="#L4803">4803</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4804" href="#L4804">4804</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SEARCH_STRING0, 
<a class="jxr_linenumber" name="L4805" href="#L4805">4805</a>             <span class="jxr_string">"string that can be used to filter results"</span>);
<a class="jxr_linenumber" name="L4806" href="#L4806">4806</a>   
<a class="jxr_linenumber" name="L4807" href="#L4807">4807</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4808" href="#L4808">4808</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SEARCH_STRING1, 
<a class="jxr_linenumber" name="L4809" href="#L4809">4809</a>             <span class="jxr_string">"string that can be used to filter results"</span>);
<a class="jxr_linenumber" name="L4810" href="#L4810">4810</a>       
<a class="jxr_linenumber" name="L4811" href="#L4811">4811</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4812" href="#L4812">4812</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SEARCH_STRING2, 
<a class="jxr_linenumber" name="L4813" href="#L4813">4813</a>             <span class="jxr_string">"string that can be used to filter results"</span>);
<a class="jxr_linenumber" name="L4814" href="#L4814">4814</a>       
<a class="jxr_linenumber" name="L4815" href="#L4815">4815</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4816" href="#L4816">4816</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SEARCH_STRING3, 
<a class="jxr_linenumber" name="L4817" href="#L4817">4817</a>             <span class="jxr_string">"string that can be used to filter results"</span>);
<a class="jxr_linenumber" name="L4818" href="#L4818">4818</a>       
<a class="jxr_linenumber" name="L4819" href="#L4819">4819</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4820" href="#L4820">4820</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_SEARCH_STRING4, 
<a class="jxr_linenumber" name="L4821" href="#L4821">4821</a>             <span class="jxr_string">"string that can be used to filter results"</span>);
<a class="jxr_linenumber" name="L4822" href="#L4822">4822</a>       
<a class="jxr_linenumber" name="L4823" href="#L4823">4823</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4824" href="#L4824">4824</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_NAME, 
<a class="jxr_linenumber" name="L4825" href="#L4825">4825</a>             <span class="jxr_string">"name of subject"</span>);
<a class="jxr_linenumber" name="L4826" href="#L4826">4826</a>       
<a class="jxr_linenumber" name="L4827" href="#L4827">4827</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4828" href="#L4828">4828</a>           Member.TABLE_GROUPER_MEMBERS,  Member.COLUMN_DESCRIPTION, 
<a class="jxr_linenumber" name="L4829" href="#L4829">4829</a>             <span class="jxr_string">"description of subject"</span>);
<a class="jxr_linenumber" name="L4830" href="#L4830">4830</a>   
<a class="jxr_linenumber" name="L4831" href="#L4831">4831</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4832" href="#L4832">4832</a>           Member.TABLE_GROUPER_MEMBERS, 
<a class="jxr_linenumber" name="L4833" href="#L4833">4833</a>           COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L4834" href="#L4834">4834</a>   
<a class="jxr_linenumber" name="L4835" href="#L4835">4835</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4836" href="#L4836">4836</a>           Member.TABLE_GROUPER_MEMBERS, 
<a class="jxr_linenumber" name="L4837" href="#L4837">4837</a>           COLUMN_CONTEXT_ID, <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4838" href="#L4838">4838</a>     }
<a class="jxr_linenumber" name="L4839" href="#L4839">4839</a>     
<a class="jxr_linenumber" name="L4840" href="#L4840">4840</a>     {
<a class="jxr_linenumber" name="L4841" href="#L4841">4841</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4842" href="#L4842">4842</a>             PITMember.TABLE_GROUPER_PIT_MEMBERS, 
<a class="jxr_linenumber" name="L4843" href="#L4843">4843</a>             <span class="jxr_string">"keeps track of subjects used in grouper.  Records are never deleted from this table"</span>);
<a class="jxr_linenumber" name="L4844" href="#L4844">4844</a>   
<a class="jxr_linenumber" name="L4845" href="#L4845">4845</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4846" href="#L4846">4846</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS, 
<a class="jxr_linenumber" name="L4847" href="#L4847">4847</a>           PITMember.COLUMN_ID, 
<a class="jxr_linenumber" name="L4848" href="#L4848">4848</a>             <span class="jxr_string">"db id of this row"</span>);
<a class="jxr_linenumber" name="L4849" href="#L4849">4849</a>   
<a class="jxr_linenumber" name="L4850" href="#L4850">4850</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4851" href="#L4851">4851</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS, 
<a class="jxr_linenumber" name="L4852" href="#L4852">4852</a>           PITMember.COLUMN_SUBJECT_ID, 
<a class="jxr_linenumber" name="L4853" href="#L4853">4853</a>             <span class="jxr_string">"subject id is the id from the subject source"</span>);
<a class="jxr_linenumber" name="L4854" href="#L4854">4854</a>   
<a class="jxr_linenumber" name="L4855" href="#L4855">4855</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4856" href="#L4856">4856</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS,  
<a class="jxr_linenumber" name="L4857" href="#L4857">4857</a>           PITMember.COLUMN_SUBJECT_SOURCE, 
<a class="jxr_linenumber" name="L4858" href="#L4858">4858</a>             <span class="jxr_string">"id of the source from sources.xml"</span>);
<a class="jxr_linenumber" name="L4859" href="#L4859">4859</a>   
<a class="jxr_linenumber" name="L4860" href="#L4860">4860</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4861" href="#L4861">4861</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS,  
<a class="jxr_linenumber" name="L4862" href="#L4862">4862</a>           PITMember.COLUMN_SUBJECT_TYPE, 
<a class="jxr_linenumber" name="L4863" href="#L4863">4863</a>             <span class="jxr_string">"type of subject, e.g. person"</span>);
<a class="jxr_linenumber" name="L4864" href="#L4864">4864</a> 
<a class="jxr_linenumber" name="L4865" href="#L4865">4865</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4866" href="#L4866">4866</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS,  
<a class="jxr_linenumber" name="L4867" href="#L4867">4867</a>           PITMember.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L4868" href="#L4868">4868</a>             <span class="jxr_string">"T or F if this is an active record based on start and end dates"</span>);
<a class="jxr_linenumber" name="L4869" href="#L4869">4869</a> 
<a class="jxr_linenumber" name="L4870" href="#L4870">4870</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4871" href="#L4871">4871</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS,  
<a class="jxr_linenumber" name="L4872" href="#L4872">4872</a>           PITMember.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L4873" href="#L4873">4873</a>             <span class="jxr_string">"millis from 1970 when this record was inserted"</span>);
<a class="jxr_linenumber" name="L4874" href="#L4874">4874</a> 
<a class="jxr_linenumber" name="L4875" href="#L4875">4875</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4876" href="#L4876">4876</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS,  
<a class="jxr_linenumber" name="L4877" href="#L4877">4877</a>           PITMember.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L4878" href="#L4878">4878</a>             <span class="jxr_string">"millis from 1970 when this record was deleted"</span>);
<a class="jxr_linenumber" name="L4879" href="#L4879">4879</a> 
<a class="jxr_linenumber" name="L4880" href="#L4880">4880</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4881" href="#L4881">4881</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS, 
<a class="jxr_linenumber" name="L4882" href="#L4882">4882</a>           COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L4883" href="#L4883">4883</a>   
<a class="jxr_linenumber" name="L4884" href="#L4884">4884</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4885" href="#L4885">4885</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS, 
<a class="jxr_linenumber" name="L4886" href="#L4886">4886</a>           COLUMN_CONTEXT_ID, <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4887" href="#L4887">4887</a>     }
<a class="jxr_linenumber" name="L4888" href="#L4888">4888</a> 
<a class="jxr_linenumber" name="L4889" href="#L4889">4889</a>     {
<a class="jxr_linenumber" name="L4890" href="#L4890">4890</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4891" href="#L4891">4891</a>             Membership.TABLE_GROUPER_MEMBERSHIPS,
<a class="jxr_linenumber" name="L4892" href="#L4892">4892</a>             <span class="jxr_string">"keeps track of memberships and permissions"</span>);
<a class="jxr_linenumber" name="L4893" href="#L4893">4893</a>   
<a class="jxr_linenumber" name="L4894" href="#L4894">4894</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4895" href="#L4895">4895</a>           Membership.TABLE_GROUPER_MEMBERSHIPS,  
<a class="jxr_linenumber" name="L4896" href="#L4896">4896</a>           Membership.COLUMN_ID, 
<a class="jxr_linenumber" name="L4897" href="#L4897">4897</a>             <span class="jxr_string">"db id of this row"</span>);
<a class="jxr_linenumber" name="L4898" href="#L4898">4898</a>   
<a class="jxr_linenumber" name="L4899" href="#L4899">4899</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4900" href="#L4900">4900</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4901" href="#L4901">4901</a>           Membership.COLUMN_OWNER_GROUP_ID, 
<a class="jxr_linenumber" name="L4902" href="#L4902">4902</a>             <span class="jxr_string">"group of the membership if applicable"</span>);
<a class="jxr_linenumber" name="L4903" href="#L4903">4903</a>   
<a class="jxr_linenumber" name="L4904" href="#L4904">4904</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4905" href="#L4905">4905</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4906" href="#L4906">4906</a>           Membership.COLUMN_OWNER_STEM_ID, 
<a class="jxr_linenumber" name="L4907" href="#L4907">4907</a>       <span class="jxr_string">"stem of the membership if applicable"</span>);
<a class="jxr_linenumber" name="L4908" href="#L4908">4908</a>   
<a class="jxr_linenumber" name="L4909" href="#L4909">4909</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4910" href="#L4910">4910</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4911" href="#L4911">4911</a>           Membership.COLUMN_MEMBER_ID, 
<a class="jxr_linenumber" name="L4912" href="#L4912">4912</a>             <span class="jxr_string">"member of the memership"</span>);
<a class="jxr_linenumber" name="L4913" href="#L4913">4913</a>       
<a class="jxr_linenumber" name="L4914" href="#L4914">4914</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4915" href="#L4915">4915</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4916" href="#L4916">4916</a>           Membership.COLUMN_OWNER_ID,
<a class="jxr_linenumber" name="L4917" href="#L4917">4917</a>             <span class="jxr_string">"owner of the memership"</span>);
<a class="jxr_linenumber" name="L4918" href="#L4918">4918</a>   
<a class="jxr_linenumber" name="L4919" href="#L4919">4919</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4920" href="#L4920">4920</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4921" href="#L4921">4921</a>           Membership.COLUMN_FIELD_ID, 
<a class="jxr_linenumber" name="L4922" href="#L4922">4922</a>               <span class="jxr_string">"foreign key to field by id"</span>);
<a class="jxr_linenumber" name="L4923" href="#L4923">4923</a>   
<a class="jxr_linenumber" name="L4924" href="#L4924">4924</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4925" href="#L4925">4925</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4926" href="#L4926">4926</a>           Membership.COLUMN_MSHIP_TYPE, 
<a class="jxr_linenumber" name="L4927" href="#L4927">4927</a>             <span class="jxr_string">"type of membership, immediate or composite"</span>);
<a class="jxr_linenumber" name="L4928" href="#L4928">4928</a>   
<a class="jxr_linenumber" name="L4929" href="#L4929">4929</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4930" href="#L4930">4930</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4931" href="#L4931">4931</a>           Membership.COLUMN_VIA_COMPOSITE_ID, 
<a class="jxr_linenumber" name="L4932" href="#L4932">4932</a>           <span class="jxr_string">"for composite, this is the composite uuid"</span>);
<a class="jxr_linenumber" name="L4933" href="#L4933">4933</a>   
<a class="jxr_linenumber" name="L4934" href="#L4934">4934</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4935" href="#L4935">4935</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4936" href="#L4936">4936</a>           Membership.COLUMN_CREATOR_ID, 
<a class="jxr_linenumber" name="L4937" href="#L4937">4937</a>             <span class="jxr_string">"member uuid of the creator of this record"</span>);
<a class="jxr_linenumber" name="L4938" href="#L4938">4938</a>   
<a class="jxr_linenumber" name="L4939" href="#L4939">4939</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4940" href="#L4940">4940</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4941" href="#L4941">4941</a>           Membership.COLUMN_CREATE_TIME, 
<a class="jxr_linenumber" name="L4942" href="#L4942">4942</a>             <span class="jxr_string">"number of millis since 1970 that this record was created"</span>);
<a class="jxr_linenumber" name="L4943" href="#L4943">4943</a>   
<a class="jxr_linenumber" name="L4944" href="#L4944">4944</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4945" href="#L4945">4945</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4946" href="#L4946">4946</a>           COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L4947" href="#L4947">4947</a>           <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L4948" href="#L4948">4948</a>   
<a class="jxr_linenumber" name="L4949" href="#L4949">4949</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4950" href="#L4950">4950</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4951" href="#L4951">4951</a>           COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L4952" href="#L4952">4952</a>           <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L4953" href="#L4953">4953</a>   
<a class="jxr_linenumber" name="L4954" href="#L4954">4954</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4955" href="#L4955">4955</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4956" href="#L4956">4956</a>           Membership.COLUMN_ENABLED, 
<a class="jxr_linenumber" name="L4957" href="#L4957">4957</a>           <span class="jxr_string">"T or F to indicate if the membership is enabled"</span>);
<a class="jxr_linenumber" name="L4958" href="#L4958">4958</a>       
<a class="jxr_linenumber" name="L4959" href="#L4959">4959</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4960" href="#L4960">4960</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4961" href="#L4961">4961</a>           Membership.COLUMN_ENABLED_TIMESTAMP, 
<a class="jxr_linenumber" name="L4962" href="#L4962">4962</a>           <span class="jxr_string">"When the membership will be enabled if the time is in the future."</span>);
<a class="jxr_linenumber" name="L4963" href="#L4963">4963</a>   
<a class="jxr_linenumber" name="L4964" href="#L4964">4964</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4965" href="#L4965">4965</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4966" href="#L4966">4966</a>           Membership.COLUMN_DISABLED_TIMESTAMP, 
<a class="jxr_linenumber" name="L4967" href="#L4967">4967</a>           <span class="jxr_string">"When the membership will be disabled if the time is in the future."</span>);
<a class="jxr_linenumber" name="L4968" href="#L4968">4968</a>       
<a class="jxr_linenumber" name="L4969" href="#L4969">4969</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4970" href="#L4970">4970</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4971" href="#L4971">4971</a>           Membership.COLUMN_OWNER_ATTR_DEF_ID, 
<a class="jxr_linenumber" name="L4972" href="#L4972">4972</a>           <span class="jxr_string">"For attribute definition privileges, this is the foreign key to the grouper_attribute_def table"</span>);
<a class="jxr_linenumber" name="L4973" href="#L4973">4973</a>       
<a class="jxr_linenumber" name="L4974" href="#L4974">4974</a>     }
<a class="jxr_linenumber" name="L4975" href="#L4975">4975</a>   
<a class="jxr_linenumber" name="L4976" href="#L4976">4976</a>     {
<a class="jxr_linenumber" name="L4977" href="#L4977">4977</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4978" href="#L4978">4978</a>             PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS,
<a class="jxr_linenumber" name="L4979" href="#L4979">4979</a>             <span class="jxr_string">"keeps track of memberships and permissions"</span>);
<a class="jxr_linenumber" name="L4980" href="#L4980">4980</a>   
<a class="jxr_linenumber" name="L4981" href="#L4981">4981</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4982" href="#L4982">4982</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS,  
<a class="jxr_linenumber" name="L4983" href="#L4983">4983</a>           PITMembership.COLUMN_ID, 
<a class="jxr_linenumber" name="L4984" href="#L4984">4984</a>             <span class="jxr_string">"db id of this row"</span>);
<a class="jxr_linenumber" name="L4985" href="#L4985">4985</a>   
<a class="jxr_linenumber" name="L4986" href="#L4986">4986</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4987" href="#L4987">4987</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4988" href="#L4988">4988</a>           PITMembership.COLUMN_OWNER_GROUP_ID, 
<a class="jxr_linenumber" name="L4989" href="#L4989">4989</a>             <span class="jxr_string">"group of the membership if applicable"</span>);
<a class="jxr_linenumber" name="L4990" href="#L4990">4990</a>   
<a class="jxr_linenumber" name="L4991" href="#L4991">4991</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4992" href="#L4992">4992</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4993" href="#L4993">4993</a>           PITMembership.COLUMN_OWNER_STEM_ID, 
<a class="jxr_linenumber" name="L4994" href="#L4994">4994</a>             <span class="jxr_string">"stem of the membership if applicable"</span>);
<a class="jxr_linenumber" name="L4995" href="#L4995">4995</a>   
<a class="jxr_linenumber" name="L4996" href="#L4996">4996</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L4997" href="#L4997">4997</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L4998" href="#L4998">4998</a>           PITMembership.COLUMN_OWNER_ATTR_DEF_ID, 
<a class="jxr_linenumber" name="L4999" href="#L4999">4999</a>             <span class="jxr_string">"attribute def of the membership if applicable"</span>);
<a class="jxr_linenumber" name="L5000" href="#L5000">5000</a> 
<a class="jxr_linenumber" name="L5001" href="#L5001">5001</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5002" href="#L5002">5002</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5003" href="#L5003">5003</a>           PITMembership.COLUMN_MEMBER_ID, 
<a class="jxr_linenumber" name="L5004" href="#L5004">5004</a>             <span class="jxr_string">"member of the memership"</span>);
<a class="jxr_linenumber" name="L5005" href="#L5005">5005</a>       
<a class="jxr_linenumber" name="L5006" href="#L5006">5006</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5007" href="#L5007">5007</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5008" href="#L5008">5008</a>           PITMembership.COLUMN_OWNER_ID,
<a class="jxr_linenumber" name="L5009" href="#L5009">5009</a>             <span class="jxr_string">"owner of the memership"</span>);
<a class="jxr_linenumber" name="L5010" href="#L5010">5010</a>   
<a class="jxr_linenumber" name="L5011" href="#L5011">5011</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5012" href="#L5012">5012</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5013" href="#L5013">5013</a>           PITMembership.COLUMN_FIELD_ID, 
<a class="jxr_linenumber" name="L5014" href="#L5014">5014</a>               <span class="jxr_string">"foreign key to field by id"</span>);
<a class="jxr_linenumber" name="L5015" href="#L5015">5015</a>   
<a class="jxr_linenumber" name="L5016" href="#L5016">5016</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5017" href="#L5017">5017</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5018" href="#L5018">5018</a>           PITMembership.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L5019" href="#L5019">5019</a>             <span class="jxr_string">"T or F if this row is active based on start_time and end_time"</span>);
<a class="jxr_linenumber" name="L5020" href="#L5020">5020</a>   
<a class="jxr_linenumber" name="L5021" href="#L5021">5021</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5022" href="#L5022">5022</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5023" href="#L5023">5023</a>           PITMembership.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L5024" href="#L5024">5024</a>           <span class="jxr_string">"number of millis since 1970 when this record was inserted"</span>);
<a class="jxr_linenumber" name="L5025" href="#L5025">5025</a>   
<a class="jxr_linenumber" name="L5026" href="#L5026">5026</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5027" href="#L5027">5027</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5028" href="#L5028">5028</a>           PITMembership.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L5029" href="#L5029">5029</a>             <span class="jxr_string">"number of millis since 1970 when this record was deleted"</span>);
<a class="jxr_linenumber" name="L5030" href="#L5030">5030</a>   
<a class="jxr_linenumber" name="L5031" href="#L5031">5031</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5032" href="#L5032">5032</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5033" href="#L5033">5033</a>           PITMembership.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L5034" href="#L5034">5034</a>           <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L5035" href="#L5035">5035</a>   
<a class="jxr_linenumber" name="L5036" href="#L5036">5036</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5037" href="#L5037">5037</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5038" href="#L5038">5038</a>           PITMembership.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L5039" href="#L5039">5039</a>           <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L5040" href="#L5040">5040</a>   
<a class="jxr_linenumber" name="L5041" href="#L5041">5041</a>     }
<a class="jxr_linenumber" name="L5042" href="#L5042">5042</a>   
<a class="jxr_linenumber" name="L5043" href="#L5043">5043</a>     GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5044" href="#L5044">5044</a>         GroupSet.TABLE_GROUPER_GROUP_SET, <span class="jxr_string">"keeps track of the set of immediate and effective group members for all groups and stems"</span>);
<a class="jxr_linenumber" name="L5045" href="#L5045">5045</a> 
<a class="jxr_linenumber" name="L5046" href="#L5046">5046</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5047" href="#L5047">5047</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_ID, <span class="jxr_string">"db id of this row"</span>);
<a class="jxr_linenumber" name="L5048" href="#L5048">5048</a> 
<a class="jxr_linenumber" name="L5049" href="#L5049">5049</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5050" href="#L5050">5050</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_CONTEXT_ID, <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L5051" href="#L5051">5051</a> 
<a class="jxr_linenumber" name="L5052" href="#L5052">5052</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5053" href="#L5053">5053</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_HIBERNATE_VERSION_NUMBER, <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L5054" href="#L5054">5054</a> 
<a class="jxr_linenumber" name="L5055" href="#L5055">5055</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5056" href="#L5056">5056</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_FIELD_ID, <span class="jxr_string">"field represented by this group set"</span>);
<a class="jxr_linenumber" name="L5057" href="#L5057">5057</a> 
<a class="jxr_linenumber" name="L5058" href="#L5058">5058</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5059" href="#L5059">5059</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_MSHIP_TYPE, <span class="jxr_string">"type of membership represented by this group set, immediate or composite or effective"</span>);
<a class="jxr_linenumber" name="L5060" href="#L5060">5060</a> 
<a class="jxr_linenumber" name="L5061" href="#L5061">5061</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5062" href="#L5062">5062</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_VIA_GROUP_ID, <span class="jxr_string">"same as member_group_id if depth is greater than 0, otherwise null."</span>);
<a class="jxr_linenumber" name="L5063" href="#L5063">5063</a> 
<a class="jxr_linenumber" name="L5064" href="#L5064">5064</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5065" href="#L5065">5065</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_DEPTH, <span class="jxr_string">"number of hops in directed graph"</span>);
<a class="jxr_linenumber" name="L5066" href="#L5066">5066</a> 
<a class="jxr_linenumber" name="L5067" href="#L5067">5067</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5068" href="#L5068">5068</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_PARENT_ID, <span class="jxr_string">"parent group set"</span>);
<a class="jxr_linenumber" name="L5069" href="#L5069">5069</a> 
<a class="jxr_linenumber" name="L5070" href="#L5070">5070</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5071" href="#L5071">5071</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_CREATOR_ID, <span class="jxr_string">"member uuid of the creator of this record"</span>);
<a class="jxr_linenumber" name="L5072" href="#L5072">5072</a> 
<a class="jxr_linenumber" name="L5073" href="#L5073">5073</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5074" href="#L5074">5074</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_CREATE_TIME, <span class="jxr_string">"number of millis since 1970 that this record was created"</span>);
<a class="jxr_linenumber" name="L5075" href="#L5075">5075</a> 
<a class="jxr_linenumber" name="L5076" href="#L5076">5076</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5077" href="#L5077">5077</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_OWNER_ID, <span class="jxr_string">"owner id"</span>);
<a class="jxr_linenumber" name="L5078" href="#L5078">5078</a>     
<a class="jxr_linenumber" name="L5079" href="#L5079">5079</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5080" href="#L5080">5080</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_OWNER_ATTR_DEF_ID, <span class="jxr_string">"owner attr def if applicable"</span>);
<a class="jxr_linenumber" name="L5081" href="#L5081">5081</a> 
<a class="jxr_linenumber" name="L5082" href="#L5082">5082</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5083" href="#L5083">5083</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_OWNER_ATTR_DEF_ID_NULL, <span class="jxr_string">"same as "</span> + GroupSet.COLUMN_OWNER_ATTR_DEF_ID + <span class="jxr_string">" except nulls are replaced with the string "</span> + GroupSet.nullColumnValue);
<a class="jxr_linenumber" name="L5084" href="#L5084">5084</a> 
<a class="jxr_linenumber" name="L5085" href="#L5085">5085</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5086" href="#L5086">5086</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_OWNER_GROUP_ID, <span class="jxr_string">"owner group if applicable"</span>);
<a class="jxr_linenumber" name="L5087" href="#L5087">5087</a> 
<a class="jxr_linenumber" name="L5088" href="#L5088">5088</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5089" href="#L5089">5089</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_OWNER_GROUP_ID_NULL, <span class="jxr_string">"same as "</span> + GroupSet.COLUMN_OWNER_GROUP_ID + <span class="jxr_string">" except nulls are replaced with the string "</span> + GroupSet.nullColumnValue);
<a class="jxr_linenumber" name="L5090" href="#L5090">5090</a> 
<a class="jxr_linenumber" name="L5091" href="#L5091">5091</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5092" href="#L5092">5092</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_OWNER_STEM_ID, <span class="jxr_string">"owner stem if applicable"</span>);
<a class="jxr_linenumber" name="L5093" href="#L5093">5093</a> 
<a class="jxr_linenumber" name="L5094" href="#L5094">5094</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5095" href="#L5095">5095</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_OWNER_STEM_ID_NULL, <span class="jxr_string">"same as "</span> + GroupSet.COLUMN_OWNER_STEM_ID + <span class="jxr_string">" except nulls are replaced with the string "</span> + GroupSet.nullColumnValue);
<a class="jxr_linenumber" name="L5096" href="#L5096">5096</a> 
<a class="jxr_linenumber" name="L5097" href="#L5097">5097</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5098" href="#L5098">5098</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_MEMBER_ATTR_DEF_ID, <span class="jxr_string">"member attr def if applicable"</span>);
<a class="jxr_linenumber" name="L5099" href="#L5099">5099</a> 
<a class="jxr_linenumber" name="L5100" href="#L5100">5100</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5101" href="#L5101">5101</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_MEMBER_GROUP_ID, <span class="jxr_string">"member group if applicable"</span>);
<a class="jxr_linenumber" name="L5102" href="#L5102">5102</a> 
<a class="jxr_linenumber" name="L5103" href="#L5103">5103</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5104" href="#L5104">5104</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_MEMBER_STEM_ID, <span class="jxr_string">"member stem if applicable"</span>);
<a class="jxr_linenumber" name="L5105" href="#L5105">5105</a> 
<a class="jxr_linenumber" name="L5106" href="#L5106">5106</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5107" href="#L5107">5107</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_MEMBER_ID, <span class="jxr_string">"member id"</span>);
<a class="jxr_linenumber" name="L5108" href="#L5108">5108</a> 
<a class="jxr_linenumber" name="L5109" href="#L5109">5109</a>     GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5110" href="#L5110">5110</a>         GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_MEMBER_FIELD_ID, <span class="jxr_string">"used to join with the field_id column in the grouper_memberships table"</span>);
<a class="jxr_linenumber" name="L5111" href="#L5111">5111</a> 
<a class="jxr_linenumber" name="L5112" href="#L5112">5112</a>     {
<a class="jxr_linenumber" name="L5113" href="#L5113">5113</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5114" href="#L5114">5114</a>           Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5115" href="#L5115">5115</a>           <span class="jxr_string">"entries for stems and their attributes"</span>);
<a class="jxr_linenumber" name="L5116" href="#L5116">5116</a>   
<a class="jxr_linenumber" name="L5117" href="#L5117">5117</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5118" href="#L5118">5118</a>           Stem.TABLE_GROUPER_STEMS,
<a class="jxr_linenumber" name="L5119" href="#L5119">5119</a>           Stem.COLUMN_ID, 
<a class="jxr_linenumber" name="L5120" href="#L5120">5120</a>             <span class="jxr_string">"db id of this row"</span>);
<a class="jxr_linenumber" name="L5121" href="#L5121">5121</a>   
<a class="jxr_linenumber" name="L5122" href="#L5122">5122</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5123" href="#L5123">5123</a>           Stem.TABLE_GROUPER_STEMS,  
<a class="jxr_linenumber" name="L5124" href="#L5124">5124</a>           Stem.COLUMN_PARENT_STEM, 
<a class="jxr_linenumber" name="L5125" href="#L5125">5125</a>             <span class="jxr_string">"stem uuid of parent stem or empty if under root"</span>);
<a class="jxr_linenumber" name="L5126" href="#L5126">5126</a>   
<a class="jxr_linenumber" name="L5127" href="#L5127">5127</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5128" href="#L5128">5128</a>           Stem.TABLE_GROUPER_STEMS,  
<a class="jxr_linenumber" name="L5129" href="#L5129">5129</a>           Stem.COLUMN_NAME, 
<a class="jxr_linenumber" name="L5130" href="#L5130">5130</a>             <span class="jxr_string">"full name (id) path of stem"</span>);
<a class="jxr_linenumber" name="L5131" href="#L5131">5131</a>   
<a class="jxr_linenumber" name="L5132" href="#L5132">5132</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5133" href="#L5133">5133</a>           Stem.TABLE_GROUPER_STEMS,  
<a class="jxr_linenumber" name="L5134" href="#L5134">5134</a>           Stem.COLUMN_DISPLAY_NAME, 
<a class="jxr_linenumber" name="L5135" href="#L5135">5135</a>             <span class="jxr_string">"full dislpay name path of stem"</span>);
<a class="jxr_linenumber" name="L5136" href="#L5136">5136</a>   
<a class="jxr_linenumber" name="L5137" href="#L5137">5137</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5138" href="#L5138">5138</a>           Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5139" href="#L5139">5139</a>           Stem.COLUMN_CREATOR_ID, 
<a class="jxr_linenumber" name="L5140" href="#L5140">5140</a>             <span class="jxr_string">"member_id of who created this stem"</span>);
<a class="jxr_linenumber" name="L5141" href="#L5141">5141</a>   
<a class="jxr_linenumber" name="L5142" href="#L5142">5142</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5143" href="#L5143">5143</a>           Stem.TABLE_GROUPER_STEMS,  
<a class="jxr_linenumber" name="L5144" href="#L5144">5144</a>           Stem.COLUMN_CREATE_TIME, 
<a class="jxr_linenumber" name="L5145" href="#L5145">5145</a>             <span class="jxr_string">"number of millis since 1970 since this was created"</span>);
<a class="jxr_linenumber" name="L5146" href="#L5146">5146</a>   
<a class="jxr_linenumber" name="L5147" href="#L5147">5147</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5148" href="#L5148">5148</a>           Stem.TABLE_GROUPER_STEMS,  
<a class="jxr_linenumber" name="L5149" href="#L5149">5149</a>           Stem.COLUMN_MODIFIER_ID, 
<a class="jxr_linenumber" name="L5150" href="#L5150">5150</a>             <span class="jxr_string">"member_id of modifier who last edited"</span>);
<a class="jxr_linenumber" name="L5151" href="#L5151">5151</a>   
<a class="jxr_linenumber" name="L5152" href="#L5152">5152</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5153" href="#L5153">5153</a>           Stem.TABLE_GROUPER_STEMS,  
<a class="jxr_linenumber" name="L5154" href="#L5154">5154</a>           Stem.COLUMN_MODIFY_TIME, 
<a class="jxr_linenumber" name="L5155" href="#L5155">5155</a>             <span class="jxr_string">"number of millis since 1970 since this was edited"</span>);
<a class="jxr_linenumber" name="L5156" href="#L5156">5156</a>   
<a class="jxr_linenumber" name="L5157" href="#L5157">5157</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5158" href="#L5158">5158</a>           Stem.TABLE_GROUPER_STEMS,  
<a class="jxr_linenumber" name="L5159" href="#L5159">5159</a>           Stem.COLUMN_DISPLAY_EXTENSION, 
<a class="jxr_linenumber" name="L5160" href="#L5160">5160</a>             <span class="jxr_string">"display extension (not full path) of stem"</span>);
<a class="jxr_linenumber" name="L5161" href="#L5161">5161</a>   
<a class="jxr_linenumber" name="L5162" href="#L5162">5162</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5163" href="#L5163">5163</a>           Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5164" href="#L5164">5164</a>           Stem.COLUMN_EXTENSION, 
<a class="jxr_linenumber" name="L5165" href="#L5165">5165</a>             <span class="jxr_string">"extension (id) (not full path) of this stem"</span>);
<a class="jxr_linenumber" name="L5166" href="#L5166">5166</a>   
<a class="jxr_linenumber" name="L5167" href="#L5167">5167</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5168" href="#L5168">5168</a>           Stem.TABLE_GROUPER_STEMS,  
<a class="jxr_linenumber" name="L5169" href="#L5169">5169</a>           Stem.COLUMN_DESCRIPTION, 
<a class="jxr_linenumber" name="L5170" href="#L5170">5170</a>             <span class="jxr_string">"description of stem"</span>);
<a class="jxr_linenumber" name="L5171" href="#L5171">5171</a>   
<a class="jxr_linenumber" name="L5172" href="#L5172">5172</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5173" href="#L5173">5173</a>           Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5174" href="#L5174">5174</a>           Stem.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L5175" href="#L5175">5175</a>           <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L5176" href="#L5176">5176</a>   
<a class="jxr_linenumber" name="L5177" href="#L5177">5177</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5178" href="#L5178">5178</a>           Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5179" href="#L5179">5179</a>           Stem.COLUMN_LAST_MEMBERSHIP_CHANGE, 
<a class="jxr_linenumber" name="L5180" href="#L5180">5180</a>           <span class="jxr_string">"If configured to keep track, this is the last membership change for this stem"</span>);
<a class="jxr_linenumber" name="L5181" href="#L5181">5181</a>       
<a class="jxr_linenumber" name="L5182" href="#L5182">5182</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5183" href="#L5183">5183</a>           Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5184" href="#L5184">5184</a>           Stem.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L5185" href="#L5185">5185</a>           <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L5186" href="#L5186">5186</a> 
<a class="jxr_linenumber" name="L5187" href="#L5187">5187</a>     }
<a class="jxr_linenumber" name="L5188" href="#L5188">5188</a>     
<a class="jxr_linenumber" name="L5189" href="#L5189">5189</a>     {
<a class="jxr_linenumber" name="L5190" href="#L5190">5190</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5191" href="#L5191">5191</a>           PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5192" href="#L5192">5192</a>           <span class="jxr_string">"entries for stems and their attributes"</span>);
<a class="jxr_linenumber" name="L5193" href="#L5193">5193</a>   
<a class="jxr_linenumber" name="L5194" href="#L5194">5194</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5195" href="#L5195">5195</a>           PITStem.TABLE_GROUPER_PIT_STEMS,
<a class="jxr_linenumber" name="L5196" href="#L5196">5196</a>           PITStem.COLUMN_ID, 
<a class="jxr_linenumber" name="L5197" href="#L5197">5197</a>             <span class="jxr_string">"db id of this row"</span>);
<a class="jxr_linenumber" name="L5198" href="#L5198">5198</a>   
<a class="jxr_linenumber" name="L5199" href="#L5199">5199</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5200" href="#L5200">5200</a>           PITStem.TABLE_GROUPER_PIT_STEMS,  
<a class="jxr_linenumber" name="L5201" href="#L5201">5201</a>           PITStem.COLUMN_PARENT_STEM_ID,
<a class="jxr_linenumber" name="L5202" href="#L5202">5202</a>             <span class="jxr_string">"stem uuid of parent stem or empty if under root"</span>);
<a class="jxr_linenumber" name="L5203" href="#L5203">5203</a>   
<a class="jxr_linenumber" name="L5204" href="#L5204">5204</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5205" href="#L5205">5205</a>           PITStem.TABLE_GROUPER_PIT_STEMS,  
<a class="jxr_linenumber" name="L5206" href="#L5206">5206</a>           PITStem.COLUMN_NAME,
<a class="jxr_linenumber" name="L5207" href="#L5207">5207</a>             <span class="jxr_string">"full name (id) path of stem"</span>);
<a class="jxr_linenumber" name="L5208" href="#L5208">5208</a>   
<a class="jxr_linenumber" name="L5209" href="#L5209">5209</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5210" href="#L5210">5210</a>           PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5211" href="#L5211">5211</a>           PITStem.COLUMN_HIBERNATE_VERSION_NUMBER,
<a class="jxr_linenumber" name="L5212" href="#L5212">5212</a>           <span class="jxr_string">"hibernate uses this to version rows"</span>);
<a class="jxr_linenumber" name="L5213" href="#L5213">5213</a>   
<a class="jxr_linenumber" name="L5214" href="#L5214">5214</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5215" href="#L5215">5215</a>           PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5216" href="#L5216">5216</a>           PITStem.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L5217" href="#L5217">5217</a>           <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>);
<a class="jxr_linenumber" name="L5218" href="#L5218">5218</a> 
<a class="jxr_linenumber" name="L5219" href="#L5219">5219</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5220" href="#L5220">5220</a>           PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5221" href="#L5221">5221</a>           PITStem.COLUMN_ACTIVE, 
<a class="jxr_linenumber" name="L5222" href="#L5222">5222</a>           <span class="jxr_string">"T or F if this row is active by start and end time"</span>);
<a class="jxr_linenumber" name="L5223" href="#L5223">5223</a> 
<a class="jxr_linenumber" name="L5224" href="#L5224">5224</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5225" href="#L5225">5225</a>           PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5226" href="#L5226">5226</a>           PITStem.COLUMN_START_TIME, 
<a class="jxr_linenumber" name="L5227" href="#L5227">5227</a>           <span class="jxr_string">"millis sinve 1970 that this row was inserted"</span>);
<a class="jxr_linenumber" name="L5228" href="#L5228">5228</a> 
<a class="jxr_linenumber" name="L5229" href="#L5229">5229</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5230" href="#L5230">5230</a>           PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5231" href="#L5231">5231</a>           PITStem.COLUMN_END_TIME, 
<a class="jxr_linenumber" name="L5232" href="#L5232">5232</a>           <span class="jxr_string">"millis since 1970 that this row was deleted"</span>);
<a class="jxr_linenumber" name="L5233" href="#L5233">5233</a> 
<a class="jxr_linenumber" name="L5234" href="#L5234">5234</a>     }
<a class="jxr_linenumber" name="L5235" href="#L5235">5235</a> 
<a class="jxr_linenumber" name="L5236" href="#L5236">5236</a>     {
<a class="jxr_linenumber" name="L5237" href="#L5237">5237</a>       <em class="jxr_comment">//see if the grouper_ext_loader_log table is there</em>
<a class="jxr_linenumber" name="L5238" href="#L5238">5238</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>, 
<a class="jxr_linenumber" name="L5239" href="#L5239">5239</a>           <span class="jxr_string">"log table with a row for each grouper loader job run"</span>);
<a class="jxr_linenumber" name="L5240" href="#L5240">5240</a>       
<a class="jxr_linenumber" name="L5241" href="#L5241">5241</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"id"</span>, <span class="jxr_string">"uuid of this log record"</span>);
<a class="jxr_linenumber" name="L5242" href="#L5242">5242</a>       
<a class="jxr_linenumber" name="L5243" href="#L5243">5243</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"job_name"</span>, 
<a class="jxr_linenumber" name="L5244" href="#L5244">5244</a>           <span class="jxr_string">"Could be group name (friendly) or just config name"</span>);
<a class="jxr_linenumber" name="L5245" href="#L5245">5245</a>       
<a class="jxr_linenumber" name="L5246" href="#L5246">5246</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"status"</span>, 
<a class="jxr_linenumber" name="L5247" href="#L5247">5247</a>           <span class="jxr_string">"STARTED, RUNNING, SUCCESS, ERROR, WARNING, CONFIG_ERROR"</span>);
<a class="jxr_linenumber" name="L5248" href="#L5248">5248</a>   
<a class="jxr_linenumber" name="L5249" href="#L5249">5249</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"started_time"</span>, 
<a class="jxr_linenumber" name="L5250" href="#L5250">5250</a>           <span class="jxr_string">"When the job was started"</span>);
<a class="jxr_linenumber" name="L5251" href="#L5251">5251</a>   
<a class="jxr_linenumber" name="L5252" href="#L5252">5252</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"ended_time"</span>, 
<a class="jxr_linenumber" name="L5253" href="#L5253">5253</a>           <span class="jxr_string">"When the job ended (might be blank if daemon died)"</span>);
<a class="jxr_linenumber" name="L5254" href="#L5254">5254</a>   
<a class="jxr_linenumber" name="L5255" href="#L5255">5255</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"millis"</span>, 
<a class="jxr_linenumber" name="L5256" href="#L5256">5256</a>           <span class="jxr_string">"Milliseconds this process took"</span>);
<a class="jxr_linenumber" name="L5257" href="#L5257">5257</a>   
<a class="jxr_linenumber" name="L5258" href="#L5258">5258</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"millis_get_data"</span>, 
<a class="jxr_linenumber" name="L5259" href="#L5259">5259</a>           <span class="jxr_string">"Milliseconds this process took to get the data from the source"</span>);
<a class="jxr_linenumber" name="L5260" href="#L5260">5260</a>   
<a class="jxr_linenumber" name="L5261" href="#L5261">5261</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"millis_load_data"</span>, 
<a class="jxr_linenumber" name="L5262" href="#L5262">5262</a>           <span class="jxr_string">"Milliseconds this process took to load the data to grouper"</span>);
<a class="jxr_linenumber" name="L5263" href="#L5263">5263</a>   
<a class="jxr_linenumber" name="L5264" href="#L5264">5264</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"job_type"</span>, 
<a class="jxr_linenumber" name="L5265" href="#L5265">5265</a>           <span class="jxr_string">"GrouperLoaderJobType enum value"</span>);
<a class="jxr_linenumber" name="L5266" href="#L5266">5266</a>       
<a class="jxr_linenumber" name="L5267" href="#L5267">5267</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"job_schedule_type"</span>, 
<a class="jxr_linenumber" name="L5268" href="#L5268">5268</a>           <span class="jxr_string">"GrouperLoaderJobscheduleType enum value"</span>);
<a class="jxr_linenumber" name="L5269" href="#L5269">5269</a>       
<a class="jxr_linenumber" name="L5270" href="#L5270">5270</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"job_description"</span>, 
<a class="jxr_linenumber" name="L5271" href="#L5271">5271</a>           <span class="jxr_string">"More information about the job"</span>);
<a class="jxr_linenumber" name="L5272" href="#L5272">5272</a>       
<a class="jxr_linenumber" name="L5273" href="#L5273">5273</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"job_message"</span>, 
<a class="jxr_linenumber" name="L5274" href="#L5274">5274</a>           <span class="jxr_string">"Could be a status or error message or stack"</span>);
<a class="jxr_linenumber" name="L5275" href="#L5275">5275</a>       
<a class="jxr_linenumber" name="L5276" href="#L5276">5276</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"host"</span>, 
<a class="jxr_linenumber" name="L5277" href="#L5277">5277</a>           <span class="jxr_string">"Host that this job ran on"</span>);
<a class="jxr_linenumber" name="L5278" href="#L5278">5278</a>       
<a class="jxr_linenumber" name="L5279" href="#L5279">5279</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"group_uuid"</span>, 
<a class="jxr_linenumber" name="L5280" href="#L5280">5280</a>           <span class="jxr_string">"If this job involves one group, this is uuid"</span>);
<a class="jxr_linenumber" name="L5281" href="#L5281">5281</a>       
<a class="jxr_linenumber" name="L5282" href="#L5282">5282</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"job_schedule_quartz_cron"</span>, 
<a class="jxr_linenumber" name="L5283" href="#L5283">5283</a>           <span class="jxr_string">"Quartz cron string for this col"</span>);
<a class="jxr_linenumber" name="L5284" href="#L5284">5284</a>       
<a class="jxr_linenumber" name="L5285" href="#L5285">5285</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"job_schedule_interval_seconds"</span>, 
<a class="jxr_linenumber" name="L5286" href="#L5286">5286</a>           <span class="jxr_string">"How many seconds this is supposed to wait between runs"</span>);
<a class="jxr_linenumber" name="L5287" href="#L5287">5287</a>   
<a class="jxr_linenumber" name="L5288" href="#L5288">5288</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"last_updated"</span>, 
<a class="jxr_linenumber" name="L5289" href="#L5289">5289</a>           <span class="jxr_string">"When this record was last updated"</span>);
<a class="jxr_linenumber" name="L5290" href="#L5290">5290</a>   
<a class="jxr_linenumber" name="L5291" href="#L5291">5291</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"unresolvable_subject_count"</span>, 
<a class="jxr_linenumber" name="L5292" href="#L5292">5292</a>           <span class="jxr_string">"The number of records which were not subject resolvable"</span>);
<a class="jxr_linenumber" name="L5293" href="#L5293">5293</a>   
<a class="jxr_linenumber" name="L5294" href="#L5294">5294</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"insert_count"</span>, 
<a class="jxr_linenumber" name="L5295" href="#L5295">5295</a>           <span class="jxr_string">"The number of records inserted"</span>);
<a class="jxr_linenumber" name="L5296" href="#L5296">5296</a>   
<a class="jxr_linenumber" name="L5297" href="#L5297">5297</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"update_count"</span>, 
<a class="jxr_linenumber" name="L5298" href="#L5298">5298</a>           <span class="jxr_string">"The number of records updated"</span>);
<a class="jxr_linenumber" name="L5299" href="#L5299">5299</a>   
<a class="jxr_linenumber" name="L5300" href="#L5300">5300</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"delete_count"</span>, 
<a class="jxr_linenumber" name="L5301" href="#L5301">5301</a>           <span class="jxr_string">"The number of records deleted"</span>);
<a class="jxr_linenumber" name="L5302" href="#L5302">5302</a>   
<a class="jxr_linenumber" name="L5303" href="#L5303">5303</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"total_count"</span>, 
<a class="jxr_linenumber" name="L5304" href="#L5304">5304</a>           <span class="jxr_string">"The total number of records (e.g. total number of members)"</span>);
<a class="jxr_linenumber" name="L5305" href="#L5305">5305</a>   
<a class="jxr_linenumber" name="L5306" href="#L5306">5306</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"parent_job_name"</span>, 
<a class="jxr_linenumber" name="L5307" href="#L5307">5307</a>           <span class="jxr_string">"If this job is a subjob of another job, then put the parent job name here"</span>);
<a class="jxr_linenumber" name="L5308" href="#L5308">5308</a>   
<a class="jxr_linenumber" name="L5309" href="#L5309">5309</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"parent_job_id"</span>, 
<a class="jxr_linenumber" name="L5310" href="#L5310">5310</a>           <span class="jxr_string">"If this job is a subjob of another job, then put the parent job id here"</span>);
<a class="jxr_linenumber" name="L5311" href="#L5311">5311</a>   
<a class="jxr_linenumber" name="L5312" href="#L5312">5312</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"and_group_names"</span>, 
<a class="jxr_linenumber" name="L5313" href="#L5313">5313</a>           <span class="jxr_string">"If this group query is anded with another group or groups, they are listed here comma separated"</span>);
<a class="jxr_linenumber" name="L5314" href="#L5314">5314</a>   
<a class="jxr_linenumber" name="L5315" href="#L5315">5315</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,  <span class="jxr_string">"job_schedule_priority"</span>, 
<a class="jxr_linenumber" name="L5316" href="#L5316">5316</a>           <span class="jxr_string">"Priority of this job (5 is unprioritized, higher the better)"</span>);
<a class="jxr_linenumber" name="L5317" href="#L5317">5317</a>   
<a class="jxr_linenumber" name="L5318" href="#L5318">5318</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, Hib3GrouperLoaderLog.TABLE_GROUPER_LOADER_LOG,  
<a class="jxr_linenumber" name="L5319" href="#L5319">5319</a>           Hib3GrouperLoaderLog.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L5320" href="#L5320">5320</a>       <span class="jxr_string">"link to the audit entry table"</span>);
<a class="jxr_linenumber" name="L5321" href="#L5321">5321</a> 
<a class="jxr_linenumber" name="L5322" href="#L5322">5322</a>     }
<a class="jxr_linenumber" name="L5323" href="#L5323">5323</a>     
<a class="jxr_linenumber" name="L5324" href="#L5324">5324</a>     {
<a class="jxr_linenumber" name="L5325" href="#L5325">5325</a>       GrouperDdlUtils.ddlutilsTableComment(ddlVersionBean,
<a class="jxr_linenumber" name="L5326" href="#L5326">5326</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5327" href="#L5327">5327</a>           <span class="jxr_string">"This table holds the relationship between stems by easily indicating all the ancestors of a stem."</span>);
<a class="jxr_linenumber" name="L5328" href="#L5328">5328</a> 
<a class="jxr_linenumber" name="L5329" href="#L5329">5329</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5330" href="#L5330">5330</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5331" href="#L5331">5331</a>           StemSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L5332" href="#L5332">5332</a>           <span class="jxr_string">"uuid for the audit table"</span>);
<a class="jxr_linenumber" name="L5333" href="#L5333">5333</a> 
<a class="jxr_linenumber" name="L5334" href="#L5334">5334</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5335" href="#L5335">5335</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5336" href="#L5336">5336</a>           StemSet.COLUMN_CREATED_ON, 
<a class="jxr_linenumber" name="L5337" href="#L5337">5337</a>           <span class="jxr_string">"millis since 1970 when this row was created"</span>);
<a class="jxr_linenumber" name="L5338" href="#L5338">5338</a> 
<a class="jxr_linenumber" name="L5339" href="#L5339">5339</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5340" href="#L5340">5340</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5341" href="#L5341">5341</a>           StemSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L5342" href="#L5342">5342</a>           <span class="jxr_string">"number of hops from one node to another, immediate is one"</span>);
<a class="jxr_linenumber" name="L5343" href="#L5343">5343</a> 
<a class="jxr_linenumber" name="L5344" href="#L5344">5344</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5345" href="#L5345">5345</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5346" href="#L5346">5346</a>           StemSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L5347" href="#L5347">5347</a>           <span class="jxr_string">"uuid of this row"</span>);
<a class="jxr_linenumber" name="L5348" href="#L5348">5348</a> 
<a class="jxr_linenumber" name="L5349" href="#L5349">5349</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5350" href="#L5350">5350</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5351" href="#L5351">5351</a>           StemSet.COLUMN_IF_HAS_STEM_ID, 
<a class="jxr_linenumber" name="L5352" href="#L5352">5352</a>           <span class="jxr_string">"uuid foreign key of left hand side of this relationship. If an object is in this stem, it is also in the then_has stem."</span>);
<a class="jxr_linenumber" name="L5353" href="#L5353">5353</a> 
<a class="jxr_linenumber" name="L5354" href="#L5354">5354</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5355" href="#L5355">5355</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5356" href="#L5356">5356</a>           StemSet.COLUMN_LAST_UPDATED, 
<a class="jxr_linenumber" name="L5357" href="#L5357">5357</a>           <span class="jxr_string">"millis since 1970 when this was last updated"</span>);
<a class="jxr_linenumber" name="L5358" href="#L5358">5358</a> 
<a class="jxr_linenumber" name="L5359" href="#L5359">5359</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5360" href="#L5360">5360</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5361" href="#L5361">5361</a>           StemSet.COLUMN_PARENT_STEM_SET_ID, 
<a class="jxr_linenumber" name="L5362" href="#L5362">5362</a>           <span class="jxr_string">"link back to this table for the parent entry of this stem set"</span>);
<a class="jxr_linenumber" name="L5363" href="#L5363">5363</a> 
<a class="jxr_linenumber" name="L5364" href="#L5364">5364</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5365" href="#L5365">5365</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5366" href="#L5366">5366</a>           StemSet.COLUMN_THEN_HAS_STEM_ID, 
<a class="jxr_linenumber" name="L5367" href="#L5367">5367</a>           <span class="jxr_string">"uuid foreign key of the right hand side of this relationship.  If an object is in the if_has stem, it is also in this stem."</span>);
<a class="jxr_linenumber" name="L5368" href="#L5368">5368</a> 
<a class="jxr_linenumber" name="L5369" href="#L5369">5369</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5370" href="#L5370">5370</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5371" href="#L5371">5371</a>           StemSet.COLUMN_TYPE, 
<a class="jxr_linenumber" name="L5372" href="#L5372">5372</a>           <span class="jxr_string">"from enum StemHierarchyType: self, immediate, effective"</span>);
<a class="jxr_linenumber" name="L5373" href="#L5373">5373</a> 
<a class="jxr_linenumber" name="L5374" href="#L5374">5374</a>       GrouperDdlUtils.ddlutilsColumnComment(ddlVersionBean, 
<a class="jxr_linenumber" name="L5375" href="#L5375">5375</a>           StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5376" href="#L5376">5376</a>           StemSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L5377" href="#L5377">5377</a>           <span class="jxr_string">"hibernate optimistic locking number for updates and deletes"</span>);
<a class="jxr_linenumber" name="L5378" href="#L5378">5378</a> 
<a class="jxr_linenumber" name="L5379" href="#L5379">5379</a>     }
<a class="jxr_linenumber" name="L5380" href="#L5380">5380</a>     
<a class="jxr_linenumber" name="L5381" href="#L5381">5381</a>     String groupIdCol = <span class="jxr_string">"id"</span>;
<a class="jxr_linenumber" name="L5382" href="#L5382">5382</a>     
<a class="jxr_linenumber" name="L5383" href="#L5383">5383</a>     String stemIdCol = <span class="jxr_string">"id"</span>;
<a class="jxr_linenumber" name="L5384" href="#L5384">5384</a>     
<a class="jxr_linenumber" name="L5385" href="#L5385">5385</a>     String memberIdCol = <span class="jxr_string">"id"</span>;
<a class="jxr_linenumber" name="L5386" href="#L5386">5386</a>         
<a class="jxr_linenumber" name="L5387" href="#L5387">5387</a>     <em class="jxr_comment">//dont add if just testing</em>
<a class="jxr_linenumber" name="L5388" href="#L5388">5388</a>     <strong class="jxr_keyword">boolean</strong> buildingAudits = buildingToVersion &gt;= V19.getVersion();
<a class="jxr_linenumber" name="L5389" href="#L5389">5389</a>     <strong class="jxr_keyword">if</strong> (buildingAudits) {
<a class="jxr_linenumber" name="L5390" href="#L5390">5390</a>       GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AuditEntry.TABLE_GROUPER_AUDIT_ENTRY, 
<a class="jxr_linenumber" name="L5391" href="#L5391">5391</a>           <span class="jxr_string">"fk_audit_entry_type_id"</span>, AuditType.TABLE_GROUPER_AUDIT_TYPE, <span class="jxr_string">"audit_type_id"</span>, <span class="jxr_string">"id"</span>);
<a class="jxr_linenumber" name="L5392" href="#L5392">5392</a> 
<a class="jxr_linenumber" name="L5393" href="#L5393">5393</a>     }
<a class="jxr_linenumber" name="L5394" href="#L5394">5394</a>     
<a class="jxr_linenumber" name="L5395" href="#L5395">5395</a>     <em class="jxr_comment">//dont add if just testing</em>
<a class="jxr_linenumber" name="L5396" href="#L5396">5396</a>     <strong class="jxr_keyword">boolean</strong> buildingChangeLogs = buildingToVersion &gt;= V21.getVersion();
<a class="jxr_linenumber" name="L5397" href="#L5397">5397</a>     <strong class="jxr_keyword">if</strong> (buildingChangeLogs) {
<a class="jxr_linenumber" name="L5398" href="#L5398">5398</a>       GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY, 
<a class="jxr_linenumber" name="L5399" href="#L5399">5399</a>           <span class="jxr_string">"fk_change_log_entry_type_id"</span>, ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE, <span class="jxr_string">"change_log_type_id"</span>, <span class="jxr_string">"id"</span>);
<a class="jxr_linenumber" name="L5400" href="#L5400">5400</a> 
<a class="jxr_linenumber" name="L5401" href="#L5401">5401</a>     }
<a class="jxr_linenumber" name="L5402" href="#L5402">5402</a>     
<a class="jxr_linenumber" name="L5403" href="#L5403">5403</a>     <strong class="jxr_keyword">boolean</strong> buildingFieldIds = buildingToVersion &gt; V4.getVersion();
<a class="jxr_linenumber" name="L5404" href="#L5404">5404</a> 
<a class="jxr_linenumber" name="L5405" href="#L5405">5405</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE, 
<a class="jxr_linenumber" name="L5406" href="#L5406">5406</a>         <span class="jxr_string">"fk_attr_def_scope_def_id"</span>, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5407" href="#L5407">5407</a>         AttributeDefScope.COLUMN_ATTRIBUTE_DEF_ID, AttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5408" href="#L5408">5408</a> 
<a class="jxr_linenumber" name="L5409" href="#L5409">5409</a>     
<a class="jxr_linenumber" name="L5410" href="#L5410">5410</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L5411" href="#L5411">5411</a>         <span class="jxr_string">"fk_attr_action_set_parent"</span>, AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L5412" href="#L5412">5412</a>         AttributeAssignActionSet.COLUMN_PARENT_ATTR_ASSN_ACTION_ID, AttributeDefNameSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5413" href="#L5413">5413</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L5414" href="#L5414">5414</a>         <span class="jxr_string">"fk_attr_action_set_if"</span>, AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L5415" href="#L5415">5415</a>         AttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID, AttributeAssignAction.COLUMN_ID);
<a class="jxr_linenumber" name="L5416" href="#L5416">5416</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L5417" href="#L5417">5417</a>         <span class="jxr_string">"fk_attr_action_set_then"</span>, AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L5418" href="#L5418">5418</a>         AttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID, AttributeAssignAction.COLUMN_ID);
<a class="jxr_linenumber" name="L5419" href="#L5419">5419</a> 
<a class="jxr_linenumber" name="L5420" href="#L5420">5420</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5421" href="#L5421">5421</a>         <span class="jxr_string">"fk_attr_assign_action_id"</span>, AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L5422" href="#L5422">5422</a>         AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID, AttributeAssign.COLUMN_ID);
<a class="jxr_linenumber" name="L5423" href="#L5423">5423</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5424" href="#L5424">5424</a>         <span class="jxr_string">"fk_attr_assign_def_name_id"</span>, AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5425" href="#L5425">5425</a>         AttributeAssign.COLUMN_ATTRIBUTE_DEF_NAME_ID, AttributeDefName.COLUMN_ID);
<a class="jxr_linenumber" name="L5426" href="#L5426">5426</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5427" href="#L5427">5427</a>         <span class="jxr_string">"fk_attr_assign_owner_assign_id"</span>, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5428" href="#L5428">5428</a>         AttributeAssign.COLUMN_OWNER_ATTRIBUTE_ASSIGN_ID, AttributeAssign.COLUMN_ID);
<a class="jxr_linenumber" name="L5429" href="#L5429">5429</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5430" href="#L5430">5430</a>         <span class="jxr_string">"fk_attr_assign_owner_def_id"</span>, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5431" href="#L5431">5431</a>         AttributeAssign.COLUMN_OWNER_ATTRIBUTE_DEF_ID, AttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5432" href="#L5432">5432</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5433" href="#L5433">5433</a>         <span class="jxr_string">"fk_attr_assign_owner_group_id"</span>, Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L5434" href="#L5434">5434</a>         AttributeAssign.COLUMN_OWNER_GROUP_ID, Group.COLUMN_ID);
<a class="jxr_linenumber" name="L5435" href="#L5435">5435</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5436" href="#L5436">5436</a>         <span class="jxr_string">"fk_attr_assign_owner_member_id"</span>, Member.TABLE_GROUPER_MEMBERS, 
<a class="jxr_linenumber" name="L5437" href="#L5437">5437</a>         AttributeAssign.COLUMN_OWNER_MEMBER_ID, Member.COLUMN_ID);
<a class="jxr_linenumber" name="L5438" href="#L5438">5438</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5439" href="#L5439">5439</a>         <span class="jxr_string">"fk_attr_assign_owner_mship_id"</span>, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5440" href="#L5440">5440</a>         AttributeAssign.COLUMN_OWNER_MEMBERSHIP_ID, Membership.COLUMN_ID);
<a class="jxr_linenumber" name="L5441" href="#L5441">5441</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5442" href="#L5442">5442</a>         <span class="jxr_string">"fk_attr_assign_owner_stem_id"</span>, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5443" href="#L5443">5443</a>         AttributeAssign.COLUMN_OWNER_STEM_ID, Stem.COLUMN_ID);
<a class="jxr_linenumber" name="L5444" href="#L5444">5444</a>     
<a class="jxr_linenumber" name="L5445" href="#L5445">5445</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE, 
<a class="jxr_linenumber" name="L5446" href="#L5446">5446</a>         <span class="jxr_string">"fk_attr_assign_value_assign_id"</span>, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5447" href="#L5447">5447</a>         AttributeAssignValue.COLUMN_ATTRIBUTE_ASSIGN_ID, AttributeAssign.COLUMN_ID);
<a class="jxr_linenumber" name="L5448" href="#L5448">5448</a>     
<a class="jxr_linenumber" name="L5449" href="#L5449">5449</a>     
<a class="jxr_linenumber" name="L5450" href="#L5450">5450</a>     
<a class="jxr_linenumber" name="L5451" href="#L5451">5451</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5452" href="#L5452">5452</a>         <span class="jxr_string">"fk_attr_def_name_stem"</span>, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5453" href="#L5453">5453</a>         AttributeDefName.COLUMN_STEM_ID, Stem.COLUMN_ID);
<a class="jxr_linenumber" name="L5454" href="#L5454">5454</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5455" href="#L5455">5455</a>         <span class="jxr_string">"fk_attr_def_name_def_id"</span>, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5456" href="#L5456">5456</a>         AttributeDefName.COLUMN_ATTRIBUTE_DEF_ID, AttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5457" href="#L5457">5457</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5458" href="#L5458">5458</a>         <span class="jxr_string">"fk_attr_def_stem"</span>, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5459" href="#L5459">5459</a>         AttributeDef.COLUMN_STEM_ID, Stem.COLUMN_ID);
<a class="jxr_linenumber" name="L5460" href="#L5460">5460</a> 
<a class="jxr_linenumber" name="L5461" href="#L5461">5461</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L5462" href="#L5462">5462</a>         <span class="jxr_string">"fk_attr_assn_attr_def_id"</span>, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5463" href="#L5463">5463</a>         AttributeAssignAction.COLUMN_ATTRIBUTE_DEF_ID, AttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5464" href="#L5464">5464</a>     
<a class="jxr_linenumber" name="L5465" href="#L5465">5465</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET, 
<a class="jxr_linenumber" name="L5466" href="#L5466">5466</a>         <span class="jxr_string">"fk_attr_def_name_set_parent"</span>, AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET, 
<a class="jxr_linenumber" name="L5467" href="#L5467">5467</a>         AttributeDefNameSet.COLUMN_PARENT_ATTR_DEF_NAME_SET_ID, AttributeDefNameSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5468" href="#L5468">5468</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET, 
<a class="jxr_linenumber" name="L5469" href="#L5469">5469</a>         <span class="jxr_string">"fk_attr_def_name_if"</span>, AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5470" href="#L5470">5470</a>         AttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID, AttributeDefName.COLUMN_ID);
<a class="jxr_linenumber" name="L5471" href="#L5471">5471</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET, 
<a class="jxr_linenumber" name="L5472" href="#L5472">5472</a>         <span class="jxr_string">"fk_attr_def_name_then"</span>, AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5473" href="#L5473">5473</a>         AttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID, AttributeDefName.COLUMN_ID);
<a class="jxr_linenumber" name="L5474" href="#L5474">5474</a>     
<a class="jxr_linenumber" name="L5475" href="#L5475">5475</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, RoleSet.TABLE_GROUPER_ROLE_SET, 
<a class="jxr_linenumber" name="L5476" href="#L5476">5476</a>         <span class="jxr_string">"fk_role_set_parent"</span>, RoleSet.TABLE_GROUPER_ROLE_SET, 
<a class="jxr_linenumber" name="L5477" href="#L5477">5477</a>         RoleSet.COLUMN_PARENT_ROLE_SET_ID, RoleSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5478" href="#L5478">5478</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, RoleSet.TABLE_GROUPER_ROLE_SET, 
<a class="jxr_linenumber" name="L5479" href="#L5479">5479</a>         <span class="jxr_string">"fk_role_if"</span>, Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L5480" href="#L5480">5480</a>         RoleSet.COLUMN_IF_HAS_ROLE_ID, Group.COLUMN_ID);
<a class="jxr_linenumber" name="L5481" href="#L5481">5481</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, RoleSet.TABLE_GROUPER_ROLE_SET, 
<a class="jxr_linenumber" name="L5482" href="#L5482">5482</a>         <span class="jxr_string">"fk_role_then"</span>, Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L5483" href="#L5483">5483</a>         RoleSet.COLUMN_THEN_HAS_ROLE_ID, Group.COLUMN_ID);
<a class="jxr_linenumber" name="L5484" href="#L5484">5484</a>     
<a class="jxr_linenumber" name="L5485" href="#L5485">5485</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Composite.TABLE_GROUPER_COMPOSITES, 
<a class="jxr_linenumber" name="L5486" href="#L5486">5486</a>         <span class="jxr_string">"fk_composites_owner"</span>, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"owner"</span>, groupIdCol);
<a class="jxr_linenumber" name="L5487" href="#L5487">5487</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Composite.TABLE_GROUPER_COMPOSITES, 
<a class="jxr_linenumber" name="L5488" href="#L5488">5488</a>         <span class="jxr_string">"fk_composites_left_factor"</span>, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"left_factor"</span>, groupIdCol);
<a class="jxr_linenumber" name="L5489" href="#L5489">5489</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Composite.TABLE_GROUPER_COMPOSITES, 
<a class="jxr_linenumber" name="L5490" href="#L5490">5490</a>         <span class="jxr_string">"fk_composites_right_factor"</span>, Group.TABLE_GROUPER_GROUPS, <span class="jxr_string">"right_factor"</span>, groupIdCol);
<a class="jxr_linenumber" name="L5491" href="#L5491">5491</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Composite.TABLE_GROUPER_COMPOSITES, 
<a class="jxr_linenumber" name="L5492" href="#L5492">5492</a>         <span class="jxr_string">"fk_composites_creator_id"</span>, Member.TABLE_GROUPER_MEMBERS, <span class="jxr_string">"creator_id"</span>, memberIdCol);
<a class="jxr_linenumber" name="L5493" href="#L5493">5493</a>     
<a class="jxr_linenumber" name="L5494" href="#L5494">5494</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR, 
<a class="jxr_linenumber" name="L5495" href="#L5495">5495</a>         <span class="jxr_string">"fk_ext_subj_attr_subj_uuid"</span>, ExternalSubject.TABLE_GROUPER_EXT_SUBJ, 
<a class="jxr_linenumber" name="L5496" href="#L5496">5496</a>         ExternalSubjectAttribute.COLUMN_SUBJECT_UUID, ExternalSubject.COLUMN_UUID);
<a class="jxr_linenumber" name="L5497" href="#L5497">5497</a> 
<a class="jxr_linenumber" name="L5498" href="#L5498">5498</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L5499" href="#L5499">5499</a>         <span class="jxr_string">"fk_groups_parent_stem"</span>, Stem.TABLE_GROUPER_STEMS, <span class="jxr_string">"parent_stem"</span>, stemIdCol);
<a class="jxr_linenumber" name="L5500" href="#L5500">5500</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L5501" href="#L5501">5501</a>         <span class="jxr_string">"fk_groups_creator_id"</span>, Member.TABLE_GROUPER_MEMBERS, <span class="jxr_string">"creator_id"</span>, memberIdCol);
<a class="jxr_linenumber" name="L5502" href="#L5502">5502</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L5503" href="#L5503">5503</a>         <span class="jxr_string">"fk_groups_modifier_id"</span>, Member.TABLE_GROUPER_MEMBERS, <span class="jxr_string">"modifier_id"</span>, memberIdCol);
<a class="jxr_linenumber" name="L5504" href="#L5504">5504</a> 
<a class="jxr_linenumber" name="L5505" href="#L5505">5505</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5506" href="#L5506">5506</a>         <span class="jxr_string">"fk_memberships_member_id"</span>, Member.TABLE_GROUPER_MEMBERS, <span class="jxr_string">"member_id"</span>, memberIdCol);
<a class="jxr_linenumber" name="L5507" href="#L5507">5507</a>     <strong class="jxr_keyword">if</strong> (buildingFieldIds) {
<a class="jxr_linenumber" name="L5508" href="#L5508">5508</a> 
<a class="jxr_linenumber" name="L5509" href="#L5509">5509</a>       GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5510" href="#L5510">5510</a>           <span class="jxr_string">"fk_membership_field_id"</span>, Field.TABLE_GROUPER_FIELDS, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"id"</span>);
<a class="jxr_linenumber" name="L5511" href="#L5511">5511</a>     }
<a class="jxr_linenumber" name="L5512" href="#L5512">5512</a>  
<a class="jxr_linenumber" name="L5513" href="#L5513">5513</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5514" href="#L5514">5514</a>         <span class="jxr_string">"fk_memberships_creator_id"</span>, Member.TABLE_GROUPER_MEMBERS, <span class="jxr_string">"creator_id"</span>, memberIdCol);
<a class="jxr_linenumber" name="L5515" href="#L5515">5515</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5516" href="#L5516">5516</a>         <span class="jxr_string">"fk_memberships_group_owner_id"</span>, Group.TABLE_GROUPER_GROUPS, Membership.COLUMN_OWNER_GROUP_ID, Group.COLUMN_ID);
<a class="jxr_linenumber" name="L5517" href="#L5517">5517</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5518" href="#L5518">5518</a>         <span class="jxr_string">"fk_memberships_stem_owner_id"</span>, Stem.TABLE_GROUPER_STEMS, Membership.COLUMN_OWNER_STEM_ID, Stem.COLUMN_ID);
<a class="jxr_linenumber" name="L5519" href="#L5519">5519</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Membership.TABLE_GROUPER_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5520" href="#L5520">5520</a>         <span class="jxr_string">"fk_memberships_comp_via_id"</span>, Composite.TABLE_GROUPER_COMPOSITES, Membership.COLUMN_VIA_COMPOSITE_ID, Composite.COLUMN_ID);
<a class="jxr_linenumber" name="L5521" href="#L5521">5521</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Membership.TABLE_GROUPER_MEMBERSHIPS,
<a class="jxr_linenumber" name="L5522" href="#L5522">5522</a>         <span class="jxr_string">"fk_mship_attr_def_owner_id"</span>, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, Membership.COLUMN_OWNER_ATTR_DEF_ID, AttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5523" href="#L5523">5523</a>     
<a class="jxr_linenumber" name="L5524" href="#L5524">5524</a>     
<a class="jxr_linenumber" name="L5525" href="#L5525">5525</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5526" href="#L5526">5526</a>         <span class="jxr_string">"fk_group_set_creator_id"</span>, Member.TABLE_GROUPER_MEMBERS, GroupSet.COLUMN_CREATOR_ID, memberIdCol);
<a class="jxr_linenumber" name="L5527" href="#L5527">5527</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5528" href="#L5528">5528</a>         <span class="jxr_string">"fk_group_set_field_id"</span>, Field.TABLE_GROUPER_FIELDS, GroupSet.COLUMN_FIELD_ID, <span class="jxr_string">"id"</span>);
<a class="jxr_linenumber" name="L5529" href="#L5529">5529</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5530" href="#L5530">5530</a>         <span class="jxr_string">"fk_group_set_via_group_id"</span>, Group.TABLE_GROUPER_GROUPS, GroupSet.COLUMN_VIA_GROUP_ID, Group.COLUMN_ID);
<a class="jxr_linenumber" name="L5531" href="#L5531">5531</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5532" href="#L5532">5532</a>         <span class="jxr_string">"fk_group_set_parent_id"</span>, GroupSet.TABLE_GROUPER_GROUP_SET, GroupSet.COLUMN_PARENT_ID, GroupSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5533" href="#L5533">5533</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5534" href="#L5534">5534</a>         <span class="jxr_string">"fk_group_set_owner_attr_def_id"</span>, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, GroupSet.COLUMN_OWNER_ATTR_DEF_ID, AttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5535" href="#L5535">5535</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5536" href="#L5536">5536</a>         <span class="jxr_string">"fk_group_set_mbr_attr_def_id"</span>, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, GroupSet.COLUMN_MEMBER_GROUP_ID, AttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5537" href="#L5537">5537</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5538" href="#L5538">5538</a>         <span class="jxr_string">"fk_group_set_owner_group_id"</span>, Group.TABLE_GROUPER_GROUPS, GroupSet.COLUMN_OWNER_GROUP_ID, Group.COLUMN_ID);
<a class="jxr_linenumber" name="L5539" href="#L5539">5539</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5540" href="#L5540">5540</a>         <span class="jxr_string">"fk_group_set_member_group_id"</span>, Group.TABLE_GROUPER_GROUPS, GroupSet.COLUMN_MEMBER_GROUP_ID, Group.COLUMN_ID);
<a class="jxr_linenumber" name="L5541" href="#L5541">5541</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5542" href="#L5542">5542</a>         <span class="jxr_string">"fk_group_set_owner_stem_id"</span>, Stem.TABLE_GROUPER_STEMS, GroupSet.COLUMN_OWNER_STEM_ID, Stem.COLUMN_ID);
<a class="jxr_linenumber" name="L5543" href="#L5543">5543</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5544" href="#L5544">5544</a>         <span class="jxr_string">"fk_group_set_member_stem_id"</span>, Stem.TABLE_GROUPER_STEMS, GroupSet.COLUMN_MEMBER_STEM_ID, Stem.COLUMN_ID);
<a class="jxr_linenumber" name="L5545" href="#L5545">5545</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, GroupSet.TABLE_GROUPER_GROUP_SET, 
<a class="jxr_linenumber" name="L5546" href="#L5546">5546</a>         <span class="jxr_string">"fk_group_set_member_field_id"</span>, Field.TABLE_GROUPER_FIELDS, GroupSet.COLUMN_MEMBER_FIELD_ID, <span class="jxr_string">"id"</span>);
<a class="jxr_linenumber" name="L5547" href="#L5547">5547</a> 
<a class="jxr_linenumber" name="L5548" href="#L5548">5548</a>     
<a class="jxr_linenumber" name="L5549" href="#L5549">5549</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5550" href="#L5550">5550</a>         <span class="jxr_string">"fk_stems_parent_stem"</span>, Stem.TABLE_GROUPER_STEMS, <span class="jxr_string">"parent_stem"</span>, stemIdCol);
<a class="jxr_linenumber" name="L5551" href="#L5551">5551</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5552" href="#L5552">5552</a>         <span class="jxr_string">"fk_stems_creator_id"</span>, Member.TABLE_GROUPER_MEMBERS, <span class="jxr_string">"creator_id"</span>, memberIdCol);
<a class="jxr_linenumber" name="L5553" href="#L5553">5553</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5554" href="#L5554">5554</a>         <span class="jxr_string">"fk_stems_modifier_id"</span>, Member.TABLE_GROUPER_MEMBERS, <span class="jxr_string">"modifier_id"</span>, memberIdCol);
<a class="jxr_linenumber" name="L5555" href="#L5555">5555</a> 
<a class="jxr_linenumber" name="L5556" href="#L5556">5556</a>     
<a class="jxr_linenumber" name="L5557" href="#L5557">5557</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS,
<a class="jxr_linenumber" name="L5558" href="#L5558">5558</a>         <span class="jxr_string">"fk_pit_ms_owner_attrdef_id"</span>, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, PITMembership.COLUMN_OWNER_ATTR_DEF_ID, PITAttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5559" href="#L5559">5559</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS,
<a class="jxr_linenumber" name="L5560" href="#L5560">5560</a>         <span class="jxr_string">"fk_pit_ms_owner_group_id"</span>, PITGroup.TABLE_GROUPER_PIT_GROUPS, PITMembership.COLUMN_OWNER_GROUP_ID, PITGroup.COLUMN_ID);
<a class="jxr_linenumber" name="L5561" href="#L5561">5561</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS,
<a class="jxr_linenumber" name="L5562" href="#L5562">5562</a>         <span class="jxr_string">"fk_pit_ms_owner_stem_id"</span>, PITStem.TABLE_GROUPER_PIT_STEMS, PITMembership.COLUMN_OWNER_STEM_ID, PITStem.COLUMN_ID);
<a class="jxr_linenumber" name="L5563" href="#L5563">5563</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS,
<a class="jxr_linenumber" name="L5564" href="#L5564">5564</a>         <span class="jxr_string">"fk_pit_ms_member_id"</span>, PITMember.TABLE_GROUPER_PIT_MEMBERS, PITMembership.COLUMN_MEMBER_ID, PITMember.COLUMN_ID);
<a class="jxr_linenumber" name="L5565" href="#L5565">5565</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS,
<a class="jxr_linenumber" name="L5566" href="#L5566">5566</a>         <span class="jxr_string">"fk_pit_ms_field_id"</span>, PITField.TABLE_GROUPER_PIT_FIELDS, PITMembership.COLUMN_FIELD_ID, PITField.COLUMN_ID);
<a class="jxr_linenumber" name="L5567" href="#L5567">5567</a> 
<a class="jxr_linenumber" name="L5568" href="#L5568">5568</a>     
<a class="jxr_linenumber" name="L5569" href="#L5569">5569</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5570" href="#L5570">5570</a>         <span class="jxr_string">"fk_pit_gs_owner_attrdef_id"</span>, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, PITGroupSet.COLUMN_OWNER_ATTR_DEF_ID, PITAttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5571" href="#L5571">5571</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5572" href="#L5572">5572</a>         <span class="jxr_string">"fk_pit_gs_owner_group_id"</span>, PITGroup.TABLE_GROUPER_PIT_GROUPS, PITGroupSet.COLUMN_OWNER_GROUP_ID, PITGroup.COLUMN_ID);
<a class="jxr_linenumber" name="L5573" href="#L5573">5573</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5574" href="#L5574">5574</a>         <span class="jxr_string">"fk_pit_gs_owner_stem_id"</span>, PITStem.TABLE_GROUPER_PIT_STEMS, PITGroupSet.COLUMN_OWNER_STEM_ID, PITStem.COLUMN_ID);
<a class="jxr_linenumber" name="L5575" href="#L5575">5575</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5576" href="#L5576">5576</a>         <span class="jxr_string">"fk_pit_gs_member_attrdef_id"</span>, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, PITGroupSet.COLUMN_MEMBER_ATTR_DEF_ID, PITAttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5577" href="#L5577">5577</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5578" href="#L5578">5578</a>         <span class="jxr_string">"fk_pit_gs_member_group_id"</span>, PITGroup.TABLE_GROUPER_PIT_GROUPS, PITGroupSet.COLUMN_MEMBER_GROUP_ID, PITGroup.COLUMN_ID);
<a class="jxr_linenumber" name="L5579" href="#L5579">5579</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5580" href="#L5580">5580</a>         <span class="jxr_string">"fk_pit_gs_member_stem_id"</span>, PITStem.TABLE_GROUPER_PIT_STEMS, PITGroupSet.COLUMN_MEMBER_STEM_ID, PITStem.COLUMN_ID);
<a class="jxr_linenumber" name="L5581" href="#L5581">5581</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5582" href="#L5582">5582</a>         <span class="jxr_string">"fk_pit_gs_field_id"</span>, PITField.TABLE_GROUPER_PIT_FIELDS, PITGroupSet.COLUMN_FIELD_ID, PITField.COLUMN_ID);
<a class="jxr_linenumber" name="L5583" href="#L5583">5583</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5584" href="#L5584">5584</a>         <span class="jxr_string">"fk_pit_gs_member_field_id"</span>, PITField.TABLE_GROUPER_PIT_FIELDS, PITGroupSet.COLUMN_MEMBER_FIELD_ID, PITField.COLUMN_ID);
<a class="jxr_linenumber" name="L5585" href="#L5585">5585</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET,
<a class="jxr_linenumber" name="L5586" href="#L5586">5586</a>         <span class="jxr_string">"fk_pit_gs_parent_id"</span>, PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET, PITGroupSet.COLUMN_PARENT_ID, PITGroupSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5587" href="#L5587">5587</a>  
<a class="jxr_linenumber" name="L5588" href="#L5588">5588</a>     
<a class="jxr_linenumber" name="L5589" href="#L5589">5589</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5590" href="#L5590">5590</a>         <span class="jxr_string">"fk_pit_attr_assn_action_id"</span>, PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L5591" href="#L5591">5591</a>         PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID, PITAttributeAssignAction.COLUMN_ID);
<a class="jxr_linenumber" name="L5592" href="#L5592">5592</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5593" href="#L5593">5593</a>         <span class="jxr_string">"fk_pit_attr_assn_def_name_id"</span>, PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5594" href="#L5594">5594</a>         PITAttributeAssign.COLUMN_ATTRIBUTE_DEF_NAME_ID, PITAttributeDefName.COLUMN_ID);
<a class="jxr_linenumber" name="L5595" href="#L5595">5595</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5596" href="#L5596">5596</a>         <span class="jxr_string">"fk_pit_attr_assn_owner_assn_id"</span>, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5597" href="#L5597">5597</a>         PITAttributeAssign.COLUMN_OWNER_ATTRIBUTE_ASSIGN_ID, PITAttributeAssign.COLUMN_ID);
<a class="jxr_linenumber" name="L5598" href="#L5598">5598</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5599" href="#L5599">5599</a>         <span class="jxr_string">"fk_pit_attr_assn_owner_def_id"</span>, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5600" href="#L5600">5600</a>         PITAttributeAssign.COLUMN_OWNER_ATTRIBUTE_DEF_ID, PITAttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5601" href="#L5601">5601</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5602" href="#L5602">5602</a>         <span class="jxr_string">"fk_pit_attr_assn_owner_grp_id"</span>, PITGroup.TABLE_GROUPER_PIT_GROUPS, 
<a class="jxr_linenumber" name="L5603" href="#L5603">5603</a>         PITAttributeAssign.COLUMN_OWNER_GROUP_ID, PITGroup.COLUMN_ID);
<a class="jxr_linenumber" name="L5604" href="#L5604">5604</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5605" href="#L5605">5605</a>         <span class="jxr_string">"fk_pit_attr_assn_owner_mem_id"</span>, PITMember.TABLE_GROUPER_PIT_MEMBERS, 
<a class="jxr_linenumber" name="L5606" href="#L5606">5606</a>         PITAttributeAssign.COLUMN_OWNER_MEMBER_ID, PITMember.COLUMN_ID);
<a class="jxr_linenumber" name="L5607" href="#L5607">5607</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5608" href="#L5608">5608</a>         <span class="jxr_string">"fk_pit_attr_assn_owner_ms_id"</span>, PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS, 
<a class="jxr_linenumber" name="L5609" href="#L5609">5609</a>         PITAttributeAssign.COLUMN_OWNER_MEMBERSHIP_ID, PITMembership.COLUMN_ID);
<a class="jxr_linenumber" name="L5610" href="#L5610">5610</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5611" href="#L5611">5611</a>         <span class="jxr_string">"fk_pit_attr_assn_owner_stem_id"</span>, PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5612" href="#L5612">5612</a>         PITAttributeAssign.COLUMN_OWNER_STEM_ID, PITStem.COLUMN_ID);
<a class="jxr_linenumber" name="L5613" href="#L5613">5613</a>     
<a class="jxr_linenumber" name="L5614" href="#L5614">5614</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5615" href="#L5615">5615</a>         <span class="jxr_string">"fk_pit_stem_parent"</span>, PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5616" href="#L5616">5616</a>         PITStem.COLUMN_PARENT_STEM_ID, PITStem.COLUMN_ID);
<a class="jxr_linenumber" name="L5617" href="#L5617">5617</a>     
<a class="jxr_linenumber" name="L5618" href="#L5618">5618</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITGroup.TABLE_GROUPER_PIT_GROUPS, 
<a class="jxr_linenumber" name="L5619" href="#L5619">5619</a>         <span class="jxr_string">"fk_pit_group_stem"</span>, PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5620" href="#L5620">5620</a>         PITGroup.COLUMN_STEM_ID, PITStem.COLUMN_ID);
<a class="jxr_linenumber" name="L5621" href="#L5621">5621</a>     
<a class="jxr_linenumber" name="L5622" href="#L5622">5622</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5623" href="#L5623">5623</a>         <span class="jxr_string">"fk_pit_attr_def_stem"</span>, PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5624" href="#L5624">5624</a>         PITAttributeDef.COLUMN_STEM_ID, PITStem.COLUMN_ID);
<a class="jxr_linenumber" name="L5625" href="#L5625">5625</a>     
<a class="jxr_linenumber" name="L5626" href="#L5626">5626</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5627" href="#L5627">5627</a>         <span class="jxr_string">"fk_pit_attr_def_name_stem"</span>, PITStem.TABLE_GROUPER_PIT_STEMS, 
<a class="jxr_linenumber" name="L5628" href="#L5628">5628</a>         PITAttributeDefName.COLUMN_STEM_ID, PITStem.COLUMN_ID);
<a class="jxr_linenumber" name="L5629" href="#L5629">5629</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5630" href="#L5630">5630</a>         <span class="jxr_string">"fk_pit_attr_def_name_def_id"</span>, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5631" href="#L5631">5631</a>         PITAttributeDefName.COLUMN_ATTRIBUTE_DEF_ID, PITAttributeDef.COLUMN_ID);    
<a class="jxr_linenumber" name="L5632" href="#L5632">5632</a>     
<a class="jxr_linenumber" name="L5633" href="#L5633">5633</a>     
<a class="jxr_linenumber" name="L5634" href="#L5634">5634</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L5635" href="#L5635">5635</a>         <span class="jxr_string">"fk_pit_attr_assn_attr_def_id"</span>, PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L5636" href="#L5636">5636</a>         PITAttributeAssignAction.COLUMN_ATTRIBUTE_DEF_ID, PITAttributeDef.COLUMN_ID);
<a class="jxr_linenumber" name="L5637" href="#L5637">5637</a>     
<a class="jxr_linenumber" name="L5638" href="#L5638">5638</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE, 
<a class="jxr_linenumber" name="L5639" href="#L5639">5639</a>         <span class="jxr_string">"fk_pit_attr_assn_value_assn_id"</span>, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, 
<a class="jxr_linenumber" name="L5640" href="#L5640">5640</a>         PITAttributeAssignValue.COLUMN_ATTRIBUTE_ASSIGN_ID, PITAttributeAssign.COLUMN_ID);
<a class="jxr_linenumber" name="L5641" href="#L5641">5641</a>     
<a class="jxr_linenumber" name="L5642" href="#L5642">5642</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET, 
<a class="jxr_linenumber" name="L5643" href="#L5643">5643</a>         <span class="jxr_string">"fk_pit_role_set_parent"</span>, PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET, 
<a class="jxr_linenumber" name="L5644" href="#L5644">5644</a>         PITRoleSet.COLUMN_PARENT_ROLE_SET_ID, PITRoleSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5645" href="#L5645">5645</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET, 
<a class="jxr_linenumber" name="L5646" href="#L5646">5646</a>         <span class="jxr_string">"fk_pit_role_if"</span>, PITGroup.TABLE_GROUPER_PIT_GROUPS, 
<a class="jxr_linenumber" name="L5647" href="#L5647">5647</a>         PITRoleSet.COLUMN_IF_HAS_ROLE_ID, PITGroup.COLUMN_ID);
<a class="jxr_linenumber" name="L5648" href="#L5648">5648</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET, 
<a class="jxr_linenumber" name="L5649" href="#L5649">5649</a>         <span class="jxr_string">"fk_pit_role_then"</span>, PITGroup.TABLE_GROUPER_PIT_GROUPS, 
<a class="jxr_linenumber" name="L5650" href="#L5650">5650</a>         PITRoleSet.COLUMN_THEN_HAS_ROLE_ID, PITGroup.COLUMN_ID);
<a class="jxr_linenumber" name="L5651" href="#L5651">5651</a>     
<a class="jxr_linenumber" name="L5652" href="#L5652">5652</a>     
<a class="jxr_linenumber" name="L5653" href="#L5653">5653</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET, 
<a class="jxr_linenumber" name="L5654" href="#L5654">5654</a>         <span class="jxr_string">"fk_pit_attr_def_name_set_parnt"</span>, PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET, 
<a class="jxr_linenumber" name="L5655" href="#L5655">5655</a>         PITAttributeDefNameSet.COLUMN_PARENT_ATTR_DEF_NAME_SET_ID, PITAttributeDefNameSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5656" href="#L5656">5656</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET, 
<a class="jxr_linenumber" name="L5657" href="#L5657">5657</a>         <span class="jxr_string">"fk_pit_attr_def_name_if"</span>, PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5658" href="#L5658">5658</a>         PITAttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID, PITAttributeDefName.COLUMN_ID);
<a class="jxr_linenumber" name="L5659" href="#L5659">5659</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET, 
<a class="jxr_linenumber" name="L5660" href="#L5660">5660</a>         <span class="jxr_string">"fk_pit_attr_def_name_then"</span>, PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L5661" href="#L5661">5661</a>         PITAttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID, PITAttributeDefName.COLUMN_ID);
<a class="jxr_linenumber" name="L5662" href="#L5662">5662</a>     
<a class="jxr_linenumber" name="L5663" href="#L5663">5663</a> 
<a class="jxr_linenumber" name="L5664" href="#L5664">5664</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L5665" href="#L5665">5665</a>         <span class="jxr_string">"fk_pit_attr_action_set_parent"</span>, PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L5666" href="#L5666">5666</a>         PITAttributeAssignActionSet.COLUMN_PARENT_ATTR_ASSN_ACTION_ID, PITAttributeAssignActionSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5667" href="#L5667">5667</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L5668" href="#L5668">5668</a>         <span class="jxr_string">"fk_pit_attr_action_set_if"</span>, PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L5669" href="#L5669">5669</a>         PITAttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID, PITAttributeAssignAction.COLUMN_ID);
<a class="jxr_linenumber" name="L5670" href="#L5670">5670</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET, 
<a class="jxr_linenumber" name="L5671" href="#L5671">5671</a>         <span class="jxr_string">"fk_pit_attr_action_set_then"</span>, PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION, 
<a class="jxr_linenumber" name="L5672" href="#L5672">5672</a>         PITAttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID, PITAttributeAssignAction.COLUMN_ID);
<a class="jxr_linenumber" name="L5673" href="#L5673">5673</a>     
<a class="jxr_linenumber" name="L5674" href="#L5674">5674</a>     
<a class="jxr_linenumber" name="L5675" href="#L5675">5675</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5676" href="#L5676">5676</a>         <span class="jxr_string">"fk_stem_set_parent"</span>, StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5677" href="#L5677">5677</a>         StemSet.COLUMN_PARENT_STEM_SET_ID, StemSet.COLUMN_ID);
<a class="jxr_linenumber" name="L5678" href="#L5678">5678</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5679" href="#L5679">5679</a>         <span class="jxr_string">"fk_stem_set_if"</span>, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5680" href="#L5680">5680</a>         StemSet.COLUMN_IF_HAS_STEM_ID, Stem.COLUMN_ID);
<a class="jxr_linenumber" name="L5681" href="#L5681">5681</a>     GrouperDdlUtils.ddlutilsFindOrCreateForeignKey(database, StemSet.TABLE_GROUPER_STEM_SET, 
<a class="jxr_linenumber" name="L5682" href="#L5682">5682</a>         <span class="jxr_string">"fk_stem_set_then"</span>, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L5683" href="#L5683">5683</a>         StemSet.COLUMN_THEN_HAS_STEM_ID, Stem.COLUMN_ID);
<a class="jxr_linenumber" name="L5684" href="#L5684">5684</a>     
<a class="jxr_linenumber" name="L5685" href="#L5685">5685</a>     
<a class="jxr_linenumber" name="L5686" href="#L5686">5686</a>     <em class="jxr_comment">//now lets add views</em>
<a class="jxr_linenumber" name="L5687" href="#L5687">5687</a>     <strong class="jxr_keyword">if</strong> (buildingAudits) {
<a class="jxr_linenumber" name="L5688" href="#L5688">5688</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_audit_entry_v"</span>,
<a class="jxr_linenumber" name="L5689" href="#L5689">5689</a>           <span class="jxr_string">"Join of audit entry and audit type, and converts member ids to subject ids"</span>,
<a class="jxr_linenumber" name="L5690" href="#L5690">5690</a>           GrouperUtil.toSet(<span class="jxr_string">"created_on"</span>, <span class="jxr_string">"audit_category"</span>, <span class="jxr_string">"action_name"</span>, 
<a class="jxr_linenumber" name="L5691" href="#L5691">5691</a>               <span class="jxr_string">"logged_in_subject_id"</span>,
<a class="jxr_linenumber" name="L5692" href="#L5692">5692</a>               <span class="jxr_string">"act_as_subject_id"</span>,
<a class="jxr_linenumber" name="L5693" href="#L5693">5693</a>               <span class="jxr_string">"label_string01"</span>, <span class="jxr_string">"string01"</span>,
<a class="jxr_linenumber" name="L5694" href="#L5694">5694</a>               <span class="jxr_string">"label_string02"</span>, <span class="jxr_string">"string02"</span>,
<a class="jxr_linenumber" name="L5695" href="#L5695">5695</a>               <span class="jxr_string">"label_string03"</span>, <span class="jxr_string">"string03"</span>,
<a class="jxr_linenumber" name="L5696" href="#L5696">5696</a>               <span class="jxr_string">"label_string04"</span>, <span class="jxr_string">"string04"</span>,
<a class="jxr_linenumber" name="L5697" href="#L5697">5697</a>               <span class="jxr_string">"label_string05"</span>, <span class="jxr_string">"string05"</span>,
<a class="jxr_linenumber" name="L5698" href="#L5698">5698</a>               <span class="jxr_string">"label_string06"</span>, <span class="jxr_string">"string06"</span>,
<a class="jxr_linenumber" name="L5699" href="#L5699">5699</a>               <span class="jxr_string">"label_string07"</span>, <span class="jxr_string">"string07"</span>,
<a class="jxr_linenumber" name="L5700" href="#L5700">5700</a>               <span class="jxr_string">"label_string08"</span>, <span class="jxr_string">"string08"</span>,
<a class="jxr_linenumber" name="L5701" href="#L5701">5701</a>               <span class="jxr_string">"label_int01"</span>, <span class="jxr_string">"int01"</span>,
<a class="jxr_linenumber" name="L5702" href="#L5702">5702</a>               <span class="jxr_string">"label_int02"</span>, <span class="jxr_string">"int02"</span>,
<a class="jxr_linenumber" name="L5703" href="#L5703">5703</a>               <span class="jxr_string">"label_int03"</span>, <span class="jxr_string">"int03"</span>,
<a class="jxr_linenumber" name="L5704" href="#L5704">5704</a>               <span class="jxr_string">"label_int04"</span>, <span class="jxr_string">"int04"</span>,
<a class="jxr_linenumber" name="L5705" href="#L5705">5705</a>               <span class="jxr_string">"label_int05"</span>, <span class="jxr_string">"int05"</span>,
<a class="jxr_linenumber" name="L5706" href="#L5706">5706</a>               <span class="jxr_string">"context_id"</span>, <span class="jxr_string">"grouper_engine"</span>,
<a class="jxr_linenumber" name="L5707" href="#L5707">5707</a>               <span class="jxr_string">"description"</span>, <span class="jxr_string">"logged_in_source_id"</span>, <span class="jxr_string">"act_as_source_id"</span>, 
<a class="jxr_linenumber" name="L5708" href="#L5708">5708</a>               <span class="jxr_string">"logged_in_member_id"</span>, <span class="jxr_string">"act_as_member_id"</span>,
<a class="jxr_linenumber" name="L5709" href="#L5709">5709</a>               <span class="jxr_string">"audit_type_id"</span>,
<a class="jxr_linenumber" name="L5710" href="#L5710">5710</a>               <span class="jxr_string">"user_ip_address"</span>, <span class="jxr_string">"server_host"</span>,
<a class="jxr_linenumber" name="L5711" href="#L5711">5711</a>               <span class="jxr_string">"audit_entry_last_updated"</span>, <span class="jxr_string">"audit_entry_id"</span>, <span class="jxr_string">"grouper_version"</span>, <span class="jxr_string">"env_name"</span>),
<a class="jxr_linenumber" name="L5712" href="#L5712">5712</a>            GrouperUtil.toSet(<span class="jxr_string">"When this audit entry record was created"</span>,
<a class="jxr_linenumber" name="L5713" href="#L5713">5713</a>                <span class="jxr_string">"The category of this audit from grouper_audit_type"</span>,
<a class="jxr_linenumber" name="L5714" href="#L5714">5714</a>                <span class="jxr_string">"The action in this audit category from grouper_audit_type"</span>,
<a class="jxr_linenumber" name="L5715" href="#L5715">5715</a>                <span class="jxr_string">"The subject id of the logged in subject, e.g. from WS or UI"</span>,
<a class="jxr_linenumber" name="L5716" href="#L5716">5716</a>                <span class="jxr_string">"The subject id of the user using the system if they are acting as another user, e.g. from WS"</span>,
<a class="jxr_linenumber" name="L5717" href="#L5717">5717</a>                <span class="jxr_string">"The label of the string field 01 from grouper_audit_type"</span>, <span class="jxr_string">"The string 01 value"</span>,
<a class="jxr_linenumber" name="L5718" href="#L5718">5718</a>                <span class="jxr_string">"The label of the string field 02 from grouper_audit_type"</span>, <span class="jxr_string">"The string 02 value"</span>,
<a class="jxr_linenumber" name="L5719" href="#L5719">5719</a>                <span class="jxr_string">"The label of the string field 03 from grouper_audit_type"</span>, <span class="jxr_string">"The string 03 value"</span>,
<a class="jxr_linenumber" name="L5720" href="#L5720">5720</a>                <span class="jxr_string">"The label of the string field 04 from grouper_audit_type"</span>, <span class="jxr_string">"The string 04 value"</span>,
<a class="jxr_linenumber" name="L5721" href="#L5721">5721</a>                <span class="jxr_string">"The label of the string field 05 from grouper_audit_type"</span>, <span class="jxr_string">"The string 05 value"</span>,
<a class="jxr_linenumber" name="L5722" href="#L5722">5722</a>                <span class="jxr_string">"The label of the string field 06 from grouper_audit_type"</span>, <span class="jxr_string">"The string 06 value"</span>,
<a class="jxr_linenumber" name="L5723" href="#L5723">5723</a>                <span class="jxr_string">"The label of the string field 07 from grouper_audit_type"</span>, <span class="jxr_string">"The string 07 value"</span>,
<a class="jxr_linenumber" name="L5724" href="#L5724">5724</a>                <span class="jxr_string">"The label of the string field 08 from grouper_audit_type"</span>, <span class="jxr_string">"The string 08 value"</span>,
<a class="jxr_linenumber" name="L5725" href="#L5725">5725</a>                <span class="jxr_string">"The label of the int field 01 from grouper_audit_type"</span>, <span class="jxr_string">"The int 01 value"</span>,
<a class="jxr_linenumber" name="L5726" href="#L5726">5726</a>                <span class="jxr_string">"The label of the int field 02 from grouper_audit_type"</span>, <span class="jxr_string">"The int 02 value"</span>,
<a class="jxr_linenumber" name="L5727" href="#L5727">5727</a>                <span class="jxr_string">"The label of the int field 03 from grouper_audit_type"</span>, <span class="jxr_string">"The int 03 value"</span>,
<a class="jxr_linenumber" name="L5728" href="#L5728">5728</a>                <span class="jxr_string">"The label of the int field 04 from grouper_audit_type"</span>, <span class="jxr_string">"The int 04 value"</span>,
<a class="jxr_linenumber" name="L5729" href="#L5729">5729</a>                <span class="jxr_string">"The label of the int field 05 from grouper_audit_type"</span>, <span class="jxr_string">"The int 05 value"</span>,
<a class="jxr_linenumber" name="L5730" href="#L5730">5730</a>                <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>,
<a class="jxr_linenumber" name="L5731" href="#L5731">5731</a>                <span class="jxr_string">"Grouper engine is e.g. UI, WS, GSH, loader, etc"</span>,
<a class="jxr_linenumber" name="L5732" href="#L5732">5732</a>                <span class="jxr_string">"Description is a sentence form expression of what is being audited"</span>,
<a class="jxr_linenumber" name="L5733" href="#L5733">5733</a>                <span class="jxr_string">"Source id of the user who is logged in"</span>,
<a class="jxr_linenumber" name="L5734" href="#L5734">5734</a>                <span class="jxr_string">"Source id of the user who is being acted as (e.g. in WS)"</span>,
<a class="jxr_linenumber" name="L5735" href="#L5735">5735</a>                <span class="jxr_string">"Member id (foreign key) of the user logged in"</span>,
<a class="jxr_linenumber" name="L5736" href="#L5736">5736</a>                <span class="jxr_string">"Member id (foreign key) of the user who is being acted as"</span>,
<a class="jxr_linenumber" name="L5737" href="#L5737">5737</a>                <span class="jxr_string">"ID of the audit type row"</span>,
<a class="jxr_linenumber" name="L5738" href="#L5738">5738</a>                <span class="jxr_string">"IP address of the user connecting to the system (e.g. from UI or WS)"</span>,
<a class="jxr_linenumber" name="L5739" href="#L5739">5739</a>                <span class="jxr_string">"Host of the system running the grouper API"</span>,
<a class="jxr_linenumber" name="L5740" href="#L5740">5740</a>                <span class="jxr_string">"When this audit entry was last updated"</span>, <span class="jxr_string">"ID of this audit entry"</span>, <span class="jxr_string">"Grouper version of the API executing"</span>, 
<a class="jxr_linenumber" name="L5741" href="#L5741">5741</a>                <span class="jxr_string">"environment label of the system running, from grouper.properties"</span>),
<a class="jxr_linenumber" name="L5742" href="#L5742">5742</a>                <span class="jxr_string">"select gae.created_on, gat.audit_category, gat.action_name, "</span>
<a class="jxr_linenumber" name="L5743" href="#L5743">5743</a>                + <span class="jxr_string">"(select gm.subject_id from grouper_members gm where gm.id = gae.logged_in_member_id) as logged_in_subject_id, "</span>
<a class="jxr_linenumber" name="L5744" href="#L5744">5744</a>                + <span class="jxr_string">"(select gm.subject_id from grouper_members gm where gm.id = gae.act_as_member_id) as act_as_subject_id, "</span>
<a class="jxr_linenumber" name="L5745" href="#L5745">5745</a>                + <span class="jxr_string">"gat.label_string01, gae.string01, "</span>
<a class="jxr_linenumber" name="L5746" href="#L5746">5746</a>                + <span class="jxr_string">"gat.label_string02, gae.string02, "</span>
<a class="jxr_linenumber" name="L5747" href="#L5747">5747</a>                + <span class="jxr_string">"gat.label_string03, gae.string03, "</span>
<a class="jxr_linenumber" name="L5748" href="#L5748">5748</a>                + <span class="jxr_string">"gat.label_string04, gae.string04, "</span>
<a class="jxr_linenumber" name="L5749" href="#L5749">5749</a>                + <span class="jxr_string">"gat.label_string05, gae.string05, "</span>
<a class="jxr_linenumber" name="L5750" href="#L5750">5750</a>                + <span class="jxr_string">"gat.label_string06, gae.string06, "</span>
<a class="jxr_linenumber" name="L5751" href="#L5751">5751</a>                + <span class="jxr_string">"gat.label_string07, gae.string07, "</span>
<a class="jxr_linenumber" name="L5752" href="#L5752">5752</a>                + <span class="jxr_string">"gat.label_string08, gae.string08, "</span>
<a class="jxr_linenumber" name="L5753" href="#L5753">5753</a>                + <span class="jxr_string">"gat.label_int01, gae.int01, "</span>
<a class="jxr_linenumber" name="L5754" href="#L5754">5754</a>                + <span class="jxr_string">"gat.label_int02, gae.int02, "</span>
<a class="jxr_linenumber" name="L5755" href="#L5755">5755</a>                + <span class="jxr_string">"gat.label_int03, gae.int03, "</span>
<a class="jxr_linenumber" name="L5756" href="#L5756">5756</a>                + <span class="jxr_string">"gat.label_int04, gae.int04, "</span>
<a class="jxr_linenumber" name="L5757" href="#L5757">5757</a>                + <span class="jxr_string">"gat.label_int05, gae.int05, "</span>
<a class="jxr_linenumber" name="L5758" href="#L5758">5758</a>                + <span class="jxr_string">"gae.context_id, "</span>
<a class="jxr_linenumber" name="L5759" href="#L5759">5759</a>                + <span class="jxr_string">"gae.grouper_engine, "</span>
<a class="jxr_linenumber" name="L5760" href="#L5760">5760</a>                + <span class="jxr_string">"gae.description, "</span>
<a class="jxr_linenumber" name="L5761" href="#L5761">5761</a>                + <span class="jxr_string">"(select gm.subject_source from grouper_members gm where gm.id = gae.logged_in_member_id) as logged_in_source_id, "</span>
<a class="jxr_linenumber" name="L5762" href="#L5762">5762</a>                + <span class="jxr_string">"(select gm.subject_source from grouper_members gm where gm.id = gae.act_as_member_id) as act_as_source_id, "</span>
<a class="jxr_linenumber" name="L5763" href="#L5763">5763</a>                + <span class="jxr_string">"gae.logged_in_member_id, gae.act_as_member_id, "</span>
<a class="jxr_linenumber" name="L5764" href="#L5764">5764</a>                + <span class="jxr_string">"gat.id as audit_type_id, "</span>
<a class="jxr_linenumber" name="L5765" href="#L5765">5765</a>                + <span class="jxr_string">"gae.user_ip_address, gae.server_host, "</span>
<a class="jxr_linenumber" name="L5766" href="#L5766">5766</a>                + <span class="jxr_string">"gae.last_updated, gae.id as audit_entry_id, gae.grouper_version, gae.env_name "</span>
<a class="jxr_linenumber" name="L5767" href="#L5767">5767</a>                + <span class="jxr_string">"from grouper_audit_type gat, grouper_audit_entry gae "</span>
<a class="jxr_linenumber" name="L5768" href="#L5768">5768</a>                + <span class="jxr_string">"where gat.id = gae.audit_type_id "</span>);
<a class="jxr_linenumber" name="L5769" href="#L5769">5769</a>     }
<a class="jxr_linenumber" name="L5770" href="#L5770">5770</a> 
<a class="jxr_linenumber" name="L5771" href="#L5771">5771</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_change_log_entry_v"</span>,
<a class="jxr_linenumber" name="L5772" href="#L5772">5772</a>         <span class="jxr_string">"Join of change log entry and change log type"</span>,
<a class="jxr_linenumber" name="L5773" href="#L5773">5773</a>         GrouperUtil.toSet(<span class="jxr_string">"created_on"</span>, <span class="jxr_string">"change_log_category"</span>, <span class="jxr_string">"action_name"</span>, <span class="jxr_string">"sequence_number"</span>,
<a class="jxr_linenumber" name="L5774" href="#L5774">5774</a>              <span class="jxr_string">"label_string01"</span>, <span class="jxr_string">"string01"</span>, <span class="jxr_string">"label_string02"</span>, <span class="jxr_string">"string02"</span>,
<a class="jxr_linenumber" name="L5775" href="#L5775">5775</a>              <span class="jxr_string">"label_string03"</span>, <span class="jxr_string">"string03"</span>, <span class="jxr_string">"label_string04"</span>, <span class="jxr_string">"string04"</span>,
<a class="jxr_linenumber" name="L5776" href="#L5776">5776</a>              <span class="jxr_string">"label_string05"</span>, <span class="jxr_string">"string05"</span>, <span class="jxr_string">"label_string06"</span>, <span class="jxr_string">"string06"</span>,
<a class="jxr_linenumber" name="L5777" href="#L5777">5777</a>              <span class="jxr_string">"label_string07"</span>, <span class="jxr_string">"string07"</span>, <span class="jxr_string">"label_string08"</span>, <span class="jxr_string">"string08"</span>,
<a class="jxr_linenumber" name="L5778" href="#L5778">5778</a>              <span class="jxr_string">"label_string09"</span>, <span class="jxr_string">"string09"</span>, <span class="jxr_string">"label_string10"</span>, <span class="jxr_string">"string10"</span>,
<a class="jxr_linenumber" name="L5779" href="#L5779">5779</a>              <span class="jxr_string">"label_string11"</span>, <span class="jxr_string">"string11"</span>, <span class="jxr_string">"label_string12"</span>, <span class="jxr_string">"string12"</span>,
<a class="jxr_linenumber" name="L5780" href="#L5780">5780</a>              <span class="jxr_string">"context_id"</span>, <span class="jxr_string">"change_log_type_id"</span>),
<a class="jxr_linenumber" name="L5781" href="#L5781">5781</a>          GrouperUtil.toSet(
<a class="jxr_linenumber" name="L5782" href="#L5782">5782</a>              <span class="jxr_string">"created_on: when this change happened, number of millis since 1970"</span>, 
<a class="jxr_linenumber" name="L5783" href="#L5783">5783</a>              <span class="jxr_string">"change_log_category: category of this change"</span>, 
<a class="jxr_linenumber" name="L5784" href="#L5784">5784</a>              <span class="jxr_string">"action_name: action of this change"</span>, 
<a class="jxr_linenumber" name="L5785" href="#L5785">5785</a>              <span class="jxr_string">"sequence_number: increasing integer of each change"</span>,
<a class="jxr_linenumber" name="L5786" href="#L5786">5786</a>              <span class="jxr_string">"label_string01: label of first string"</span>, 
<a class="jxr_linenumber" name="L5787" href="#L5787">5787</a>              <span class="jxr_string">"string01: value of first string"</span>, 
<a class="jxr_linenumber" name="L5788" href="#L5788">5788</a>              <span class="jxr_string">"label_string02: label of second string"</span>, 
<a class="jxr_linenumber" name="L5789" href="#L5789">5789</a>              <span class="jxr_string">"string02: value of second string"</span>,
<a class="jxr_linenumber" name="L5790" href="#L5790">5790</a>              <span class="jxr_string">"label_string03: label of third string"</span>, 
<a class="jxr_linenumber" name="L5791" href="#L5791">5791</a>              <span class="jxr_string">"string03: value of third string"</span>, 
<a class="jxr_linenumber" name="L5792" href="#L5792">5792</a>              <span class="jxr_string">"label_string04: label of fourth string"</span>, 
<a class="jxr_linenumber" name="L5793" href="#L5793">5793</a>              <span class="jxr_string">"string04: value of fourth string"</span>,
<a class="jxr_linenumber" name="L5794" href="#L5794">5794</a>              <span class="jxr_string">"label_string05: label of fifth string"</span>, 
<a class="jxr_linenumber" name="L5795" href="#L5795">5795</a>              <span class="jxr_string">"string05: value of fifth string"</span>, 
<a class="jxr_linenumber" name="L5796" href="#L5796">5796</a>              <span class="jxr_string">"label_string06: label of sixth string"</span>, 
<a class="jxr_linenumber" name="L5797" href="#L5797">5797</a>              <span class="jxr_string">"string06: value of sixth string"</span>,
<a class="jxr_linenumber" name="L5798" href="#L5798">5798</a>              <span class="jxr_string">"label_string07: label of seventh string"</span>, 
<a class="jxr_linenumber" name="L5799" href="#L5799">5799</a>              <span class="jxr_string">"string07: value of seventh string"</span>, 
<a class="jxr_linenumber" name="L5800" href="#L5800">5800</a>              <span class="jxr_string">"label_string08: label of eighth string"</span>, 
<a class="jxr_linenumber" name="L5801" href="#L5801">5801</a>              <span class="jxr_string">"string08: value of eighth string"</span>,
<a class="jxr_linenumber" name="L5802" href="#L5802">5802</a>              <span class="jxr_string">"label_string09: label of ninth string"</span>, 
<a class="jxr_linenumber" name="L5803" href="#L5803">5803</a>              <span class="jxr_string">"string09: value of ninth string"</span>, 
<a class="jxr_linenumber" name="L5804" href="#L5804">5804</a>              <span class="jxr_string">"label_string10: label of tenth string"</span>, 
<a class="jxr_linenumber" name="L5805" href="#L5805">5805</a>              <span class="jxr_string">"string10: value of tenth string"</span>,
<a class="jxr_linenumber" name="L5806" href="#L5806">5806</a>              <span class="jxr_string">"label_string11: label of eleventh string"</span>, 
<a class="jxr_linenumber" name="L5807" href="#L5807">5807</a>              <span class="jxr_string">"string11: value of eleventh string"</span>, 
<a class="jxr_linenumber" name="L5808" href="#L5808">5808</a>              <span class="jxr_string">"label_string12: label of twelfth string"</span>, 
<a class="jxr_linenumber" name="L5809" href="#L5809">5809</a>              <span class="jxr_string">"string12: value of twelfth string"</span>,
<a class="jxr_linenumber" name="L5810" href="#L5810">5810</a>              <span class="jxr_string">"context_id: links this record with an audit record"</span>, 
<a class="jxr_linenumber" name="L5811" href="#L5811">5811</a>              <span class="jxr_string">"change_log_type_id: id of this category and name"</span>),
<a class="jxr_linenumber" name="L5812" href="#L5812">5812</a>              <span class="jxr_string">"SELECT gcle.created_on, gclt.change_log_category, gclt.action_name, gcle.sequence_number, "</span> +
<a class="jxr_linenumber" name="L5813" href="#L5813">5813</a>              <span class="jxr_string">"       gclt.label_string01, gcle.string01, gclt.label_string02, gcle.string02, "</span> +
<a class="jxr_linenumber" name="L5814" href="#L5814">5814</a>              <span class="jxr_string">"       gclt.label_string03, gcle.string03, gclt.label_string04, gcle.string04, "</span> +
<a class="jxr_linenumber" name="L5815" href="#L5815">5815</a>              <span class="jxr_string">"       gclt.label_string05, gcle.string05, gclt.label_string06, gcle.string06, "</span> +
<a class="jxr_linenumber" name="L5816" href="#L5816">5816</a>              <span class="jxr_string">"       gclt.label_string07, gcle.string07, gclt.label_string08, gcle.string08, "</span> +
<a class="jxr_linenumber" name="L5817" href="#L5817">5817</a>              <span class="jxr_string">"       gclt.label_string09, gcle.string09, gclt.label_string10, gcle.string10, "</span> +
<a class="jxr_linenumber" name="L5818" href="#L5818">5818</a>              <span class="jxr_string">"       gclt.label_string11, gcle.string11, gclt.label_string12, gcle.string12, "</span> +
<a class="jxr_linenumber" name="L5819" href="#L5819">5819</a>              <span class="jxr_string">"       gcle.context_id, gcle.change_log_type_id "</span> +
<a class="jxr_linenumber" name="L5820" href="#L5820">5820</a>              <span class="jxr_string">"  FROM grouper_change_log_type gclt, grouper_change_log_entry gcle "</span> +
<a class="jxr_linenumber" name="L5821" href="#L5821">5821</a>              <span class="jxr_string">" WHERE gclt.id = gcle.change_log_type_id"</span>);
<a class="jxr_linenumber" name="L5822" href="#L5822">5822</a> 
<a class="jxr_linenumber" name="L5823" href="#L5823">5823</a> 
<a class="jxr_linenumber" name="L5824" href="#L5824">5824</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_composites_v"</span>, 
<a class="jxr_linenumber" name="L5825" href="#L5825">5825</a>         <span class="jxr_string">"Grouper_composites_v is a view of composite relationships with friendly names.  A composite"</span> +
<a class="jxr_linenumber" name="L5826" href="#L5826">5826</a>         <span class="jxr_string">" is a joining of two groups with a group math operator of: union, intersection, or complement."</span>,
<a class="jxr_linenumber" name="L5827" href="#L5827">5827</a>         GrouperUtil.toSet(<span class="jxr_string">"OWNER_GROUP_NAME"</span>, 
<a class="jxr_linenumber" name="L5828" href="#L5828">5828</a>             <span class="jxr_string">"COMPOSITE_TYPE"</span>, 
<a class="jxr_linenumber" name="L5829" href="#L5829">5829</a>             <span class="jxr_string">"LEFT_FACTOR_GROUP_NAME"</span>, 
<a class="jxr_linenumber" name="L5830" href="#L5830">5830</a>             <span class="jxr_string">"RIGHT_FACTOR_GROUP_NAME"</span>, 
<a class="jxr_linenumber" name="L5831" href="#L5831">5831</a>             <span class="jxr_string">"OWNER_GROUP_DISPLAYNAME"</span>,
<a class="jxr_linenumber" name="L5832" href="#L5832">5832</a>             <span class="jxr_string">"LEFT_FACTOR_GROUP_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L5833" href="#L5833">5833</a>             <span class="jxr_string">"RIGHT_FACTOR_GROUP_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L5834" href="#L5834">5834</a>             Membership.COLUMN_OWNER_GROUP_ID, 
<a class="jxr_linenumber" name="L5835" href="#L5835">5835</a>             <span class="jxr_string">"LEFT_FACTOR_GROUP_ID"</span>, 
<a class="jxr_linenumber" name="L5836" href="#L5836">5836</a>             <span class="jxr_string">"RIGHT_FACTOR_GROUP_ID"</span>,
<a class="jxr_linenumber" name="L5837" href="#L5837">5837</a>             <span class="jxr_string">"COMPOSITE_ID"</span>, 
<a class="jxr_linenumber" name="L5838" href="#L5838">5838</a>             <span class="jxr_string">"CREATE_TIME"</span>, 
<a class="jxr_linenumber" name="L5839" href="#L5839">5839</a>             <span class="jxr_string">"CREATOR_ID"</span>, 
<a class="jxr_linenumber" name="L5840" href="#L5840">5840</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER"</span>,
<a class="jxr_linenumber" name="L5841" href="#L5841">5841</a>             <span class="jxr_string">"CONTEXT_ID"</span>),
<a class="jxr_linenumber" name="L5842" href="#L5842">5842</a>         GrouperUtil.toSet(<span class="jxr_string">"OWNER_GROUP_NAME: Name of the group which is the result of the composite operation, e.g. school:stem1:allPeople"</span>,
<a class="jxr_linenumber" name="L5843" href="#L5843">5843</a>             <span class="jxr_string">"COMPOSITE_TYPE: union (all members), intersection (only members in both), or complement (in first, not in second)"</span>, 
<a class="jxr_linenumber" name="L5844" href="#L5844">5844</a>             <span class="jxr_string">"LEFT_FACTOR_GROUP_NAME: Name of group which is the first of two groups in the composite operation, e.g. school:stem1:part1"</span>, 
<a class="jxr_linenumber" name="L5845" href="#L5845">5845</a>             <span class="jxr_string">"RIGHT_FACTOR_GROUP_NAME: Name of group which is the second of two groups in the composite operation, e.g. school:stem1:part2"</span>, 
<a class="jxr_linenumber" name="L5846" href="#L5846">5846</a>             <span class="jxr_string">"OWNER_GROUP_DISPLAYNAME: Display name of result group of composite operation, e.g. My school:The stem1:All people"</span>,
<a class="jxr_linenumber" name="L5847" href="#L5847">5847</a>             <span class="jxr_string">"LEFT_FACTOR_GROUP_DISPLAYNAME: Display name of group which is the first of two groups in the composite operation, e.g. My school:The stem1:Part 1"</span>, 
<a class="jxr_linenumber" name="L5848" href="#L5848">5848</a>             <span class="jxr_string">"RIGHT_FACTOR_GROUP_DISPLAYNAME: Display name of group which is the second of two groups in the composite operation, e.g. My school:The stem1:Part 1"</span>, 
<a class="jxr_linenumber" name="L5849" href="#L5849">5849</a>             <span class="jxr_string">"OWNER_GROUP_ID: UUID of the result group"</span>, 
<a class="jxr_linenumber" name="L5850" href="#L5850">5850</a>             <span class="jxr_string">"LEFT_FACTOR_GROUP_ID: UUID of the first group of the composite operation"</span>, 
<a class="jxr_linenumber" name="L5851" href="#L5851">5851</a>             <span class="jxr_string">"RIGHT_FACTOR_GROUP_ID: UUID of the second group of the composite operation"</span>,
<a class="jxr_linenumber" name="L5852" href="#L5852">5852</a>             <span class="jxr_string">"COMPOSITE_ID: UUID of the composite relationship among the three groups"</span>, 
<a class="jxr_linenumber" name="L5853" href="#L5853">5853</a>             <span class="jxr_string">"CREATE_TIME: number of millis since 1970 that the composite was created"</span>, 
<a class="jxr_linenumber" name="L5854" href="#L5854">5854</a>             <span class="jxr_string">"CREATOR_ID: member id of the subject that created the composite relationship"</span>, 
<a class="jxr_linenumber" name="L5855" href="#L5855">5855</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER: increments with each update, starts at 0"</span>,
<a class="jxr_linenumber" name="L5856" href="#L5856">5856</a>             <span class="jxr_string">"CONTEXT_ID: Context id links together multiple operations into one high level action"</span>
<a class="jxr_linenumber" name="L5857" href="#L5857">5857</a>         ),
<a class="jxr_linenumber" name="L5858" href="#L5858">5858</a>         <span class="jxr_string">"select  "</span>
<a class="jxr_linenumber" name="L5859" href="#L5859">5859</a>         + <span class="jxr_string">"(select gg.name from grouper_groups gg  "</span>
<a class="jxr_linenumber" name="L5860" href="#L5860">5860</a>         + <span class="jxr_string">"where gg.id = gc.owner) as owner_group_name,  "</span>
<a class="jxr_linenumber" name="L5861" href="#L5861">5861</a>         + <span class="jxr_string">"gc.TYPE as composite_type,  "</span>
<a class="jxr_linenumber" name="L5862" href="#L5862">5862</a>         + <span class="jxr_string">"(select gg.name from grouper_groups gg  "</span>
<a class="jxr_linenumber" name="L5863" href="#L5863">5863</a>         + <span class="jxr_string">"where gg.id =  gc.left_factor) as left_factor_group_name,  "</span>
<a class="jxr_linenumber" name="L5864" href="#L5864">5864</a>         + <span class="jxr_string">"(select gg.name from grouper_groups gg  "</span>
<a class="jxr_linenumber" name="L5865" href="#L5865">5865</a>         + <span class="jxr_string">"where gg.id = gc.right_factor) as right_factor_group_name,  "</span>
<a class="jxr_linenumber" name="L5866" href="#L5866">5866</a>         + <span class="jxr_string">"(select gg.display_name from grouper_groups gg  "</span>
<a class="jxr_linenumber" name="L5867" href="#L5867">5867</a>         + <span class="jxr_string">"where gg.id = gc.owner) as owner_group_displayname,  "</span>
<a class="jxr_linenumber" name="L5868" href="#L5868">5868</a>         + <span class="jxr_string">"(select gg.display_name from grouper_groups gg  "</span>
<a class="jxr_linenumber" name="L5869" href="#L5869">5869</a>         + <span class="jxr_string">"where gg.id = gc.left_factor) as left_factor_group_displayname,  "</span>
<a class="jxr_linenumber" name="L5870" href="#L5870">5870</a>         + <span class="jxr_string">"(select gg.display_name from grouper_groups gg  "</span>
<a class="jxr_linenumber" name="L5871" href="#L5871">5871</a>         + <span class="jxr_string">"where gg.id = gc.right_factor) as right_factor_group_displayname,  "</span>
<a class="jxr_linenumber" name="L5872" href="#L5872">5872</a>         + <span class="jxr_string">"gc.OWNER as owner_group_id,  "</span>
<a class="jxr_linenumber" name="L5873" href="#L5873">5873</a>         + <span class="jxr_string">"gc.LEFT_FACTOR as left_factor_group_id,  "</span>
<a class="jxr_linenumber" name="L5874" href="#L5874">5874</a>         + <span class="jxr_string">"gc.RIGHT_FACTOR as right_factor_group_id,  "</span>
<a class="jxr_linenumber" name="L5875" href="#L5875">5875</a>         + <span class="jxr_string">"gc.ID as composite_id,  "</span>
<a class="jxr_linenumber" name="L5876" href="#L5876">5876</a>         + <span class="jxr_string">"gc.CREATE_TIME,  "</span>
<a class="jxr_linenumber" name="L5877" href="#L5877">5877</a>         + <span class="jxr_string">"gc.CREATOR_ID,  "</span>
<a class="jxr_linenumber" name="L5878" href="#L5878">5878</a>         + <span class="jxr_string">"gc.HIBERNATE_VERSION_NUMBER, gc.context_id "</span>
<a class="jxr_linenumber" name="L5879" href="#L5879">5879</a>         + <span class="jxr_string">"from grouper_composites gc  "</span>
<a class="jxr_linenumber" name="L5880" href="#L5880">5880</a>       );
<a class="jxr_linenumber" name="L5881" href="#L5881">5881</a> 
<a class="jxr_linenumber" name="L5882" href="#L5882">5882</a>     {
<a class="jxr_linenumber" name="L5883" href="#L5883">5883</a>       <em class="jxr_comment">//you can turn this off in the config if it doesnt compile or whatnot</em>
<a class="jxr_linenumber" name="L5884" href="#L5884">5884</a>       <strong class="jxr_keyword">if</strong> (GrouperConfig.retrieveConfig().propertyValueBoolean(<span class="jxr_string">"externalSubjects.createView"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L5885" href="#L5885">5885</a> 
<a class="jxr_linenumber" name="L5886" href="#L5886">5886</a>         Set&lt;String&gt; columnNames = GrouperUtil.toSet(<span class="jxr_string">"uuid"</span>, <span class="jxr_string">"name"</span>, 
<a class="jxr_linenumber" name="L5887" href="#L5887">5887</a>             <span class="jxr_string">"identifier"</span>, <span class="jxr_string">"description"</span>);
<a class="jxr_linenumber" name="L5888" href="#L5888">5888</a> 
<a class="jxr_linenumber" name="L5889" href="#L5889">5889</a>         Set&lt;String&gt; columnComments = GrouperUtil.toSet(
<a class="jxr_linenumber" name="L5890" href="#L5890">5890</a>             <span class="jxr_string">"uuid: universally unique id of subject"</span>, 
<a class="jxr_linenumber" name="L5891" href="#L5891">5891</a>             <span class="jxr_string">"name: name field of the subject object"</span>, 
<a class="jxr_linenumber" name="L5892" href="#L5892">5892</a>             <span class="jxr_string">"identifier: identifier of subject, e.g. the eppn"</span>, 
<a class="jxr_linenumber" name="L5893" href="#L5893">5893</a>             <span class="jxr_string">"description: description field of the subject object"</span>);
<a class="jxr_linenumber" name="L5894" href="#L5894">5894</a>         
<a class="jxr_linenumber" name="L5895" href="#L5895">5895</a>         <a href="../../../../../edu/internet2/middleware/grouper/externalSubjects/ExternalSubjectConfig.html">ExternalSubjectConfigBean</a> externalSubjectConfigBean = ExternalSubjectConfig.externalSubjectConfigBean();
<a class="jxr_linenumber" name="L5896" href="#L5896">5896</a> 
<a class="jxr_linenumber" name="L5897" href="#L5897">5897</a>         StringBuilder query = <strong class="jxr_keyword">new</strong> StringBuilder();
<a class="jxr_linenumber" name="L5898" href="#L5898">5898</a> 
<a class="jxr_linenumber" name="L5899" href="#L5899">5899</a>         <em class="jxr_comment">//    SELECT ges.uuid, ges.name, ges.identifier, ges.description,</em>
<a class="jxr_linenumber" name="L5900" href="#L5900">5900</a>         <em class="jxr_comment">//    ges.institution, ges.email, ges.search_string_lower, </em>
<a class="jxr_linenumber" name="L5901" href="#L5901">5901</a>         <em class="jxr_comment">//    (SELECT gesa.attribute_value FROM grouper_ext_subj_attr gesa </em>
<a class="jxr_linenumber" name="L5902" href="#L5902">5902</a>         <em class="jxr_comment">//    WHERE gesa.subject_uuid = ges.uuid AND gesa.attribute_system_name = 'jabber_id' ) AS jabber_id</em>
<a class="jxr_linenumber" name="L5903" href="#L5903">5903</a>         <em class="jxr_comment">//    FROM grouper_ext_subj ges</em>
<a class="jxr_linenumber" name="L5904" href="#L5904">5904</a>         <em class="jxr_comment">//    WHERE ges.enabled = 'T'</em>
<a class="jxr_linenumber" name="L5905" href="#L5905">5905</a> 
<a class="jxr_linenumber" name="L5906" href="#L5906">5906</a>         query.append(<span class="jxr_string">"SELECT ges.uuid, ges.name, ges.identifier, ges.description "</span>);
<a class="jxr_linenumber" name="L5907" href="#L5907">5907</a> 
<a class="jxr_linenumber" name="L5908" href="#L5908">5908</a>         <strong class="jxr_keyword">if</strong> (externalSubjectConfigBean.isInstitutionEnabled()) {
<a class="jxr_linenumber" name="L5909" href="#L5909">5909</a>           columnNames.add(<span class="jxr_string">"institution"</span>);
<a class="jxr_linenumber" name="L5910" href="#L5910">5910</a>           columnComments.add(<span class="jxr_string">"institution: where the subject comes from"</span>);
<a class="jxr_linenumber" name="L5911" href="#L5911">5911</a>           query.append(<span class="jxr_string">", ges.institution "</span>);
<a class="jxr_linenumber" name="L5912" href="#L5912">5912</a>         }
<a class="jxr_linenumber" name="L5913" href="#L5913">5913</a>         
<a class="jxr_linenumber" name="L5914" href="#L5914">5914</a>         <strong class="jxr_keyword">if</strong> (externalSubjectConfigBean.isEmailEnabled()) {
<a class="jxr_linenumber" name="L5915" href="#L5915">5915</a>           columnNames.add(<span class="jxr_string">"email"</span>);
<a class="jxr_linenumber" name="L5916" href="#L5916">5916</a>           columnComments.add(<span class="jxr_string">"email: email address of the subject"</span>);
<a class="jxr_linenumber" name="L5917" href="#L5917">5917</a>           query.append(<span class="jxr_string">", ges.email "</span>);
<a class="jxr_linenumber" name="L5918" href="#L5918">5918</a>         }
<a class="jxr_linenumber" name="L5919" href="#L5919">5919</a>         columnNames.add(<span class="jxr_string">"search_string_lower"</span>);
<a class="jxr_linenumber" name="L5920" href="#L5920">5920</a>         columnComments.add(<span class="jxr_string">"search_string_lower: lower case list of strings that the search will return results for subject"</span>);
<a class="jxr_linenumber" name="L5921" href="#L5921">5921</a>         query.append(<span class="jxr_string">", ges.search_string_lower "</span>);
<a class="jxr_linenumber" name="L5922" href="#L5922">5922</a>         
<a class="jxr_linenumber" name="L5923" href="#L5923">5923</a>         <strong class="jxr_keyword">for</strong> (ExternalSubjectAttributeConfigBean externalSubjectAttributeConfigBean : 
<a class="jxr_linenumber" name="L5924" href="#L5924">5924</a>           GrouperUtil.nonNull(externalSubjectConfigBean.getExternalSubjectAttributeConfigBeans())) {
<a class="jxr_linenumber" name="L5925" href="#L5925">5925</a>           
<a class="jxr_linenumber" name="L5926" href="#L5926">5926</a>           String systemName = externalSubjectAttributeConfigBean.getSystemName();
<a class="jxr_linenumber" name="L5927" href="#L5927">5927</a>           columnNames.add(systemName);
<a class="jxr_linenumber" name="L5928" href="#L5928">5928</a> 
<a class="jxr_linenumber" name="L5929" href="#L5929">5929</a>           String comment = StringUtils.defaultString(externalSubjectAttributeConfigBean.getComment(), 
<a class="jxr_linenumber" name="L5930" href="#L5930">5930</a>               systemName);
<a class="jxr_linenumber" name="L5931" href="#L5931">5931</a>           
<a class="jxr_linenumber" name="L5932" href="#L5932">5932</a>           columnComments.add(comment);
<a class="jxr_linenumber" name="L5933" href="#L5933">5933</a>           
<a class="jxr_linenumber" name="L5934" href="#L5934">5934</a>           query.append(<span class="jxr_string">", (SELECT gesa.attribute_value FROM grouper_ext_subj_attr gesa WHERE gesa.subject_uuid = ges.uuid AND gesa.attribute_system_name = '"</span> + systemName + <span class="jxr_string">"' ) AS "</span> + systemName);
<a class="jxr_linenumber" name="L5935" href="#L5935">5935</a>           
<a class="jxr_linenumber" name="L5936" href="#L5936">5936</a>         }
<a class="jxr_linenumber" name="L5937" href="#L5937">5937</a>         
<a class="jxr_linenumber" name="L5938" href="#L5938">5938</a>         query.append(<span class="jxr_string">" FROM grouper_ext_subj ges WHERE ges.enabled = 'T'"</span>);
<a class="jxr_linenumber" name="L5939" href="#L5939">5939</a> 
<a class="jxr_linenumber" name="L5940" href="#L5940">5940</a>         <em class="jxr_comment">//the grouper_ext_subj_v is dynamic based on which subject attributes we are supporting</em>
<a class="jxr_linenumber" name="L5941" href="#L5941">5941</a>         GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_ext_subj_v"</span>, 
<a class="jxr_linenumber" name="L5942" href="#L5942">5942</a>             <span class="jxr_string">"grouper_ext_subj_v is a view of external subjects, and they attributes"</span>,
<a class="jxr_linenumber" name="L5943" href="#L5943">5943</a>             columnNames,
<a class="jxr_linenumber" name="L5944" href="#L5944">5944</a>             columnComments,
<a class="jxr_linenumber" name="L5945" href="#L5945">5945</a>             query.toString()
<a class="jxr_linenumber" name="L5946" href="#L5946">5946</a>           );
<a class="jxr_linenumber" name="L5947" href="#L5947">5947</a>         
<a class="jxr_linenumber" name="L5948" href="#L5948">5948</a>       }
<a class="jxr_linenumber" name="L5949" href="#L5949">5949</a> 
<a class="jxr_linenumber" name="L5950" href="#L5950">5950</a>     }
<a class="jxr_linenumber" name="L5951" href="#L5951">5951</a>     
<a class="jxr_linenumber" name="L5952" href="#L5952">5952</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_groups_v"</span>, 
<a class="jxr_linenumber" name="L5953" href="#L5953">5953</a>         <span class="jxr_string">"Contains one record for each group, with friendly names for some attributes and some more information"</span>,
<a class="jxr_linenumber" name="L5954" href="#L5954">5954</a>         GrouperUtil.toSet(<span class="jxr_string">"EXTENSION"</span>, 
<a class="jxr_linenumber" name="L5955" href="#L5955">5955</a>             <span class="jxr_string">"NAME"</span>, 
<a class="jxr_linenumber" name="L5956" href="#L5956">5956</a>             <span class="jxr_string">"DISPLAY_EXTENSION"</span>, 
<a class="jxr_linenumber" name="L5957" href="#L5957">5957</a>             <span class="jxr_string">"DISPLAY_NAME"</span>, 
<a class="jxr_linenumber" name="L5958" href="#L5958">5958</a>             <span class="jxr_string">"DESCRIPTION"</span>, 
<a class="jxr_linenumber" name="L5959" href="#L5959">5959</a>             <span class="jxr_string">"PARENT_STEM_NAME"</span>, 
<a class="jxr_linenumber" name="L5960" href="#L5960">5960</a>             <span class="jxr_string">"TYPE_OF_GROUP"</span>, 
<a class="jxr_linenumber" name="L5961" href="#L5961">5961</a>             <span class="jxr_string">"GROUP_ID"</span>, 
<a class="jxr_linenumber" name="L5962" href="#L5962">5962</a>             <span class="jxr_string">"PARENT_STEM_ID"</span>, 
<a class="jxr_linenumber" name="L5963" href="#L5963">5963</a>             <span class="jxr_string">"MODIFIER_SOURCE"</span>, 
<a class="jxr_linenumber" name="L5964" href="#L5964">5964</a>             <span class="jxr_string">"MODIFIER_SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L5965" href="#L5965">5965</a>             <span class="jxr_string">"CREATOR_SOURCE"</span>, 
<a class="jxr_linenumber" name="L5966" href="#L5966">5966</a>             <span class="jxr_string">"CREATOR_SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L5967" href="#L5967">5967</a>             <span class="jxr_string">"IS_COMPOSITE_OWNER"</span>, 
<a class="jxr_linenumber" name="L5968" href="#L5968">5968</a>             <span class="jxr_string">"IS_COMPOSITE_FACTOR"</span>, 
<a class="jxr_linenumber" name="L5969" href="#L5969">5969</a>             <span class="jxr_string">"CREATOR_ID"</span>, 
<a class="jxr_linenumber" name="L5970" href="#L5970">5970</a>             <span class="jxr_string">"CREATE_TIME"</span>, 
<a class="jxr_linenumber" name="L5971" href="#L5971">5971</a>             <span class="jxr_string">"MODIFIER_ID"</span>, 
<a class="jxr_linenumber" name="L5972" href="#L5972">5972</a>             <span class="jxr_string">"MODIFY_TIME"</span>, 
<a class="jxr_linenumber" name="L5973" href="#L5973">5973</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER"</span>, <span class="jxr_string">"CONTEXT_ID"</span>),
<a class="jxr_linenumber" name="L5974" href="#L5974">5974</a>         GrouperUtil.toSet(<span class="jxr_string">"EXTENSION: part of group name not including path information, e.g. theGroup"</span>, 
<a class="jxr_linenumber" name="L5975" href="#L5975">5975</a>             <span class="jxr_string">"NAME: name of the group, e.g. school:stem1:theGroup"</span>, 
<a class="jxr_linenumber" name="L5976" href="#L5976">5976</a>             <span class="jxr_string">"DISPLAY_EXTENSION: name for display of the group, e.g. My school:The stem 1:The group"</span>, 
<a class="jxr_linenumber" name="L5977" href="#L5977">5977</a>             <span class="jxr_string">"DISPLAY_NAME: name for display of the group without any path information, e.g. The group"</span>, 
<a class="jxr_linenumber" name="L5978" href="#L5978">5978</a>             <span class="jxr_string">"DESCRIPTION: contains user entered information about the group e.g. why it exists"</span>, 
<a class="jxr_linenumber" name="L5979" href="#L5979">5979</a>             <span class="jxr_string">"PARENT_STEM_NAME: name of the stem this group is in, e.g. school:stem1"</span>, 
<a class="jxr_linenumber" name="L5980" href="#L5980">5980</a>             <span class="jxr_string">"TYPE_OF_GROUP: group if it is a group, role if it is a role"</span>, 
<a class="jxr_linenumber" name="L5981" href="#L5981">5981</a>             <span class="jxr_string">"GROUP_ID: uuid unique id of the group"</span>, 
<a class="jxr_linenumber" name="L5982" href="#L5982">5982</a>             <span class="jxr_string">"PARENT_STEM_ID: uuid unique id of the stem this group is in"</span>, 
<a class="jxr_linenumber" name="L5983" href="#L5983">5983</a>             <span class="jxr_string">"MODIFIER_SOURCE: source name of the subject who last modified this group, e.g. schoolPersonSource"</span>, 
<a class="jxr_linenumber" name="L5984" href="#L5984">5984</a>             <span class="jxr_string">"MODIFIER_SUBJECT_ID: subject id of the subject who last modified this group, e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L5985" href="#L5985">5985</a>             <span class="jxr_string">"CREATOR_SOURCE: source name of the subject who created this group, e.g. schoolPersonSource"</span>, 
<a class="jxr_linenumber" name="L5986" href="#L5986">5986</a>             <span class="jxr_string">"CREATOR_SUBJECT_ID: subject id of the subject who created this group, e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L5987" href="#L5987">5987</a>             <span class="jxr_string">"IS_COMPOSITE_OWNER: T if this is a result of a composite operation (union, intersection, complement), or blank if not"</span>, 
<a class="jxr_linenumber" name="L5988" href="#L5988">5988</a>             <span class="jxr_string">"IS_COMPOSITE_FACTOR: T if this is a member of a composite operation, e.g. one of the grouper being unioned, intersected, or complemeneted"</span>, 
<a class="jxr_linenumber" name="L5989" href="#L5989">5989</a>             <span class="jxr_string">"CREATOR_ID: member id of the subject who created this group, foreign key to grouper_members"</span>, 
<a class="jxr_linenumber" name="L5990" href="#L5990">5990</a>             <span class="jxr_string">"CREATE_TIME: number of millis since 1970 since this group was created"</span>, 
<a class="jxr_linenumber" name="L5991" href="#L5991">5991</a>             <span class="jxr_string">"MODIFIER_ID: member id of the subject who last modified this group, foreign key to grouper_members"</span>, 
<a class="jxr_linenumber" name="L5992" href="#L5992">5992</a>             <span class="jxr_string">"MODIFY_TIME: number of millis since 1970 since this group was last changed"</span>, 
<a class="jxr_linenumber" name="L5993" href="#L5993">5993</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER: increments by 1 for each update"</span>,
<a class="jxr_linenumber" name="L5994" href="#L5994">5994</a>             <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>),
<a class="jxr_linenumber" name="L5995" href="#L5995">5995</a>             <span class="jxr_string">"select  "</span>
<a class="jxr_linenumber" name="L5996" href="#L5996">5996</a>             + <span class="jxr_string">"gg.extension as extension, "</span>
<a class="jxr_linenumber" name="L5997" href="#L5997">5997</a>             + <span class="jxr_string">"gg.name as name, "</span>
<a class="jxr_linenumber" name="L5998" href="#L5998">5998</a>             + <span class="jxr_string">"gg.display_extension as display_extension, "</span>
<a class="jxr_linenumber" name="L5999" href="#L5999">5999</a>             + <span class="jxr_string">"gg.display_name as display_name, "</span>
<a class="jxr_linenumber" name="L6000" href="#L6000">6000</a>             + <span class="jxr_string">"gg.description as description, "</span>
<a class="jxr_linenumber" name="L6001" href="#L6001">6001</a>             + <span class="jxr_string">"gs.NAME as parent_stem_name, "</span>
<a class="jxr_linenumber" name="L6002" href="#L6002">6002</a>             + <span class="jxr_string">"gg.type_of_group, "</span>
<a class="jxr_linenumber" name="L6003" href="#L6003">6003</a>             + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L6004" href="#L6004">6004</a>             + <span class="jxr_string">"gs.ID as parent_stem_id, "</span>
<a class="jxr_linenumber" name="L6005" href="#L6005">6005</a>             + <span class="jxr_string">"(select gm.SUBJECT_SOURCE from grouper_members gm where gm.ID = gg.MODIFIER_ID) as modifier_source, "</span>
<a class="jxr_linenumber" name="L6006" href="#L6006">6006</a>             + <span class="jxr_string">"(select gm.SUBJECT_ID from grouper_members gm where gm.ID = gg.MODIFIER_ID) as modifier_subject_id, "</span>
<a class="jxr_linenumber" name="L6007" href="#L6007">6007</a>             + <span class="jxr_string">"(select gm.SUBJECT_SOURCE from grouper_members gm where gm.ID = gg.CREATOR_ID) as creator_source, "</span>
<a class="jxr_linenumber" name="L6008" href="#L6008">6008</a>             + <span class="jxr_string">"(select gm.SUBJECT_ID from grouper_members gm where gm.ID = gg.CREATOR_ID) as creator_subject_id, "</span>
<a class="jxr_linenumber" name="L6009" href="#L6009">6009</a>             + <span class="jxr_string">"(select distinct 'T' from grouper_composites gc where gc.OWNER = gg.ID) as is_composite_owner, "</span>
<a class="jxr_linenumber" name="L6010" href="#L6010">6010</a>             + <span class="jxr_string">"(select distinct 'T' from grouper_composites gc where gc.LEFT_FACTOR = gg.ID or gc.right_factor = gg.id) as is_composite_factor, "</span>
<a class="jxr_linenumber" name="L6011" href="#L6011">6011</a>             + <span class="jxr_string">"gg.CREATOR_ID, "</span>
<a class="jxr_linenumber" name="L6012" href="#L6012">6012</a>             + <span class="jxr_string">"gg.CREATE_TIME, "</span>
<a class="jxr_linenumber" name="L6013" href="#L6013">6013</a>             + <span class="jxr_string">"gg.MODIFIER_ID, "</span>
<a class="jxr_linenumber" name="L6014" href="#L6014">6014</a>             + <span class="jxr_string">"gg.MODIFY_TIME, "</span>
<a class="jxr_linenumber" name="L6015" href="#L6015">6015</a>             + <span class="jxr_string">"gg.HIBERNATE_VERSION_NUMBER, gg.context_id  "</span>
<a class="jxr_linenumber" name="L6016" href="#L6016">6016</a>             + <span class="jxr_string">" from grouper_groups gg, grouper_stems gs where gg.PARENT_STEM = gs.ID "</span>);
<a class="jxr_linenumber" name="L6017" href="#L6017">6017</a> 
<a class="jxr_linenumber" name="L6018" href="#L6018">6018</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_roles_v"</span>, 
<a class="jxr_linenumber" name="L6019" href="#L6019">6019</a>         <span class="jxr_string">"Contains one record for each role, with friendly names for some attributes and some more information"</span>,
<a class="jxr_linenumber" name="L6020" href="#L6020">6020</a>         GrouperUtil.toSet(<span class="jxr_string">"EXTENSION"</span>, 
<a class="jxr_linenumber" name="L6021" href="#L6021">6021</a>             <span class="jxr_string">"NAME"</span>, 
<a class="jxr_linenumber" name="L6022" href="#L6022">6022</a>             <span class="jxr_string">"DISPLAY_EXTENSION"</span>, 
<a class="jxr_linenumber" name="L6023" href="#L6023">6023</a>             <span class="jxr_string">"DISPLAY_NAME"</span>, 
<a class="jxr_linenumber" name="L6024" href="#L6024">6024</a>             <span class="jxr_string">"DESCRIPTION"</span>, 
<a class="jxr_linenumber" name="L6025" href="#L6025">6025</a>             <span class="jxr_string">"PARENT_STEM_NAME"</span>, 
<a class="jxr_linenumber" name="L6026" href="#L6026">6026</a>             <span class="jxr_string">"ROLE_ID"</span>, 
<a class="jxr_linenumber" name="L6027" href="#L6027">6027</a>             <span class="jxr_string">"PARENT_STEM_ID"</span>, 
<a class="jxr_linenumber" name="L6028" href="#L6028">6028</a>             <span class="jxr_string">"MODIFIER_SOURCE"</span>, 
<a class="jxr_linenumber" name="L6029" href="#L6029">6029</a>             <span class="jxr_string">"MODIFIER_SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L6030" href="#L6030">6030</a>             <span class="jxr_string">"CREATOR_SOURCE"</span>, 
<a class="jxr_linenumber" name="L6031" href="#L6031">6031</a>             <span class="jxr_string">"CREATOR_SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L6032" href="#L6032">6032</a>             <span class="jxr_string">"IS_COMPOSITE_OWNER"</span>, 
<a class="jxr_linenumber" name="L6033" href="#L6033">6033</a>             <span class="jxr_string">"IS_COMPOSITE_FACTOR"</span>, 
<a class="jxr_linenumber" name="L6034" href="#L6034">6034</a>             <span class="jxr_string">"CREATOR_ID"</span>, 
<a class="jxr_linenumber" name="L6035" href="#L6035">6035</a>             <span class="jxr_string">"CREATE_TIME"</span>, 
<a class="jxr_linenumber" name="L6036" href="#L6036">6036</a>             <span class="jxr_string">"MODIFIER_ID"</span>, 
<a class="jxr_linenumber" name="L6037" href="#L6037">6037</a>             <span class="jxr_string">"MODIFY_TIME"</span>, 
<a class="jxr_linenumber" name="L6038" href="#L6038">6038</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER"</span>, <span class="jxr_string">"CONTEXT_ID"</span>),
<a class="jxr_linenumber" name="L6039" href="#L6039">6039</a>         GrouperUtil.toSet(<span class="jxr_string">"EXTENSION: part of role name not including path information, e.g. theRole"</span>, 
<a class="jxr_linenumber" name="L6040" href="#L6040">6040</a>             <span class="jxr_string">"NAME: name of the role, e.g. school:stem1:theRole"</span>, 
<a class="jxr_linenumber" name="L6041" href="#L6041">6041</a>             <span class="jxr_string">"DISPLAY_EXTENSION: name for display of the role, e.g. My school:The stem 1:The role"</span>, 
<a class="jxr_linenumber" name="L6042" href="#L6042">6042</a>             <span class="jxr_string">"DISPLAY_NAME: name for display of the role without any path information, e.g. The role"</span>, 
<a class="jxr_linenumber" name="L6043" href="#L6043">6043</a>             <span class="jxr_string">"DESCRIPTION: contains user entered information about the group e.g. why it exists"</span>, 
<a class="jxr_linenumber" name="L6044" href="#L6044">6044</a>             <span class="jxr_string">"PARENT_STEM_NAME: name of the stem this role is in, e.g. school:stem1"</span>, 
<a class="jxr_linenumber" name="L6045" href="#L6045">6045</a>             <span class="jxr_string">"ROLE_ID: uuid unique id of the role"</span>, 
<a class="jxr_linenumber" name="L6046" href="#L6046">6046</a>             <span class="jxr_string">"PARENT_STEM_ID: uuid unique id of the stem this role is in"</span>, 
<a class="jxr_linenumber" name="L6047" href="#L6047">6047</a>             <span class="jxr_string">"MODIFIER_SOURCE: source name of the subject who last modified this role, e.g. schoolPersonSource"</span>, 
<a class="jxr_linenumber" name="L6048" href="#L6048">6048</a>             <span class="jxr_string">"MODIFIER_SUBJECT_ID: subject id of the subject who last modified this role, e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L6049" href="#L6049">6049</a>             <span class="jxr_string">"CREATOR_SOURCE: source name of the subject who created this role, e.g. schoolPersonSource"</span>, 
<a class="jxr_linenumber" name="L6050" href="#L6050">6050</a>             <span class="jxr_string">"CREATOR_SUBJECT_ID: subject id of the subject who created this role, e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L6051" href="#L6051">6051</a>             <span class="jxr_string">"IS_COMPOSITE_OWNER: T if this is a result of a composite operation (union, intersection, complement), or blank if not"</span>, 
<a class="jxr_linenumber" name="L6052" href="#L6052">6052</a>             <span class="jxr_string">"IS_COMPOSITE_FACTOR: T if this is a member of a composite operation, e.g. one of the grouper being unioned, intersected, or complemeneted"</span>, 
<a class="jxr_linenumber" name="L6053" href="#L6053">6053</a>             <span class="jxr_string">"CREATOR_ID: member id of the subject who created this role, foreign key to grouper_members"</span>, 
<a class="jxr_linenumber" name="L6054" href="#L6054">6054</a>             <span class="jxr_string">"CREATE_TIME: number of millis since 1970 since this role was created"</span>, 
<a class="jxr_linenumber" name="L6055" href="#L6055">6055</a>             <span class="jxr_string">"MODIFIER_ID: member id of the subject who last modified this role, foreign key to grouper_members"</span>, 
<a class="jxr_linenumber" name="L6056" href="#L6056">6056</a>             <span class="jxr_string">"MODIFY_TIME: number of millis since 1970 since this role was last changed"</span>, 
<a class="jxr_linenumber" name="L6057" href="#L6057">6057</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER: increments by 1 for each update"</span>,
<a class="jxr_linenumber" name="L6058" href="#L6058">6058</a>             <span class="jxr_string">"Context id links together multiple operations into one high level action"</span>),
<a class="jxr_linenumber" name="L6059" href="#L6059">6059</a>             <span class="jxr_string">"select  "</span>
<a class="jxr_linenumber" name="L6060" href="#L6060">6060</a>             + <span class="jxr_string">"gg.extension as extension, "</span>
<a class="jxr_linenumber" name="L6061" href="#L6061">6061</a>             + <span class="jxr_string">"gg.name as name, "</span>
<a class="jxr_linenumber" name="L6062" href="#L6062">6062</a>             + <span class="jxr_string">"gg.display_extension as display_extension, "</span>
<a class="jxr_linenumber" name="L6063" href="#L6063">6063</a>             + <span class="jxr_string">"gg.display_name as display_name, "</span>
<a class="jxr_linenumber" name="L6064" href="#L6064">6064</a>             + <span class="jxr_string">"gg.description as description, "</span>
<a class="jxr_linenumber" name="L6065" href="#L6065">6065</a>             + <span class="jxr_string">"gs.NAME as parent_stem_name, "</span>
<a class="jxr_linenumber" name="L6066" href="#L6066">6066</a>             + <span class="jxr_string">"gg.id as role_id, "</span>
<a class="jxr_linenumber" name="L6067" href="#L6067">6067</a>             + <span class="jxr_string">"gs.ID as parent_stem_id, "</span>
<a class="jxr_linenumber" name="L6068" href="#L6068">6068</a>             + <span class="jxr_string">"(select gm.SUBJECT_SOURCE from grouper_members gm where gm.ID = gg.MODIFIER_ID) as modifier_source, "</span>
<a class="jxr_linenumber" name="L6069" href="#L6069">6069</a>             + <span class="jxr_string">"(select gm.SUBJECT_ID from grouper_members gm where gm.ID = gg.MODIFIER_ID) as modifier_subject_id, "</span>
<a class="jxr_linenumber" name="L6070" href="#L6070">6070</a>             + <span class="jxr_string">"(select gm.SUBJECT_SOURCE from grouper_members gm where gm.ID = gg.CREATOR_ID) as creator_source, "</span>
<a class="jxr_linenumber" name="L6071" href="#L6071">6071</a>             + <span class="jxr_string">"(select gm.SUBJECT_ID from grouper_members gm where gm.ID = gg.CREATOR_ID) as creator_subject_id, "</span>
<a class="jxr_linenumber" name="L6072" href="#L6072">6072</a>             + <span class="jxr_string">"(select distinct 'T' from grouper_composites gc where gc.OWNER = gg.ID) as is_composite_owner, "</span>
<a class="jxr_linenumber" name="L6073" href="#L6073">6073</a>             + <span class="jxr_string">"(select distinct 'T' from grouper_composites gc where gc.LEFT_FACTOR = gg.ID or gc.right_factor = gg.id) as is_composite_factor, "</span>
<a class="jxr_linenumber" name="L6074" href="#L6074">6074</a>             + <span class="jxr_string">"gg.CREATOR_ID, "</span>
<a class="jxr_linenumber" name="L6075" href="#L6075">6075</a>             + <span class="jxr_string">"gg.CREATE_TIME, "</span>
<a class="jxr_linenumber" name="L6076" href="#L6076">6076</a>             + <span class="jxr_string">"gg.MODIFIER_ID, "</span>
<a class="jxr_linenumber" name="L6077" href="#L6077">6077</a>             + <span class="jxr_string">"gg.MODIFY_TIME, "</span>
<a class="jxr_linenumber" name="L6078" href="#L6078">6078</a>             + <span class="jxr_string">"gg.HIBERNATE_VERSION_NUMBER, gg.context_id  "</span>
<a class="jxr_linenumber" name="L6079" href="#L6079">6079</a>             + <span class="jxr_string">" from grouper_groups gg, grouper_stems gs where gg.PARENT_STEM = gs.ID and"</span> +
<a class="jxr_linenumber" name="L6080" href="#L6080">6080</a>                 <span class="jxr_string">" type_of_group = 'role' "</span>);
<a class="jxr_linenumber" name="L6081" href="#L6081">6081</a> 
<a class="jxr_linenumber" name="L6082" href="#L6082">6082</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_memberships_all_v"</span>, 
<a class="jxr_linenumber" name="L6083" href="#L6083">6083</a>         <span class="jxr_string">"Grouper_memberships_all_v holds one record for each immediate, composite and effective membership or privilege in the system for members to groups or stems (for privileges)."</span>,
<a class="jxr_linenumber" name="L6084" href="#L6084">6084</a>         GrouperUtil.toSet(<span class="jxr_string">"MEMBERSHIP_ID"</span>, 
<a class="jxr_linenumber" name="L6085" href="#L6085">6085</a>         		<span class="jxr_string">"IMMEDIATE_MEMBERSHIP_ID"</span>, 
<a class="jxr_linenumber" name="L6086" href="#L6086">6086</a>             <span class="jxr_string">"GROUP_SET_ID"</span>, 
<a class="jxr_linenumber" name="L6087" href="#L6087">6087</a>             <span class="jxr_string">"MEMBER_ID"</span>, 
<a class="jxr_linenumber" name="L6088" href="#L6088">6088</a>             <span class="jxr_string">"FIELD_ID"</span>, 
<a class="jxr_linenumber" name="L6089" href="#L6089">6089</a>             <span class="jxr_string">"IMMEDIATE_FIELD_ID"</span>, 
<a class="jxr_linenumber" name="L6090" href="#L6090">6090</a>             <span class="jxr_string">"OWNER_ID"</span>, 
<a class="jxr_linenumber" name="L6091" href="#L6091">6091</a>             <span class="jxr_string">"OWNER_ATTR_DEF_ID"</span>, 
<a class="jxr_linenumber" name="L6092" href="#L6092">6092</a>             <span class="jxr_string">"OWNER_GROUP_ID"</span>, 
<a class="jxr_linenumber" name="L6093" href="#L6093">6093</a>             <span class="jxr_string">"OWNER_STEM_ID"</span>, 
<a class="jxr_linenumber" name="L6094" href="#L6094">6094</a>             <span class="jxr_string">"VIA_GROUP_ID"</span>,
<a class="jxr_linenumber" name="L6095" href="#L6095">6095</a>             <span class="jxr_string">"VIA_COMPOSITE_ID"</span>,
<a class="jxr_linenumber" name="L6096" href="#L6096">6096</a>             <span class="jxr_string">"DEPTH"</span>, 
<a class="jxr_linenumber" name="L6097" href="#L6097">6097</a>             <span class="jxr_string">"MSHIP_TYPE"</span>, 
<a class="jxr_linenumber" name="L6098" href="#L6098">6098</a>             <span class="jxr_string">"IMMEDIATE_MSHIP_ENABLED"</span>,
<a class="jxr_linenumber" name="L6099" href="#L6099">6099</a>             <span class="jxr_string">"IMMEDIATE_MSHIP_ENABLED_TIME"</span>,
<a class="jxr_linenumber" name="L6100" href="#L6100">6100</a>             <span class="jxr_string">"IMMEDIATE_MSHIP_DISABLED_TIME"</span>,
<a class="jxr_linenumber" name="L6101" href="#L6101">6101</a>             <span class="jxr_string">"GROUP_SET_PARENT_ID"</span>, 
<a class="jxr_linenumber" name="L6102" href="#L6102">6102</a>             <span class="jxr_string">"MEMBERSHIP_CREATOR_ID"</span>, 
<a class="jxr_linenumber" name="L6103" href="#L6103">6103</a>             <span class="jxr_string">"MEMBERSHIP_CREATE_TIME"</span>,
<a class="jxr_linenumber" name="L6104" href="#L6104">6104</a>             <span class="jxr_string">"GROUP_SET_CREATOR_ID"</span>, 
<a class="jxr_linenumber" name="L6105" href="#L6105">6105</a>             <span class="jxr_string">"GROUP_SET_CREATE_TIME"</span>, 
<a class="jxr_linenumber" name="L6106" href="#L6106">6106</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER"</span>, 
<a class="jxr_linenumber" name="L6107" href="#L6107">6107</a>             <span class="jxr_string">"CONTEXT_ID"</span>),
<a class="jxr_linenumber" name="L6108" href="#L6108">6108</a>         GrouperUtil.toSet(<span class="jxr_string">"MEMBERSHIP_ID: uuid unique id of this membership"</span>, 
<a class="jxr_linenumber" name="L6109" href="#L6109">6109</a>         		<span class="jxr_string">"IMMEDIATE_MEMBERSHIP_ID: uuid of the immediate (or composite) membership that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6110" href="#L6110">6110</a>             <span class="jxr_string">"GROUP_SET_ID: uuid of the group set that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6111" href="#L6111">6111</a>             <span class="jxr_string">"MEMBER_ID: id in the grouper_members table"</span>, 
<a class="jxr_linenumber" name="L6112" href="#L6112">6112</a>             <span class="jxr_string">"FIELD_ID: id in the grouper_fields table"</span>, 
<a class="jxr_linenumber" name="L6113" href="#L6113">6113</a>             <span class="jxr_string">"IMMEDIATE_FIELD_ID: id in the grouper_fields table for the immediate (or composite) membership that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6114" href="#L6114">6114</a>             <span class="jxr_string">"OWNER_ID: owner id"</span>, 
<a class="jxr_linenumber" name="L6115" href="#L6115">6115</a>             <span class="jxr_string">"OWNER_ATTR_DEF_ID: owner attribute def id if applicable"</span>, 
<a class="jxr_linenumber" name="L6116" href="#L6116">6116</a>             <span class="jxr_string">"OWNER_GROUP_ID: owner group if applicable"</span>, 
<a class="jxr_linenumber" name="L6117" href="#L6117">6117</a>             <span class="jxr_string">"OWNER_STEM_ID: owner stem if applicable"</span>, 
<a class="jxr_linenumber" name="L6118" href="#L6118">6118</a>             <span class="jxr_string">"VIA_GROUP_ID: membership is due to this group if effective"</span>,
<a class="jxr_linenumber" name="L6119" href="#L6119">6119</a>             <span class="jxr_string">"VIA_COMPOSITE_ID: membership is due to this composite if applicable"</span>,
<a class="jxr_linenumber" name="L6120" href="#L6120">6120</a>             <span class="jxr_string">"DEPTH: number of hops in a directed graph"</span>, 
<a class="jxr_linenumber" name="L6121" href="#L6121">6121</a>             <span class="jxr_string">"MSHIP_TYPE: type of membership, immediate or effective or composite"</span>, 
<a class="jxr_linenumber" name="L6122" href="#L6122">6122</a>             <span class="jxr_string">"IMMEDIATE_MSHIP_ENABLED: T or F to indicate if this membership is enabled"</span>,
<a class="jxr_linenumber" name="L6123" href="#L6123">6123</a>             <span class="jxr_string">"IMMEDIATE_MSHIP_ENABLED_TIME: when the membership will be enabled if the time is in the future"</span>,
<a class="jxr_linenumber" name="L6124" href="#L6124">6124</a>             <span class="jxr_string">"IMMEDIATE_MSHIP_DISABLED_TIME: when the membership will be disabled if the time is in the future."</span>,
<a class="jxr_linenumber" name="L6125" href="#L6125">6125</a>             <span class="jxr_string">"GROUP_SET_PARENT_ID: parent group set"</span>, 
<a class="jxr_linenumber" name="L6126" href="#L6126">6126</a>             <span class="jxr_string">"MEMBERSHIP_CREATOR_ID: member uuid of the creator of the immediate or composite membership"</span>, 
<a class="jxr_linenumber" name="L6127" href="#L6127">6127</a>             <span class="jxr_string">"MEMBERSHIP_CREATOR_TIME: number of millis since 1970 the immedate or composite membership was created"</span>,
<a class="jxr_linenumber" name="L6128" href="#L6128">6128</a>             <span class="jxr_string">"GROUP_SET_CREATOR_ID: member uuid of the creator of the group set"</span>, 
<a class="jxr_linenumber" name="L6129" href="#L6129">6129</a>             <span class="jxr_string">"GROUP_SET_CREATE_TIME: number of millis since 1970 the group set was created"</span>, 
<a class="jxr_linenumber" name="L6130" href="#L6130">6130</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER: hibernate uses this to version rows"</span>, 
<a class="jxr_linenumber" name="L6131" href="#L6131">6131</a>             <span class="jxr_string">"CONTEXT_ID: Context id links together multiple operations into one high level action"</span>),
<a class="jxr_linenumber" name="L6132" href="#L6132">6132</a>             <span class="jxr_string">"select "</span>
<a class="jxr_linenumber" name="L6133" href="#L6133">6133</a>             + GrouperDdlUtils.sqlConcatenation(<span class="jxr_string">"ms.id"</span>, <span class="jxr_string">"gs.id"</span>, Membership.membershipIdSeparator) + <span class="jxr_string">" as membership_id, "</span>
<a class="jxr_linenumber" name="L6134" href="#L6134">6134</a>             + <span class="jxr_string">"ms.id as immediate_membership_id, "</span>
<a class="jxr_linenumber" name="L6135" href="#L6135">6135</a>             + <span class="jxr_string">"gs.id as group_set_id, "</span>
<a class="jxr_linenumber" name="L6136" href="#L6136">6136</a>             + <span class="jxr_string">"ms.member_id, "</span>
<a class="jxr_linenumber" name="L6137" href="#L6137">6137</a>             + <span class="jxr_string">"gs.field_id, "</span>
<a class="jxr_linenumber" name="L6138" href="#L6138">6138</a>             + <span class="jxr_string">"ms.field_id, "</span>
<a class="jxr_linenumber" name="L6139" href="#L6139">6139</a>             + <span class="jxr_string">"gs.owner_id, "</span>
<a class="jxr_linenumber" name="L6140" href="#L6140">6140</a>             + <span class="jxr_string">"gs.owner_attr_def_id, "</span>
<a class="jxr_linenumber" name="L6141" href="#L6141">6141</a>             + <span class="jxr_string">"gs.owner_group_id, "</span>
<a class="jxr_linenumber" name="L6142" href="#L6142">6142</a>             + <span class="jxr_string">"gs.owner_stem_id, "</span> 
<a class="jxr_linenumber" name="L6143" href="#L6143">6143</a>             + <span class="jxr_string">"gs.via_group_id, "</span> 
<a class="jxr_linenumber" name="L6144" href="#L6144">6144</a>             + <span class="jxr_string">"ms.via_composite_id, "</span> 
<a class="jxr_linenumber" name="L6145" href="#L6145">6145</a>             + <span class="jxr_string">"gs.depth, "</span> 
<a class="jxr_linenumber" name="L6146" href="#L6146">6146</a>             + <span class="jxr_string">"gs.mship_type, "</span> 
<a class="jxr_linenumber" name="L6147" href="#L6147">6147</a>             + <span class="jxr_string">"ms.enabled, "</span> 
<a class="jxr_linenumber" name="L6148" href="#L6148">6148</a>             + <span class="jxr_string">"ms.enabled_timestamp, "</span> 
<a class="jxr_linenumber" name="L6149" href="#L6149">6149</a>             + <span class="jxr_string">"ms.disabled_timestamp, "</span>
<a class="jxr_linenumber" name="L6150" href="#L6150">6150</a>             + <span class="jxr_string">"gs.parent_id as group_set_parent_id, "</span>
<a class="jxr_linenumber" name="L6151" href="#L6151">6151</a>             + <span class="jxr_string">"ms.creator_id as membership_creator_id, "</span>
<a class="jxr_linenumber" name="L6152" href="#L6152">6152</a>             + <span class="jxr_string">"ms.create_time as membership_create_time, "</span>
<a class="jxr_linenumber" name="L6153" href="#L6153">6153</a>             + <span class="jxr_string">"gs.creator_id as group_set_creator_id, "</span>
<a class="jxr_linenumber" name="L6154" href="#L6154">6154</a>             + <span class="jxr_string">"gs.create_time as group_set_create_time, "</span>
<a class="jxr_linenumber" name="L6155" href="#L6155">6155</a>             + <span class="jxr_string">"ms.hibernate_version_number, "</span>
<a class="jxr_linenumber" name="L6156" href="#L6156">6156</a>             + <span class="jxr_string">"ms.context_id "</span>
<a class="jxr_linenumber" name="L6157" href="#L6157">6157</a>             + <span class="jxr_string">"from grouper_memberships ms, grouper_group_set gs "</span>
<a class="jxr_linenumber" name="L6158" href="#L6158">6158</a>             + <span class="jxr_string">"where ms.owner_id = gs.member_id and ms.field_id = gs.member_field_id"</span>);
<a class="jxr_linenumber" name="L6159" href="#L6159">6159</a> 
<a class="jxr_linenumber" name="L6160" href="#L6160">6160</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_pit_memberships_all_v"</span>, 
<a class="jxr_linenumber" name="L6161" href="#L6161">6161</a>         <span class="jxr_string">"Grouper_pit_memberships_all_v holds one record for each immediate, composite and effective membership or privilege in the system that currently exists or has existed in the past for members to groups or stems (for privileges)."</span>,
<a class="jxr_linenumber" name="L6162" href="#L6162">6162</a>         GrouperUtil.toSet(<span class="jxr_string">"ID"</span>, 
<a class="jxr_linenumber" name="L6163" href="#L6163">6163</a>             <span class="jxr_string">"MEMBERSHIP_ID"</span>, 
<a class="jxr_linenumber" name="L6164" href="#L6164">6164</a>             <span class="jxr_string">"MEMBERSHIP_SOURCE_ID"</span>, 
<a class="jxr_linenumber" name="L6165" href="#L6165">6165</a>             <span class="jxr_string">"GROUP_SET_ID"</span>, 
<a class="jxr_linenumber" name="L6166" href="#L6166">6166</a>             <span class="jxr_string">"MEMBER_ID"</span>, 
<a class="jxr_linenumber" name="L6167" href="#L6167">6167</a>             <span class="jxr_string">"FIELD_ID"</span>, 
<a class="jxr_linenumber" name="L6168" href="#L6168">6168</a>             <span class="jxr_string">"MEMBERSHIP_FIELD_ID"</span>, 
<a class="jxr_linenumber" name="L6169" href="#L6169">6169</a>             <span class="jxr_string">"OWNER_ID"</span>, 
<a class="jxr_linenumber" name="L6170" href="#L6170">6170</a>             <span class="jxr_string">"OWNER_ATTR_DEF_ID"</span>, 
<a class="jxr_linenumber" name="L6171" href="#L6171">6171</a>             <span class="jxr_string">"OWNER_GROUP_ID"</span>, 
<a class="jxr_linenumber" name="L6172" href="#L6172">6172</a>             <span class="jxr_string">"OWNER_STEM_ID"</span>, 
<a class="jxr_linenumber" name="L6173" href="#L6173">6173</a>             <span class="jxr_string">"GROUP_SET_ACTIVE"</span>, 
<a class="jxr_linenumber" name="L6174" href="#L6174">6174</a>             <span class="jxr_string">"GROUP_SET_START_TIME"</span>, 
<a class="jxr_linenumber" name="L6175" href="#L6175">6175</a>             <span class="jxr_string">"GROUP_SET_END_TIME"</span>, 
<a class="jxr_linenumber" name="L6176" href="#L6176">6176</a>             <span class="jxr_string">"MEMBERSHIP_ACTIVE"</span>, 
<a class="jxr_linenumber" name="L6177" href="#L6177">6177</a>             <span class="jxr_string">"MEMBERSHIP_START_TIME"</span>, 
<a class="jxr_linenumber" name="L6178" href="#L6178">6178</a>             <span class="jxr_string">"MEMBERSHIP_END_TIME"</span>, 
<a class="jxr_linenumber" name="L6179" href="#L6179">6179</a>             <span class="jxr_string">"DEPTH"</span>, 
<a class="jxr_linenumber" name="L6180" href="#L6180">6180</a>             <span class="jxr_string">"GROUP_SET_PARENT_ID"</span>),
<a class="jxr_linenumber" name="L6181" href="#L6181">6181</a>         GrouperUtil.toSet(<span class="jxr_string">"ID: id of this membership"</span>, 
<a class="jxr_linenumber" name="L6182" href="#L6182">6182</a>             <span class="jxr_string">"MEMBERSHIP_ID: id of the immediate (or composite) membership that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6183" href="#L6183">6183</a>             <span class="jxr_string">"MEMBERSHIP_SOURCE_ID: id of the actual (non-pit) immediate (or composite) membership that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6184" href="#L6184">6184</a>             <span class="jxr_string">"GROUP_SET_ID: id of the group set that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6185" href="#L6185">6185</a>             <span class="jxr_string">"MEMBER_ID: member id"</span>, 
<a class="jxr_linenumber" name="L6186" href="#L6186">6186</a>             <span class="jxr_string">"FIELD_ID: field id"</span>, 
<a class="jxr_linenumber" name="L6187" href="#L6187">6187</a>             <span class="jxr_string">"MEMBERSHIP_FIELD_ID: field id of the immediate (or composite) membership that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6188" href="#L6188">6188</a>             <span class="jxr_string">"OWNER_ID: owner id"</span>, 
<a class="jxr_linenumber" name="L6189" href="#L6189">6189</a>             <span class="jxr_string">"OWNER_ATTR_DEF_ID: owner attribute def id if applicable"</span>, 
<a class="jxr_linenumber" name="L6190" href="#L6190">6190</a>             <span class="jxr_string">"OWNER_GROUP_ID: owner group id if applicable"</span>, 
<a class="jxr_linenumber" name="L6191" href="#L6191">6191</a>             <span class="jxr_string">"OWNER_STEM_ID: owner stem id if applicable"</span>, 
<a class="jxr_linenumber" name="L6192" href="#L6192">6192</a>             <span class="jxr_string">"GROUP_SET_ACTIVE: whether the group set is active"</span>, 
<a class="jxr_linenumber" name="L6193" href="#L6193">6193</a>             <span class="jxr_string">"GROUP_SET_START_TIME: start time of the group set"</span>, 
<a class="jxr_linenumber" name="L6194" href="#L6194">6194</a>             <span class="jxr_string">"GROUP_SET_END_TIME: end time of the group set"</span>, 
<a class="jxr_linenumber" name="L6195" href="#L6195">6195</a>             <span class="jxr_string">"MEMBERSHIP_ACTIVE: whether the immediate (or composite) membership is active"</span>, 
<a class="jxr_linenumber" name="L6196" href="#L6196">6196</a>             <span class="jxr_string">"MEMBERSHIP_START_TIME: start time of the immediate (or composite) membership"</span>, 
<a class="jxr_linenumber" name="L6197" href="#L6197">6197</a>             <span class="jxr_string">"MEMBERSHIP_END_TIME: end time of the immediate (or composite) membership"</span>, 
<a class="jxr_linenumber" name="L6198" href="#L6198">6198</a>             <span class="jxr_string">"DEPTH: depth of this membership"</span>, 
<a class="jxr_linenumber" name="L6199" href="#L6199">6199</a>             <span class="jxr_string">"GROUP_SET_PARENT_ID: parent group set"</span>),
<a class="jxr_linenumber" name="L6200" href="#L6200">6200</a>             <span class="jxr_string">"select "</span>
<a class="jxr_linenumber" name="L6201" href="#L6201">6201</a>             + GrouperDdlUtils.sqlConcatenation(<span class="jxr_string">"ms.id"</span>, <span class="jxr_string">"gs.id"</span>, Membership.membershipIdSeparator) + <span class="jxr_string">" as membership_id, "</span>
<a class="jxr_linenumber" name="L6202" href="#L6202">6202</a>             + <span class="jxr_string">"ms.id as immediate_membership_id, "</span>
<a class="jxr_linenumber" name="L6203" href="#L6203">6203</a>             + <span class="jxr_string">"ms.source_id as membership_source_id, "</span>
<a class="jxr_linenumber" name="L6204" href="#L6204">6204</a>             + <span class="jxr_string">"gs.id as group_set_id, "</span>
<a class="jxr_linenumber" name="L6205" href="#L6205">6205</a>             + <span class="jxr_string">"ms.member_id, "</span>
<a class="jxr_linenumber" name="L6206" href="#L6206">6206</a>             + <span class="jxr_string">"gs.field_id, "</span>
<a class="jxr_linenumber" name="L6207" href="#L6207">6207</a>             + <span class="jxr_string">"ms.field_id, "</span>
<a class="jxr_linenumber" name="L6208" href="#L6208">6208</a>             + <span class="jxr_string">"gs.owner_id, "</span>
<a class="jxr_linenumber" name="L6209" href="#L6209">6209</a>             + <span class="jxr_string">"gs.owner_attr_def_id, "</span>
<a class="jxr_linenumber" name="L6210" href="#L6210">6210</a>             + <span class="jxr_string">"gs.owner_group_id, "</span>
<a class="jxr_linenumber" name="L6211" href="#L6211">6211</a>             + <span class="jxr_string">"gs.owner_stem_id, "</span> 
<a class="jxr_linenumber" name="L6212" href="#L6212">6212</a>             + <span class="jxr_string">"gs.active, "</span>
<a class="jxr_linenumber" name="L6213" href="#L6213">6213</a>             + <span class="jxr_string">"gs.start_time, "</span>
<a class="jxr_linenumber" name="L6214" href="#L6214">6214</a>             + <span class="jxr_string">"gs.end_time, "</span>
<a class="jxr_linenumber" name="L6215" href="#L6215">6215</a>             + <span class="jxr_string">"ms.active, "</span>
<a class="jxr_linenumber" name="L6216" href="#L6216">6216</a>             + <span class="jxr_string">"ms.start_time, "</span>
<a class="jxr_linenumber" name="L6217" href="#L6217">6217</a>             + <span class="jxr_string">"ms.end_time, "</span>
<a class="jxr_linenumber" name="L6218" href="#L6218">6218</a>             + <span class="jxr_string">"gs.depth, "</span> 
<a class="jxr_linenumber" name="L6219" href="#L6219">6219</a>             + <span class="jxr_string">"gs.parent_id as group_set_parent_id "</span>
<a class="jxr_linenumber" name="L6220" href="#L6220">6220</a>             + <span class="jxr_string">"from grouper_pit_memberships ms, grouper_pit_group_set gs "</span>
<a class="jxr_linenumber" name="L6221" href="#L6221">6221</a>             + <span class="jxr_string">"where ms.owner_id = gs.member_id and ms.field_id = gs.member_field_id"</span>);
<a class="jxr_linenumber" name="L6222" href="#L6222">6222</a>     
<a class="jxr_linenumber" name="L6223" href="#L6223">6223</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_memberships_lw_v"</span>, 
<a class="jxr_linenumber" name="L6224" href="#L6224">6224</a>         <span class="jxr_string">"Grouper_memberships_lw_v unique membership records that can be read from a SQL interface outside of grouper.  Immediate and effective memberships are represented here (distinct)"</span>,
<a class="jxr_linenumber" name="L6225" href="#L6225">6225</a>         GrouperUtil.toSet(<span class="jxr_string">"SUBJECT_ID"</span>, <span class="jxr_string">"SUBJECT_SOURCE"</span>, <span class="jxr_string">"GROUP_NAME"</span>, <span class="jxr_string">"LIST_NAME"</span>, <span class="jxr_string">"LIST_TYPE"</span>, <span class="jxr_string">"GROUP_ID"</span>, <span class="jxr_string">"MEMBER_ID"</span>),
<a class="jxr_linenumber" name="L6226" href="#L6226">6226</a>         GrouperUtil.toSet(<span class="jxr_string">"SUBJECT_ID: of the member of the group"</span>, 
<a class="jxr_linenumber" name="L6227" href="#L6227">6227</a>             <span class="jxr_string">"SUBJECT_SOURCE: of the member of the group"</span>, 
<a class="jxr_linenumber" name="L6228" href="#L6228">6228</a>             <span class="jxr_string">"GROUP_NAME: system name of the group"</span>, 
<a class="jxr_linenumber" name="L6229" href="#L6229">6229</a>             <span class="jxr_string">"LIST_NAME: name of the list, e.g. members"</span>, 
<a class="jxr_linenumber" name="L6230" href="#L6230">6230</a>             <span class="jxr_string">"LIST_TYPE: type of list e.g. access or list"</span>, 
<a class="jxr_linenumber" name="L6231" href="#L6231">6231</a>             <span class="jxr_string">"GROUP_ID: uuid of the group"</span>,
<a class="jxr_linenumber" name="L6232" href="#L6232">6232</a>             <span class="jxr_string">"MEMBER_ID: uuid of the member"</span>),
<a class="jxr_linenumber" name="L6233" href="#L6233">6233</a>             <span class="jxr_string">"select distinct gm.SUBJECT_ID, gm.SUBJECT_SOURCE, gg.name as group_name, "</span>
<a class="jxr_linenumber" name="L6234" href="#L6234">6234</a>             + <span class="jxr_string">"gfl.NAME as list_name, gfl.TYPE as list_type, gg.ID as group_id, gm.ID as member_id  "</span>
<a class="jxr_linenumber" name="L6235" href="#L6235">6235</a>             + <span class="jxr_string">"from grouper_memberships_all_v gms, grouper_members gm, "</span> 
<a class="jxr_linenumber" name="L6236" href="#L6236">6236</a>             + <span class="jxr_string">"grouper_groups gg, grouper_fields gfl "</span>
<a class="jxr_linenumber" name="L6237" href="#L6237">6237</a>             + <span class="jxr_string">"where gms.OWNER_GROUP_ID = gg.id "</span> 
<a class="jxr_linenumber" name="L6238" href="#L6238">6238</a>             + <span class="jxr_string">"and gms.FIELD_ID = gfl.ID "</span>
<a class="jxr_linenumber" name="L6239" href="#L6239">6239</a>             + <span class="jxr_string">"and gms.MEMBER_ID = gm.ID "</span>
<a class="jxr_linenumber" name="L6240" href="#L6240">6240</a>             +	<span class="jxr_string">"and gms.IMMEDIATE_MSHIP_ENABLED = 'T'"</span>);
<a class="jxr_linenumber" name="L6241" href="#L6241">6241</a> 
<a class="jxr_linenumber" name="L6242" href="#L6242">6242</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_mship_stem_lw_v"</span>, 
<a class="jxr_linenumber" name="L6243" href="#L6243">6243</a>         <span class="jxr_string">"grouper_mship_stem_lw_v unique membership records that can be read from a SQL interface outside of grouper for stems.  Immediate and effective memberships are represented here (distinct)"</span>,
<a class="jxr_linenumber" name="L6244" href="#L6244">6244</a>         GrouperUtil.toSet(<span class="jxr_string">"SUBJECT_ID"</span>, <span class="jxr_string">"SUBJECT_SOURCE"</span>, <span class="jxr_string">"STEM_NAME"</span>, <span class="jxr_string">"LIST_NAME"</span>, <span class="jxr_string">"LIST_TYPE"</span>, <span class="jxr_string">"STEM_ID"</span>),
<a class="jxr_linenumber" name="L6245" href="#L6245">6245</a>         GrouperUtil.toSet(<span class="jxr_string">"SUBJECT_ID: of the member of the stem"</span>, 
<a class="jxr_linenumber" name="L6246" href="#L6246">6246</a>             <span class="jxr_string">"SUBJECT_SOURCE: of the member of the stem"</span>, 
<a class="jxr_linenumber" name="L6247" href="#L6247">6247</a>             <span class="jxr_string">"STEM_NAME: system name of the stem"</span>, 
<a class="jxr_linenumber" name="L6248" href="#L6248">6248</a>             <span class="jxr_string">"LIST_NAME: name of the list, e.g. members"</span>, 
<a class="jxr_linenumber" name="L6249" href="#L6249">6249</a>             <span class="jxr_string">"LIST_TYPE: type of list e.g. access or list"</span>, 
<a class="jxr_linenumber" name="L6250" href="#L6250">6250</a>             <span class="jxr_string">"STEM_ID: uuid of the stem"</span>),
<a class="jxr_linenumber" name="L6251" href="#L6251">6251</a>             <span class="jxr_string">"select distinct gm.SUBJECT_ID, gm.SUBJECT_SOURCE, gs.name as stem_name, "</span>
<a class="jxr_linenumber" name="L6252" href="#L6252">6252</a>             + <span class="jxr_string">"gfl.NAME as list_name, gfl.TYPE as list_type, gs.ID as stem_id "</span>
<a class="jxr_linenumber" name="L6253" href="#L6253">6253</a>             + <span class="jxr_string">"from grouper_memberships_all_v gms, grouper_members gm, "</span> 
<a class="jxr_linenumber" name="L6254" href="#L6254">6254</a>             + <span class="jxr_string">"grouper_stems gs, grouper_fields gfl "</span>
<a class="jxr_linenumber" name="L6255" href="#L6255">6255</a>             + <span class="jxr_string">"where gms.OWNER_STEM_ID = gs.id "</span> 
<a class="jxr_linenumber" name="L6256" href="#L6256">6256</a>             + <span class="jxr_string">"and gms.FIELD_ID = gfl.ID "</span>
<a class="jxr_linenumber" name="L6257" href="#L6257">6257</a>             + <span class="jxr_string">"and gms.MEMBER_ID = gm.ID"</span>);
<a class="jxr_linenumber" name="L6258" href="#L6258">6258</a> 
<a class="jxr_linenumber" name="L6259" href="#L6259">6259</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_mship_attrdef_lw_v"</span>, 
<a class="jxr_linenumber" name="L6260" href="#L6260">6260</a>         <span class="jxr_string">"grouper_mship_attrdef_lw_v unique membership records of attr defs that can be read from a SQL interface outside of grouper.  Immediate and effective memberships are represented here (distinct)"</span>,
<a class="jxr_linenumber" name="L6261" href="#L6261">6261</a>         GrouperUtil.toSet(<span class="jxr_string">"SUBJECT_ID"</span>, <span class="jxr_string">"SUBJECT_SOURCE"</span>, <span class="jxr_string">"ATTRIBUTE_DEF_NAME"</span>, <span class="jxr_string">"LIST_NAME"</span>, <span class="jxr_string">"LIST_TYPE"</span>, <span class="jxr_string">"ATTRIBUTE_DEF_ID"</span>),
<a class="jxr_linenumber" name="L6262" href="#L6262">6262</a>         GrouperUtil.toSet(<span class="jxr_string">"SUBJECT_ID: of the member of the group"</span>, 
<a class="jxr_linenumber" name="L6263" href="#L6263">6263</a>             <span class="jxr_string">"SUBJECT_SOURCE: of the member of the attributeDef"</span>, 
<a class="jxr_linenumber" name="L6264" href="#L6264">6264</a>             <span class="jxr_string">"ATTRIBUTE_DEF_NAME: system name of the attributeDef"</span>, 
<a class="jxr_linenumber" name="L6265" href="#L6265">6265</a>             <span class="jxr_string">"LIST_NAME: name of the list, e.g. members"</span>, 
<a class="jxr_linenumber" name="L6266" href="#L6266">6266</a>             <span class="jxr_string">"LIST_TYPE: type of list e.g. access or list"</span>, 
<a class="jxr_linenumber" name="L6267" href="#L6267">6267</a>             <span class="jxr_string">"ATTRIBUTE_DEF_ID: uuid of the attributeDef"</span>),
<a class="jxr_linenumber" name="L6268" href="#L6268">6268</a>             <span class="jxr_string">"select distinct gm.SUBJECT_ID, gm.SUBJECT_SOURCE, gad.name as attribute_def_name, "</span>
<a class="jxr_linenumber" name="L6269" href="#L6269">6269</a>             + <span class="jxr_string">"gfl.NAME as list_name, gfl.TYPE as list_type, gad.id as attribute_def_id "</span>
<a class="jxr_linenumber" name="L6270" href="#L6270">6270</a>             + <span class="jxr_string">"from grouper_memberships_all_v gms, grouper_members gm, "</span> 
<a class="jxr_linenumber" name="L6271" href="#L6271">6271</a>             + <span class="jxr_string">"grouper_attribute_def gad, grouper_fields gfl "</span>
<a class="jxr_linenumber" name="L6272" href="#L6272">6272</a>             + <span class="jxr_string">"where gms.OWNER_ATTR_DEF_ID = gad.id "</span> 
<a class="jxr_linenumber" name="L6273" href="#L6273">6273</a>             + <span class="jxr_string">"and gms.FIELD_ID = gfl.ID "</span>
<a class="jxr_linenumber" name="L6274" href="#L6274">6274</a>             + <span class="jxr_string">"and gms.MEMBER_ID = gm.ID"</span>);
<a class="jxr_linenumber" name="L6275" href="#L6275">6275</a> 
<a class="jxr_linenumber" name="L6276" href="#L6276">6276</a>         
<a class="jxr_linenumber" name="L6277" href="#L6277">6277</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_memberships_v"</span>, 
<a class="jxr_linenumber" name="L6278" href="#L6278">6278</a>         <span class="jxr_string">"Grouper_memberships_v holds one record for each membership or privilege in the system for members to groups or stems (for privileges).  This is denormalized so there are records for the actual immediate relationships, and the cascaded effective relationships.  This has friendly names."</span>,
<a class="jxr_linenumber" name="L6279" href="#L6279">6279</a>         GrouperUtil.toSet(<span class="jxr_string">"GROUP_NAME"</span>, 
<a class="jxr_linenumber" name="L6280" href="#L6280">6280</a>             <span class="jxr_string">"GROUP_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L6281" href="#L6281">6281</a>             <span class="jxr_string">"STEM_NAME"</span>, 
<a class="jxr_linenumber" name="L6282" href="#L6282">6282</a>             <span class="jxr_string">"STEM_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L6283" href="#L6283">6283</a>             <span class="jxr_string">"SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L6284" href="#L6284">6284</a>             <span class="jxr_string">"SUBJECT_SOURCE"</span>, 
<a class="jxr_linenumber" name="L6285" href="#L6285">6285</a>             <span class="jxr_string">"MEMBER_ID"</span>,
<a class="jxr_linenumber" name="L6286" href="#L6286">6286</a>             <span class="jxr_string">"LIST_TYPE"</span>, 
<a class="jxr_linenumber" name="L6287" href="#L6287">6287</a>             <span class="jxr_string">"LIST_NAME"</span>, 
<a class="jxr_linenumber" name="L6288" href="#L6288">6288</a>             <span class="jxr_string">"MEMBERSHIP_TYPE"</span>, 
<a class="jxr_linenumber" name="L6289" href="#L6289">6289</a>             <span class="jxr_string">"COMPOSITE_PARENT_GROUP_NAME"</span>, 
<a class="jxr_linenumber" name="L6290" href="#L6290">6290</a>             <span class="jxr_string">"DEPTH"</span>, 
<a class="jxr_linenumber" name="L6291" href="#L6291">6291</a>             <span class="jxr_string">"CREATOR_SOURCE"</span>, 
<a class="jxr_linenumber" name="L6292" href="#L6292">6292</a>             <span class="jxr_string">"CREATOR_SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L6293" href="#L6293">6293</a>             <span class="jxr_string">"MEMBERSHIP_ID"</span>, 
<a class="jxr_linenumber" name="L6294" href="#L6294">6294</a>             <span class="jxr_string">"IMMEDIATE_MEMBERSHIP_ID"</span>, 
<a class="jxr_linenumber" name="L6295" href="#L6295">6295</a>             <span class="jxr_string">"GROUP_SET_ID"</span>, 
<a class="jxr_linenumber" name="L6296" href="#L6296">6296</a>             <span class="jxr_string">"STEM_ID"</span>, 
<a class="jxr_linenumber" name="L6297" href="#L6297">6297</a>             <span class="jxr_string">"GROUP_ID"</span>, 
<a class="jxr_linenumber" name="L6298" href="#L6298">6298</a>             <span class="jxr_string">"CREATE_TIME"</span>, 
<a class="jxr_linenumber" name="L6299" href="#L6299">6299</a>             <span class="jxr_string">"CREATOR_ID"</span>, 
<a class="jxr_linenumber" name="L6300" href="#L6300">6300</a>             <span class="jxr_string">"FIELD_ID"</span>, <span class="jxr_string">"CONTEXT_ID"</span>),
<a class="jxr_linenumber" name="L6301" href="#L6301">6301</a>         GrouperUtil.toSet(<span class="jxr_string">"GROUP_NAME: name of the group if this is a group membership, e.g. school:stem1:theGroup"</span>, 
<a class="jxr_linenumber" name="L6302" href="#L6302">6302</a>             <span class="jxr_string">"GROUP_DISPLAYNAME: display name of the group if this is a group membership, e.g. My school:The stem1:The group"</span>, 
<a class="jxr_linenumber" name="L6303" href="#L6303">6303</a>             <span class="jxr_string">"STEM_NAME: name of the stem if this is a stem privilege, e.g. school:stem1"</span>, 
<a class="jxr_linenumber" name="L6304" href="#L6304">6304</a>             <span class="jxr_string">"STEM_DISPLAYNAME: display name of the stems if this is a stem privilege, e.g. My school:The stem1"</span>, 
<a class="jxr_linenumber" name="L6305" href="#L6305">6305</a>             <span class="jxr_string">"SUBJECT_ID: e.g. a school id of a person in the membership e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L6306" href="#L6306">6306</a>             <span class="jxr_string">"SUBJECT_SOURCE: source where the subject in the membership is from e.g. mySchoolPeople"</span>, 
<a class="jxr_linenumber" name="L6307" href="#L6307">6307</a>             <span class="jxr_string">"MEMBER_ID: id in the grouper_members table"</span>, 
<a class="jxr_linenumber" name="L6308" href="#L6308">6308</a>             <span class="jxr_string">"LIST_TYPE: list: members of a group, access: privilege of a group, naming: privilege of a stem"</span>, 
<a class="jxr_linenumber" name="L6309" href="#L6309">6309</a>             <span class="jxr_string">"LIST_NAME: subset of list type.  which list if a list membership.  which privilege if a privilege.  e.g. members"</span>, 
<a class="jxr_linenumber" name="L6310" href="#L6310">6310</a>             <span class="jxr_string">"MEMBERSHIP_TYPE: either immediate (direct membership or privilege), of effective (membership due to a composite or a group being a member of another group)"</span>,
<a class="jxr_linenumber" name="L6311" href="#L6311">6311</a>             <span class="jxr_string">"COMPOSITE_PARENT_GROUP_NAME: name of group if this membership relates to a composite relationship, e.g. school:stem:allStudents"</span>, 
<a class="jxr_linenumber" name="L6312" href="#L6312">6312</a>             <span class="jxr_string">"DEPTH: 0 for composite, if not then it is the 0 indexed count of number of group hops between member and group"</span>, 
<a class="jxr_linenumber" name="L6313" href="#L6313">6313</a>             <span class="jxr_string">"CREATOR_SOURCE: subject source where the creator of the group is from"</span>, 
<a class="jxr_linenumber" name="L6314" href="#L6314">6314</a>             <span class="jxr_string">"CREATOR_SUBJECT_ID: subject id of the creator of the group, e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L6315" href="#L6315">6315</a>             <span class="jxr_string">"MEMBERSHIP_ID: uuid unique id of this membership"</span>, 
<a class="jxr_linenumber" name="L6316" href="#L6316">6316</a>             <span class="jxr_string">"IMMEDIATE_MEMBERSHIP_ID: uuid of the immediate membership that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6317" href="#L6317">6317</a>             <span class="jxr_string">"GROUP_SET_ID: uuid of the group set that causes this membership"</span>, 
<a class="jxr_linenumber" name="L6318" href="#L6318">6318</a>             <span class="jxr_string">"STEM_ID: if this is a stem privilege, this is the stem uuid unique id"</span>, 
<a class="jxr_linenumber" name="L6319" href="#L6319">6319</a>             <span class="jxr_string">"GROUP_ID: if this is a group list or privilege, this is the group uuid unique id"</span>, 
<a class="jxr_linenumber" name="L6320" href="#L6320">6320</a>             <span class="jxr_string">"CREATE_TIME: number of millis since 1970 since this membership was created"</span>, 
<a class="jxr_linenumber" name="L6321" href="#L6321">6321</a>             <span class="jxr_string">"CREATOR_ID: member_id of the creator, foreign key into grouper_members"</span>, 
<a class="jxr_linenumber" name="L6322" href="#L6322">6322</a>             <span class="jxr_string">"FIELD_ID: uuid unique id of the field.  foreign key to grouper_fields.  This represents the list_type and list_name"</span>,
<a class="jxr_linenumber" name="L6323" href="#L6323">6323</a>             <span class="jxr_string">"CONTEXT_ID: Context id links together multiple operations into one high level action"</span>),
<a class="jxr_linenumber" name="L6324" href="#L6324">6324</a>             <span class="jxr_string">"select  "</span>
<a class="jxr_linenumber" name="L6325" href="#L6325">6325</a>             + <span class="jxr_string">"(select gg.name from grouper_groups gg  "</span>
<a class="jxr_linenumber" name="L6326" href="#L6326">6326</a>             + <span class="jxr_string">"where gg.id = gms.owner_group_id) as group_name,  "</span>
<a class="jxr_linenumber" name="L6327" href="#L6327">6327</a>             + <span class="jxr_string">"(select gg.display_name from grouper_groups gg  "</span>
<a class="jxr_linenumber" name="L6328" href="#L6328">6328</a>             + <span class="jxr_string">"where gg.id = gms.owner_group_id) as group_displayname,  "</span>
<a class="jxr_linenumber" name="L6329" href="#L6329">6329</a>             + <span class="jxr_string">"(select gs.NAME from grouper_stems gs  "</span>
<a class="jxr_linenumber" name="L6330" href="#L6330">6330</a>             + <span class="jxr_string">"where gs.ID = gms.owner_stem_id) as stem_name,  "</span>
<a class="jxr_linenumber" name="L6331" href="#L6331">6331</a>             + <span class="jxr_string">"(select gs.display_NAME from grouper_stems gs  "</span>
<a class="jxr_linenumber" name="L6332" href="#L6332">6332</a>             + <span class="jxr_string">"where gs.ID = gms.owner_stem_id) as stem_displayname,  "</span>
<a class="jxr_linenumber" name="L6333" href="#L6333">6333</a>             + <span class="jxr_string">"gm.subject_id, gm.subject_source, gms.member_id, "</span>
<a class="jxr_linenumber" name="L6334" href="#L6334">6334</a>             + <span class="jxr_string">"gf.TYPE as list_type,  "</span>
<a class="jxr_linenumber" name="L6335" href="#L6335">6335</a>             + <span class="jxr_string">"gf.NAME as list_name,  "</span>
<a class="jxr_linenumber" name="L6336" href="#L6336">6336</a>             + <span class="jxr_string">"gms.MSHIP_TYPE as membership_type,  "</span>
<a class="jxr_linenumber" name="L6337" href="#L6337">6337</a>             + <span class="jxr_string">"(select gg.name from grouper_groups gg, grouper_composites gc  "</span>
<a class="jxr_linenumber" name="L6338" href="#L6338">6338</a>             + <span class="jxr_string">"where gg.id = gms.VIA_composite_ID and gg.id = gc.OWNER) as composite_parent_group_name,  "</span>
<a class="jxr_linenumber" name="L6339" href="#L6339">6339</a>             + <span class="jxr_string">"depth,   "</span>
<a class="jxr_linenumber" name="L6340" href="#L6340">6340</a>             + <span class="jxr_string">"(select gm.SUBJECT_SOURCE from grouper_members gm where gm.ID = gms.membership_creator_ID) as creator_source,  "</span>
<a class="jxr_linenumber" name="L6341" href="#L6341">6341</a>             + <span class="jxr_string">"(select gm.SUBJECT_ID from grouper_members gm where gm.ID = gms.membership_creator_ID) as creator_subject_id,  "</span>
<a class="jxr_linenumber" name="L6342" href="#L6342">6342</a>             + <span class="jxr_string">"gms.membership_id as membership_id,   "</span>
<a class="jxr_linenumber" name="L6343" href="#L6343">6343</a>             + <span class="jxr_string">"gms.immediate_membership_id as immediate_membership_id,   "</span>
<a class="jxr_linenumber" name="L6344" href="#L6344">6344</a>             + <span class="jxr_string">"gms.GROUP_SET_ID as group_set_id,  "</span>
<a class="jxr_linenumber" name="L6345" href="#L6345">6345</a>             + <span class="jxr_string">"(select gs.id from grouper_stems gs where gs.ID = gms.owner_stem_id) as stem_id,  "</span>
<a class="jxr_linenumber" name="L6346" href="#L6346">6346</a>             + <span class="jxr_string">"(select gg.id from grouper_groups gg where gg.id = gms.owner_group_id) as group_id,  "</span>
<a class="jxr_linenumber" name="L6347" href="#L6347">6347</a>             + <span class="jxr_string">"gms.membership_create_time,  "</span>
<a class="jxr_linenumber" name="L6348" href="#L6348">6348</a>             + <span class="jxr_string">"gms.membership_creator_id,  "</span>
<a class="jxr_linenumber" name="L6349" href="#L6349">6349</a>             + <span class="jxr_string">"gms.field_id, gms.context_id  "</span>
<a class="jxr_linenumber" name="L6350" href="#L6350">6350</a>             + <span class="jxr_string">" from grouper_memberships_all_v gms, grouper_members gm, grouper_fields gf  "</span>
<a class="jxr_linenumber" name="L6351" href="#L6351">6351</a>             + <span class="jxr_string">" where gms.MEMBER_ID = gm.ID and gms.field_id = gf.id  "</span>);
<a class="jxr_linenumber" name="L6352" href="#L6352">6352</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_stems_v"</span>,
<a class="jxr_linenumber" name="L6353" href="#L6353">6353</a>         <span class="jxr_string">"GROUPER_STEMS_V: holds one record for each stem (folder) in grouper, with friendly names"</span>,
<a class="jxr_linenumber" name="L6354" href="#L6354">6354</a>         GrouperUtil.toSet(<span class="jxr_string">"EXTENSION"</span>, 
<a class="jxr_linenumber" name="L6355" href="#L6355">6355</a>             <span class="jxr_string">"NAME"</span>, 
<a class="jxr_linenumber" name="L6356" href="#L6356">6356</a>             <span class="jxr_string">"DISPLAY_EXTENSION"</span>, 
<a class="jxr_linenumber" name="L6357" href="#L6357">6357</a>             <span class="jxr_string">"DISPLAY_NAME"</span>, 
<a class="jxr_linenumber" name="L6358" href="#L6358">6358</a>             <span class="jxr_string">"DESCRIPTION"</span>,
<a class="jxr_linenumber" name="L6359" href="#L6359">6359</a>             <span class="jxr_string">"PARENT_STEM_NAME"</span>, 
<a class="jxr_linenumber" name="L6360" href="#L6360">6360</a>             <span class="jxr_string">"PARENT_STEM_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L6361" href="#L6361">6361</a>             <span class="jxr_string">"CREATOR_SOURCE"</span>, 
<a class="jxr_linenumber" name="L6362" href="#L6362">6362</a>             <span class="jxr_string">"CREATOR_SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L6363" href="#L6363">6363</a>             <span class="jxr_string">"MODIFIER_SOURCE"</span>,
<a class="jxr_linenumber" name="L6364" href="#L6364">6364</a>             <span class="jxr_string">"MODIFIER_SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L6365" href="#L6365">6365</a>             <span class="jxr_string">"CREATE_TIME"</span>, 
<a class="jxr_linenumber" name="L6366" href="#L6366">6366</a>             <span class="jxr_string">"CREATOR_ID"</span>, 
<a class="jxr_linenumber" name="L6367" href="#L6367">6367</a>             <span class="jxr_string">"STEM_ID"</span>, 
<a class="jxr_linenumber" name="L6368" href="#L6368">6368</a>             <span class="jxr_string">"MODIFIER_ID"</span>,
<a class="jxr_linenumber" name="L6369" href="#L6369">6369</a>             <span class="jxr_string">"MODIFY_TIME"</span>, 
<a class="jxr_linenumber" name="L6370" href="#L6370">6370</a>             <span class="jxr_string">"PARENT_STEM"</span>, 
<a class="jxr_linenumber" name="L6371" href="#L6371">6371</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER"</span>, <span class="jxr_string">"CONTEXT_ID"</span>),
<a class="jxr_linenumber" name="L6372" href="#L6372">6372</a>         GrouperUtil.toSet(<span class="jxr_string">"EXTENSION: name of the stem without the parent stem names, e.g. stem1"</span>, 
<a class="jxr_linenumber" name="L6373" href="#L6373">6373</a>             <span class="jxr_string">"NAME: name of the stem including parent stem names, e.g. school:stem1"</span>, 
<a class="jxr_linenumber" name="L6374" href="#L6374">6374</a>             <span class="jxr_string">"DISPLAY_EXTENSION: display name of the stem without parent stem names, e.g. The stem 1"</span>, 
<a class="jxr_linenumber" name="L6375" href="#L6375">6375</a>             <span class="jxr_string">"DISPLAY_NAME: display name of the stem including parent stem names, e.g. My school: The stem 1"</span>, 
<a class="jxr_linenumber" name="L6376" href="#L6376">6376</a>             <span class="jxr_string">"DESCRIPTION: description entered in about the stem, for example including why the stem exists and who has access"</span>,
<a class="jxr_linenumber" name="L6377" href="#L6377">6377</a>             <span class="jxr_string">"PARENT_STEM_NAME: name of the stem (folder) that this stem is in.  e.g. school"</span>, 
<a class="jxr_linenumber" name="L6378" href="#L6378">6378</a>             <span class="jxr_string">"PARENT_STEM_DISPLAYNAME: display name of the stem (folder) that this stem is in.  e.g. My school"</span>, 
<a class="jxr_linenumber" name="L6379" href="#L6379">6379</a>             <span class="jxr_string">"CREATOR_SOURCE: subject source where the subject that created this stem is from, e.g. mySchoolPeople"</span>, 
<a class="jxr_linenumber" name="L6380" href="#L6380">6380</a>             <span class="jxr_string">"CREATOR_SUBJECT_ID: e.g. the school id of the subject that created this stem, e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L6381" href="#L6381">6381</a>             <span class="jxr_string">"MODIFIER_SOURCE: subject source where the subject that last modified this stem is from, e.g. mySchoolPeople"</span>,
<a class="jxr_linenumber" name="L6382" href="#L6382">6382</a>             <span class="jxr_string">"MODIFIER_SUBJECT_ID: e.g. the school id of the subject who last modified this stem, e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L6383" href="#L6383">6383</a>             <span class="jxr_string">"CREATE_TIME: number of millis since 1970 that this stem was created"</span>, 
<a class="jxr_linenumber" name="L6384" href="#L6384">6384</a>             <span class="jxr_string">"CREATOR_ID: member id of the subject who created this stem, foreign key to grouper_members"</span>, 
<a class="jxr_linenumber" name="L6385" href="#L6385">6385</a>             <span class="jxr_string">"STEM_ID: uuid unique id of this stem"</span>, 
<a class="jxr_linenumber" name="L6386" href="#L6386">6386</a>             <span class="jxr_string">"MODIFIER_ID: member id of the subject who last modified this stem, foreign key to grouper_members"</span>,
<a class="jxr_linenumber" name="L6387" href="#L6387">6387</a>             <span class="jxr_string">"MODIFY_TIME: number of millis since 1970 since this stem was last modified"</span>, 
<a class="jxr_linenumber" name="L6388" href="#L6388">6388</a>             <span class="jxr_string">"PARENT_STEM: stem_id uuid unique id of the stem (folder) that this stem is in"</span>, 
<a class="jxr_linenumber" name="L6389" href="#L6389">6389</a>             <span class="jxr_string">"HIBERNATE_VERSION_NUMBER: increments by one for each update from hibernate"</span>,
<a class="jxr_linenumber" name="L6390" href="#L6390">6390</a>             <span class="jxr_string">"CONTEXT_ID: Context id links together multiple operations into one high level action"</span>),
<a class="jxr_linenumber" name="L6391" href="#L6391">6391</a>          <span class="jxr_string">"select gs.extension, gs.NAME, "</span>
<a class="jxr_linenumber" name="L6392" href="#L6392">6392</a>             + <span class="jxr_string">"gs.DISPLAY_EXTENSION, gs.DISPLAY_NAME, gs.DESCRIPTION, "</span>
<a class="jxr_linenumber" name="L6393" href="#L6393">6393</a>             + <span class="jxr_string">"(select gs_parent.NAME from grouper_stems gs_parent where gs_parent.id = gs.PARENT_STEM) as parent_stem_name, "</span>
<a class="jxr_linenumber" name="L6394" href="#L6394">6394</a>             + <span class="jxr_string">"(select gs_parent.DISPLAY_NAME from grouper_stems gs_parent where gs_parent.id = gs.PARENT_STEM) as parent_stem_displayname, "</span>
<a class="jxr_linenumber" name="L6395" href="#L6395">6395</a>             + <span class="jxr_string">"(select gm.SUBJECT_SOURCE from grouper_members gm where gm.ID = gs.creator_ID) as creator_source, "</span>
<a class="jxr_linenumber" name="L6396" href="#L6396">6396</a>             + <span class="jxr_string">"(select gm.SUBJECT_ID from grouper_members gm where gm.ID = gs.creator_ID) as creator_subject_id, "</span>
<a class="jxr_linenumber" name="L6397" href="#L6397">6397</a>             + <span class="jxr_string">"(select gm.SUBJECT_SOURCE from grouper_members gm where gm.ID = gs.MODIFIER_ID) as modifier_source, "</span>
<a class="jxr_linenumber" name="L6398" href="#L6398">6398</a>             + <span class="jxr_string">"(select gm.SUBJECT_ID from grouper_members gm where gm.ID = gs.MODIFIER_ID) as modifier_subject_id, "</span>
<a class="jxr_linenumber" name="L6399" href="#L6399">6399</a>             + <span class="jxr_string">"gs.CREATE_TIME, gs.CREATOR_ID,  "</span>
<a class="jxr_linenumber" name="L6400" href="#L6400">6400</a>             + <span class="jxr_string">"gs.ID as stem_id, gs.MODIFIER_ID, gs.MODIFY_TIME, gs.PARENT_STEM, gs.HIBERNATE_VERSION_NUMBER, gs.context_id "</span>
<a class="jxr_linenumber" name="L6401" href="#L6401">6401</a>             + <span class="jxr_string">"from grouper_stems gs "</span>);
<a class="jxr_linenumber" name="L6402" href="#L6402">6402</a>     
<a class="jxr_linenumber" name="L6403" href="#L6403">6403</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_rpt_composites_v"</span>, 
<a class="jxr_linenumber" name="L6404" href="#L6404">6404</a>         <span class="jxr_string">"GROUPER_RPT_COMPOSITES_V: report on the three composite types: union, intersection, complement and how many of each exist"</span>,
<a class="jxr_linenumber" name="L6405" href="#L6405">6405</a>         GrouperUtil.toSet(<span class="jxr_string">"COMPOSITE_TYPE"</span>, 
<a class="jxr_linenumber" name="L6406" href="#L6406">6406</a>             <span class="jxr_string">"THE_COUNT"</span>),
<a class="jxr_linenumber" name="L6407" href="#L6407">6407</a>         GrouperUtil.toSet(<span class="jxr_string">"COMPOSITE_TYPE: either union: all members from both factors, intersection: only members in both factors, complement: members in first but not second factor"</span>, 
<a class="jxr_linenumber" name="L6408" href="#L6408">6408</a>             <span class="jxr_string">"THE_COUNT: nubmer of composites of this type in the system"</span>),
<a class="jxr_linenumber" name="L6409" href="#L6409">6409</a>         <span class="jxr_string">"select gc.TYPE as composite_type, count(*) as the_count "</span> 
<a class="jxr_linenumber" name="L6410" href="#L6410">6410</a>         + <span class="jxr_string">"from grouper_composites gc group by gc.type "</span>);
<a class="jxr_linenumber" name="L6411" href="#L6411">6411</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_rpt_group_field_v"</span>, 
<a class="jxr_linenumber" name="L6412" href="#L6412">6412</a>         <span class="jxr_string">"GROUPER_RPT_GROUP_FIELD_V: report on how many unique members are in each group based on field (or list) name and type"</span>,
<a class="jxr_linenumber" name="L6413" href="#L6413">6413</a>         GrouperUtil.toSet(<span class="jxr_string">"GROUP_NAME"</span>, 
<a class="jxr_linenumber" name="L6414" href="#L6414">6414</a>             <span class="jxr_string">"GROUP_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L6415" href="#L6415">6415</a>             <span class="jxr_string">"FIELD_TYPE"</span>, 
<a class="jxr_linenumber" name="L6416" href="#L6416">6416</a>             <span class="jxr_string">"FIELD_NAME"</span>, 
<a class="jxr_linenumber" name="L6417" href="#L6417">6417</a>             <span class="jxr_string">"MEMBER_COUNT"</span>),
<a class="jxr_linenumber" name="L6418" href="#L6418">6418</a>         GrouperUtil.toSet(<span class="jxr_string">"GROUP_NAME: name of the group where the list and members are, e.g. school:stem1:myGroup"</span>, 
<a class="jxr_linenumber" name="L6419" href="#L6419">6419</a>             <span class="jxr_string">"GROUP_DISPLAYNAME: display name of the group where the list and members are, e.g. My school:The stem1:My group"</span>, 
<a class="jxr_linenumber" name="L6420" href="#L6420">6420</a>             <span class="jxr_string">"FIELD_TYPE: membership field type, e.g. list or access"</span>, 
<a class="jxr_linenumber" name="L6421" href="#L6421">6421</a>             <span class="jxr_string">"FIELD_NAME: membership field name, e.g. members, admins, readers"</span>, 
<a class="jxr_linenumber" name="L6422" href="#L6422">6422</a>             <span class="jxr_string">"MEMBER_COUNT: number of unique members in the group/field"</span>),
<a class="jxr_linenumber" name="L6423" href="#L6423">6423</a>         <span class="jxr_string">"select gg.name as group_name, gg.display_name as group_displayName, "</span>
<a class="jxr_linenumber" name="L6424" href="#L6424">6424</a>         + <span class="jxr_string">"gf.type as field_type, gf.name as field_name, count(distinct gms.member_id) as member_count "</span>
<a class="jxr_linenumber" name="L6425" href="#L6425">6425</a>         + <span class="jxr_string">"from grouper_memberships_all_v gms, grouper_groups gg, grouper_fields gf "</span>
<a class="jxr_linenumber" name="L6426" href="#L6426">6426</a>         + <span class="jxr_string">"where gms.FIELD_ID = gf.ID "</span>
<a class="jxr_linenumber" name="L6427" href="#L6427">6427</a>         + <span class="jxr_string">"and gg.id = gms.OWNER_group_ID "</span>
<a class="jxr_linenumber" name="L6428" href="#L6428">6428</a>         + <span class="jxr_string">"group by gg.name, gg.display_name, gf.type, gf.name "</span>);
<a class="jxr_linenumber" name="L6429" href="#L6429">6429</a>     
<a class="jxr_linenumber" name="L6430" href="#L6430">6430</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_rpt_groups_v"</span>, 
<a class="jxr_linenumber" name="L6431" href="#L6431">6431</a>         <span class="jxr_string">"GROUPER_RPT_GROUPS_V: report with a line for each group and some counts of immediate and effective members etc"</span>,
<a class="jxr_linenumber" name="L6432" href="#L6432">6432</a>         GrouperUtil.toSet(<span class="jxr_string">"GROUP_NAME"</span>, 
<a class="jxr_linenumber" name="L6433" href="#L6433">6433</a>             <span class="jxr_string">"GROUP_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L6434" href="#L6434">6434</a>             <span class="jxr_string">"TYPE_OF_GROUP"</span>, 
<a class="jxr_linenumber" name="L6435" href="#L6435">6435</a>             <span class="jxr_string">"IMMEDIATE_MEMBERSHIP_COUNT"</span>, 
<a class="jxr_linenumber" name="L6436" href="#L6436">6436</a>             <span class="jxr_string">"MEMBERSHIP_COUNT"</span>, 
<a class="jxr_linenumber" name="L6437" href="#L6437">6437</a>             <span class="jxr_string">"ISA_COMPOSITE_FACTOR_COUNT"</span>, 
<a class="jxr_linenumber" name="L6438" href="#L6438">6438</a>             <span class="jxr_string">"ISA_MEMBER_COUNT"</span>, 
<a class="jxr_linenumber" name="L6439" href="#L6439">6439</a>             <span class="jxr_string">"GROUP_ID"</span>),  
<a class="jxr_linenumber" name="L6440" href="#L6440">6440</a>         GrouperUtil.toSet(<span class="jxr_string">"GROUP_NAME: name of group which has the stats, e.g. school:stem1:theGroup"</span>, 
<a class="jxr_linenumber" name="L6441" href="#L6441">6441</a>             <span class="jxr_string">"GROUP_DISPLAYNAME: display name of the group which has the stats, e.g. My school:The stem1:The group"</span>, 
<a class="jxr_linenumber" name="L6442" href="#L6442">6442</a>             <span class="jxr_string">"TYPE_OF_GROUP: group if it is a group, role if it is a role"</span>, 
<a class="jxr_linenumber" name="L6443" href="#L6443">6443</a>             <span class="jxr_string">"IMMEDIATE_MEMBERSHIP_COUNT: number of unique immediate members, directly assigned to this group"</span>, 
<a class="jxr_linenumber" name="L6444" href="#L6444">6444</a>             <span class="jxr_string">"MEMBERSHIP_COUNT: total number of unique members, immediate or effective"</span>, 
<a class="jxr_linenumber" name="L6445" href="#L6445">6445</a>             <span class="jxr_string">"ISA_COMPOSITE_FACTOR_COUNT: number of composites this group is a factor of"</span>, 
<a class="jxr_linenumber" name="L6446" href="#L6446">6446</a>             <span class="jxr_string">"ISA_MEMBER_COUNT: number of groups this group is an immediate or effective member of"</span>, 
<a class="jxr_linenumber" name="L6447" href="#L6447">6447</a>             <span class="jxr_string">"GROUP_ID: uuid unique id of this group"</span>),  
<a class="jxr_linenumber" name="L6448" href="#L6448">6448</a>         <span class="jxr_string">"select  "</span>
<a class="jxr_linenumber" name="L6449" href="#L6449">6449</a>         + <span class="jxr_string">"gg.name as group_name, "</span>
<a class="jxr_linenumber" name="L6450" href="#L6450">6450</a>         + <span class="jxr_string">"gg.display_name as group_displayname, "</span>
<a class="jxr_linenumber" name="L6451" href="#L6451">6451</a>         + <span class="jxr_string">"gg.type_of_group, "</span>
<a class="jxr_linenumber" name="L6452" href="#L6452">6452</a>         + <span class="jxr_string">"(select count(distinct gms.MEMBER_ID) from grouper_memberships_all_v gms where gms.OWNER_group_ID = gg.id and gms.MSHIP_TYPE = 'immediate') as immediate_membership_count, "</span>
<a class="jxr_linenumber" name="L6453" href="#L6453">6453</a>         + <span class="jxr_string">"(select count(distinct gms.MEMBER_ID) from grouper_memberships_all_v gms where gms.OWNER_group_ID = gg.id) as membership_count, "</span>
<a class="jxr_linenumber" name="L6454" href="#L6454">6454</a>         + <span class="jxr_string">"(select count(*) from grouper_composites gc where gc.LEFT_FACTOR = gg.id or gc.RIGHT_FACTOR = gg.id) as isa_composite_factor_count, "</span>
<a class="jxr_linenumber" name="L6455" href="#L6455">6455</a>         + <span class="jxr_string">"(select count(distinct gms.OWNER_group_ID) from grouper_memberships_all_v gms, grouper_members gm where gm.SUBJECT_ID = gg.ID and gms.MEMBER_ID = gm.ID ) as isa_member_count, "</span>
<a class="jxr_linenumber" name="L6456" href="#L6456">6456</a>         + <span class="jxr_string">"gg.ID as group_id "</span>
<a class="jxr_linenumber" name="L6457" href="#L6457">6457</a>         + <span class="jxr_string">"from grouper_groups gg "</span>);
<a class="jxr_linenumber" name="L6458" href="#L6458">6458</a> 
<a class="jxr_linenumber" name="L6459" href="#L6459">6459</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_rpt_roles_v"</span>, 
<a class="jxr_linenumber" name="L6460" href="#L6460">6460</a>         <span class="jxr_string">"GROUPER_RPT_ROLES_V: report with a line for each role and some counts of immediate and effective members etc"</span>,
<a class="jxr_linenumber" name="L6461" href="#L6461">6461</a>         GrouperUtil.toSet(<span class="jxr_string">"ROLE_NAME"</span>, 
<a class="jxr_linenumber" name="L6462" href="#L6462">6462</a>             <span class="jxr_string">"ROLE_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L6463" href="#L6463">6463</a>             <span class="jxr_string">"IMMEDIATE_MEMBERSHIP_COUNT"</span>, 
<a class="jxr_linenumber" name="L6464" href="#L6464">6464</a>             <span class="jxr_string">"MEMBERSHIP_COUNT"</span>, 
<a class="jxr_linenumber" name="L6465" href="#L6465">6465</a>             <span class="jxr_string">"ISA_COMPOSITE_FACTOR_COUNT"</span>, 
<a class="jxr_linenumber" name="L6466" href="#L6466">6466</a>             <span class="jxr_string">"ISA_MEMBER_COUNT"</span>, 
<a class="jxr_linenumber" name="L6467" href="#L6467">6467</a>             <span class="jxr_string">"ROLE_ID"</span>),  
<a class="jxr_linenumber" name="L6468" href="#L6468">6468</a>         GrouperUtil.toSet(<span class="jxr_string">"ROLE_NAME: name of group which has the stats, e.g. school:stem1:theGroup"</span>, 
<a class="jxr_linenumber" name="L6469" href="#L6469">6469</a>             <span class="jxr_string">"ROLE_DISPLAYNAME: display name of the group which has the stats, e.g. My school:The stem1:The group"</span>, 
<a class="jxr_linenumber" name="L6470" href="#L6470">6470</a>             <span class="jxr_string">"IMMEDIATE_MEMBERSHIP_COUNT: number of unique immediate members, directly assigned to this group"</span>, 
<a class="jxr_linenumber" name="L6471" href="#L6471">6471</a>             <span class="jxr_string">"MEMBERSHIP_COUNT: total number of unique members, immediate or effective"</span>, 
<a class="jxr_linenumber" name="L6472" href="#L6472">6472</a>             <span class="jxr_string">"ISA_COMPOSITE_FACTOR_COUNT: number of composites this group is a factor of"</span>, 
<a class="jxr_linenumber" name="L6473" href="#L6473">6473</a>             <span class="jxr_string">"ISA_MEMBER_COUNT: number of groups this group is an immediate or effective member of"</span>, 
<a class="jxr_linenumber" name="L6474" href="#L6474">6474</a>             <span class="jxr_string">"ROLE_ID: uuid unique id of this group"</span>),  
<a class="jxr_linenumber" name="L6475" href="#L6475">6475</a>         <span class="jxr_string">"select  "</span>
<a class="jxr_linenumber" name="L6476" href="#L6476">6476</a>         + <span class="jxr_string">"gg.name as role_name, "</span>
<a class="jxr_linenumber" name="L6477" href="#L6477">6477</a>         + <span class="jxr_string">"gg.display_name as role_displayname, "</span>
<a class="jxr_linenumber" name="L6478" href="#L6478">6478</a>         + <span class="jxr_string">"(select count(distinct gms.member_id) from grouper_memberships_all_v gms where gms.OWNER_group_ID = gg.id and gms.mship_type = 'immediate') as immediate_membership_count, "</span>
<a class="jxr_linenumber" name="L6479" href="#L6479">6479</a>         + <span class="jxr_string">"(select count(distinct gms.member_id) from grouper_memberships_all_v gms where gms.OWNER_group_ID = gg.id) as membership_count, "</span>
<a class="jxr_linenumber" name="L6480" href="#L6480">6480</a>         + <span class="jxr_string">"(select count(*) from grouper_composites gc where gc.LEFT_FACTOR = gg.id or gc.RIGHT_FACTOR = gg.id) as isa_composite_factor_count, "</span>
<a class="jxr_linenumber" name="L6481" href="#L6481">6481</a>         + <span class="jxr_string">"(select count(distinct gms.OWNER_group_ID) from grouper_memberships_all_v gms, grouper_members gm where gm.SUBJECT_ID = gg.ID and gms.MEMBER_ID = gm.ID ) as isa_member_count, "</span>
<a class="jxr_linenumber" name="L6482" href="#L6482">6482</a>         + <span class="jxr_string">"gg.ID as role_id "</span>
<a class="jxr_linenumber" name="L6483" href="#L6483">6483</a>         + <span class="jxr_string">"from grouper_groups gg  where gg.type_of_group = 'role' "</span>);
<a class="jxr_linenumber" name="L6484" href="#L6484">6484</a> 
<a class="jxr_linenumber" name="L6485" href="#L6485">6485</a>     
<a class="jxr_linenumber" name="L6486" href="#L6486">6486</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_rpt_members_v"</span>, 
<a class="jxr_linenumber" name="L6487" href="#L6487">6487</a>         <span class="jxr_string">"GROUPER_RPT_MEMBERS_V: report for each member in grouper_members and some stats like how many groups they are in"</span>,
<a class="jxr_linenumber" name="L6488" href="#L6488">6488</a>         GrouperUtil.toSet(<span class="jxr_string">"SUBJECT_ID"</span>, 
<a class="jxr_linenumber" name="L6489" href="#L6489">6489</a>             <span class="jxr_string">"SUBJECT_SOURCE"</span>, 
<a class="jxr_linenumber" name="L6490" href="#L6490">6490</a>             <span class="jxr_string">"MEMBERSHIP_COUNT"</span>, 
<a class="jxr_linenumber" name="L6491" href="#L6491">6491</a>             <span class="jxr_string">"MEMBER_ID"</span>), 
<a class="jxr_linenumber" name="L6492" href="#L6492">6492</a>         GrouperUtil.toSet(<span class="jxr_string">"SUBJECT_ID: e.g. the school person id of the person e.g. 12345"</span>, 
<a class="jxr_linenumber" name="L6493" href="#L6493">6493</a>             <span class="jxr_string">"SUBJECT_SOURCE: subject source where the subject is from, e.g. schoolAllPeople"</span>, 
<a class="jxr_linenumber" name="L6494" href="#L6494">6494</a>             <span class="jxr_string">"MEMBERSHIP_COUNT: number of distinct groups or stems this member has a membership with"</span>, 
<a class="jxr_linenumber" name="L6495" href="#L6495">6495</a>             <span class="jxr_string">"MEMBER_ID: uuid unique id of the member in grouper_members"</span>), 
<a class="jxr_linenumber" name="L6496" href="#L6496">6496</a>             <span class="jxr_string">"select gm.SUBJECT_ID, gm.SUBJECT_SOURCE, "</span>
<a class="jxr_linenumber" name="L6497" href="#L6497">6497</a>             + <span class="jxr_string">"(select count(distinct gms.owner_group_id) from grouper_memberships gms where gms.MEMBER_ID = gm.ID) as membership_count, "</span>
<a class="jxr_linenumber" name="L6498" href="#L6498">6498</a>             + <span class="jxr_string">"gm.ID as member_id "</span>
<a class="jxr_linenumber" name="L6499" href="#L6499">6499</a>             + <span class="jxr_string">"from grouper_members gm "</span>);
<a class="jxr_linenumber" name="L6500" href="#L6500">6500</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_rpt_stems_v"</span>, 
<a class="jxr_linenumber" name="L6501" href="#L6501">6501</a>         <span class="jxr_string">"GROUPER_RPT_STEMS_V: report with a row for each stem and stats on many groups or members are inside"</span>,
<a class="jxr_linenumber" name="L6502" href="#L6502">6502</a>         GrouperUtil.toSet(<span class="jxr_string">"STEM_NAME"</span>, 
<a class="jxr_linenumber" name="L6503" href="#L6503">6503</a>             <span class="jxr_string">"STEM_DISPLAYNAME"</span>, 
<a class="jxr_linenumber" name="L6504" href="#L6504">6504</a>             <span class="jxr_string">"GROUP_IMMEDIATE_COUNT"</span>, 
<a class="jxr_linenumber" name="L6505" href="#L6505">6505</a>             <span class="jxr_string">"STEM_IMMEDIATE_COUNT"</span>, 
<a class="jxr_linenumber" name="L6506" href="#L6506">6506</a>             <span class="jxr_string">"GROUP_COUNT"</span>,
<a class="jxr_linenumber" name="L6507" href="#L6507">6507</a>             <span class="jxr_string">"STEM_COUNT"</span>, 
<a class="jxr_linenumber" name="L6508" href="#L6508">6508</a>             <span class="jxr_string">"THIS_STEM_MEMBERSHIP_COUNT"</span>, 
<a class="jxr_linenumber" name="L6509" href="#L6509">6509</a>             <span class="jxr_string">"CHILD_GROUP_MEMBERSHIP_COUNT"</span>, 
<a class="jxr_linenumber" name="L6510" href="#L6510">6510</a>             <span class="jxr_string">"GROUP_MEMBERSHIP_COUNT"</span>, 
<a class="jxr_linenumber" name="L6511" href="#L6511">6511</a>             <span class="jxr_string">"STEM_ID"</span>), 
<a class="jxr_linenumber" name="L6512" href="#L6512">6512</a>         GrouperUtil.toSet(<span class="jxr_string">"STEM_NAME: name of the stem in report, e.g. school:stem1"</span>, 
<a class="jxr_linenumber" name="L6513" href="#L6513">6513</a>             <span class="jxr_string">"STEM_DISPLAYNAME: display name of the stem in report, e.g. My school:The stem 1"</span>, 
<a class="jxr_linenumber" name="L6514" href="#L6514">6514</a>             <span class="jxr_string">"GROUP_IMMEDIATE_COUNT: number of groups directly inside this stem"</span>, 
<a class="jxr_linenumber" name="L6515" href="#L6515">6515</a>             <span class="jxr_string">"STEM_IMMEDIATE_COUNT: number of stems directly inside this stem"</span>, 
<a class="jxr_linenumber" name="L6516" href="#L6516">6516</a>             <span class="jxr_string">"GROUP_COUNT: number of groups inside this stem, or in a stem inside this stem etc"</span>,
<a class="jxr_linenumber" name="L6517" href="#L6517">6517</a>             <span class="jxr_string">"STEM_COUNT: number of stems inside this stem or in a stem inside this stem etc"</span>, 
<a class="jxr_linenumber" name="L6518" href="#L6518">6518</a>             <span class="jxr_string">"THIS_STEM_MEMBERSHIP_COUNT: number of access memberships related to this stem (e.g. how many people can create groups/stems inside)"</span>, 
<a class="jxr_linenumber" name="L6519" href="#L6519">6519</a>             <span class="jxr_string">"CHILD_GROUP_MEMBERSHIP_COUNT: number of memberships in groups immediately in this stem"</span>, 
<a class="jxr_linenumber" name="L6520" href="#L6520">6520</a>             <span class="jxr_string">"GROUP_MEMBERSHIP_COUNT: number of memberships in groups in this stem or in stems in this stem etc"</span>, 
<a class="jxr_linenumber" name="L6521" href="#L6521">6521</a>             <span class="jxr_string">"STEM_ID: uuid unique id of this stem"</span>), 
<a class="jxr_linenumber" name="L6522" href="#L6522">6522</a>             <span class="jxr_string">"select gs.name as stem_name, gs.display_name as stem_displayname, "</span>
<a class="jxr_linenumber" name="L6523" href="#L6523">6523</a>             + <span class="jxr_string">"(select count(*) from grouper_groups gg where gg.parent_stem = gs.ID) as group_immediate_count, "</span>
<a class="jxr_linenumber" name="L6524" href="#L6524">6524</a>             + <span class="jxr_string">"(select count(*) from grouper_stems gs2 where gs.id = gs2.parent_stem ) as stem_immediate_count, "</span>
<a class="jxr_linenumber" name="L6525" href="#L6525">6525</a>             + <span class="jxr_string">"(select count(*) from grouper_groups gg where gg.name like "</span> + GrouperDdlUtils.sqlConcatenation(<span class="jxr_string">"gs.name"</span>, <span class="jxr_string">"'%'"</span>) +  <span class="jxr_string">") as group_count, "</span>
<a class="jxr_linenumber" name="L6526" href="#L6526">6526</a>             + <span class="jxr_string">"(select count(*) from grouper_stems gs2 where gs2.name like "</span> + GrouperDdlUtils.sqlConcatenation(<span class="jxr_string">"gs.name"</span>, <span class="jxr_string">"'%'"</span>) +  <span class="jxr_string">") as stem_count, "</span>
<a class="jxr_linenumber" name="L6527" href="#L6527">6527</a>             + <span class="jxr_string">"(select count(distinct gm.member_id) from grouper_memberships_all_v gm where gm.owner_stem_id = gs.id) as this_stem_membership_count,  "</span>
<a class="jxr_linenumber" name="L6528" href="#L6528">6528</a>             + <span class="jxr_string">"(select count(distinct gm.member_id) from grouper_memberships_all_v gm, grouper_groups gg where gg.parent_stem = gs.id and gm.owner_stem_id = gg.id) as child_group_membership_count,  "</span>
<a class="jxr_linenumber" name="L6529" href="#L6529">6529</a>             + <span class="jxr_string">"(select count(distinct gm.member_id) from grouper_memberships_all_v gm, grouper_groups gg where gm.owner_group_id = gg.id and gg.name like "</span> + GrouperDdlUtils.sqlConcatenation(<span class="jxr_string">"gs.name"</span>, <span class="jxr_string">"'%'"</span>) +  <span class="jxr_string">") as group_membership_count, "</span>
<a class="jxr_linenumber" name="L6530" href="#L6530">6530</a>             + <span class="jxr_string">"gs.ID as stem_id "</span>
<a class="jxr_linenumber" name="L6531" href="#L6531">6531</a>             + <span class="jxr_string">"from grouper_stems gs "</span>);
<a class="jxr_linenumber" name="L6532" href="#L6532">6532</a> 
<a class="jxr_linenumber" name="L6533" href="#L6533">6533</a>     
<a class="jxr_linenumber" name="L6534" href="#L6534">6534</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_role_set_v"</span>, 
<a class="jxr_linenumber" name="L6535" href="#L6535">6535</a>         <span class="jxr_string">"grouper_role_set_v: shows all role set relationships"</span>,
<a class="jxr_linenumber" name="L6536" href="#L6536">6536</a>         GrouperUtil.toSet(<span class="jxr_string">"if_has_role_name"</span>, 
<a class="jxr_linenumber" name="L6537" href="#L6537">6537</a>             <span class="jxr_string">"then_has_role_name"</span>, 
<a class="jxr_linenumber" name="L6538" href="#L6538">6538</a>             <span class="jxr_string">"depth"</span>, <span class="jxr_string">"type"</span>, 
<a class="jxr_linenumber" name="L6539" href="#L6539">6539</a>             <span class="jxr_string">"parent_if_has_name"</span>, <span class="jxr_string">"parent_then_has_name"</span>,
<a class="jxr_linenumber" name="L6540" href="#L6540">6540</a>             <span class="jxr_string">"id"</span>, <span class="jxr_string">"if_has_role_id"</span>, <span class="jxr_string">"then_has_role_id"</span>,
<a class="jxr_linenumber" name="L6541" href="#L6541">6541</a>             <span class="jxr_string">"parent_role_set_id"</span>),
<a class="jxr_linenumber" name="L6542" href="#L6542">6542</a>         GrouperUtil.toSet(<span class="jxr_string">"if_has_role_name: name of the set role"</span>, 
<a class="jxr_linenumber" name="L6543" href="#L6543">6543</a>             <span class="jxr_string">"then_has_role_name: name of the member role"</span>, 
<a class="jxr_linenumber" name="L6544" href="#L6544">6544</a>             <span class="jxr_string">"depth: number of hops in the directed graph"</span>,
<a class="jxr_linenumber" name="L6545" href="#L6545">6545</a>             <span class="jxr_string">"type: self, immediate, effective"</span>,
<a class="jxr_linenumber" name="L6546" href="#L6546">6546</a>             <span class="jxr_string">"parent_if_has_name: name of the role set record which is the parent ifHas on effective path (everything but last hop)"</span>,
<a class="jxr_linenumber" name="L6547" href="#L6547">6547</a>             <span class="jxr_string">"parent_then_has_name: name of the role set record which is the parent thenHas on effective path (everything but last hop)"</span>,
<a class="jxr_linenumber" name="L6548" href="#L6548">6548</a>             <span class="jxr_string">"id: id of the set record"</span>, <span class="jxr_string">"if_has_role_id: id of the set role"</span>,
<a class="jxr_linenumber" name="L6549" href="#L6549">6549</a>             <span class="jxr_string">"then_has_role_id: id of the member role"</span>, 
<a class="jxr_linenumber" name="L6550" href="#L6550">6550</a>             <span class="jxr_string">"parent_role_set_id: id of the role set record which is the parent on effective path (everything but last hop)"</span>
<a class="jxr_linenumber" name="L6551" href="#L6551">6551</a>         ),
<a class="jxr_linenumber" name="L6552" href="#L6552">6552</a>         <span class="jxr_string">"select ifHas.name as if_has_role_name, thenHas.name as then_has_role_name,  grs.depth,   "</span>
<a class="jxr_linenumber" name="L6553" href="#L6553">6553</a>         + <span class="jxr_string">"grs.type, grParentIfHas.name as parent_if_has_name, grParentThenHas.name as parent_then_has_name,   "</span>
<a class="jxr_linenumber" name="L6554" href="#L6554">6554</a>         + <span class="jxr_string">"grs.id, ifHas.id as if_has_role_id, thenHas.id as then_has_role_id,   "</span>
<a class="jxr_linenumber" name="L6555" href="#L6555">6555</a>         + <span class="jxr_string">"grs.parent_role_set_id  "</span>
<a class="jxr_linenumber" name="L6556" href="#L6556">6556</a>         + <span class="jxr_string">"from grouper_role_set grs,   "</span>
<a class="jxr_linenumber" name="L6557" href="#L6557">6557</a>         + <span class="jxr_string">"grouper_role_set grsParent,   "</span>
<a class="jxr_linenumber" name="L6558" href="#L6558">6558</a>         + <span class="jxr_string">"grouper_groups grParentIfHas,   "</span>
<a class="jxr_linenumber" name="L6559" href="#L6559">6559</a>         + <span class="jxr_string">"grouper_groups grParentThenHas,   "</span>
<a class="jxr_linenumber" name="L6560" href="#L6560">6560</a>         + <span class="jxr_string">"grouper_groups ifHas, grouper_groups thenHas   "</span>
<a class="jxr_linenumber" name="L6561" href="#L6561">6561</a>         + <span class="jxr_string">"where  thenHas.id = grs.then_has_role_id   "</span>
<a class="jxr_linenumber" name="L6562" href="#L6562">6562</a>         + <span class="jxr_string">"and ifHas.id = grs.if_has_role_id   "</span>
<a class="jxr_linenumber" name="L6563" href="#L6563">6563</a>         + <span class="jxr_string">"and grs.parent_role_set_id = grsParent.id   "</span>
<a class="jxr_linenumber" name="L6564" href="#L6564">6564</a>         + <span class="jxr_string">"and grParentIfHas.id = grsParent.if_has_role_id   "</span>
<a class="jxr_linenumber" name="L6565" href="#L6565">6565</a>         + <span class="jxr_string">"and grParentThenHas.id = grsParent.then_has_role_id   "</span>);
<a class="jxr_linenumber" name="L6566" href="#L6566">6566</a> 
<a class="jxr_linenumber" name="L6567" href="#L6567">6567</a>     
<a class="jxr_linenumber" name="L6568" href="#L6568">6568</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_def_name_set_v"</span>, 
<a class="jxr_linenumber" name="L6569" href="#L6569">6569</a>         <span class="jxr_string">"grouper_attr_def_name_set_v: shows all attribute def name set relationships"</span>,
<a class="jxr_linenumber" name="L6570" href="#L6570">6570</a>         GrouperUtil.toSet(<span class="jxr_string">"if_has_attr_def_name_name"</span>, 
<a class="jxr_linenumber" name="L6571" href="#L6571">6571</a>             <span class="jxr_string">"then_has_attr_def_name_name"</span>, 
<a class="jxr_linenumber" name="L6572" href="#L6572">6572</a>             <span class="jxr_string">"depth"</span>, <span class="jxr_string">"type"</span>, 
<a class="jxr_linenumber" name="L6573" href="#L6573">6573</a>             <span class="jxr_string">"parent_if_has_name"</span>, <span class="jxr_string">"parent_then_has_name"</span>,
<a class="jxr_linenumber" name="L6574" href="#L6574">6574</a>             <span class="jxr_string">"id"</span>, <span class="jxr_string">"if_has_attr_def_name_id"</span>, <span class="jxr_string">"then_has_attr_def_name_id"</span>,
<a class="jxr_linenumber" name="L6575" href="#L6575">6575</a>             <span class="jxr_string">"parent_attr_def_name_set_id"</span>),
<a class="jxr_linenumber" name="L6576" href="#L6576">6576</a>         GrouperUtil.toSet(<span class="jxr_string">"if_has_attr_def_name_name: name of the set attribute def name"</span>, 
<a class="jxr_linenumber" name="L6577" href="#L6577">6577</a>             <span class="jxr_string">"then_has_attr_def_name_name: name of the member attribute def name"</span>, 
<a class="jxr_linenumber" name="L6578" href="#L6578">6578</a>             <span class="jxr_string">"depth: number of hops in the directed graph"</span>,
<a class="jxr_linenumber" name="L6579" href="#L6579">6579</a>             <span class="jxr_string">"type: self, immediate, effective"</span>,
<a class="jxr_linenumber" name="L6580" href="#L6580">6580</a>             <span class="jxr_string">"parent_if_has_name: name of the attribute def name set record which is the parent ifHas on effective path (everything but last hop)"</span>,
<a class="jxr_linenumber" name="L6581" href="#L6581">6581</a>             <span class="jxr_string">"parent_then_has_name: name of the attribute def name set record which is the parent thenHas on effective path (everything but last hop)"</span>,
<a class="jxr_linenumber" name="L6582" href="#L6582">6582</a>             <span class="jxr_string">"id: id of the set record"</span>, <span class="jxr_string">"if_has_attr_def_name_id: id of the set attribute def name"</span>,
<a class="jxr_linenumber" name="L6583" href="#L6583">6583</a>             <span class="jxr_string">"then_has_attr_def_name_id: id of the member attribute def name"</span>, 
<a class="jxr_linenumber" name="L6584" href="#L6584">6584</a>             <span class="jxr_string">"parent_attr_def_name_set_id: id of the attribute def name set record which is the parent on effective path (everything but last hop)"</span>
<a class="jxr_linenumber" name="L6585" href="#L6585">6585</a>         ),
<a class="jxr_linenumber" name="L6586" href="#L6586">6586</a>         <span class="jxr_string">"select ifHas.name as if_has_attr_def_name_name, thenHas.name as then_has_attr_def_name_name,  "</span>
<a class="jxr_linenumber" name="L6587" href="#L6587">6587</a>         + <span class="jxr_string">"gadns.depth,  "</span>
<a class="jxr_linenumber" name="L6588" href="#L6588">6588</a>         + <span class="jxr_string">"gadns.type, gadnParentIfHas.name as parent_if_has_name, gadnParentThenHas.name as parent_then_has_name,  "</span>
<a class="jxr_linenumber" name="L6589" href="#L6589">6589</a>         + <span class="jxr_string">"gadns.id,  "</span>
<a class="jxr_linenumber" name="L6590" href="#L6590">6590</a>         + <span class="jxr_string">"ifHas.id as if_has_attr_def_name_id, thenHas.id as then_has_attr_def_name_id,  "</span>
<a class="jxr_linenumber" name="L6591" href="#L6591">6591</a>         + <span class="jxr_string">"gadns.parent_attr_def_name_set_id "</span>
<a class="jxr_linenumber" name="L6592" href="#L6592">6592</a>         + <span class="jxr_string">"from grouper_attribute_def_name_set gadns,  "</span>
<a class="jxr_linenumber" name="L6593" href="#L6593">6593</a>         + <span class="jxr_string">"grouper_attribute_def_name_set gadnsParent,  "</span>
<a class="jxr_linenumber" name="L6594" href="#L6594">6594</a>         + <span class="jxr_string">"grouper_attribute_def_name gadnParentIfHas,  "</span>
<a class="jxr_linenumber" name="L6595" href="#L6595">6595</a>         + <span class="jxr_string">"grouper_attribute_def_name gadnParentThenHas,  "</span>
<a class="jxr_linenumber" name="L6596" href="#L6596">6596</a>         + <span class="jxr_string">"grouper_attribute_def_name ifHas, grouper_attribute_def_name thenHas  "</span>
<a class="jxr_linenumber" name="L6597" href="#L6597">6597</a>         + <span class="jxr_string">"where  thenHas.id = gadns.then_has_attribute_def_name_id  "</span>
<a class="jxr_linenumber" name="L6598" href="#L6598">6598</a>         + <span class="jxr_string">"and ifHas.id = gadns.if_has_attribute_def_name_id  "</span>
<a class="jxr_linenumber" name="L6599" href="#L6599">6599</a>         + <span class="jxr_string">"and gadns.parent_attr_def_name_set_id = gadnsParent.id  "</span>
<a class="jxr_linenumber" name="L6600" href="#L6600">6600</a>         + <span class="jxr_string">"and gadnParentIfHas.id = gadnsParent.if_has_attribute_def_name_id  "</span>
<a class="jxr_linenumber" name="L6601" href="#L6601">6601</a>         + <span class="jxr_string">"and gadnParentThenHas.id = gadnsParent.then_has_attribute_def_name_id  "</span>);
<a class="jxr_linenumber" name="L6602" href="#L6602">6602</a> 
<a class="jxr_linenumber" name="L6603" href="#L6603">6603</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_assn_action_set_v"</span>, 
<a class="jxr_linenumber" name="L6604" href="#L6604">6604</a>         <span class="jxr_string">"grouper_attr_assn_action_set_v: shows all action set relationships"</span>,
<a class="jxr_linenumber" name="L6605" href="#L6605">6605</a>         GrouperUtil.toSet(<span class="jxr_string">"if_has_attr_assn_action_name"</span>, 
<a class="jxr_linenumber" name="L6606" href="#L6606">6606</a>             <span class="jxr_string">"then_has_attr_assn_action_name"</span>, 
<a class="jxr_linenumber" name="L6607" href="#L6607">6607</a>             <span class="jxr_string">"depth"</span>, <span class="jxr_string">"type"</span>, 
<a class="jxr_linenumber" name="L6608" href="#L6608">6608</a>             <span class="jxr_string">"parent_if_has_name"</span>, <span class="jxr_string">"parent_then_has_name"</span>,
<a class="jxr_linenumber" name="L6609" href="#L6609">6609</a>             <span class="jxr_string">"id"</span>, <span class="jxr_string">"if_has_attr_assn_action_id"</span>, <span class="jxr_string">"then_has_attr_assn_action_id"</span>,
<a class="jxr_linenumber" name="L6610" href="#L6610">6610</a>             <span class="jxr_string">"parent_attr_assn_action_id"</span>),
<a class="jxr_linenumber" name="L6611" href="#L6611">6611</a>         GrouperUtil.toSet(<span class="jxr_string">"if_has_attr_assn_action_name: name of the set attribute action"</span>, 
<a class="jxr_linenumber" name="L6612" href="#L6612">6612</a>             <span class="jxr_string">"then_has_attr_assn_action_name: name of the member attribute action"</span>, 
<a class="jxr_linenumber" name="L6613" href="#L6613">6613</a>             <span class="jxr_string">"depth: number of hops in the directed graph"</span>,
<a class="jxr_linenumber" name="L6614" href="#L6614">6614</a>             <span class="jxr_string">"type: self, immediate, effective"</span>,
<a class="jxr_linenumber" name="L6615" href="#L6615">6615</a>             <span class="jxr_string">"parent_if_has_name: name of the attribute def name set record which is the parent ifHas on effective path (everything but last hop)"</span>,
<a class="jxr_linenumber" name="L6616" href="#L6616">6616</a>             <span class="jxr_string">"parent_then_has_name: name of the attribute def name set record which is the parent thenHas on effective path (everything but last hop)"</span>,
<a class="jxr_linenumber" name="L6617" href="#L6617">6617</a>             <span class="jxr_string">"id: id of the set record"</span>, <span class="jxr_string">"if_has_attr_assn_action_id: id of the set attribute assign name"</span>,
<a class="jxr_linenumber" name="L6618" href="#L6618">6618</a>             <span class="jxr_string">"then_has_attr_assn_action_id: id of the member attribute action"</span>, 
<a class="jxr_linenumber" name="L6619" href="#L6619">6619</a>             <span class="jxr_string">"parent_attr_assn_action_id: id of the attribute action set record which is the parent on effective path (everything but last hop)"</span>
<a class="jxr_linenumber" name="L6620" href="#L6620">6620</a>         ),
<a class="jxr_linenumber" name="L6621" href="#L6621">6621</a>         <span class="jxr_string">"select ifHas.name as if_has_attr_assn_action_name , thenHas.name as then_has_attr_assn_action_name,   "</span>
<a class="jxr_linenumber" name="L6622" href="#L6622">6622</a>         + <span class="jxr_string">"gaaas.depth,   "</span>
<a class="jxr_linenumber" name="L6623" href="#L6623">6623</a>         + <span class="jxr_string">"gaaas.type, gaaaParentIfHas.name as parent_if_has_name, gaaaParentThenHas.name as parent_then_has_name,   "</span>
<a class="jxr_linenumber" name="L6624" href="#L6624">6624</a>         + <span class="jxr_string">"gaaas.id,   "</span>
<a class="jxr_linenumber" name="L6625" href="#L6625">6625</a>         + <span class="jxr_string">"ifHas.id as if_has_attr_assn_action_id, thenHas.id as then_has_attr_assn_action_id,   "</span>
<a class="jxr_linenumber" name="L6626" href="#L6626">6626</a>         + <span class="jxr_string">"gaaas.parent_attr_assn_action_id  "</span>
<a class="jxr_linenumber" name="L6627" href="#L6627">6627</a>         + <span class="jxr_string">"from grouper_attr_assign_action_set gaaas,   "</span>
<a class="jxr_linenumber" name="L6628" href="#L6628">6628</a>         + <span class="jxr_string">"grouper_attr_assign_action_set gaaasParent,   "</span>
<a class="jxr_linenumber" name="L6629" href="#L6629">6629</a>         + <span class="jxr_string">"grouper_attr_assign_action gaaaParentIfHas,   "</span>
<a class="jxr_linenumber" name="L6630" href="#L6630">6630</a>         + <span class="jxr_string">"grouper_attr_assign_action gaaaParentThenHas,   "</span>
<a class="jxr_linenumber" name="L6631" href="#L6631">6631</a>         + <span class="jxr_string">"grouper_attr_assign_action ifHas, grouper_attr_assign_action thenHas   "</span>
<a class="jxr_linenumber" name="L6632" href="#L6632">6632</a>         + <span class="jxr_string">"where  thenHas.id = gaaas.then_has_attr_assn_action_id   "</span>
<a class="jxr_linenumber" name="L6633" href="#L6633">6633</a>         + <span class="jxr_string">"and ifHas.id = gaaas.if_has_attr_assn_action_id   "</span>
<a class="jxr_linenumber" name="L6634" href="#L6634">6634</a>         + <span class="jxr_string">"and gaaas.parent_attr_assn_action_id = gaaasParent.id   "</span>
<a class="jxr_linenumber" name="L6635" href="#L6635">6635</a>         + <span class="jxr_string">"and gaaaParentIfHas.id = gaaasParent.if_has_attr_assn_action_id   "</span>
<a class="jxr_linenumber" name="L6636" href="#L6636">6636</a>         + <span class="jxr_string">"and gaaaParentThenHas.id = gaaasParent.then_has_attr_assn_action_id   "</span>);
<a class="jxr_linenumber" name="L6637" href="#L6637">6637</a>     
<a class="jxr_linenumber" name="L6638" href="#L6638">6638</a> 
<a class="jxr_linenumber" name="L6639" href="#L6639">6639</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_group_v"</span>, 
<a class="jxr_linenumber" name="L6640" href="#L6640">6640</a>         <span class="jxr_string">"grouper_attr_asn_group_v: attribute assigned to a group, with related columns"</span>,
<a class="jxr_linenumber" name="L6641" href="#L6641">6641</a>         GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L6642" href="#L6642">6642</a>           <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L6643" href="#L6643">6643</a>           <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L6644" href="#L6644">6644</a>           <span class="jxr_string">"group_display_name"</span>,
<a class="jxr_linenumber" name="L6645" href="#L6645">6645</a>           <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L6646" href="#L6646">6646</a>           <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L6647" href="#L6647">6647</a>           <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L6648" href="#L6648">6648</a>           <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L6649" href="#L6649">6649</a>           <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L6650" href="#L6650">6650</a>           <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L6651" href="#L6651">6651</a>           <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L6652" href="#L6652">6652</a>           <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L6653" href="#L6653">6653</a>           <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L6654" href="#L6654">6654</a>           <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L6655" href="#L6655">6655</a>           <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L6656" href="#L6656">6656</a>           <span class="jxr_string">"action_id"</span>
<a class="jxr_linenumber" name="L6657" href="#L6657">6657</a>         ),
<a class="jxr_linenumber" name="L6658" href="#L6658">6658</a>         GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6659" href="#L6659">6659</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L6660" href="#L6660">6660</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L6661" href="#L6661">6661</a>             <span class="jxr_string">"group_display_name: display name of the group assigned an attribute"</span>,
<a class="jxr_linenumber" name="L6662" href="#L6662">6662</a>             <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L6663" href="#L6663">6663</a>             <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L6664" href="#L6664">6664</a>             <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6665" href="#L6665">6665</a>             <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L6666" href="#L6666">6666</a>             <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L6667" href="#L6667">6667</a>             <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L6668" href="#L6668">6668</a>             <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L6669" href="#L6669">6669</a>             <span class="jxr_string">"group_id: group id of the group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6670" href="#L6670">6670</a>             <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6671" href="#L6671">6671</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L6672" href="#L6672">6672</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L6673" href="#L6673">6673</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>
<a class="jxr_linenumber" name="L6674" href="#L6674">6674</a>         ),
<a class="jxr_linenumber" name="L6675" href="#L6675">6675</a>         <span class="jxr_string">"select gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L6676" href="#L6676">6676</a>         <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L6677" href="#L6677">6677</a>         <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L6678" href="#L6678">6678</a>         + <span class="jxr_string">"gg.display_name as group_display_name, "</span>
<a class="jxr_linenumber" name="L6679" href="#L6679">6679</a>         + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L6680" href="#L6680">6680</a>         + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L6681" href="#L6681">6681</a>         + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L6682" href="#L6682">6682</a>         + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L6683" href="#L6683">6683</a>         + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L6684" href="#L6684">6684</a>         + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L6685" href="#L6685">6685</a>         + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L6686" href="#L6686">6686</a>         + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L6687" href="#L6687">6687</a>         + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L6688" href="#L6688">6688</a>         + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L6689" href="#L6689">6689</a>         + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L6690" href="#L6690">6690</a>         + <span class="jxr_string">"gaaa.id as action_id "</span>
<a class="jxr_linenumber" name="L6691" href="#L6691">6691</a>         + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_groups gg, "</span>
<a class="jxr_linenumber" name="L6692" href="#L6692">6692</a>         + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_attr_assign_action gaaa  "</span>
<a class="jxr_linenumber" name="L6693" href="#L6693">6693</a>         + <span class="jxr_string">"where gaa.owner_group_id = gg.id "</span>
<a class="jxr_linenumber" name="L6694" href="#L6694">6694</a>         + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L6695" href="#L6695">6695</a>         + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L6696" href="#L6696">6696</a>         + <span class="jxr_string">"and gaa.owner_member_id is null "</span>
<a class="jxr_linenumber" name="L6697" href="#L6697">6697</a>         + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L6698" href="#L6698">6698</a> 
<a class="jxr_linenumber" name="L6699" href="#L6699">6699</a> 
<a class="jxr_linenumber" name="L6700" href="#L6700">6700</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_efmship_v"</span>, 
<a class="jxr_linenumber" name="L6701" href="#L6701">6701</a>         <span class="jxr_string">"grouper_attr_asn_efmship_v: attribute assigned to an effective membership"</span>,
<a class="jxr_linenumber" name="L6702" href="#L6702">6702</a>         GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L6703" href="#L6703">6703</a>           <span class="jxr_string">"subject_source_id"</span>,
<a class="jxr_linenumber" name="L6704" href="#L6704">6704</a>           <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L6705" href="#L6705">6705</a>           <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L6706" href="#L6706">6706</a>           <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L6707" href="#L6707">6707</a>           <span class="jxr_string">"group_display_name"</span>,
<a class="jxr_linenumber" name="L6708" href="#L6708">6708</a>           <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L6709" href="#L6709">6709</a>           <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L6710" href="#L6710">6710</a>           <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L6711" href="#L6711">6711</a>           <span class="jxr_string">"list_name"</span>,
<a class="jxr_linenumber" name="L6712" href="#L6712">6712</a>           <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L6713" href="#L6713">6713</a>           <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L6714" href="#L6714">6714</a>           <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L6715" href="#L6715">6715</a>           <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L6716" href="#L6716">6716</a>           <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L6717" href="#L6717">6717</a>           <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L6718" href="#L6718">6718</a>           <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L6719" href="#L6719">6719</a>           <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L6720" href="#L6720">6720</a>           <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L6721" href="#L6721">6721</a>           <span class="jxr_string">"action_id"</span>
<a class="jxr_linenumber" name="L6722" href="#L6722">6722</a>         ),
<a class="jxr_linenumber" name="L6723" href="#L6723">6723</a>         GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6724" href="#L6724">6724</a>             <span class="jxr_string">"subject_source_id: source id of the subject being assigned"</span>,
<a class="jxr_linenumber" name="L6725" href="#L6725">6725</a>             <span class="jxr_string">"subject_id: subject id of the subject being assigned"</span>,
<a class="jxr_linenumber" name="L6726" href="#L6726">6726</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L6727" href="#L6727">6727</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L6728" href="#L6728">6728</a>             <span class="jxr_string">"group_display_name: display name of the group assigned an attribute"</span>,
<a class="jxr_linenumber" name="L6729" href="#L6729">6729</a>             <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L6730" href="#L6730">6730</a>             <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L6731" href="#L6731">6731</a>             <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6732" href="#L6732">6732</a>             <span class="jxr_string">"list_name: name of the membership list for this effective membership"</span>,
<a class="jxr_linenumber" name="L6733" href="#L6733">6733</a>             <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L6734" href="#L6734">6734</a>             <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L6735" href="#L6735">6735</a>             <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L6736" href="#L6736">6736</a>             <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L6737" href="#L6737">6737</a>             <span class="jxr_string">"group_id: group id of the group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6738" href="#L6738">6738</a>             <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6739" href="#L6739">6739</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L6740" href="#L6740">6740</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L6741" href="#L6741">6741</a>             <span class="jxr_string">"member_id: id of the member assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6742" href="#L6742">6742</a>             <span class="jxr_string">"action_id: attribute assign action id"</span>
<a class="jxr_linenumber" name="L6743" href="#L6743">6743</a>         ),
<a class="jxr_linenumber" name="L6744" href="#L6744">6744</a>         <span class="jxr_string">"select distinct gg.name as group_name, "</span>
<a class="jxr_linenumber" name="L6745" href="#L6745">6745</a>         + <span class="jxr_string">"gm.subject_source as subject_source_id, "</span>
<a class="jxr_linenumber" name="L6746" href="#L6746">6746</a>         + <span class="jxr_string">"gm.subject_id, "</span>
<a class="jxr_linenumber" name="L6747" href="#L6747">6747</a>         + <span class="jxr_string">"gaaa.name as action, "</span>
<a class="jxr_linenumber" name="L6748" href="#L6748">6748</a>         + <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L6749" href="#L6749">6749</a>         + <span class="jxr_string">"gg.display_name as group_display_name, "</span>
<a class="jxr_linenumber" name="L6750" href="#L6750">6750</a>         + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L6751" href="#L6751">6751</a>         + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L6752" href="#L6752">6752</a>         + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L6753" href="#L6753">6753</a>         + <span class="jxr_string">"gf.name as list_name, "</span>
<a class="jxr_linenumber" name="L6754" href="#L6754">6754</a>         + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L6755" href="#L6755">6755</a>         + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L6756" href="#L6756">6756</a>         + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L6757" href="#L6757">6757</a>         + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L6758" href="#L6758">6758</a>         + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L6759" href="#L6759">6759</a>         + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L6760" href="#L6760">6760</a>         + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L6761" href="#L6761">6761</a>         + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L6762" href="#L6762">6762</a>         + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L6763" href="#L6763">6763</a>         + <span class="jxr_string">"gaaa.id as action_id "</span>
<a class="jxr_linenumber" name="L6764" href="#L6764">6764</a>         + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_memberships_all_v gmav, "</span>
<a class="jxr_linenumber" name="L6765" href="#L6765">6765</a>         + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, "</span>
<a class="jxr_linenumber" name="L6766" href="#L6766">6766</a>         + <span class="jxr_string">"grouper_groups gg, grouper_fields gf, grouper_members gm, grouper_attr_assign_action gaaa  "</span>
<a class="jxr_linenumber" name="L6767" href="#L6767">6767</a>         + <span class="jxr_string">"where gaa.owner_group_id = gmav.owner_group_id "</span>
<a class="jxr_linenumber" name="L6768" href="#L6768">6768</a>         + <span class="jxr_string">"and gaa.owner_member_id = gmav.member_id "</span>
<a class="jxr_linenumber" name="L6769" href="#L6769">6769</a>         + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L6770" href="#L6770">6770</a>         + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L6771" href="#L6771">6771</a>         + <span class="jxr_string">"and gmav.immediate_mship_enabled = 'T' "</span>
<a class="jxr_linenumber" name="L6772" href="#L6772">6772</a>         + <span class="jxr_string">"and gmav.owner_group_id = gg.id "</span>
<a class="jxr_linenumber" name="L6773" href="#L6773">6773</a>         + <span class="jxr_string">"and gmav.field_id = gf.id "</span>
<a class="jxr_linenumber" name="L6774" href="#L6774">6774</a>         + <span class="jxr_string">"and gf.type = 'list' "</span>
<a class="jxr_linenumber" name="L6775" href="#L6775">6775</a>         + <span class="jxr_string">"and gmav.member_id = gm.id "</span>
<a class="jxr_linenumber" name="L6776" href="#L6776">6776</a>         + <span class="jxr_string">"and gaa.owner_member_id is not null "</span>
<a class="jxr_linenumber" name="L6777" href="#L6777">6777</a>         + <span class="jxr_string">"and gaa.owner_group_id is not null "</span>
<a class="jxr_linenumber" name="L6778" href="#L6778">6778</a>         + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L6779" href="#L6779">6779</a> 
<a class="jxr_linenumber" name="L6780" href="#L6780">6780</a>     
<a class="jxr_linenumber" name="L6781" href="#L6781">6781</a> 
<a class="jxr_linenumber" name="L6782" href="#L6782">6782</a>     
<a class="jxr_linenumber" name="L6783" href="#L6783">6783</a> 
<a class="jxr_linenumber" name="L6784" href="#L6784">6784</a>     
<a class="jxr_linenumber" name="L6785" href="#L6785">6785</a> 
<a class="jxr_linenumber" name="L6786" href="#L6786">6786</a>     
<a class="jxr_linenumber" name="L6787" href="#L6787">6787</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_stem_v"</span>, 
<a class="jxr_linenumber" name="L6788" href="#L6788">6788</a>         <span class="jxr_string">"grouper_attr_asn_stem_v: attribute assigned to a stem and related cols"</span>,
<a class="jxr_linenumber" name="L6789" href="#L6789">6789</a>         GrouperUtil.toSet(<span class="jxr_string">"stem_name"</span>,
<a class="jxr_linenumber" name="L6790" href="#L6790">6790</a>             <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L6791" href="#L6791">6791</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L6792" href="#L6792">6792</a>             <span class="jxr_string">"stem_display_name"</span>,
<a class="jxr_linenumber" name="L6793" href="#L6793">6793</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L6794" href="#L6794">6794</a>             <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L6795" href="#L6795">6795</a>             <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L6796" href="#L6796">6796</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L6797" href="#L6797">6797</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L6798" href="#L6798">6798</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L6799" href="#L6799">6799</a>             <span class="jxr_string">"stem_id"</span>,
<a class="jxr_linenumber" name="L6800" href="#L6800">6800</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L6801" href="#L6801">6801</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L6802" href="#L6802">6802</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L6803" href="#L6803">6803</a>             <span class="jxr_string">"action_id"</span>
<a class="jxr_linenumber" name="L6804" href="#L6804">6804</a>         ),
<a class="jxr_linenumber" name="L6805" href="#L6805">6805</a>         GrouperUtil.toSet(<span class="jxr_string">"stem_name: name of stem assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6806" href="#L6806">6806</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L6807" href="#L6807">6807</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L6808" href="#L6808">6808</a>             <span class="jxr_string">"stem_display_name: display name of the stem assigned an attribute"</span>,
<a class="jxr_linenumber" name="L6809" href="#L6809">6809</a>             <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L6810" href="#L6810">6810</a>             <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L6811" href="#L6811">6811</a>             <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6812" href="#L6812">6812</a>             <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L6813" href="#L6813">6813</a>             <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L6814" href="#L6814">6814</a>             <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L6815" href="#L6815">6815</a>             <span class="jxr_string">"stem_id: stem id of the stem assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6816" href="#L6816">6816</a>             <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6817" href="#L6817">6817</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L6818" href="#L6818">6818</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L6819" href="#L6819">6819</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>
<a class="jxr_linenumber" name="L6820" href="#L6820">6820</a>         ),
<a class="jxr_linenumber" name="L6821" href="#L6821">6821</a>         <span class="jxr_string">"select gs.name as stem_name, "</span> +
<a class="jxr_linenumber" name="L6822" href="#L6822">6822</a>         <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L6823" href="#L6823">6823</a>         <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L6824" href="#L6824">6824</a>         + <span class="jxr_string">"gs.display_name as stem_display_name, "</span>
<a class="jxr_linenumber" name="L6825" href="#L6825">6825</a>         + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L6826" href="#L6826">6826</a>         + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L6827" href="#L6827">6827</a>         + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L6828" href="#L6828">6828</a>         + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L6829" href="#L6829">6829</a>         + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L6830" href="#L6830">6830</a>         + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L6831" href="#L6831">6831</a>         + <span class="jxr_string">"gs.id as stem_id, "</span>
<a class="jxr_linenumber" name="L6832" href="#L6832">6832</a>         + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L6833" href="#L6833">6833</a>         + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L6834" href="#L6834">6834</a>         + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L6835" href="#L6835">6835</a>         + <span class="jxr_string">"gaaa.id as action_id "</span>
<a class="jxr_linenumber" name="L6836" href="#L6836">6836</a>         + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_stems gs, "</span>
<a class="jxr_linenumber" name="L6837" href="#L6837">6837</a>         + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_attr_assign_action gaaa  "</span>
<a class="jxr_linenumber" name="L6838" href="#L6838">6838</a>         + <span class="jxr_string">"where gaa.owner_stem_id = gs.id "</span>
<a class="jxr_linenumber" name="L6839" href="#L6839">6839</a>         + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L6840" href="#L6840">6840</a>         + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L6841" href="#L6841">6841</a>         + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L6842" href="#L6842">6842</a> 
<a class="jxr_linenumber" name="L6843" href="#L6843">6843</a>     
<a class="jxr_linenumber" name="L6844" href="#L6844">6844</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_member_v"</span>, 
<a class="jxr_linenumber" name="L6845" href="#L6845">6845</a>         <span class="jxr_string">"grouper_attr_asn_member_v: attribute assigned to a member and related cols"</span>,
<a class="jxr_linenumber" name="L6846" href="#L6846">6846</a>         GrouperUtil.toSet(<span class="jxr_string">"source_id"</span>, <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L6847" href="#L6847">6847</a>             <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L6848" href="#L6848">6848</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L6849" href="#L6849">6849</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L6850" href="#L6850">6850</a>             <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L6851" href="#L6851">6851</a>             <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L6852" href="#L6852">6852</a>             <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L6853" href="#L6853">6853</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L6854" href="#L6854">6854</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L6855" href="#L6855">6855</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L6856" href="#L6856">6856</a>             <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L6857" href="#L6857">6857</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L6858" href="#L6858">6858</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L6859" href="#L6859">6859</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L6860" href="#L6860">6860</a>             <span class="jxr_string">"action_id"</span>
<a class="jxr_linenumber" name="L6861" href="#L6861">6861</a>         ),
<a class="jxr_linenumber" name="L6862" href="#L6862">6862</a>         GrouperUtil.toSet(<span class="jxr_string">"source_id: source of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L6863" href="#L6863">6863</a>             <span class="jxr_string">"subject_id: subject_id of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L6864" href="#L6864">6864</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L6865" href="#L6865">6865</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L6866" href="#L6866">6866</a>             <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L6867" href="#L6867">6867</a>             <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L6868" href="#L6868">6868</a>             <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6869" href="#L6869">6869</a>             <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L6870" href="#L6870">6870</a>             <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L6871" href="#L6871">6871</a>             <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L6872" href="#L6872">6872</a>             <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L6873" href="#L6873">6873</a>             <span class="jxr_string">"member_id: member id of the member assigned the attribute (this is an internal grouper uuid)"</span>,
<a class="jxr_linenumber" name="L6874" href="#L6874">6874</a>             <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6875" href="#L6875">6875</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L6876" href="#L6876">6876</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L6877" href="#L6877">6877</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>
<a class="jxr_linenumber" name="L6878" href="#L6878">6878</a>         ),
<a class="jxr_linenumber" name="L6879" href="#L6879">6879</a>         <span class="jxr_string">"select gm.subject_source as source_id, gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L6880" href="#L6880">6880</a>         <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L6881" href="#L6881">6881</a>         <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L6882" href="#L6882">6882</a>         + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L6883" href="#L6883">6883</a>         + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L6884" href="#L6884">6884</a>         + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L6885" href="#L6885">6885</a>         + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L6886" href="#L6886">6886</a>         + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L6887" href="#L6887">6887</a>         + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L6888" href="#L6888">6888</a>         + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L6889" href="#L6889">6889</a>         + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L6890" href="#L6890">6890</a>         + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L6891" href="#L6891">6891</a>         + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L6892" href="#L6892">6892</a>         + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L6893" href="#L6893">6893</a>         + <span class="jxr_string">"gaaa.id as action_id "</span>
<a class="jxr_linenumber" name="L6894" href="#L6894">6894</a>         + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_members gm, "</span>
<a class="jxr_linenumber" name="L6895" href="#L6895">6895</a>         + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, "</span>
<a class="jxr_linenumber" name="L6896" href="#L6896">6896</a>         + <span class="jxr_string">"grouper_attr_assign_action gaaa "</span> 
<a class="jxr_linenumber" name="L6897" href="#L6897">6897</a>         + <span class="jxr_string">"where gaa.owner_member_id = gm.id "</span>
<a class="jxr_linenumber" name="L6898" href="#L6898">6898</a>         + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L6899" href="#L6899">6899</a>         + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L6900" href="#L6900">6900</a>         + <span class="jxr_string">"and gaa.owner_group_id is null "</span> 
<a class="jxr_linenumber" name="L6901" href="#L6901">6901</a>         + <span class="jxr_string">" and gaa.attribute_assign_action_id = gaaa.id"</span>);
<a class="jxr_linenumber" name="L6902" href="#L6902">6902</a> 
<a class="jxr_linenumber" name="L6903" href="#L6903">6903</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_mship_v"</span>, 
<a class="jxr_linenumber" name="L6904" href="#L6904">6904</a>         <span class="jxr_string">"grouper_attr_asn_mship_v: attribute assigned to an immediate memberships, and related cols"</span>,
<a class="jxr_linenumber" name="L6905" href="#L6905">6905</a>         GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L6906" href="#L6906">6906</a>             <span class="jxr_string">"source_id"</span>,
<a class="jxr_linenumber" name="L6907" href="#L6907">6907</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L6908" href="#L6908">6908</a>             <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L6909" href="#L6909">6909</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L6910" href="#L6910">6910</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L6911" href="#L6911">6911</a>             <span class="jxr_string">"list_name"</span>,
<a class="jxr_linenumber" name="L6912" href="#L6912">6912</a>             <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L6913" href="#L6913">6913</a>             <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L6914" href="#L6914">6914</a>             <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L6915" href="#L6915">6915</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L6916" href="#L6916">6916</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L6917" href="#L6917">6917</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L6918" href="#L6918">6918</a>             <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L6919" href="#L6919">6919</a>             <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L6920" href="#L6920">6920</a>             <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L6921" href="#L6921">6921</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L6922" href="#L6922">6922</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L6923" href="#L6923">6923</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L6924" href="#L6924">6924</a>             <span class="jxr_string">"action_id"</span>
<a class="jxr_linenumber" name="L6925" href="#L6925">6925</a>           ),
<a class="jxr_linenumber" name="L6926" href="#L6926">6926</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6927" href="#L6927">6927</a>               <span class="jxr_string">"source_id: source of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L6928" href="#L6928">6928</a>               <span class="jxr_string">"subject_id: subject_id of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L6929" href="#L6929">6929</a>               <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L6930" href="#L6930">6930</a>               <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L6931" href="#L6931">6931</a>               <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L6932" href="#L6932">6932</a>               <span class="jxr_string">"list_name: name of list in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6933" href="#L6933">6933</a>               <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L6934" href="#L6934">6934</a>               <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6935" href="#L6935">6935</a>               <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L6936" href="#L6936">6936</a>               <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L6937" href="#L6937">6937</a>               <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L6938" href="#L6938">6938</a>               <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L6939" href="#L6939">6939</a>               <span class="jxr_string">"group_id: group id of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6940" href="#L6940">6940</a>               <span class="jxr_string">"membership_id: membership id assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6941" href="#L6941">6941</a>               <span class="jxr_string">"member_id: internal grouper member uuid of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6942" href="#L6942">6942</a>               <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6943" href="#L6943">6943</a>               <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L6944" href="#L6944">6944</a>               <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L6945" href="#L6945">6945</a>               <span class="jxr_string">"action_id: id of the attribute assign action"</span>
<a class="jxr_linenumber" name="L6946" href="#L6946">6946</a>           ),
<a class="jxr_linenumber" name="L6947" href="#L6947">6947</a>           <span class="jxr_string">"select gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L6948" href="#L6948">6948</a>           <span class="jxr_string">"gm.subject_source as source_id, "</span> +
<a class="jxr_linenumber" name="L6949" href="#L6949">6949</a>           <span class="jxr_string">"gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L6950" href="#L6950">6950</a>           <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L6951" href="#L6951">6951</a>           <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L6952" href="#L6952">6952</a>           + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L6953" href="#L6953">6953</a>           + <span class="jxr_string">"gf.name as list_name, "</span>
<a class="jxr_linenumber" name="L6954" href="#L6954">6954</a>           + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L6955" href="#L6955">6955</a>           + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L6956" href="#L6956">6956</a>           + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L6957" href="#L6957">6957</a>           + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L6958" href="#L6958">6958</a>           + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L6959" href="#L6959">6959</a>           + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L6960" href="#L6960">6960</a>           + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L6961" href="#L6961">6961</a>           + <span class="jxr_string">"gms.id as membership_id, "</span>
<a class="jxr_linenumber" name="L6962" href="#L6962">6962</a>           + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L6963" href="#L6963">6963</a>           + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L6964" href="#L6964">6964</a>           + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L6965" href="#L6965">6965</a>           + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L6966" href="#L6966">6966</a>           + <span class="jxr_string">"gaaa.id as action_id "</span>
<a class="jxr_linenumber" name="L6967" href="#L6967">6967</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_groups gg, grouper_memberships gms, "</span>
<a class="jxr_linenumber" name="L6968" href="#L6968">6968</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_members gm, grouper_fields gf, "</span>
<a class="jxr_linenumber" name="L6969" href="#L6969">6969</a>           + <span class="jxr_string">"grouper_attr_assign_action gaaa  "</span>
<a class="jxr_linenumber" name="L6970" href="#L6970">6970</a>           + <span class="jxr_string">"where gaa.owner_membership_id = gms.id "</span>
<a class="jxr_linenumber" name="L6971" href="#L6971">6971</a>           + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L6972" href="#L6972">6972</a>           + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L6973" href="#L6973">6973</a>       		+ <span class="jxr_string">" and gms.field_id = gf.id and gms.member_id = gm.id and gms.owner_group_id = gg.id "</span>
<a class="jxr_linenumber" name="L6974" href="#L6974">6974</a>           + <span class="jxr_string">" and gf.type = 'list' and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L6975" href="#L6975">6975</a> 
<a class="jxr_linenumber" name="L6976" href="#L6976">6976</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_attrdef_v"</span>, 
<a class="jxr_linenumber" name="L6977" href="#L6977">6977</a>         <span class="jxr_string">"grouper_attr_asn_attrdef_v: attribute assigned to an attribute definition, and related columns"</span>,
<a class="jxr_linenumber" name="L6978" href="#L6978">6978</a>         GrouperUtil.toSet(<span class="jxr_string">"name_of_attr_def_assigned_to"</span>,
<a class="jxr_linenumber" name="L6979" href="#L6979">6979</a>             <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L6980" href="#L6980">6980</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L6981" href="#L6981">6981</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L6982" href="#L6982">6982</a>             <span class="jxr_string">"name_of_attribute_def_assigned"</span>,
<a class="jxr_linenumber" name="L6983" href="#L6983">6983</a>             <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L6984" href="#L6984">6984</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L6985" href="#L6985">6985</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L6986" href="#L6986">6986</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L6987" href="#L6987">6987</a>             <span class="jxr_string">"id_of_attr_def_assigned_to"</span>,
<a class="jxr_linenumber" name="L6988" href="#L6988">6988</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L6989" href="#L6989">6989</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L6990" href="#L6990">6990</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L6991" href="#L6991">6991</a>             <span class="jxr_string">"action_id"</span>
<a class="jxr_linenumber" name="L6992" href="#L6992">6992</a>           ),
<a class="jxr_linenumber" name="L6993" href="#L6993">6993</a>           GrouperUtil.toSet(<span class="jxr_string">"name_of_attr_def_assigned_to: name of attribute def assigned the attribute"</span>,
<a class="jxr_linenumber" name="L6994" href="#L6994">6994</a>               <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L6995" href="#L6995">6995</a>               <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L6996" href="#L6996">6996</a>               <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L6997" href="#L6997">6997</a>               <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L6998" href="#L6998">6998</a>               <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L6999" href="#L6999">6999</a>               <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7000" href="#L7000">7000</a>               <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7001" href="#L7001">7001</a>               <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7002" href="#L7002">7002</a>               <span class="jxr_string">"id_of_attr_def_assigned_to: attrDef id of the attributeDef assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7003" href="#L7003">7003</a>               <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7004" href="#L7004">7004</a>               <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L7005" href="#L7005">7005</a>               <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L7006" href="#L7006">7006</a>               <span class="jxr_string">"action_id: id of the attribute assign action"</span>
<a class="jxr_linenumber" name="L7007" href="#L7007">7007</a>           ),
<a class="jxr_linenumber" name="L7008" href="#L7008">7008</a>           <span class="jxr_string">"select gad_assigned_to.name as name_of_attr_def_assigned_to, "</span> +
<a class="jxr_linenumber" name="L7009" href="#L7009">7009</a>           <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L7010" href="#L7010">7010</a>           <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L7011" href="#L7011">7011</a>           + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L7012" href="#L7012">7012</a>           + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L7013" href="#L7013">7013</a>           + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L7014" href="#L7014">7014</a>           + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L7015" href="#L7015">7015</a>           + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L7016" href="#L7016">7016</a>           + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L7017" href="#L7017">7017</a>           + <span class="jxr_string">"gad_assigned_to.id as id_of_attr_def_assigned_to, "</span>
<a class="jxr_linenumber" name="L7018" href="#L7018">7018</a>           + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L7019" href="#L7019">7019</a>           + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L7020" href="#L7020">7020</a>           + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L7021" href="#L7021">7021</a>           + <span class="jxr_string">"gaaa.id as action_id "</span>
<a class="jxr_linenumber" name="L7022" href="#L7022">7022</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_attribute_def gad_assigned_to, "</span>
<a class="jxr_linenumber" name="L7023" href="#L7023">7023</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_attr_assign_action gaaa  "</span>
<a class="jxr_linenumber" name="L7024" href="#L7024">7024</a>           + <span class="jxr_string">"where gaa.owner_attribute_def_id = gad_assigned_to.id "</span>
<a class="jxr_linenumber" name="L7025" href="#L7025">7025</a>           + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L7026" href="#L7026">7026</a>           + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L7027" href="#L7027">7027</a>           + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L7028" href="#L7028">7028</a> 
<a class="jxr_linenumber" name="L7029" href="#L7029">7029</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_group_v"</span>, 
<a class="jxr_linenumber" name="L7030" href="#L7030">7030</a>         <span class="jxr_string">"grouper_attr_asn_asn_group_v: attribute assigned to an assignment of attribute to a group, and related cols"</span>,
<a class="jxr_linenumber" name="L7031" href="#L7031">7031</a>         GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L7032" href="#L7032">7032</a>             <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L7033" href="#L7033">7033</a>             <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L7034" href="#L7034">7034</a>             <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L7035" href="#L7035">7035</a>             <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L7036" href="#L7036">7036</a>             <span class="jxr_string">"group_display_name"</span>,
<a class="jxr_linenumber" name="L7037" href="#L7037">7037</a>             <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L7038" href="#L7038">7038</a>             <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L7039" href="#L7039">7039</a>             <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L7040" href="#L7040">7040</a>             <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L7041" href="#L7041">7041</a>             <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L7042" href="#L7042">7042</a>             <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L7043" href="#L7043">7043</a>             <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L7044" href="#L7044">7044</a>             <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L7045" href="#L7045">7045</a>             <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L7046" href="#L7046">7046</a>             <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L7047" href="#L7047">7047</a>             <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L7048" href="#L7048">7048</a>             <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L7049" href="#L7049">7049</a>             <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L7050" href="#L7050">7050</a>             <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L7051" href="#L7051">7051</a>             <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L7052" href="#L7052">7052</a>             <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L7053" href="#L7053">7053</a>             <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L7054" href="#L7054">7054</a>             <span class="jxr_string">"action_id2"</span>
<a class="jxr_linenumber" name="L7055" href="#L7055">7055</a>           ),
<a class="jxr_linenumber" name="L7056" href="#L7056">7056</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7057" href="#L7057">7057</a>               <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7058" href="#L7058">7058</a>               <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7059" href="#L7059">7059</a>               <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7060" href="#L7060">7060</a>               <span class="jxr_string">"attribute_def_name_name2: name of the current attribute definition name which is assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7061" href="#L7061">7061</a>               <span class="jxr_string">"group_display_name: display name of the group assigned an attribute"</span>,
<a class="jxr_linenumber" name="L7062" href="#L7062">7062</a>               <span class="jxr_string">"attribute_def_name_disp_name1: display name of the attribute definition name assigned to the original attribute"</span>,
<a class="jxr_linenumber" name="L7063" href="#L7063">7063</a>               <span class="jxr_string">"attribute_def_name_disp_name2: display name of the attribute definition name assigned to the new attribute"</span>,
<a class="jxr_linenumber" name="L7064" href="#L7064">7064</a>               <span class="jxr_string">"name_of_attribute_def1: name of the attribute definition associated with the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7065" href="#L7065">7065</a>               <span class="jxr_string">"name_of_attribute_def2: name of the attribute definition associated with the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7066" href="#L7066">7066</a>               <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L7067" href="#L7067">7067</a>               <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L7068" href="#L7068">7068</a>               <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7069" href="#L7069">7069</a>               <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7070" href="#L7070">7070</a>               <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7071" href="#L7071">7071</a>               <span class="jxr_string">"group_id: group id of the group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7072" href="#L7072">7072</a>               <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L7073" href="#L7073">7073</a>               <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L7074" href="#L7074">7074</a>               <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7075" href="#L7075">7075</a>               <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7076" href="#L7076">7076</a>               <span class="jxr_string">"attribute_def_id1: id of the original attribute definition assigned to the group"</span>,
<a class="jxr_linenumber" name="L7077" href="#L7077">7077</a>               <span class="jxr_string">"attribute_def_id2: id of the new attribute definition assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7078" href="#L7078">7078</a>               <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L7079" href="#L7079">7079</a>               <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>
<a class="jxr_linenumber" name="L7080" href="#L7080">7080</a>           ),
<a class="jxr_linenumber" name="L7081" href="#L7081">7081</a>           <span class="jxr_string">"select gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L7082" href="#L7082">7082</a>           <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L7083" href="#L7083">7083</a>           <span class="jxr_string">"gadn1.name as attribute_def_name_name1, "</span> +
<a class="jxr_linenumber" name="L7084" href="#L7084">7084</a>           <span class="jxr_string">"gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L7085" href="#L7085">7085</a>           + <span class="jxr_string">"gg.display_name as group_display_name, "</span>
<a class="jxr_linenumber" name="L7086" href="#L7086">7086</a>           + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, "</span>
<a class="jxr_linenumber" name="L7087" href="#L7087">7087</a>           + <span class="jxr_string">"gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L7088" href="#L7088">7088</a>           + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L7089" href="#L7089">7089</a>           + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L7090" href="#L7090">7090</a>           + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L7091" href="#L7091">7091</a>           + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L7092" href="#L7092">7092</a>           + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L7093" href="#L7093">7093</a>           + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L7094" href="#L7094">7094</a>           + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L7095" href="#L7095">7095</a>           + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L7096" href="#L7096">7096</a>           + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L7097" href="#L7097">7097</a>           + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L7098" href="#L7098">7098</a>           + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L7099" href="#L7099">7099</a>           + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L7100" href="#L7100">7100</a>           + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L7101" href="#L7101">7101</a>           + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L7102" href="#L7102">7102</a>           + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L7103" href="#L7103">7103</a>           + <span class="jxr_string">"gaaa2.id as action_id2 "</span>
<a class="jxr_linenumber" name="L7104" href="#L7104">7104</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, grouper_groups gg, "</span>
<a class="jxr_linenumber" name="L7105" href="#L7105">7105</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, grouper_attribute_def gad1, "</span>
<a class="jxr_linenumber" name="L7106" href="#L7106">7106</a>           + <span class="jxr_string">"grouper_attribute_def gad2, grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2   "</span>
<a class="jxr_linenumber" name="L7107" href="#L7107">7107</a>           + <span class="jxr_string">"where gaa1.id = gaa2.owner_attribute_assign_id "</span>
<a class="jxr_linenumber" name="L7108" href="#L7108">7108</a>           + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id "</span>
<a class="jxr_linenumber" name="L7109" href="#L7109">7109</a>           + <span class="jxr_string">"and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L7110" href="#L7110">7110</a>           + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id "</span>
<a class="jxr_linenumber" name="L7111" href="#L7111">7111</a>           + <span class="jxr_string">"and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L7112" href="#L7112">7112</a>           + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> 
<a class="jxr_linenumber" name="L7113" href="#L7113">7113</a>           +	<span class="jxr_string">"and gg.id = gaa1.owner_group_id "</span>
<a class="jxr_linenumber" name="L7114" href="#L7114">7114</a>           + <span class="jxr_string">"and gaa1.owner_member_id is null "</span>
<a class="jxr_linenumber" name="L7115" href="#L7115">7115</a>           + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id"</span>);
<a class="jxr_linenumber" name="L7116" href="#L7116">7116</a> 
<a class="jxr_linenumber" name="L7117" href="#L7117">7117</a> 
<a class="jxr_linenumber" name="L7118" href="#L7118">7118</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_efmship_v"</span>, 
<a class="jxr_linenumber" name="L7119" href="#L7119">7119</a>         <span class="jxr_string">"grouper_attr_asn_asn_efmship_v: attribute assigned to an assignment of an attribute to an effective membership, and related cols"</span>,
<a class="jxr_linenumber" name="L7120" href="#L7120">7120</a>         GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L7121" href="#L7121">7121</a>             <span class="jxr_string">"source_id"</span>,
<a class="jxr_linenumber" name="L7122" href="#L7122">7122</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L7123" href="#L7123">7123</a>             <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L7124" href="#L7124">7124</a>             <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L7125" href="#L7125">7125</a>             <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L7126" href="#L7126">7126</a>             <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L7127" href="#L7127">7127</a>             <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L7128" href="#L7128">7128</a>             <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L7129" href="#L7129">7129</a>             <span class="jxr_string">"list_name"</span>,
<a class="jxr_linenumber" name="L7130" href="#L7130">7130</a>             <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L7131" href="#L7131">7131</a>             <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L7132" href="#L7132">7132</a>             <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L7133" href="#L7133">7133</a>             <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L7134" href="#L7134">7134</a>             <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L7135" href="#L7135">7135</a>             <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L7136" href="#L7136">7136</a>             <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L7137" href="#L7137">7137</a>             <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L7138" href="#L7138">7138</a>             <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L7139" href="#L7139">7139</a>             <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L7140" href="#L7140">7140</a>             <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L7141" href="#L7141">7141</a>             <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L7142" href="#L7142">7142</a>             <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L7143" href="#L7143">7143</a>             <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L7144" href="#L7144">7144</a>             <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L7145" href="#L7145">7145</a>             <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L7146" href="#L7146">7146</a>             <span class="jxr_string">"action_id2"</span>
<a class="jxr_linenumber" name="L7147" href="#L7147">7147</a>           ),
<a class="jxr_linenumber" name="L7148" href="#L7148">7148</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7149" href="#L7149">7149</a>               <span class="jxr_string">"source_id: source of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L7150" href="#L7150">7150</a>               <span class="jxr_string">"subject_id: subject_id of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L7151" href="#L7151">7151</a>               <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7152" href="#L7152">7152</a>               <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7153" href="#L7153">7153</a>               <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7154" href="#L7154">7154</a>               <span class="jxr_string">"attribute_def_name_name2: name of the new attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7155" href="#L7155">7155</a>               <span class="jxr_string">"attribute_def_name_disp_name1: display name of the original attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7156" href="#L7156">7156</a>               <span class="jxr_string">"attribute_def_name_disp_name2: display name of the new attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7157" href="#L7157">7157</a>               <span class="jxr_string">"list_name: name of list in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7158" href="#L7158">7158</a>               <span class="jxr_string">"name_of_attribute_def1: name of the original attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7159" href="#L7159">7159</a>               <span class="jxr_string">"name_of_attribute_def2: name of the new attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7160" href="#L7160">7160</a>               <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment"</span>,
<a class="jxr_linenumber" name="L7161" href="#L7161">7161</a>               <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment"</span>,
<a class="jxr_linenumber" name="L7162" href="#L7162">7162</a>               <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7163" href="#L7163">7163</a>               <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7164" href="#L7164">7164</a>               <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7165" href="#L7165">7165</a>               <span class="jxr_string">"group_id: group id of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7166" href="#L7166">7166</a>               <span class="jxr_string">"member_id: internal grouper member uuid of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7167" href="#L7167">7167</a>               <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment"</span>,
<a class="jxr_linenumber" name="L7168" href="#L7168">7168</a>               <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment"</span>,
<a class="jxr_linenumber" name="L7169" href="#L7169">7169</a>               <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name"</span>,
<a class="jxr_linenumber" name="L7170" href="#L7170">7170</a>               <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name"</span>,
<a class="jxr_linenumber" name="L7171" href="#L7171">7171</a>               <span class="jxr_string">"attribute_def_id1: id of the original attribute definition"</span>,
<a class="jxr_linenumber" name="L7172" href="#L7172">7172</a>               <span class="jxr_string">"attribute_def_id2: id of the new attribute definition"</span>,
<a class="jxr_linenumber" name="L7173" href="#L7173">7173</a>               <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L7174" href="#L7174">7174</a>               <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>
<a class="jxr_linenumber" name="L7175" href="#L7175">7175</a>           ),
<a class="jxr_linenumber" name="L7176" href="#L7176">7176</a>           <span class="jxr_string">"select distinct gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L7177" href="#L7177">7177</a>           <span class="jxr_string">"gm.subject_source as source_id, "</span> +
<a class="jxr_linenumber" name="L7178" href="#L7178">7178</a>           <span class="jxr_string">"gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L7179" href="#L7179">7179</a>           <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L7180" href="#L7180">7180</a>           <span class="jxr_string">"gadn1.name as attribute_def_name_name1, gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L7181" href="#L7181">7181</a>           + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L7182" href="#L7182">7182</a>           + <span class="jxr_string">"gf.name as list_name, "</span>
<a class="jxr_linenumber" name="L7183" href="#L7183">7183</a>           + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L7184" href="#L7184">7184</a>           + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L7185" href="#L7185">7185</a>           + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L7186" href="#L7186">7186</a>           + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L7187" href="#L7187">7187</a>           + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L7188" href="#L7188">7188</a>           + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L7189" href="#L7189">7189</a>           + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L7190" href="#L7190">7190</a>           + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L7191" href="#L7191">7191</a>           + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L7192" href="#L7192">7192</a>           + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L7193" href="#L7193">7193</a>           + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L7194" href="#L7194">7194</a>           + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L7195" href="#L7195">7195</a>           + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L7196" href="#L7196">7196</a>           + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L7197" href="#L7197">7197</a>           + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L7198" href="#L7198">7198</a>           + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L7199" href="#L7199">7199</a>           + <span class="jxr_string">"gaaa2.id as action_id2 "</span>
<a class="jxr_linenumber" name="L7200" href="#L7200">7200</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, "</span> +
<a class="jxr_linenumber" name="L7201" href="#L7201">7201</a>               <span class="jxr_string">"grouper_groups gg, grouper_memberships_all_v gmav, "</span>
<a class="jxr_linenumber" name="L7202" href="#L7202">7202</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, "</span> +
<a class="jxr_linenumber" name="L7203" href="#L7203">7203</a>               <span class="jxr_string">"grouper_attribute_def gad1, grouper_attribute_def gad2, grouper_members gm, grouper_fields gf, "</span>
<a class="jxr_linenumber" name="L7204" href="#L7204">7204</a>           + <span class="jxr_string">"grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2 "</span>
<a class="jxr_linenumber" name="L7205" href="#L7205">7205</a>           + <span class="jxr_string">"where gaa1.owner_member_id = gmav.member_id and gaa1.owner_group_id = gmav.owner_group_id"</span> +
<a class="jxr_linenumber" name="L7206" href="#L7206">7206</a>           		<span class="jxr_string">" and gaa2.owner_attribute_assign_id = gaa1.id  "</span>
<a class="jxr_linenumber" name="L7207" href="#L7207">7207</a>           + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L7208" href="#L7208">7208</a>           + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L7209" href="#L7209">7209</a>           + <span class="jxr_string">"and gaa1.enabled = 'T' and gmav.immediate_mship_enabled = 'T'"</span> +
<a class="jxr_linenumber" name="L7210" href="#L7210">7210</a>               <span class="jxr_string">" and gmav.field_id = gf.id and gmav.member_id = gm.id and gmav.owner_group_id = gg.id"</span> +
<a class="jxr_linenumber" name="L7211" href="#L7211">7211</a>               <span class="jxr_string">" and gf.type = 'list'"</span>
<a class="jxr_linenumber" name="L7212" href="#L7212">7212</a>           + <span class="jxr_string">" and gaa1.owner_member_id is not null "</span>
<a class="jxr_linenumber" name="L7213" href="#L7213">7213</a>           + <span class="jxr_string">" and gaa1.owner_group_id is not null "</span>
<a class="jxr_linenumber" name="L7214" href="#L7214">7214</a>           + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L7215" href="#L7215">7215</a> 
<a class="jxr_linenumber" name="L7216" href="#L7216">7216</a> 
<a class="jxr_linenumber" name="L7217" href="#L7217">7217</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_stem_v"</span>, 
<a class="jxr_linenumber" name="L7218" href="#L7218">7218</a>         <span class="jxr_string">"grouper_attr_asn_asn_stem_v: attribute assigned to an assignment of attribute to a stem, and related cols"</span>,
<a class="jxr_linenumber" name="L7219" href="#L7219">7219</a>         GrouperUtil.toSet(<span class="jxr_string">"stem_name"</span>,
<a class="jxr_linenumber" name="L7220" href="#L7220">7220</a>             <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L7221" href="#L7221">7221</a>             <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L7222" href="#L7222">7222</a>             <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L7223" href="#L7223">7223</a>             <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L7224" href="#L7224">7224</a>             <span class="jxr_string">"stem_display_name"</span>,
<a class="jxr_linenumber" name="L7225" href="#L7225">7225</a>             <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L7226" href="#L7226">7226</a>             <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L7227" href="#L7227">7227</a>             <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L7228" href="#L7228">7228</a>             <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L7229" href="#L7229">7229</a>             <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L7230" href="#L7230">7230</a>             <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L7231" href="#L7231">7231</a>             <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L7232" href="#L7232">7232</a>             <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L7233" href="#L7233">7233</a>             <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L7234" href="#L7234">7234</a>             <span class="jxr_string">"stem_id"</span>,
<a class="jxr_linenumber" name="L7235" href="#L7235">7235</a>             <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L7236" href="#L7236">7236</a>             <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L7237" href="#L7237">7237</a>             <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L7238" href="#L7238">7238</a>             <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L7239" href="#L7239">7239</a>             <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L7240" href="#L7240">7240</a>             <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L7241" href="#L7241">7241</a>             <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L7242" href="#L7242">7242</a>             <span class="jxr_string">"action_id2"</span>
<a class="jxr_linenumber" name="L7243" href="#L7243">7243</a>           ),
<a class="jxr_linenumber" name="L7244" href="#L7244">7244</a>           GrouperUtil.toSet(<span class="jxr_string">"stem_name: name of stem assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7245" href="#L7245">7245</a>               <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7246" href="#L7246">7246</a>               <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7247" href="#L7247">7247</a>               <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7248" href="#L7248">7248</a>               <span class="jxr_string">"attribute_def_name_name2: name of the current attribute definition name which is assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7249" href="#L7249">7249</a>               <span class="jxr_string">"stem_display_name: display name of the stem assigned an attribute"</span>,
<a class="jxr_linenumber" name="L7250" href="#L7250">7250</a>               <span class="jxr_string">"attribute_def_name_disp_name1: display name of the attribute definition name assigned to the original attribute"</span>,
<a class="jxr_linenumber" name="L7251" href="#L7251">7251</a>               <span class="jxr_string">"attribute_def_name_disp_name2: display name of the attribute definition name assigned to the new attribute"</span>,
<a class="jxr_linenumber" name="L7252" href="#L7252">7252</a>               <span class="jxr_string">"name_of_attribute_def1: name of the attribute definition associated with the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7253" href="#L7253">7253</a>               <span class="jxr_string">"name_of_attribute_def2: name of the attribute definition associated with the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7254" href="#L7254">7254</a>               <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L7255" href="#L7255">7255</a>               <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L7256" href="#L7256">7256</a>               <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7257" href="#L7257">7257</a>               <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7258" href="#L7258">7258</a>               <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7259" href="#L7259">7259</a>               <span class="jxr_string">"stem_id: stem id of the stem assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7260" href="#L7260">7260</a>               <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L7261" href="#L7261">7261</a>               <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L7262" href="#L7262">7262</a>               <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7263" href="#L7263">7263</a>               <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7264" href="#L7264">7264</a>               <span class="jxr_string">"attribute_def_id1: id of the original attribute definition assigned to the group"</span>,
<a class="jxr_linenumber" name="L7265" href="#L7265">7265</a>               <span class="jxr_string">"attribute_def_id2: id of the new attribute definition assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7266" href="#L7266">7266</a>               <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L7267" href="#L7267">7267</a>               <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>
<a class="jxr_linenumber" name="L7268" href="#L7268">7268</a>           ),
<a class="jxr_linenumber" name="L7269" href="#L7269">7269</a>           <span class="jxr_string">"select gs.name as stem_name, "</span> +
<a class="jxr_linenumber" name="L7270" href="#L7270">7270</a>           <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L7271" href="#L7271">7271</a>           <span class="jxr_string">"gadn1.name as attribute_def_name_name1, "</span> +
<a class="jxr_linenumber" name="L7272" href="#L7272">7272</a>           <span class="jxr_string">"gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L7273" href="#L7273">7273</a>           + <span class="jxr_string">"gs.display_name as stem_display_name, "</span>
<a class="jxr_linenumber" name="L7274" href="#L7274">7274</a>           + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, "</span>
<a class="jxr_linenumber" name="L7275" href="#L7275">7275</a>           + <span class="jxr_string">"gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L7276" href="#L7276">7276</a>           + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L7277" href="#L7277">7277</a>           + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L7278" href="#L7278">7278</a>           + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L7279" href="#L7279">7279</a>           + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L7280" href="#L7280">7280</a>           + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L7281" href="#L7281">7281</a>           + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L7282" href="#L7282">7282</a>           + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L7283" href="#L7283">7283</a>           + <span class="jxr_string">"gs.id as stem_id, "</span>
<a class="jxr_linenumber" name="L7284" href="#L7284">7284</a>           + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L7285" href="#L7285">7285</a>           + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L7286" href="#L7286">7286</a>           + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L7287" href="#L7287">7287</a>           + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L7288" href="#L7288">7288</a>           + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L7289" href="#L7289">7289</a>           + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L7290" href="#L7290">7290</a>           + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L7291" href="#L7291">7291</a>           + <span class="jxr_string">"gaaa2.id as action_id2 "</span>
<a class="jxr_linenumber" name="L7292" href="#L7292">7292</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, grouper_stems gs, "</span>
<a class="jxr_linenumber" name="L7293" href="#L7293">7293</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, grouper_attribute_def gad1, "</span>
<a class="jxr_linenumber" name="L7294" href="#L7294">7294</a>           + <span class="jxr_string">"grouper_attribute_def gad2, grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2 "</span>
<a class="jxr_linenumber" name="L7295" href="#L7295">7295</a>           + <span class="jxr_string">"where gaa1.id = gaa2.owner_attribute_assign_id "</span>
<a class="jxr_linenumber" name="L7296" href="#L7296">7296</a>           + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id "</span>
<a class="jxr_linenumber" name="L7297" href="#L7297">7297</a>           + <span class="jxr_string">"and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L7298" href="#L7298">7298</a>           + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id "</span>
<a class="jxr_linenumber" name="L7299" href="#L7299">7299</a>           + <span class="jxr_string">"and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L7300" href="#L7300">7300</a>           + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> +
<a class="jxr_linenumber" name="L7301" href="#L7301">7301</a>               <span class="jxr_string">"and gs.id = gaa1.owner_stem_id "</span>
<a class="jxr_linenumber" name="L7302" href="#L7302">7302</a>           + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L7303" href="#L7303">7303</a> 
<a class="jxr_linenumber" name="L7304" href="#L7304">7304</a>     
<a class="jxr_linenumber" name="L7305" href="#L7305">7305</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_member_v"</span>, 
<a class="jxr_linenumber" name="L7306" href="#L7306">7306</a>         <span class="jxr_string">"grouper_attr_asn_asn_member_v: attribute assigned to an assignment of an attribute to a member, and related cols"</span>,
<a class="jxr_linenumber" name="L7307" href="#L7307">7307</a>         GrouperUtil.toSet(<span class="jxr_string">"source_id"</span>, <span class="jxr_string">"subject_id"</span>, 
<a class="jxr_linenumber" name="L7308" href="#L7308">7308</a>             <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L7309" href="#L7309">7309</a>             <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L7310" href="#L7310">7310</a>             <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L7311" href="#L7311">7311</a>             <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L7312" href="#L7312">7312</a>             <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L7313" href="#L7313">7313</a>             <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L7314" href="#L7314">7314</a>             <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L7315" href="#L7315">7315</a>             <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L7316" href="#L7316">7316</a>             <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L7317" href="#L7317">7317</a>             <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L7318" href="#L7318">7318</a>             <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L7319" href="#L7319">7319</a>             <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L7320" href="#L7320">7320</a>             <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L7321" href="#L7321">7321</a>             <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L7322" href="#L7322">7322</a>             <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L7323" href="#L7323">7323</a>             <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L7324" href="#L7324">7324</a>             <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L7325" href="#L7325">7325</a>             <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L7326" href="#L7326">7326</a>             <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L7327" href="#L7327">7327</a>             <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L7328" href="#L7328">7328</a>             <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L7329" href="#L7329">7329</a>             <span class="jxr_string">"action_id2"</span>
<a class="jxr_linenumber" name="L7330" href="#L7330">7330</a> 
<a class="jxr_linenumber" name="L7331" href="#L7331">7331</a>           ),
<a class="jxr_linenumber" name="L7332" href="#L7332">7332</a>           GrouperUtil.toSet(<span class="jxr_string">"source_id: source id of the member assigned the original attribute"</span>,
<a class="jxr_linenumber" name="L7333" href="#L7333">7333</a>               <span class="jxr_string">"subject_id: subject id of the member assigned the original attribute"</span>,
<a class="jxr_linenumber" name="L7334" href="#L7334">7334</a>               <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7335" href="#L7335">7335</a>               <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7336" href="#L7336">7336</a>               <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7337" href="#L7337">7337</a>               <span class="jxr_string">"attribute_def_name_name2: name of the current attribute definition name which is assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7338" href="#L7338">7338</a>               <span class="jxr_string">"attribute_def_name_disp_name1: display name of the attribute definition name assigned to the original attribute"</span>,
<a class="jxr_linenumber" name="L7339" href="#L7339">7339</a>               <span class="jxr_string">"attribute_def_name_disp_name2: display name of the attribute definition name assigned to the new attribute"</span>,
<a class="jxr_linenumber" name="L7340" href="#L7340">7340</a>               <span class="jxr_string">"name_of_attribute_def1: name of the attribute definition associated with the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7341" href="#L7341">7341</a>               <span class="jxr_string">"name_of_attribute_def2: name of the attribute definition associated with the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7342" href="#L7342">7342</a>               <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L7343" href="#L7343">7343</a>               <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L7344" href="#L7344">7344</a>               <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7345" href="#L7345">7345</a>               <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7346" href="#L7346">7346</a>               <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7347" href="#L7347">7347</a>               <span class="jxr_string">"member_id: member id of the member assigned the original attribute"</span>,
<a class="jxr_linenumber" name="L7348" href="#L7348">7348</a>               <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L7349" href="#L7349">7349</a>               <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L7350" href="#L7350">7350</a>               <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7351" href="#L7351">7351</a>               <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7352" href="#L7352">7352</a>               <span class="jxr_string">"attribute_def_id1: id of the original attribute definition assigned to the group"</span>,
<a class="jxr_linenumber" name="L7353" href="#L7353">7353</a>               <span class="jxr_string">"attribute_def_id2: id of the new attribute definition assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7354" href="#L7354">7354</a>               <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L7355" href="#L7355">7355</a>               <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>
<a class="jxr_linenumber" name="L7356" href="#L7356">7356</a>           ),
<a class="jxr_linenumber" name="L7357" href="#L7357">7357</a>           <span class="jxr_string">"select gm.subject_source as source_id, gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L7358" href="#L7358">7358</a>           <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L7359" href="#L7359">7359</a>           <span class="jxr_string">"gadn1.name as attribute_def_name_name1, "</span> +
<a class="jxr_linenumber" name="L7360" href="#L7360">7360</a>           <span class="jxr_string">"gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L7361" href="#L7361">7361</a>           + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, "</span>
<a class="jxr_linenumber" name="L7362" href="#L7362">7362</a>           + <span class="jxr_string">"gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L7363" href="#L7363">7363</a>           + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L7364" href="#L7364">7364</a>           + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L7365" href="#L7365">7365</a>           + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L7366" href="#L7366">7366</a>           + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L7367" href="#L7367">7367</a>           + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L7368" href="#L7368">7368</a>           + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L7369" href="#L7369">7369</a>           + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L7370" href="#L7370">7370</a>           + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L7371" href="#L7371">7371</a>           + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L7372" href="#L7372">7372</a>           + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L7373" href="#L7373">7373</a>           + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L7374" href="#L7374">7374</a>           + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L7375" href="#L7375">7375</a>           + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L7376" href="#L7376">7376</a>           + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L7377" href="#L7377">7377</a>           + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L7378" href="#L7378">7378</a>           + <span class="jxr_string">"gaaa2.id as action_id2 "</span>
<a class="jxr_linenumber" name="L7379" href="#L7379">7379</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, grouper_members gm, "</span>
<a class="jxr_linenumber" name="L7380" href="#L7380">7380</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, grouper_attribute_def gad1, "</span>
<a class="jxr_linenumber" name="L7381" href="#L7381">7381</a>           + <span class="jxr_string">"grouper_attribute_def gad2, grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2 "</span>
<a class="jxr_linenumber" name="L7382" href="#L7382">7382</a>           + <span class="jxr_string">"where gaa1.id = gaa2.owner_attribute_assign_id "</span>
<a class="jxr_linenumber" name="L7383" href="#L7383">7383</a>           + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id "</span>
<a class="jxr_linenumber" name="L7384" href="#L7384">7384</a>           + <span class="jxr_string">"and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L7385" href="#L7385">7385</a>           + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id "</span>
<a class="jxr_linenumber" name="L7386" href="#L7386">7386</a>           + <span class="jxr_string">"and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L7387" href="#L7387">7387</a>           + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> +
<a class="jxr_linenumber" name="L7388" href="#L7388">7388</a>               <span class="jxr_string">"and gm.id = gaa1.owner_member_id "</span>
<a class="jxr_linenumber" name="L7389" href="#L7389">7389</a>           + <span class="jxr_string">"and gaa1.owner_group_id is null "</span>
<a class="jxr_linenumber" name="L7390" href="#L7390">7390</a>           + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L7391" href="#L7391">7391</a> 
<a class="jxr_linenumber" name="L7392" href="#L7392">7392</a> 
<a class="jxr_linenumber" name="L7393" href="#L7393">7393</a>     
<a class="jxr_linenumber" name="L7394" href="#L7394">7394</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_mship_v"</span>, 
<a class="jxr_linenumber" name="L7395" href="#L7395">7395</a>         <span class="jxr_string">"grouper_attr_asn_asn_mship_v: attribute assigned to an assignment of an attribute to a membership, and related cols"</span>,
<a class="jxr_linenumber" name="L7396" href="#L7396">7396</a>         GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L7397" href="#L7397">7397</a>             <span class="jxr_string">"source_id"</span>,
<a class="jxr_linenumber" name="L7398" href="#L7398">7398</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L7399" href="#L7399">7399</a>             <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L7400" href="#L7400">7400</a>             <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L7401" href="#L7401">7401</a>             <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L7402" href="#L7402">7402</a>             <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L7403" href="#L7403">7403</a>             <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L7404" href="#L7404">7404</a>             <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L7405" href="#L7405">7405</a>             <span class="jxr_string">"list_name"</span>,
<a class="jxr_linenumber" name="L7406" href="#L7406">7406</a>             <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L7407" href="#L7407">7407</a>             <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L7408" href="#L7408">7408</a>             <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L7409" href="#L7409">7409</a>             <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L7410" href="#L7410">7410</a>             <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L7411" href="#L7411">7411</a>             <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L7412" href="#L7412">7412</a>             <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L7413" href="#L7413">7413</a>             <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L7414" href="#L7414">7414</a>             <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L7415" href="#L7415">7415</a>             <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L7416" href="#L7416">7416</a>             <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L7417" href="#L7417">7417</a>             <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L7418" href="#L7418">7418</a>             <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L7419" href="#L7419">7419</a>             <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L7420" href="#L7420">7420</a>             <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L7421" href="#L7421">7421</a>             <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L7422" href="#L7422">7422</a>             <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L7423" href="#L7423">7423</a>             <span class="jxr_string">"action_id2"</span>
<a class="jxr_linenumber" name="L7424" href="#L7424">7424</a>           ),
<a class="jxr_linenumber" name="L7425" href="#L7425">7425</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7426" href="#L7426">7426</a>               <span class="jxr_string">"source_id: source of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L7427" href="#L7427">7427</a>               <span class="jxr_string">"subject_id: subject_id of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L7428" href="#L7428">7428</a>               <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7429" href="#L7429">7429</a>               <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7430" href="#L7430">7430</a>               <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7431" href="#L7431">7431</a>               <span class="jxr_string">"attribute_def_name_name2: name of the new attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7432" href="#L7432">7432</a>               <span class="jxr_string">"attribute_def_name_disp_name1: display name of the original attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7433" href="#L7433">7433</a>               <span class="jxr_string">"attribute_def_name_disp_name2: display name of the new attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7434" href="#L7434">7434</a>               <span class="jxr_string">"list_name: name of list in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7435" href="#L7435">7435</a>               <span class="jxr_string">"name_of_attribute_def1: name of the original attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7436" href="#L7436">7436</a>               <span class="jxr_string">"name_of_attribute_def2: name of the new attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7437" href="#L7437">7437</a>               <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment"</span>,
<a class="jxr_linenumber" name="L7438" href="#L7438">7438</a>               <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment"</span>,
<a class="jxr_linenumber" name="L7439" href="#L7439">7439</a>               <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7440" href="#L7440">7440</a>               <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7441" href="#L7441">7441</a>               <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7442" href="#L7442">7442</a>               <span class="jxr_string">"group_id: group id of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7443" href="#L7443">7443</a>               <span class="jxr_string">"membership_id: membership id assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7444" href="#L7444">7444</a>               <span class="jxr_string">"member_id: internal grouper member uuid of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7445" href="#L7445">7445</a>               <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment"</span>,
<a class="jxr_linenumber" name="L7446" href="#L7446">7446</a>               <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment"</span>,
<a class="jxr_linenumber" name="L7447" href="#L7447">7447</a>               <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name"</span>,
<a class="jxr_linenumber" name="L7448" href="#L7448">7448</a>               <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name"</span>,
<a class="jxr_linenumber" name="L7449" href="#L7449">7449</a>               <span class="jxr_string">"attribute_def_id1: id of the original attribute definition"</span>,
<a class="jxr_linenumber" name="L7450" href="#L7450">7450</a>               <span class="jxr_string">"attribute_def_id2: id of the new attribute definition"</span>,
<a class="jxr_linenumber" name="L7451" href="#L7451">7451</a>               <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L7452" href="#L7452">7452</a>               <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>
<a class="jxr_linenumber" name="L7453" href="#L7453">7453</a>           ),
<a class="jxr_linenumber" name="L7454" href="#L7454">7454</a>           <span class="jxr_string">"select gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L7455" href="#L7455">7455</a>           <span class="jxr_string">"gm.subject_source as source_id, "</span> +
<a class="jxr_linenumber" name="L7456" href="#L7456">7456</a>           <span class="jxr_string">"gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L7457" href="#L7457">7457</a>           <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> 
<a class="jxr_linenumber" name="L7458" href="#L7458">7458</a>           + <span class="jxr_string">"gadn1.name as attribute_def_name_name1, gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L7459" href="#L7459">7459</a>           + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L7460" href="#L7460">7460</a>           + <span class="jxr_string">"gf.name as list_name, "</span>
<a class="jxr_linenumber" name="L7461" href="#L7461">7461</a>           + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L7462" href="#L7462">7462</a>           + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L7463" href="#L7463">7463</a>           + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L7464" href="#L7464">7464</a>           + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L7465" href="#L7465">7465</a>           + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L7466" href="#L7466">7466</a>           + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L7467" href="#L7467">7467</a>           + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L7468" href="#L7468">7468</a>           + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L7469" href="#L7469">7469</a>           + <span class="jxr_string">"gms.id as membership_id, "</span>
<a class="jxr_linenumber" name="L7470" href="#L7470">7470</a>           + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L7471" href="#L7471">7471</a>           + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L7472" href="#L7472">7472</a>           + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L7473" href="#L7473">7473</a>           + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L7474" href="#L7474">7474</a>           + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L7475" href="#L7475">7475</a>           + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L7476" href="#L7476">7476</a>           + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L7477" href="#L7477">7477</a>           + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L7478" href="#L7478">7478</a>           + <span class="jxr_string">"gaaa2.id as action_id2 "</span>
<a class="jxr_linenumber" name="L7479" href="#L7479">7479</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, "</span> +
<a class="jxr_linenumber" name="L7480" href="#L7480">7480</a>           		<span class="jxr_string">"grouper_groups gg, grouper_memberships gms, "</span>
<a class="jxr_linenumber" name="L7481" href="#L7481">7481</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, "</span> +
<a class="jxr_linenumber" name="L7482" href="#L7482">7482</a>           		<span class="jxr_string">"grouper_attribute_def gad1, grouper_attribute_def gad2, grouper_members gm, grouper_fields gf, "</span>
<a class="jxr_linenumber" name="L7483" href="#L7483">7483</a>           + <span class="jxr_string">"grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2 "</span>
<a class="jxr_linenumber" name="L7484" href="#L7484">7484</a>           + <span class="jxr_string">"where gaa1.owner_membership_id = gms.id and gaa2.owner_attribute_assign_id = gaa1.id  "</span>
<a class="jxr_linenumber" name="L7485" href="#L7485">7485</a>           + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L7486" href="#L7486">7486</a>           + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L7487" href="#L7487">7487</a>           + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> 
<a class="jxr_linenumber" name="L7488" href="#L7488">7488</a>           + <span class="jxr_string">" and gms.field_id = gf.id and gms.member_id = gm.id and gms.owner_group_id = gg.id"</span> 
<a class="jxr_linenumber" name="L7489" href="#L7489">7489</a>           + <span class="jxr_string">" and gf.type = 'list' "</span>
<a class="jxr_linenumber" name="L7490" href="#L7490">7490</a>           + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L7491" href="#L7491">7491</a> 
<a class="jxr_linenumber" name="L7492" href="#L7492">7492</a> 
<a class="jxr_linenumber" name="L7493" href="#L7493">7493</a>     
<a class="jxr_linenumber" name="L7494" href="#L7494">7494</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_asn_asn_attrdef_v"</span>, 
<a class="jxr_linenumber" name="L7495" href="#L7495">7495</a>         <span class="jxr_string">"grouper_attr_asn_asn_attrdef_v: attribute assigned to an assignment of an attribute to an attribute definition, and related cols"</span>,
<a class="jxr_linenumber" name="L7496" href="#L7496">7496</a>         GrouperUtil.toSet(<span class="jxr_string">"name_of_attr_def_assigned_to"</span>,
<a class="jxr_linenumber" name="L7497" href="#L7497">7497</a>             <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L7498" href="#L7498">7498</a>             <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L7499" href="#L7499">7499</a>             <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L7500" href="#L7500">7500</a>             <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L7501" href="#L7501">7501</a>             <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L7502" href="#L7502">7502</a>             <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L7503" href="#L7503">7503</a>             <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L7504" href="#L7504">7504</a>             <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L7505" href="#L7505">7505</a>             <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L7506" href="#L7506">7506</a>             <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L7507" href="#L7507">7507</a>             <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L7508" href="#L7508">7508</a>             <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L7509" href="#L7509">7509</a>             <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L7510" href="#L7510">7510</a>             <span class="jxr_string">"id_of_attr_def_assigned_to"</span>,
<a class="jxr_linenumber" name="L7511" href="#L7511">7511</a>             <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L7512" href="#L7512">7512</a>             <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L7513" href="#L7513">7513</a>             <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L7514" href="#L7514">7514</a>             <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L7515" href="#L7515">7515</a>             <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L7516" href="#L7516">7516</a>             <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L7517" href="#L7517">7517</a>             <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L7518" href="#L7518">7518</a>             <span class="jxr_string">"action_id2"</span>
<a class="jxr_linenumber" name="L7519" href="#L7519">7519</a>           ),
<a class="jxr_linenumber" name="L7520" href="#L7520">7520</a>           GrouperUtil.toSet(<span class="jxr_string">"name_of_attr_def_assigned_to: name of attribute_def originally assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7521" href="#L7521">7521</a>               <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7522" href="#L7522">7522</a>               <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7523" href="#L7523">7523</a>               <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7524" href="#L7524">7524</a>               <span class="jxr_string">"attribute_def_name_name2: name of the current attribute definition name which is assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7525" href="#L7525">7525</a>               <span class="jxr_string">"attribute_def_name_disp_name1: display name of the attribute definition name assigned to the original attribute"</span>,
<a class="jxr_linenumber" name="L7526" href="#L7526">7526</a>               <span class="jxr_string">"attribute_def_name_disp_name2: display name of the attribute definition name assigned to the new attribute"</span>,
<a class="jxr_linenumber" name="L7527" href="#L7527">7527</a>               <span class="jxr_string">"name_of_attribute_def1: name of the attribute definition associated with the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7528" href="#L7528">7528</a>               <span class="jxr_string">"name_of_attribute_def2: name of the attribute definition associated with the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7529" href="#L7529">7529</a>               <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L7530" href="#L7530">7530</a>               <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L7531" href="#L7531">7531</a>               <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7532" href="#L7532">7532</a>               <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7533" href="#L7533">7533</a>               <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7534" href="#L7534">7534</a>               <span class="jxr_string">"id_of_attr_def_assigned_to: id of the attribute def assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7535" href="#L7535">7535</a>               <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L7536" href="#L7536">7536</a>               <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L7537" href="#L7537">7537</a>               <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7538" href="#L7538">7538</a>               <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L7539" href="#L7539">7539</a>               <span class="jxr_string">"attribute_def_id1: id of the original attribute definition assigned to the group"</span>,
<a class="jxr_linenumber" name="L7540" href="#L7540">7540</a>               <span class="jxr_string">"attribute_def_id2: id of the new attribute definition assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7541" href="#L7541">7541</a>               <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L7542" href="#L7542">7542</a>               <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>
<a class="jxr_linenumber" name="L7543" href="#L7543">7543</a>           ),
<a class="jxr_linenumber" name="L7544" href="#L7544">7544</a>           <span class="jxr_string">"select gad.name as name_of_attr_def_assigned_to, "</span> +
<a class="jxr_linenumber" name="L7545" href="#L7545">7545</a>           <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L7546" href="#L7546">7546</a>           <span class="jxr_string">"gadn1.name as attribute_def_name_name1, "</span> +
<a class="jxr_linenumber" name="L7547" href="#L7547">7547</a>           <span class="jxr_string">"gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L7548" href="#L7548">7548</a>           + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, "</span>
<a class="jxr_linenumber" name="L7549" href="#L7549">7549</a>           + <span class="jxr_string">"gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L7550" href="#L7550">7550</a>           + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L7551" href="#L7551">7551</a>           + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L7552" href="#L7552">7552</a>           + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L7553" href="#L7553">7553</a>           + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L7554" href="#L7554">7554</a>           + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L7555" href="#L7555">7555</a>           + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L7556" href="#L7556">7556</a>           + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L7557" href="#L7557">7557</a>           + <span class="jxr_string">"gad.id as id_of_attr_def_assigned_to, "</span>
<a class="jxr_linenumber" name="L7558" href="#L7558">7558</a>           + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L7559" href="#L7559">7559</a>           + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L7560" href="#L7560">7560</a>           + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L7561" href="#L7561">7561</a>           + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L7562" href="#L7562">7562</a>           + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L7563" href="#L7563">7563</a>           + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L7564" href="#L7564">7564</a>           + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L7565" href="#L7565">7565</a>           + <span class="jxr_string">"gaaa2.id as action_id2 "</span>
<a class="jxr_linenumber" name="L7566" href="#L7566">7566</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, grouper_attribute_def gad, "</span>
<a class="jxr_linenumber" name="L7567" href="#L7567">7567</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, grouper_attribute_def gad1, "</span>
<a class="jxr_linenumber" name="L7568" href="#L7568">7568</a>           + <span class="jxr_string">"grouper_attribute_def gad2 "</span>
<a class="jxr_linenumber" name="L7569" href="#L7569">7569</a>           + <span class="jxr_string">", grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2 "</span>
<a class="jxr_linenumber" name="L7570" href="#L7570">7570</a>           + <span class="jxr_string">"where gaa1.id = gaa2.owner_attribute_assign_id "</span>
<a class="jxr_linenumber" name="L7571" href="#L7571">7571</a>           + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id "</span>
<a class="jxr_linenumber" name="L7572" href="#L7572">7572</a>           + <span class="jxr_string">"and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L7573" href="#L7573">7573</a>           + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id "</span>
<a class="jxr_linenumber" name="L7574" href="#L7574">7574</a>           + <span class="jxr_string">"and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L7575" href="#L7575">7575</a>           + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> 
<a class="jxr_linenumber" name="L7576" href="#L7576">7576</a>           + <span class="jxr_string">"and gad.id = gaa1.owner_attribute_def_id "</span>
<a class="jxr_linenumber" name="L7577" href="#L7577">7577</a>           + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L7578" href="#L7578">7578</a> 
<a class="jxr_linenumber" name="L7579" href="#L7579">7579</a> 
<a class="jxr_linenumber" name="L7580" href="#L7580">7580</a>     {
<a class="jxr_linenumber" name="L7581" href="#L7581">7581</a>       
<a class="jxr_linenumber" name="L7582" href="#L7582">7582</a>       
<a class="jxr_linenumber" name="L7583" href="#L7583">7583</a>       
<a class="jxr_linenumber" name="L7584" href="#L7584">7584</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_group_v"</span>, 
<a class="jxr_linenumber" name="L7585" href="#L7585">7585</a>           <span class="jxr_string">"grouper_aval_asn_group_v: attribute assigned to a group with related columns and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L7586" href="#L7586">7586</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L7587" href="#L7587">7587</a>             <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L7588" href="#L7588">7588</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L7589" href="#L7589">7589</a>             <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L7590" href="#L7590">7590</a>             <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L7591" href="#L7591">7591</a>             <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L7592" href="#L7592">7592</a>             <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L7593" href="#L7593">7593</a>             <span class="jxr_string">"group_display_name"</span>,
<a class="jxr_linenumber" name="L7594" href="#L7594">7594</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L7595" href="#L7595">7595</a>             <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L7596" href="#L7596">7596</a>             <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L7597" href="#L7597">7597</a>             <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L7598" href="#L7598">7598</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L7599" href="#L7599">7599</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L7600" href="#L7600">7600</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L7601" href="#L7601">7601</a>             <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L7602" href="#L7602">7602</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L7603" href="#L7603">7603</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L7604" href="#L7604">7604</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L7605" href="#L7605">7605</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L7606" href="#L7606">7606</a>             <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L7607" href="#L7607">7607</a>           ),
<a class="jxr_linenumber" name="L7608" href="#L7608">7608</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7609" href="#L7609">7609</a>               <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7610" href="#L7610">7610</a>               <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7611" href="#L7611">7611</a>               <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L7612" href="#L7612">7612</a>               <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L7613" href="#L7613">7613</a>               <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7614" href="#L7614">7614</a>               <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7615" href="#L7615">7615</a>               <span class="jxr_string">"group_display_name: display name of the group assigned an attribute"</span>,
<a class="jxr_linenumber" name="L7616" href="#L7616">7616</a>               <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7617" href="#L7617">7617</a>               <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7618" href="#L7618">7618</a>               <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7619" href="#L7619">7619</a>               <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L7620" href="#L7620">7620</a>               <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7621" href="#L7621">7621</a>               <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7622" href="#L7622">7622</a>               <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7623" href="#L7623">7623</a>               <span class="jxr_string">"group_id: group id of the group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7624" href="#L7624">7624</a>               <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7625" href="#L7625">7625</a>               <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L7626" href="#L7626">7626</a>               <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L7627" href="#L7627">7627</a>               <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L7628" href="#L7628">7628</a>               <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L7629" href="#L7629">7629</a>           ),
<a class="jxr_linenumber" name="L7630" href="#L7630">7630</a>           <span class="jxr_string">"select gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L7631" href="#L7631">7631</a>           <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L7632" href="#L7632">7632</a>           <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L7633" href="#L7633">7633</a>           + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L7634" href="#L7634">7634</a>           + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L7635" href="#L7635">7635</a>           + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L7636" href="#L7636">7636</a>           + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L7637" href="#L7637">7637</a>           + <span class="jxr_string">"gg.display_name as group_display_name, "</span>
<a class="jxr_linenumber" name="L7638" href="#L7638">7638</a>           + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L7639" href="#L7639">7639</a>           + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L7640" href="#L7640">7640</a>           + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L7641" href="#L7641">7641</a>           + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L7642" href="#L7642">7642</a>           + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L7643" href="#L7643">7643</a>           + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L7644" href="#L7644">7644</a>           + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L7645" href="#L7645">7645</a>           + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L7646" href="#L7646">7646</a>           + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L7647" href="#L7647">7647</a>           + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L7648" href="#L7648">7648</a>           + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L7649" href="#L7649">7649</a>           + <span class="jxr_string">"gaaa.id as action_id, "</span>
<a class="jxr_linenumber" name="L7650" href="#L7650">7650</a>           + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L7651" href="#L7651">7651</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_groups gg, "</span>
<a class="jxr_linenumber" name="L7652" href="#L7652">7652</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_attr_assign_action gaaa, grouper_attribute_assign_value gaav  "</span>
<a class="jxr_linenumber" name="L7653" href="#L7653">7653</a>           + <span class="jxr_string">" where gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L7654" href="#L7654">7654</a>           + <span class="jxr_string">" and gaa.owner_group_id = gg.id "</span>
<a class="jxr_linenumber" name="L7655" href="#L7655">7655</a>           + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L7656" href="#L7656">7656</a>           + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L7657" href="#L7657">7657</a>           + <span class="jxr_string">"and gaa.owner_member_id is null "</span>
<a class="jxr_linenumber" name="L7658" href="#L7658">7658</a>           + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L7659" href="#L7659">7659</a> 
<a class="jxr_linenumber" name="L7660" href="#L7660">7660</a> 
<a class="jxr_linenumber" name="L7661" href="#L7661">7661</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_efmship_v"</span>, 
<a class="jxr_linenumber" name="L7662" href="#L7662">7662</a>           <span class="jxr_string">"grouper_aval_asn_efmship_v: attribute assigned to an effective membership and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L7663" href="#L7663">7663</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L7664" href="#L7664">7664</a>             <span class="jxr_string">"subject_source_id"</span>,
<a class="jxr_linenumber" name="L7665" href="#L7665">7665</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L7666" href="#L7666">7666</a>             <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L7667" href="#L7667">7667</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L7668" href="#L7668">7668</a>             <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L7669" href="#L7669">7669</a>             <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L7670" href="#L7670">7670</a>             <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L7671" href="#L7671">7671</a>             <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L7672" href="#L7672">7672</a>             <span class="jxr_string">"group_display_name"</span>,
<a class="jxr_linenumber" name="L7673" href="#L7673">7673</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L7674" href="#L7674">7674</a>             <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L7675" href="#L7675">7675</a>             <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L7676" href="#L7676">7676</a>             <span class="jxr_string">"list_name"</span>,
<a class="jxr_linenumber" name="L7677" href="#L7677">7677</a>             <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L7678" href="#L7678">7678</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L7679" href="#L7679">7679</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L7680" href="#L7680">7680</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L7681" href="#L7681">7681</a>             <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L7682" href="#L7682">7682</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L7683" href="#L7683">7683</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L7684" href="#L7684">7684</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L7685" href="#L7685">7685</a>             <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L7686" href="#L7686">7686</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L7687" href="#L7687">7687</a>             <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L7688" href="#L7688">7688</a>           ),
<a class="jxr_linenumber" name="L7689" href="#L7689">7689</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7690" href="#L7690">7690</a>               <span class="jxr_string">"subject_source_id: source id of the subject being assigned"</span>,
<a class="jxr_linenumber" name="L7691" href="#L7691">7691</a>               <span class="jxr_string">"subject_id: subject id of the subject being assigned"</span>,
<a class="jxr_linenumber" name="L7692" href="#L7692">7692</a>               <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7693" href="#L7693">7693</a>               <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7694" href="#L7694">7694</a>               <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L7695" href="#L7695">7695</a>               <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L7696" href="#L7696">7696</a>               <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7697" href="#L7697">7697</a>               <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7698" href="#L7698">7698</a>               <span class="jxr_string">"group_display_name: display name of the group assigned an attribute"</span>,
<a class="jxr_linenumber" name="L7699" href="#L7699">7699</a>               <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7700" href="#L7700">7700</a>               <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7701" href="#L7701">7701</a>               <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7702" href="#L7702">7702</a>               <span class="jxr_string">"list_name: name of the membership list for this effective membership"</span>,
<a class="jxr_linenumber" name="L7703" href="#L7703">7703</a>               <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L7704" href="#L7704">7704</a>               <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7705" href="#L7705">7705</a>               <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7706" href="#L7706">7706</a>               <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7707" href="#L7707">7707</a>               <span class="jxr_string">"group_id: group id of the group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7708" href="#L7708">7708</a>               <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7709" href="#L7709">7709</a>               <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L7710" href="#L7710">7710</a>               <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L7711" href="#L7711">7711</a>               <span class="jxr_string">"member_id: id of the member assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7712" href="#L7712">7712</a>               <span class="jxr_string">"action_id: attribute assign action id"</span>,
<a class="jxr_linenumber" name="L7713" href="#L7713">7713</a>               <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L7714" href="#L7714">7714</a>           ),
<a class="jxr_linenumber" name="L7715" href="#L7715">7715</a>           <span class="jxr_string">"select distinct gg.name as group_name, "</span>
<a class="jxr_linenumber" name="L7716" href="#L7716">7716</a>           + <span class="jxr_string">"gm.subject_source as subject_source_id, "</span>
<a class="jxr_linenumber" name="L7717" href="#L7717">7717</a>           + <span class="jxr_string">"gm.subject_id, "</span>
<a class="jxr_linenumber" name="L7718" href="#L7718">7718</a>           + <span class="jxr_string">"gaaa.name as action, "</span>
<a class="jxr_linenumber" name="L7719" href="#L7719">7719</a>           + <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L7720" href="#L7720">7720</a>           + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L7721" href="#L7721">7721</a>           + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L7722" href="#L7722">7722</a>           + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L7723" href="#L7723">7723</a>           + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L7724" href="#L7724">7724</a>           + <span class="jxr_string">"gg.display_name as group_display_name, "</span>
<a class="jxr_linenumber" name="L7725" href="#L7725">7725</a>           + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L7726" href="#L7726">7726</a>           + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L7727" href="#L7727">7727</a>           + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L7728" href="#L7728">7728</a>           + <span class="jxr_string">"gf.name as list_name, "</span>
<a class="jxr_linenumber" name="L7729" href="#L7729">7729</a>           + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L7730" href="#L7730">7730</a>           + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L7731" href="#L7731">7731</a>           + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L7732" href="#L7732">7732</a>           + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L7733" href="#L7733">7733</a>           + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L7734" href="#L7734">7734</a>           + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L7735" href="#L7735">7735</a>           + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L7736" href="#L7736">7736</a>           + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L7737" href="#L7737">7737</a>           + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L7738" href="#L7738">7738</a>           + <span class="jxr_string">"gaaa.id as action_id, "</span>
<a class="jxr_linenumber" name="L7739" href="#L7739">7739</a>           + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L7740" href="#L7740">7740</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_memberships_all_v gmav, "</span>
<a class="jxr_linenumber" name="L7741" href="#L7741">7741</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, "</span>
<a class="jxr_linenumber" name="L7742" href="#L7742">7742</a>           + <span class="jxr_string">"grouper_groups gg, grouper_fields gf, grouper_members gm, grouper_attr_assign_action gaaa, grouper_attribute_assign_value gaav  "</span>
<a class="jxr_linenumber" name="L7743" href="#L7743">7743</a>           + <span class="jxr_string">"where gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L7744" href="#L7744">7744</a>           + <span class="jxr_string">" and gaa.owner_group_id = gmav.owner_group_id "</span>
<a class="jxr_linenumber" name="L7745" href="#L7745">7745</a>           + <span class="jxr_string">"and gaa.owner_member_id = gmav.member_id "</span>
<a class="jxr_linenumber" name="L7746" href="#L7746">7746</a>           + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L7747" href="#L7747">7747</a>           + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L7748" href="#L7748">7748</a>           + <span class="jxr_string">"and gmav.immediate_mship_enabled = 'T' "</span>
<a class="jxr_linenumber" name="L7749" href="#L7749">7749</a>           + <span class="jxr_string">"and gmav.owner_group_id = gg.id "</span>
<a class="jxr_linenumber" name="L7750" href="#L7750">7750</a>           + <span class="jxr_string">"and gmav.field_id = gf.id "</span>
<a class="jxr_linenumber" name="L7751" href="#L7751">7751</a>           + <span class="jxr_string">"and gf.type = 'list' "</span>
<a class="jxr_linenumber" name="L7752" href="#L7752">7752</a>           + <span class="jxr_string">"and gmav.member_id = gm.id "</span>
<a class="jxr_linenumber" name="L7753" href="#L7753">7753</a>           + <span class="jxr_string">"and gaa.owner_member_id is not null "</span>
<a class="jxr_linenumber" name="L7754" href="#L7754">7754</a>           + <span class="jxr_string">"and gaa.owner_group_id is null "</span>
<a class="jxr_linenumber" name="L7755" href="#L7755">7755</a>           + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L7756" href="#L7756">7756</a> 
<a class="jxr_linenumber" name="L7757" href="#L7757">7757</a>       
<a class="jxr_linenumber" name="L7758" href="#L7758">7758</a> 
<a class="jxr_linenumber" name="L7759" href="#L7759">7759</a>       
<a class="jxr_linenumber" name="L7760" href="#L7760">7760</a> 
<a class="jxr_linenumber" name="L7761" href="#L7761">7761</a>       
<a class="jxr_linenumber" name="L7762" href="#L7762">7762</a> 
<a class="jxr_linenumber" name="L7763" href="#L7763">7763</a>       
<a class="jxr_linenumber" name="L7764" href="#L7764">7764</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_stem_v"</span>, 
<a class="jxr_linenumber" name="L7765" href="#L7765">7765</a>           <span class="jxr_string">"grouper_aval_asn_stem_v: attribute assigned to a stem and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L7766" href="#L7766">7766</a>           GrouperUtil.toSet(<span class="jxr_string">"stem_name"</span>,
<a class="jxr_linenumber" name="L7767" href="#L7767">7767</a>               <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L7768" href="#L7768">7768</a>               <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L7769" href="#L7769">7769</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L7770" href="#L7770">7770</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L7771" href="#L7771">7771</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L7772" href="#L7772">7772</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L7773" href="#L7773">7773</a>               <span class="jxr_string">"stem_display_name"</span>,
<a class="jxr_linenumber" name="L7774" href="#L7774">7774</a>               <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L7775" href="#L7775">7775</a>               <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L7776" href="#L7776">7776</a>               <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L7777" href="#L7777">7777</a>               <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L7778" href="#L7778">7778</a>               <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L7779" href="#L7779">7779</a>               <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L7780" href="#L7780">7780</a>               <span class="jxr_string">"stem_id"</span>,
<a class="jxr_linenumber" name="L7781" href="#L7781">7781</a>               <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L7782" href="#L7782">7782</a>               <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L7783" href="#L7783">7783</a>               <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L7784" href="#L7784">7784</a>               <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L7785" href="#L7785">7785</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L7786" href="#L7786">7786</a>           ),
<a class="jxr_linenumber" name="L7787" href="#L7787">7787</a>           GrouperUtil.toSet(<span class="jxr_string">"stem_name: name of stem assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7788" href="#L7788">7788</a>               <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7789" href="#L7789">7789</a>               <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7790" href="#L7790">7790</a>               <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L7791" href="#L7791">7791</a>               <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L7792" href="#L7792">7792</a>               <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7793" href="#L7793">7793</a>               <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7794" href="#L7794">7794</a>               <span class="jxr_string">"stem_display_name: display name of the stem assigned an attribute"</span>,
<a class="jxr_linenumber" name="L7795" href="#L7795">7795</a>               <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7796" href="#L7796">7796</a>               <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7797" href="#L7797">7797</a>               <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7798" href="#L7798">7798</a>               <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7799" href="#L7799">7799</a>               <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7800" href="#L7800">7800</a>               <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7801" href="#L7801">7801</a>               <span class="jxr_string">"stem_id: stem id of the stem assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7802" href="#L7802">7802</a>               <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7803" href="#L7803">7803</a>               <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L7804" href="#L7804">7804</a>               <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L7805" href="#L7805">7805</a>               <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L7806" href="#L7806">7806</a>               <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L7807" href="#L7807">7807</a>           ),
<a class="jxr_linenumber" name="L7808" href="#L7808">7808</a>           <span class="jxr_string">"select gs.name as stem_name, "</span> +
<a class="jxr_linenumber" name="L7809" href="#L7809">7809</a>           <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L7810" href="#L7810">7810</a>           <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L7811" href="#L7811">7811</a>           + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L7812" href="#L7812">7812</a>           + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L7813" href="#L7813">7813</a>           + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L7814" href="#L7814">7814</a>           + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L7815" href="#L7815">7815</a>           + <span class="jxr_string">"gs.display_name as stem_display_name, "</span>
<a class="jxr_linenumber" name="L7816" href="#L7816">7816</a>           + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L7817" href="#L7817">7817</a>           + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L7818" href="#L7818">7818</a>           + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L7819" href="#L7819">7819</a>           + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L7820" href="#L7820">7820</a>           + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L7821" href="#L7821">7821</a>           + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L7822" href="#L7822">7822</a>           + <span class="jxr_string">"gs.id as stem_id, "</span>
<a class="jxr_linenumber" name="L7823" href="#L7823">7823</a>           + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L7824" href="#L7824">7824</a>           + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L7825" href="#L7825">7825</a>           + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L7826" href="#L7826">7826</a>           + <span class="jxr_string">"gaaa.id as action_id, "</span>
<a class="jxr_linenumber" name="L7827" href="#L7827">7827</a>           + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L7828" href="#L7828">7828</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_stems gs, "</span>
<a class="jxr_linenumber" name="L7829" href="#L7829">7829</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_attr_assign_action gaaa, grouper_attribute_assign_value gaav  "</span>
<a class="jxr_linenumber" name="L7830" href="#L7830">7830</a>           + <span class="jxr_string">"where gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L7831" href="#L7831">7831</a>           + <span class="jxr_string">" and gaa.owner_stem_id = gs.id "</span>
<a class="jxr_linenumber" name="L7832" href="#L7832">7832</a>           + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L7833" href="#L7833">7833</a>           + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L7834" href="#L7834">7834</a>           + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L7835" href="#L7835">7835</a> 
<a class="jxr_linenumber" name="L7836" href="#L7836">7836</a>       
<a class="jxr_linenumber" name="L7837" href="#L7837">7837</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_member_v"</span>, 
<a class="jxr_linenumber" name="L7838" href="#L7838">7838</a>           <span class="jxr_string">"grouper_aval_asn_member_v: attribute assigned to a member and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L7839" href="#L7839">7839</a>           GrouperUtil.toSet(<span class="jxr_string">"source_id"</span>, <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L7840" href="#L7840">7840</a>               <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L7841" href="#L7841">7841</a>               <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L7842" href="#L7842">7842</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L7843" href="#L7843">7843</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L7844" href="#L7844">7844</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L7845" href="#L7845">7845</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L7846" href="#L7846">7846</a>               <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L7847" href="#L7847">7847</a>               <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L7848" href="#L7848">7848</a>               <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L7849" href="#L7849">7849</a>               <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L7850" href="#L7850">7850</a>               <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L7851" href="#L7851">7851</a>               <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L7852" href="#L7852">7852</a>               <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L7853" href="#L7853">7853</a>               <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L7854" href="#L7854">7854</a>               <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L7855" href="#L7855">7855</a>               <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L7856" href="#L7856">7856</a>               <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L7857" href="#L7857">7857</a>               <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L7858" href="#L7858">7858</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L7859" href="#L7859">7859</a>           ),
<a class="jxr_linenumber" name="L7860" href="#L7860">7860</a>           GrouperUtil.toSet(<span class="jxr_string">"source_id: source of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L7861" href="#L7861">7861</a>               <span class="jxr_string">"subject_id: subject_id of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L7862" href="#L7862">7862</a>               <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7863" href="#L7863">7863</a>               <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7864" href="#L7864">7864</a>               <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L7865" href="#L7865">7865</a>               <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L7866" href="#L7866">7866</a>               <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7867" href="#L7867">7867</a>               <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7868" href="#L7868">7868</a>               <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7869" href="#L7869">7869</a>               <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7870" href="#L7870">7870</a>               <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7871" href="#L7871">7871</a>               <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L7872" href="#L7872">7872</a>               <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7873" href="#L7873">7873</a>               <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7874" href="#L7874">7874</a>               <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7875" href="#L7875">7875</a>               <span class="jxr_string">"member_id: member id of the member assigned the attribute (this is an internal grouper uuid)"</span>,
<a class="jxr_linenumber" name="L7876" href="#L7876">7876</a>               <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7877" href="#L7877">7877</a>               <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L7878" href="#L7878">7878</a>               <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L7879" href="#L7879">7879</a>               <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L7880" href="#L7880">7880</a>               <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L7881" href="#L7881">7881</a>           ),
<a class="jxr_linenumber" name="L7882" href="#L7882">7882</a>           <span class="jxr_string">"select gm.subject_source as source_id, gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L7883" href="#L7883">7883</a>           <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L7884" href="#L7884">7884</a>           <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L7885" href="#L7885">7885</a>           + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L7886" href="#L7886">7886</a>           + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L7887" href="#L7887">7887</a>           + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L7888" href="#L7888">7888</a>           + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L7889" href="#L7889">7889</a>           + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L7890" href="#L7890">7890</a>           + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L7891" href="#L7891">7891</a>           + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L7892" href="#L7892">7892</a>           + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L7893" href="#L7893">7893</a>           + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L7894" href="#L7894">7894</a>           + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L7895" href="#L7895">7895</a>           + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L7896" href="#L7896">7896</a>           + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L7897" href="#L7897">7897</a>           + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L7898" href="#L7898">7898</a>           + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L7899" href="#L7899">7899</a>           + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L7900" href="#L7900">7900</a>           + <span class="jxr_string">"gaaa.id as action_id, "</span>
<a class="jxr_linenumber" name="L7901" href="#L7901">7901</a>           + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L7902" href="#L7902">7902</a>           + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_members gm, "</span>
<a class="jxr_linenumber" name="L7903" href="#L7903">7903</a>           + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, "</span>
<a class="jxr_linenumber" name="L7904" href="#L7904">7904</a>           + <span class="jxr_string">"grouper_attr_assign_action gaaa, grouper_attribute_assign_value gaav "</span> 
<a class="jxr_linenumber" name="L7905" href="#L7905">7905</a>           + <span class="jxr_string">"where gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L7906" href="#L7906">7906</a>           + <span class="jxr_string">" and gaa.owner_member_id = gm.id "</span>
<a class="jxr_linenumber" name="L7907" href="#L7907">7907</a>           + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L7908" href="#L7908">7908</a>           + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L7909" href="#L7909">7909</a>           + <span class="jxr_string">"and gaa.owner_group_id is null "</span> 
<a class="jxr_linenumber" name="L7910" href="#L7910">7910</a>           + <span class="jxr_string">" and gaa.attribute_assign_action_id = gaaa.id"</span>);
<a class="jxr_linenumber" name="L7911" href="#L7911">7911</a> 
<a class="jxr_linenumber" name="L7912" href="#L7912">7912</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_mship_v"</span>, 
<a class="jxr_linenumber" name="L7913" href="#L7913">7913</a>           <span class="jxr_string">"grouper_aval_asn_mship_v: attribute assigned to an immediate memberships, and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L7914" href="#L7914">7914</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L7915" href="#L7915">7915</a>               <span class="jxr_string">"source_id"</span>,
<a class="jxr_linenumber" name="L7916" href="#L7916">7916</a>               <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L7917" href="#L7917">7917</a>               <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L7918" href="#L7918">7918</a>               <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L7919" href="#L7919">7919</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L7920" href="#L7920">7920</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L7921" href="#L7921">7921</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L7922" href="#L7922">7922</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L7923" href="#L7923">7923</a>               <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L7924" href="#L7924">7924</a>               <span class="jxr_string">"list_name"</span>,
<a class="jxr_linenumber" name="L7925" href="#L7925">7925</a>               <span class="jxr_string">"name_of_attribute_def"</span>,
<a class="jxr_linenumber" name="L7926" href="#L7926">7926</a>               <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L7927" href="#L7927">7927</a>               <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L7928" href="#L7928">7928</a>               <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L7929" href="#L7929">7929</a>               <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L7930" href="#L7930">7930</a>               <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L7931" href="#L7931">7931</a>               <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L7932" href="#L7932">7932</a>               <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L7933" href="#L7933">7933</a>               <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L7934" href="#L7934">7934</a>               <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L7935" href="#L7935">7935</a>               <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L7936" href="#L7936">7936</a>               <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L7937" href="#L7937">7937</a>               <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L7938" href="#L7938">7938</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L7939" href="#L7939">7939</a>             ),
<a class="jxr_linenumber" name="L7940" href="#L7940">7940</a>             GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7941" href="#L7941">7941</a>                 <span class="jxr_string">"source_id: source of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L7942" href="#L7942">7942</a>                 <span class="jxr_string">"subject_id: subject_id of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L7943" href="#L7943">7943</a>                 <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L7944" href="#L7944">7944</a>                 <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L7945" href="#L7945">7945</a>                 <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L7946" href="#L7946">7946</a>                 <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L7947" href="#L7947">7947</a>                 <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7948" href="#L7948">7948</a>                 <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L7949" href="#L7949">7949</a>                 <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L7950" href="#L7950">7950</a>                 <span class="jxr_string">"list_name: name of list in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7951" href="#L7951">7951</a>                 <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L7952" href="#L7952">7952</a>                 <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7953" href="#L7953">7953</a>                 <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L7954" href="#L7954">7954</a>                 <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L7955" href="#L7955">7955</a>                 <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L7956" href="#L7956">7956</a>                 <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L7957" href="#L7957">7957</a>                 <span class="jxr_string">"group_id: group id of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7958" href="#L7958">7958</a>                 <span class="jxr_string">"membership_id: membership id assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7959" href="#L7959">7959</a>                 <span class="jxr_string">"member_id: internal grouper member uuid of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L7960" href="#L7960">7960</a>                 <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L7961" href="#L7961">7961</a>                 <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L7962" href="#L7962">7962</a>                 <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L7963" href="#L7963">7963</a>                 <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L7964" href="#L7964">7964</a>                 <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L7965" href="#L7965">7965</a>             ),
<a class="jxr_linenumber" name="L7966" href="#L7966">7966</a>             <span class="jxr_string">"select gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L7967" href="#L7967">7967</a>             <span class="jxr_string">"gm.subject_source as source_id, "</span> +
<a class="jxr_linenumber" name="L7968" href="#L7968">7968</a>             <span class="jxr_string">"gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L7969" href="#L7969">7969</a>             <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L7970" href="#L7970">7970</a>             <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L7971" href="#L7971">7971</a>             + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L7972" href="#L7972">7972</a>             + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L7973" href="#L7973">7973</a>             + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L7974" href="#L7974">7974</a>             + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L7975" href="#L7975">7975</a>             + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L7976" href="#L7976">7976</a>             + <span class="jxr_string">"gf.name as list_name, "</span>
<a class="jxr_linenumber" name="L7977" href="#L7977">7977</a>             + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L7978" href="#L7978">7978</a>             + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L7979" href="#L7979">7979</a>             + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L7980" href="#L7980">7980</a>             + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L7981" href="#L7981">7981</a>             + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L7982" href="#L7982">7982</a>             + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L7983" href="#L7983">7983</a>             + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L7984" href="#L7984">7984</a>             + <span class="jxr_string">"gms.id as membership_id, "</span>
<a class="jxr_linenumber" name="L7985" href="#L7985">7985</a>             + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L7986" href="#L7986">7986</a>             + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L7987" href="#L7987">7987</a>             + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L7988" href="#L7988">7988</a>             + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L7989" href="#L7989">7989</a>             + <span class="jxr_string">"gaaa.id as action_id, "</span>
<a class="jxr_linenumber" name="L7990" href="#L7990">7990</a>             + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L7991" href="#L7991">7991</a>             + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_groups gg, grouper_memberships gms, "</span>
<a class="jxr_linenumber" name="L7992" href="#L7992">7992</a>             + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_members gm, grouper_fields gf, "</span>
<a class="jxr_linenumber" name="L7993" href="#L7993">7993</a>             + <span class="jxr_string">"grouper_attr_assign_action gaaa, grouper_attribute_assign_value gaav  "</span>
<a class="jxr_linenumber" name="L7994" href="#L7994">7994</a>             + <span class="jxr_string">"where gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L7995" href="#L7995">7995</a>             + <span class="jxr_string">" and gaa.owner_membership_id = gms.id "</span>
<a class="jxr_linenumber" name="L7996" href="#L7996">7996</a>             + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L7997" href="#L7997">7997</a>             + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L7998" href="#L7998">7998</a>             + <span class="jxr_string">" and gms.field_id = gf.id and gms.member_id = gm.id and gms.owner_group_id = gg.id "</span>
<a class="jxr_linenumber" name="L7999" href="#L7999">7999</a>             + <span class="jxr_string">" and gf.type = 'list' and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L8000" href="#L8000">8000</a> 
<a class="jxr_linenumber" name="L8001" href="#L8001">8001</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_attrdef_v"</span>, 
<a class="jxr_linenumber" name="L8002" href="#L8002">8002</a>           <span class="jxr_string">"grouper_aval_asn_attrdef_v: attribute assigned to an attribute definition, and related columns and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L8003" href="#L8003">8003</a>           GrouperUtil.toSet(<span class="jxr_string">"name_of_attr_def_assigned_to"</span>,
<a class="jxr_linenumber" name="L8004" href="#L8004">8004</a>               <span class="jxr_string">"action"</span>,
<a class="jxr_linenumber" name="L8005" href="#L8005">8005</a>               <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L8006" href="#L8006">8006</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L8007" href="#L8007">8007</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L8008" href="#L8008">8008</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L8009" href="#L8009">8009</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L8010" href="#L8010">8010</a>               <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L8011" href="#L8011">8011</a>               <span class="jxr_string">"name_of_attribute_def_assigned"</span>,
<a class="jxr_linenumber" name="L8012" href="#L8012">8012</a>               <span class="jxr_string">"attribute_assign_notes"</span>,
<a class="jxr_linenumber" name="L8013" href="#L8013">8013</a>               <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L8014" href="#L8014">8014</a>               <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L8015" href="#L8015">8015</a>               <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L8016" href="#L8016">8016</a>               <span class="jxr_string">"id_of_attr_def_assigned_to"</span>,
<a class="jxr_linenumber" name="L8017" href="#L8017">8017</a>               <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L8018" href="#L8018">8018</a>               <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L8019" href="#L8019">8019</a>               <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L8020" href="#L8020">8020</a>               <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L8021" href="#L8021">8021</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L8022" href="#L8022">8022</a>             ),
<a class="jxr_linenumber" name="L8023" href="#L8023">8023</a>             GrouperUtil.toSet(<span class="jxr_string">"name_of_attr_def_assigned_to: name of attribute def assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8024" href="#L8024">8024</a>                 <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8025" href="#L8025">8025</a>                 <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8026" href="#L8026">8026</a>                 <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L8027" href="#L8027">8027</a>                 <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L8028" href="#L8028">8028</a>                 <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8029" href="#L8029">8029</a>                 <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8030" href="#L8030">8030</a>                 <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8031" href="#L8031">8031</a>                 <span class="jxr_string">"name_of_attribute_def: name of the attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8032" href="#L8032">8032</a>                 <span class="jxr_string">"attribute_assign_notes: notes related to the attribute assignment"</span>,
<a class="jxr_linenumber" name="L8033" href="#L8033">8033</a>                 <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8034" href="#L8034">8034</a>                 <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8035" href="#L8035">8035</a>                 <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8036" href="#L8036">8036</a>                 <span class="jxr_string">"id_of_attr_def_assigned_to: attrDef id of the attributeDef assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8037" href="#L8037">8037</a>                 <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L8038" href="#L8038">8038</a>                 <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L8039" href="#L8039">8039</a>                 <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L8040" href="#L8040">8040</a>                 <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L8041" href="#L8041">8041</a>                 <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L8042" href="#L8042">8042</a>             ),
<a class="jxr_linenumber" name="L8043" href="#L8043">8043</a>             <span class="jxr_string">"select gad_assigned_to.name as name_of_attr_def_assigned_to, "</span> +
<a class="jxr_linenumber" name="L8044" href="#L8044">8044</a>             <span class="jxr_string">"gaaa.name as action, "</span> +
<a class="jxr_linenumber" name="L8045" href="#L8045">8045</a>             <span class="jxr_string">"gadn.name as attribute_def_name_name, "</span>
<a class="jxr_linenumber" name="L8046" href="#L8046">8046</a>             + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L8047" href="#L8047">8047</a>             + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L8048" href="#L8048">8048</a>             + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L8049" href="#L8049">8049</a>             + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L8050" href="#L8050">8050</a>             + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name, "</span>
<a class="jxr_linenumber" name="L8051" href="#L8051">8051</a>             + <span class="jxr_string">"gad.name as name_of_attribute_def, "</span>
<a class="jxr_linenumber" name="L8052" href="#L8052">8052</a>             + <span class="jxr_string">"gaa.notes as attribute_assign_notes, "</span>
<a class="jxr_linenumber" name="L8053" href="#L8053">8053</a>             + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L8054" href="#L8054">8054</a>             + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L8055" href="#L8055">8055</a>             + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L8056" href="#L8056">8056</a>             + <span class="jxr_string">"gad_assigned_to.id as id_of_attr_def_assigned_to, "</span>
<a class="jxr_linenumber" name="L8057" href="#L8057">8057</a>             + <span class="jxr_string">"gaa.id as attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L8058" href="#L8058">8058</a>             + <span class="jxr_string">"gadn.id as attribute_def_name_id, "</span>
<a class="jxr_linenumber" name="L8059" href="#L8059">8059</a>             + <span class="jxr_string">"gad.id as attribute_def_id, "</span>
<a class="jxr_linenumber" name="L8060" href="#L8060">8060</a>             + <span class="jxr_string">"gaaa.id as action_id, "</span>
<a class="jxr_linenumber" name="L8061" href="#L8061">8061</a>             + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L8062" href="#L8062">8062</a>             + <span class="jxr_string">"from grouper_attribute_assign gaa, grouper_attribute_def gad_assigned_to, "</span>
<a class="jxr_linenumber" name="L8063" href="#L8063">8063</a>             + <span class="jxr_string">"grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_attr_assign_action gaaa, grouper_attribute_assign_value gaav  "</span>
<a class="jxr_linenumber" name="L8064" href="#L8064">8064</a>             + <span class="jxr_string">"where gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L8065" href="#L8065">8065</a>             + <span class="jxr_string">" and gaa.owner_attribute_def_id = gad_assigned_to.id "</span>
<a class="jxr_linenumber" name="L8066" href="#L8066">8066</a>             + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L8067" href="#L8067">8067</a>             + <span class="jxr_string">"and gadn.attribute_def_id = gad.id "</span>
<a class="jxr_linenumber" name="L8068" href="#L8068">8068</a>             + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaa.id "</span>);
<a class="jxr_linenumber" name="L8069" href="#L8069">8069</a> 
<a class="jxr_linenumber" name="L8070" href="#L8070">8070</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_group_v"</span>, 
<a class="jxr_linenumber" name="L8071" href="#L8071">8071</a>           <span class="jxr_string">"grouper_aval_asn_asn_group_v: attribute assigned to an assignment of attribute to a group, and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L8072" href="#L8072">8072</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L8073" href="#L8073">8073</a>               <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L8074" href="#L8074">8074</a>               <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L8075" href="#L8075">8075</a>               <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L8076" href="#L8076">8076</a>               <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L8077" href="#L8077">8077</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L8078" href="#L8078">8078</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L8079" href="#L8079">8079</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L8080" href="#L8080">8080</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L8081" href="#L8081">8081</a>               <span class="jxr_string">"group_display_name"</span>,
<a class="jxr_linenumber" name="L8082" href="#L8082">8082</a>               <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L8083" href="#L8083">8083</a>               <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L8084" href="#L8084">8084</a>               <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L8085" href="#L8085">8085</a>               <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L8086" href="#L8086">8086</a>               <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L8087" href="#L8087">8087</a>               <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L8088" href="#L8088">8088</a>               <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L8089" href="#L8089">8089</a>               <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L8090" href="#L8090">8090</a>               <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L8091" href="#L8091">8091</a>               <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L8092" href="#L8092">8092</a>               <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L8093" href="#L8093">8093</a>               <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L8094" href="#L8094">8094</a>               <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L8095" href="#L8095">8095</a>               <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L8096" href="#L8096">8096</a>               <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L8097" href="#L8097">8097</a>               <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L8098" href="#L8098">8098</a>               <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L8099" href="#L8099">8099</a>               <span class="jxr_string">"action_id2"</span>,
<a class="jxr_linenumber" name="L8100" href="#L8100">8100</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L8101" href="#L8101">8101</a>             ),
<a class="jxr_linenumber" name="L8102" href="#L8102">8102</a>             GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8103" href="#L8103">8103</a>                 <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8104" href="#L8104">8104</a>                 <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8105" href="#L8105">8105</a>                 <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8106" href="#L8106">8106</a>                 <span class="jxr_string">"attribute_def_name_name2: name of the current attribute definition name which is assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8107" href="#L8107">8107</a>                 <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L8108" href="#L8108">8108</a>                 <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L8109" href="#L8109">8109</a>                 <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8110" href="#L8110">8110</a>                 <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8111" href="#L8111">8111</a>                 <span class="jxr_string">"group_display_name: display name of the group assigned an attribute"</span>,
<a class="jxr_linenumber" name="L8112" href="#L8112">8112</a>                 <span class="jxr_string">"attribute_def_name_disp_name1: display name of the attribute definition name assigned to the original attribute"</span>,
<a class="jxr_linenumber" name="L8113" href="#L8113">8113</a>                 <span class="jxr_string">"attribute_def_name_disp_name2: display name of the attribute definition name assigned to the new attribute"</span>,
<a class="jxr_linenumber" name="L8114" href="#L8114">8114</a>                 <span class="jxr_string">"name_of_attribute_def1: name of the attribute definition associated with the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8115" href="#L8115">8115</a>                 <span class="jxr_string">"name_of_attribute_def2: name of the attribute definition associated with the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8116" href="#L8116">8116</a>                 <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L8117" href="#L8117">8117</a>                 <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L8118" href="#L8118">8118</a>                 <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8119" href="#L8119">8119</a>                 <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8120" href="#L8120">8120</a>                 <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8121" href="#L8121">8121</a>                 <span class="jxr_string">"group_id: group id of the group assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8122" href="#L8122">8122</a>                 <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L8123" href="#L8123">8123</a>                 <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L8124" href="#L8124">8124</a>                 <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8125" href="#L8125">8125</a>                 <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8126" href="#L8126">8126</a>                 <span class="jxr_string">"attribute_def_id1: id of the original attribute definition assigned to the group"</span>,
<a class="jxr_linenumber" name="L8127" href="#L8127">8127</a>                 <span class="jxr_string">"attribute_def_id2: id of the new attribute definition assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8128" href="#L8128">8128</a>                 <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L8129" href="#L8129">8129</a>                 <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>,
<a class="jxr_linenumber" name="L8130" href="#L8130">8130</a>                 <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L8131" href="#L8131">8131</a>             ),
<a class="jxr_linenumber" name="L8132" href="#L8132">8132</a>             <span class="jxr_string">"select gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L8133" href="#L8133">8133</a>             <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L8134" href="#L8134">8134</a>             <span class="jxr_string">"gadn1.name as attribute_def_name_name1, "</span> +
<a class="jxr_linenumber" name="L8135" href="#L8135">8135</a>             <span class="jxr_string">"gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L8136" href="#L8136">8136</a>             + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L8137" href="#L8137">8137</a>             + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L8138" href="#L8138">8138</a>             + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L8139" href="#L8139">8139</a>             + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L8140" href="#L8140">8140</a>             + <span class="jxr_string">"gg.display_name as group_display_name, "</span>
<a class="jxr_linenumber" name="L8141" href="#L8141">8141</a>             + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, "</span>
<a class="jxr_linenumber" name="L8142" href="#L8142">8142</a>             + <span class="jxr_string">"gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L8143" href="#L8143">8143</a>             + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L8144" href="#L8144">8144</a>             + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L8145" href="#L8145">8145</a>             + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L8146" href="#L8146">8146</a>             + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L8147" href="#L8147">8147</a>             + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L8148" href="#L8148">8148</a>             + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L8149" href="#L8149">8149</a>             + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L8150" href="#L8150">8150</a>             + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L8151" href="#L8151">8151</a>             + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L8152" href="#L8152">8152</a>             + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L8153" href="#L8153">8153</a>             + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L8154" href="#L8154">8154</a>             + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L8155" href="#L8155">8155</a>             + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L8156" href="#L8156">8156</a>             + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L8157" href="#L8157">8157</a>             + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L8158" href="#L8158">8158</a>             + <span class="jxr_string">"gaaa2.id as action_id2, "</span>
<a class="jxr_linenumber" name="L8159" href="#L8159">8159</a>             + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L8160" href="#L8160">8160</a>             + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, grouper_groups gg, "</span>
<a class="jxr_linenumber" name="L8161" href="#L8161">8161</a>             + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, grouper_attribute_def gad1, "</span>
<a class="jxr_linenumber" name="L8162" href="#L8162">8162</a>             + <span class="jxr_string">"grouper_attribute_def gad2, grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2, grouper_attribute_assign_value gaav   "</span>
<a class="jxr_linenumber" name="L8163" href="#L8163">8163</a>             + <span class="jxr_string">"where gaav.attribute_assign_id = gaa2.id "</span>
<a class="jxr_linenumber" name="L8164" href="#L8164">8164</a>             + <span class="jxr_string">" and gaa1.id = gaa2.owner_attribute_assign_id "</span>
<a class="jxr_linenumber" name="L8165" href="#L8165">8165</a>             + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id "</span>
<a class="jxr_linenumber" name="L8166" href="#L8166">8166</a>             + <span class="jxr_string">"and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L8167" href="#L8167">8167</a>             + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id "</span>
<a class="jxr_linenumber" name="L8168" href="#L8168">8168</a>             + <span class="jxr_string">"and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L8169" href="#L8169">8169</a>             + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> 
<a class="jxr_linenumber" name="L8170" href="#L8170">8170</a>             + <span class="jxr_string">"and gg.id = gaa1.owner_group_id "</span>
<a class="jxr_linenumber" name="L8171" href="#L8171">8171</a>             + <span class="jxr_string">"and gaa1.owner_member_id is null "</span>
<a class="jxr_linenumber" name="L8172" href="#L8172">8172</a>             + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id"</span>);
<a class="jxr_linenumber" name="L8173" href="#L8173">8173</a> 
<a class="jxr_linenumber" name="L8174" href="#L8174">8174</a> 
<a class="jxr_linenumber" name="L8175" href="#L8175">8175</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_efmship_v"</span>, 
<a class="jxr_linenumber" name="L8176" href="#L8176">8176</a>           <span class="jxr_string">"grouper_aval_asn_asn_efmship_v: attribute assigned to an assignment of an attribute to an effective membership, and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L8177" href="#L8177">8177</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L8178" href="#L8178">8178</a>               <span class="jxr_string">"source_id"</span>,
<a class="jxr_linenumber" name="L8179" href="#L8179">8179</a>               <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L8180" href="#L8180">8180</a>               <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L8181" href="#L8181">8181</a>               <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L8182" href="#L8182">8182</a>               <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L8183" href="#L8183">8183</a>               <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L8184" href="#L8184">8184</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L8185" href="#L8185">8185</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L8186" href="#L8186">8186</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L8187" href="#L8187">8187</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L8188" href="#L8188">8188</a>               <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L8189" href="#L8189">8189</a>               <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L8190" href="#L8190">8190</a>               <span class="jxr_string">"list_name"</span>,
<a class="jxr_linenumber" name="L8191" href="#L8191">8191</a>               <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L8192" href="#L8192">8192</a>               <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L8193" href="#L8193">8193</a>               <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L8194" href="#L8194">8194</a>               <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L8195" href="#L8195">8195</a>               <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L8196" href="#L8196">8196</a>               <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L8197" href="#L8197">8197</a>               <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L8198" href="#L8198">8198</a>               <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L8199" href="#L8199">8199</a>               <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L8200" href="#L8200">8200</a>               <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L8201" href="#L8201">8201</a>               <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L8202" href="#L8202">8202</a>               <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L8203" href="#L8203">8203</a>               <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L8204" href="#L8204">8204</a>               <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L8205" href="#L8205">8205</a>               <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L8206" href="#L8206">8206</a>               <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L8207" href="#L8207">8207</a>               <span class="jxr_string">"action_id2"</span>,
<a class="jxr_linenumber" name="L8208" href="#L8208">8208</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L8209" href="#L8209">8209</a>             ),
<a class="jxr_linenumber" name="L8210" href="#L8210">8210</a>             GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8211" href="#L8211">8211</a>                 <span class="jxr_string">"source_id: source of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L8212" href="#L8212">8212</a>                 <span class="jxr_string">"subject_id: subject_id of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L8213" href="#L8213">8213</a>                 <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8214" href="#L8214">8214</a>                 <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8215" href="#L8215">8215</a>                 <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8216" href="#L8216">8216</a>                 <span class="jxr_string">"attribute_def_name_name2: name of the new attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8217" href="#L8217">8217</a>                 <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L8218" href="#L8218">8218</a>                 <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L8219" href="#L8219">8219</a>                 <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8220" href="#L8220">8220</a>                 <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8221" href="#L8221">8221</a>                 <span class="jxr_string">"attribute_def_name_disp_name1: display name of the original attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8222" href="#L8222">8222</a>                 <span class="jxr_string">"attribute_def_name_disp_name2: display name of the new attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8223" href="#L8223">8223</a>                 <span class="jxr_string">"list_name: name of list in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8224" href="#L8224">8224</a>                 <span class="jxr_string">"name_of_attribute_def1: name of the original attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8225" href="#L8225">8225</a>                 <span class="jxr_string">"name_of_attribute_def2: name of the new attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8226" href="#L8226">8226</a>                 <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment"</span>,
<a class="jxr_linenumber" name="L8227" href="#L8227">8227</a>                 <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment"</span>,
<a class="jxr_linenumber" name="L8228" href="#L8228">8228</a>                 <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8229" href="#L8229">8229</a>                 <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8230" href="#L8230">8230</a>                 <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8231" href="#L8231">8231</a>                 <span class="jxr_string">"group_id: group id of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8232" href="#L8232">8232</a>                 <span class="jxr_string">"member_id: internal grouper member uuid of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8233" href="#L8233">8233</a>                 <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment"</span>,
<a class="jxr_linenumber" name="L8234" href="#L8234">8234</a>                 <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment"</span>,
<a class="jxr_linenumber" name="L8235" href="#L8235">8235</a>                 <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name"</span>,
<a class="jxr_linenumber" name="L8236" href="#L8236">8236</a>                 <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name"</span>,
<a class="jxr_linenumber" name="L8237" href="#L8237">8237</a>                 <span class="jxr_string">"attribute_def_id1: id of the original attribute definition"</span>,
<a class="jxr_linenumber" name="L8238" href="#L8238">8238</a>                 <span class="jxr_string">"attribute_def_id2: id of the new attribute definition"</span>,
<a class="jxr_linenumber" name="L8239" href="#L8239">8239</a>                 <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L8240" href="#L8240">8240</a>                 <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>,
<a class="jxr_linenumber" name="L8241" href="#L8241">8241</a>                 <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L8242" href="#L8242">8242</a>             ),
<a class="jxr_linenumber" name="L8243" href="#L8243">8243</a>             <span class="jxr_string">"select distinct gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L8244" href="#L8244">8244</a>             <span class="jxr_string">"gm.subject_source as source_id, "</span> +
<a class="jxr_linenumber" name="L8245" href="#L8245">8245</a>             <span class="jxr_string">"gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L8246" href="#L8246">8246</a>             <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L8247" href="#L8247">8247</a>             <span class="jxr_string">"gadn1.name as attribute_def_name_name1, gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L8248" href="#L8248">8248</a>             + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L8249" href="#L8249">8249</a>             + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L8250" href="#L8250">8250</a>             + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L8251" href="#L8251">8251</a>             + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L8252" href="#L8252">8252</a>             + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L8253" href="#L8253">8253</a>             + <span class="jxr_string">"gf.name as list_name, "</span>
<a class="jxr_linenumber" name="L8254" href="#L8254">8254</a>             + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L8255" href="#L8255">8255</a>             + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L8256" href="#L8256">8256</a>             + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L8257" href="#L8257">8257</a>             + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L8258" href="#L8258">8258</a>             + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L8259" href="#L8259">8259</a>             + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L8260" href="#L8260">8260</a>             + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L8261" href="#L8261">8261</a>             + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L8262" href="#L8262">8262</a>             + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L8263" href="#L8263">8263</a>             + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L8264" href="#L8264">8264</a>             + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L8265" href="#L8265">8265</a>             + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L8266" href="#L8266">8266</a>             + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L8267" href="#L8267">8267</a>             + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L8268" href="#L8268">8268</a>             + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L8269" href="#L8269">8269</a>             + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L8270" href="#L8270">8270</a>             + <span class="jxr_string">"gaaa2.id as action_id2, "</span>
<a class="jxr_linenumber" name="L8271" href="#L8271">8271</a>             + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L8272" href="#L8272">8272</a>             + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, "</span> +
<a class="jxr_linenumber" name="L8273" href="#L8273">8273</a>                 <span class="jxr_string">"grouper_groups gg, grouper_memberships_all_v gmav, "</span>
<a class="jxr_linenumber" name="L8274" href="#L8274">8274</a>             + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, "</span> +
<a class="jxr_linenumber" name="L8275" href="#L8275">8275</a>                 <span class="jxr_string">"grouper_attribute_def gad1, grouper_attribute_def gad2, grouper_members gm, grouper_fields gf, "</span>
<a class="jxr_linenumber" name="L8276" href="#L8276">8276</a>             + <span class="jxr_string">"grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L8277" href="#L8277">8277</a>             + <span class="jxr_string">"where gaav.attribute_assign_id = gaa2.id "</span>
<a class="jxr_linenumber" name="L8278" href="#L8278">8278</a>             + <span class="jxr_string">" and gaa1.owner_member_id = gmav.member_id and gaa1.owner_group_id = gmav.owner_group_id"</span> +
<a class="jxr_linenumber" name="L8279" href="#L8279">8279</a>                 <span class="jxr_string">" and gaa2.owner_attribute_assign_id = gaa1.id  "</span>
<a class="jxr_linenumber" name="L8280" href="#L8280">8280</a>             + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L8281" href="#L8281">8281</a>             + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L8282" href="#L8282">8282</a>             + <span class="jxr_string">"and gaa1.enabled = 'T' and gmav.immediate_mship_enabled = 'T'"</span> +
<a class="jxr_linenumber" name="L8283" href="#L8283">8283</a>                 <span class="jxr_string">" and gmav.field_id = gf.id and gmav.member_id = gm.id and gmav.owner_group_id = gg.id"</span> +
<a class="jxr_linenumber" name="L8284" href="#L8284">8284</a>                 <span class="jxr_string">" and gf.type = 'list'"</span>
<a class="jxr_linenumber" name="L8285" href="#L8285">8285</a>             + <span class="jxr_string">" and gaa1.owner_member_id is not null "</span>
<a class="jxr_linenumber" name="L8286" href="#L8286">8286</a>             + <span class="jxr_string">" and gaa1.owner_group_id is not null "</span>
<a class="jxr_linenumber" name="L8287" href="#L8287">8287</a>             + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L8288" href="#L8288">8288</a> 
<a class="jxr_linenumber" name="L8289" href="#L8289">8289</a> 
<a class="jxr_linenumber" name="L8290" href="#L8290">8290</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_stem_v"</span>, 
<a class="jxr_linenumber" name="L8291" href="#L8291">8291</a>           <span class="jxr_string">"grouper_aval_asn_asn_stem_v: attribute assigned to an assignment of attribute to a stem, and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L8292" href="#L8292">8292</a>           GrouperUtil.toSet(<span class="jxr_string">"stem_name"</span>,
<a class="jxr_linenumber" name="L8293" href="#L8293">8293</a>               <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L8294" href="#L8294">8294</a>               <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L8295" href="#L8295">8295</a>               <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L8296" href="#L8296">8296</a>               <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L8297" href="#L8297">8297</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L8298" href="#L8298">8298</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L8299" href="#L8299">8299</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L8300" href="#L8300">8300</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L8301" href="#L8301">8301</a>               <span class="jxr_string">"stem_display_name"</span>,
<a class="jxr_linenumber" name="L8302" href="#L8302">8302</a>               <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L8303" href="#L8303">8303</a>               <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L8304" href="#L8304">8304</a>               <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L8305" href="#L8305">8305</a>               <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L8306" href="#L8306">8306</a>               <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L8307" href="#L8307">8307</a>               <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L8308" href="#L8308">8308</a>               <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L8309" href="#L8309">8309</a>               <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L8310" href="#L8310">8310</a>               <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L8311" href="#L8311">8311</a>               <span class="jxr_string">"stem_id"</span>,
<a class="jxr_linenumber" name="L8312" href="#L8312">8312</a>               <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L8313" href="#L8313">8313</a>               <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L8314" href="#L8314">8314</a>               <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L8315" href="#L8315">8315</a>               <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L8316" href="#L8316">8316</a>               <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L8317" href="#L8317">8317</a>               <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L8318" href="#L8318">8318</a>               <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L8319" href="#L8319">8319</a>               <span class="jxr_string">"action_id2"</span>,
<a class="jxr_linenumber" name="L8320" href="#L8320">8320</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L8321" href="#L8321">8321</a>             ),
<a class="jxr_linenumber" name="L8322" href="#L8322">8322</a>             GrouperUtil.toSet(<span class="jxr_string">"stem_name: name of stem assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8323" href="#L8323">8323</a>                 <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8324" href="#L8324">8324</a>                 <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8325" href="#L8325">8325</a>                 <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8326" href="#L8326">8326</a>                 <span class="jxr_string">"attribute_def_name_name2: name of the current attribute definition name which is assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8327" href="#L8327">8327</a>                 <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L8328" href="#L8328">8328</a>                 <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L8329" href="#L8329">8329</a>                 <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8330" href="#L8330">8330</a>                 <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8331" href="#L8331">8331</a>                 <span class="jxr_string">"stem_display_name: display name of the stem assigned an attribute"</span>,
<a class="jxr_linenumber" name="L8332" href="#L8332">8332</a>                 <span class="jxr_string">"attribute_def_name_disp_name1: display name of the attribute definition name assigned to the original attribute"</span>,
<a class="jxr_linenumber" name="L8333" href="#L8333">8333</a>                 <span class="jxr_string">"attribute_def_name_disp_name2: display name of the attribute definition name assigned to the new attribute"</span>,
<a class="jxr_linenumber" name="L8334" href="#L8334">8334</a>                 <span class="jxr_string">"name_of_attribute_def1: name of the attribute definition associated with the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8335" href="#L8335">8335</a>                 <span class="jxr_string">"name_of_attribute_def2: name of the attribute definition associated with the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8336" href="#L8336">8336</a>                 <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L8337" href="#L8337">8337</a>                 <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L8338" href="#L8338">8338</a>                 <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8339" href="#L8339">8339</a>                 <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8340" href="#L8340">8340</a>                 <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8341" href="#L8341">8341</a>                 <span class="jxr_string">"stem_id: stem id of the stem assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8342" href="#L8342">8342</a>                 <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L8343" href="#L8343">8343</a>                 <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L8344" href="#L8344">8344</a>                 <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8345" href="#L8345">8345</a>                 <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8346" href="#L8346">8346</a>                 <span class="jxr_string">"attribute_def_id1: id of the original attribute definition assigned to the group"</span>,
<a class="jxr_linenumber" name="L8347" href="#L8347">8347</a>                 <span class="jxr_string">"attribute_def_id2: id of the new attribute definition assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8348" href="#L8348">8348</a>                 <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L8349" href="#L8349">8349</a>                 <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>,
<a class="jxr_linenumber" name="L8350" href="#L8350">8350</a>                 <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L8351" href="#L8351">8351</a>             ),
<a class="jxr_linenumber" name="L8352" href="#L8352">8352</a>             <span class="jxr_string">"select gs.name as stem_name, "</span> +
<a class="jxr_linenumber" name="L8353" href="#L8353">8353</a>             <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L8354" href="#L8354">8354</a>             <span class="jxr_string">"gadn1.name as attribute_def_name_name1, "</span> +
<a class="jxr_linenumber" name="L8355" href="#L8355">8355</a>             <span class="jxr_string">"gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L8356" href="#L8356">8356</a>             + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L8357" href="#L8357">8357</a>             + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L8358" href="#L8358">8358</a>             + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L8359" href="#L8359">8359</a>             + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L8360" href="#L8360">8360</a>             + <span class="jxr_string">"gs.display_name as stem_display_name, "</span>
<a class="jxr_linenumber" name="L8361" href="#L8361">8361</a>             + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, "</span>
<a class="jxr_linenumber" name="L8362" href="#L8362">8362</a>             + <span class="jxr_string">"gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L8363" href="#L8363">8363</a>             + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L8364" href="#L8364">8364</a>             + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L8365" href="#L8365">8365</a>             + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L8366" href="#L8366">8366</a>             + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L8367" href="#L8367">8367</a>             + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L8368" href="#L8368">8368</a>             + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L8369" href="#L8369">8369</a>             + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L8370" href="#L8370">8370</a>             + <span class="jxr_string">"gs.id as stem_id, "</span>
<a class="jxr_linenumber" name="L8371" href="#L8371">8371</a>             + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L8372" href="#L8372">8372</a>             + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L8373" href="#L8373">8373</a>             + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L8374" href="#L8374">8374</a>             + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L8375" href="#L8375">8375</a>             + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L8376" href="#L8376">8376</a>             + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L8377" href="#L8377">8377</a>             + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L8378" href="#L8378">8378</a>             + <span class="jxr_string">"gaaa2.id as action_id2, "</span>
<a class="jxr_linenumber" name="L8379" href="#L8379">8379</a>             + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L8380" href="#L8380">8380</a>             + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, grouper_stems gs, "</span>
<a class="jxr_linenumber" name="L8381" href="#L8381">8381</a>             + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, grouper_attribute_def gad1, "</span>
<a class="jxr_linenumber" name="L8382" href="#L8382">8382</a>             + <span class="jxr_string">"grouper_attribute_def gad2, grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L8383" href="#L8383">8383</a>             + <span class="jxr_string">"where gaav.attribute_assign_id = gaa2.id "</span>
<a class="jxr_linenumber" name="L8384" href="#L8384">8384</a>             + <span class="jxr_string">" and gaa1.id = gaa2.owner_attribute_assign_id "</span>
<a class="jxr_linenumber" name="L8385" href="#L8385">8385</a>             + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id "</span>
<a class="jxr_linenumber" name="L8386" href="#L8386">8386</a>             + <span class="jxr_string">"and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L8387" href="#L8387">8387</a>             + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id "</span>
<a class="jxr_linenumber" name="L8388" href="#L8388">8388</a>             + <span class="jxr_string">"and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L8389" href="#L8389">8389</a>             + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> +
<a class="jxr_linenumber" name="L8390" href="#L8390">8390</a>                 <span class="jxr_string">"and gs.id = gaa1.owner_stem_id "</span>
<a class="jxr_linenumber" name="L8391" href="#L8391">8391</a>             + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L8392" href="#L8392">8392</a> 
<a class="jxr_linenumber" name="L8393" href="#L8393">8393</a>       
<a class="jxr_linenumber" name="L8394" href="#L8394">8394</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_member_v"</span>, 
<a class="jxr_linenumber" name="L8395" href="#L8395">8395</a>           <span class="jxr_string">"grouper_aval_asn_asn_member_v: attribute assigned to an assignment of an attribute to a member, and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L8396" href="#L8396">8396</a>           GrouperUtil.toSet(<span class="jxr_string">"source_id"</span>, <span class="jxr_string">"subject_id"</span>, 
<a class="jxr_linenumber" name="L8397" href="#L8397">8397</a>               <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L8398" href="#L8398">8398</a>               <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L8399" href="#L8399">8399</a>               <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L8400" href="#L8400">8400</a>               <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L8401" href="#L8401">8401</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L8402" href="#L8402">8402</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L8403" href="#L8403">8403</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L8404" href="#L8404">8404</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L8405" href="#L8405">8405</a>               <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L8406" href="#L8406">8406</a>               <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L8407" href="#L8407">8407</a>               <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L8408" href="#L8408">8408</a>               <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L8409" href="#L8409">8409</a>               <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L8410" href="#L8410">8410</a>               <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L8411" href="#L8411">8411</a>               <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L8412" href="#L8412">8412</a>               <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L8413" href="#L8413">8413</a>               <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L8414" href="#L8414">8414</a>               <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L8415" href="#L8415">8415</a>               <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L8416" href="#L8416">8416</a>               <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L8417" href="#L8417">8417</a>               <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L8418" href="#L8418">8418</a>               <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L8419" href="#L8419">8419</a>               <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L8420" href="#L8420">8420</a>               <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L8421" href="#L8421">8421</a>               <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L8422" href="#L8422">8422</a>               <span class="jxr_string">"action_id2"</span>,
<a class="jxr_linenumber" name="L8423" href="#L8423">8423</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L8424" href="#L8424">8424</a>             ),
<a class="jxr_linenumber" name="L8425" href="#L8425">8425</a>             GrouperUtil.toSet(<span class="jxr_string">"source_id: source id of the member assigned the original attribute"</span>,
<a class="jxr_linenumber" name="L8426" href="#L8426">8426</a>                 <span class="jxr_string">"subject_id: subject id of the member assigned the original attribute"</span>,
<a class="jxr_linenumber" name="L8427" href="#L8427">8427</a>                 <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8428" href="#L8428">8428</a>                 <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8429" href="#L8429">8429</a>                 <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8430" href="#L8430">8430</a>                 <span class="jxr_string">"attribute_def_name_name2: name of the current attribute definition name which is assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8431" href="#L8431">8431</a>                 <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L8432" href="#L8432">8432</a>                 <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L8433" href="#L8433">8433</a>                 <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8434" href="#L8434">8434</a>                 <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8435" href="#L8435">8435</a>                 <span class="jxr_string">"attribute_def_name_disp_name1: display name of the attribute definition name assigned to the original attribute"</span>,
<a class="jxr_linenumber" name="L8436" href="#L8436">8436</a>                 <span class="jxr_string">"attribute_def_name_disp_name2: display name of the attribute definition name assigned to the new attribute"</span>,
<a class="jxr_linenumber" name="L8437" href="#L8437">8437</a>                 <span class="jxr_string">"name_of_attribute_def1: name of the attribute definition associated with the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8438" href="#L8438">8438</a>                 <span class="jxr_string">"name_of_attribute_def2: name of the attribute definition associated with the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8439" href="#L8439">8439</a>                 <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L8440" href="#L8440">8440</a>                 <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L8441" href="#L8441">8441</a>                 <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8442" href="#L8442">8442</a>                 <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8443" href="#L8443">8443</a>                 <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8444" href="#L8444">8444</a>                 <span class="jxr_string">"member_id: member id of the member assigned the original attribute"</span>,
<a class="jxr_linenumber" name="L8445" href="#L8445">8445</a>                 <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L8446" href="#L8446">8446</a>                 <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L8447" href="#L8447">8447</a>                 <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8448" href="#L8448">8448</a>                 <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8449" href="#L8449">8449</a>                 <span class="jxr_string">"attribute_def_id1: id of the original attribute definition assigned to the group"</span>,
<a class="jxr_linenumber" name="L8450" href="#L8450">8450</a>                 <span class="jxr_string">"attribute_def_id2: id of the new attribute definition assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8451" href="#L8451">8451</a>                 <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L8452" href="#L8452">8452</a>                 <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>,
<a class="jxr_linenumber" name="L8453" href="#L8453">8453</a>                 <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L8454" href="#L8454">8454</a>             ),
<a class="jxr_linenumber" name="L8455" href="#L8455">8455</a>             <span class="jxr_string">"select gm.subject_source as source_id, gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L8456" href="#L8456">8456</a>             <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L8457" href="#L8457">8457</a>             <span class="jxr_string">"gadn1.name as attribute_def_name_name1, "</span> +
<a class="jxr_linenumber" name="L8458" href="#L8458">8458</a>             <span class="jxr_string">"gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L8459" href="#L8459">8459</a>             + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L8460" href="#L8460">8460</a>             + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L8461" href="#L8461">8461</a>             + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L8462" href="#L8462">8462</a>             + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L8463" href="#L8463">8463</a>             + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, "</span>
<a class="jxr_linenumber" name="L8464" href="#L8464">8464</a>             + <span class="jxr_string">"gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L8465" href="#L8465">8465</a>             + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L8466" href="#L8466">8466</a>             + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L8467" href="#L8467">8467</a>             + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L8468" href="#L8468">8468</a>             + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L8469" href="#L8469">8469</a>             + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L8470" href="#L8470">8470</a>             + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L8471" href="#L8471">8471</a>             + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L8472" href="#L8472">8472</a>             + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L8473" href="#L8473">8473</a>             + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L8474" href="#L8474">8474</a>             + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L8475" href="#L8475">8475</a>             + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L8476" href="#L8476">8476</a>             + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L8477" href="#L8477">8477</a>             + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L8478" href="#L8478">8478</a>             + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L8479" href="#L8479">8479</a>             + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L8480" href="#L8480">8480</a>             + <span class="jxr_string">"gaaa2.id as action_id2, "</span>
<a class="jxr_linenumber" name="L8481" href="#L8481">8481</a>             + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L8482" href="#L8482">8482</a>             + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, grouper_members gm, "</span>
<a class="jxr_linenumber" name="L8483" href="#L8483">8483</a>             + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, grouper_attribute_def gad1, "</span>
<a class="jxr_linenumber" name="L8484" href="#L8484">8484</a>             + <span class="jxr_string">"grouper_attribute_def gad2, grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L8485" href="#L8485">8485</a>             + <span class="jxr_string">"where gaav.attribute_assign_id = gaa2.id "</span>
<a class="jxr_linenumber" name="L8486" href="#L8486">8486</a>             + <span class="jxr_string">" and gaa1.id = gaa2.owner_attribute_assign_id "</span>
<a class="jxr_linenumber" name="L8487" href="#L8487">8487</a>             + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id "</span>
<a class="jxr_linenumber" name="L8488" href="#L8488">8488</a>             + <span class="jxr_string">"and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L8489" href="#L8489">8489</a>             + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id "</span>
<a class="jxr_linenumber" name="L8490" href="#L8490">8490</a>             + <span class="jxr_string">"and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L8491" href="#L8491">8491</a>             + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> +
<a class="jxr_linenumber" name="L8492" href="#L8492">8492</a>                 <span class="jxr_string">"and gm.id = gaa1.owner_member_id "</span>
<a class="jxr_linenumber" name="L8493" href="#L8493">8493</a>             + <span class="jxr_string">"and gaa1.owner_group_id is null "</span>
<a class="jxr_linenumber" name="L8494" href="#L8494">8494</a>             + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L8495" href="#L8495">8495</a> 
<a class="jxr_linenumber" name="L8496" href="#L8496">8496</a> 
<a class="jxr_linenumber" name="L8497" href="#L8497">8497</a>       
<a class="jxr_linenumber" name="L8498" href="#L8498">8498</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_mship_v"</span>, 
<a class="jxr_linenumber" name="L8499" href="#L8499">8499</a>           <span class="jxr_string">"grouper_aval_asn_asn_mship_v: attribute assigned to an assignment of an attribute to a membership, and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L8500" href="#L8500">8500</a>           GrouperUtil.toSet(<span class="jxr_string">"group_name"</span>,
<a class="jxr_linenumber" name="L8501" href="#L8501">8501</a>               <span class="jxr_string">"source_id"</span>,
<a class="jxr_linenumber" name="L8502" href="#L8502">8502</a>               <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L8503" href="#L8503">8503</a>               <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L8504" href="#L8504">8504</a>               <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L8505" href="#L8505">8505</a>               <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L8506" href="#L8506">8506</a>               <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L8507" href="#L8507">8507</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L8508" href="#L8508">8508</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L8509" href="#L8509">8509</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L8510" href="#L8510">8510</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L8511" href="#L8511">8511</a>               <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L8512" href="#L8512">8512</a>               <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L8513" href="#L8513">8513</a>               <span class="jxr_string">"list_name"</span>,
<a class="jxr_linenumber" name="L8514" href="#L8514">8514</a>               <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L8515" href="#L8515">8515</a>               <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L8516" href="#L8516">8516</a>               <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L8517" href="#L8517">8517</a>               <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L8518" href="#L8518">8518</a>               <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L8519" href="#L8519">8519</a>               <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L8520" href="#L8520">8520</a>               <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L8521" href="#L8521">8521</a>               <span class="jxr_string">"group_id"</span>,
<a class="jxr_linenumber" name="L8522" href="#L8522">8522</a>               <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L8523" href="#L8523">8523</a>               <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L8524" href="#L8524">8524</a>               <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L8525" href="#L8525">8525</a>               <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L8526" href="#L8526">8526</a>               <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L8527" href="#L8527">8527</a>               <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L8528" href="#L8528">8528</a>               <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L8529" href="#L8529">8529</a>               <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L8530" href="#L8530">8530</a>               <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L8531" href="#L8531">8531</a>               <span class="jxr_string">"action_id2"</span>,
<a class="jxr_linenumber" name="L8532" href="#L8532">8532</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L8533" href="#L8533">8533</a>             ),
<a class="jxr_linenumber" name="L8534" href="#L8534">8534</a>             GrouperUtil.toSet(<span class="jxr_string">"group_name: name of group in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8535" href="#L8535">8535</a>                 <span class="jxr_string">"source_id: source of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L8536" href="#L8536">8536</a>                 <span class="jxr_string">"subject_id: subject_id of the subject that belongs to the member"</span>,
<a class="jxr_linenumber" name="L8537" href="#L8537">8537</a>                 <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8538" href="#L8538">8538</a>                 <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8539" href="#L8539">8539</a>                 <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8540" href="#L8540">8540</a>                 <span class="jxr_string">"attribute_def_name_name2: name of the new attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8541" href="#L8541">8541</a>                 <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L8542" href="#L8542">8542</a>                 <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L8543" href="#L8543">8543</a>                 <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8544" href="#L8544">8544</a>                 <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8545" href="#L8545">8545</a>                 <span class="jxr_string">"attribute_def_name_disp_name1: display name of the original attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8546" href="#L8546">8546</a>                 <span class="jxr_string">"attribute_def_name_disp_name2: display name of the new attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8547" href="#L8547">8547</a>                 <span class="jxr_string">"list_name: name of list in membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8548" href="#L8548">8548</a>                 <span class="jxr_string">"name_of_attribute_def1: name of the original attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8549" href="#L8549">8549</a>                 <span class="jxr_string">"name_of_attribute_def2: name of the new attribute definition associated with the attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8550" href="#L8550">8550</a>                 <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment"</span>,
<a class="jxr_linenumber" name="L8551" href="#L8551">8551</a>                 <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment"</span>,
<a class="jxr_linenumber" name="L8552" href="#L8552">8552</a>                 <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8553" href="#L8553">8553</a>                 <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8554" href="#L8554">8554</a>                 <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8555" href="#L8555">8555</a>                 <span class="jxr_string">"group_id: group id of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8556" href="#L8556">8556</a>                 <span class="jxr_string">"membership_id: membership id assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8557" href="#L8557">8557</a>                 <span class="jxr_string">"member_id: internal grouper member uuid of the membership assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8558" href="#L8558">8558</a>                 <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment"</span>,
<a class="jxr_linenumber" name="L8559" href="#L8559">8559</a>                 <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment"</span>,
<a class="jxr_linenumber" name="L8560" href="#L8560">8560</a>                 <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name"</span>,
<a class="jxr_linenumber" name="L8561" href="#L8561">8561</a>                 <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name"</span>,
<a class="jxr_linenumber" name="L8562" href="#L8562">8562</a>                 <span class="jxr_string">"attribute_def_id1: id of the original attribute definition"</span>,
<a class="jxr_linenumber" name="L8563" href="#L8563">8563</a>                 <span class="jxr_string">"attribute_def_id2: id of the new attribute definition"</span>,
<a class="jxr_linenumber" name="L8564" href="#L8564">8564</a>                 <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L8565" href="#L8565">8565</a>                 <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>,
<a class="jxr_linenumber" name="L8566" href="#L8566">8566</a>                 <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L8567" href="#L8567">8567</a>             ),
<a class="jxr_linenumber" name="L8568" href="#L8568">8568</a>             <span class="jxr_string">"select gg.name as group_name, "</span> +
<a class="jxr_linenumber" name="L8569" href="#L8569">8569</a>             <span class="jxr_string">"gm.subject_source as source_id, "</span> +
<a class="jxr_linenumber" name="L8570" href="#L8570">8570</a>             <span class="jxr_string">"gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L8571" href="#L8571">8571</a>             <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> 
<a class="jxr_linenumber" name="L8572" href="#L8572">8572</a>             + <span class="jxr_string">"gadn1.name as attribute_def_name_name1, gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L8573" href="#L8573">8573</a>             + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L8574" href="#L8574">8574</a>             + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L8575" href="#L8575">8575</a>             + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L8576" href="#L8576">8576</a>             + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L8577" href="#L8577">8577</a>             + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L8578" href="#L8578">8578</a>             + <span class="jxr_string">"gf.name as list_name, "</span>
<a class="jxr_linenumber" name="L8579" href="#L8579">8579</a>             + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L8580" href="#L8580">8580</a>             + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L8581" href="#L8581">8581</a>             + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L8582" href="#L8582">8582</a>             + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L8583" href="#L8583">8583</a>             + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L8584" href="#L8584">8584</a>             + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L8585" href="#L8585">8585</a>             + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L8586" href="#L8586">8586</a>             + <span class="jxr_string">"gg.id as group_id, "</span>
<a class="jxr_linenumber" name="L8587" href="#L8587">8587</a>             + <span class="jxr_string">"gms.id as membership_id, "</span>
<a class="jxr_linenumber" name="L8588" href="#L8588">8588</a>             + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L8589" href="#L8589">8589</a>             + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L8590" href="#L8590">8590</a>             + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L8591" href="#L8591">8591</a>             + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L8592" href="#L8592">8592</a>             + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L8593" href="#L8593">8593</a>             + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L8594" href="#L8594">8594</a>             + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L8595" href="#L8595">8595</a>             + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L8596" href="#L8596">8596</a>             + <span class="jxr_string">"gaaa2.id as action_id2, "</span>
<a class="jxr_linenumber" name="L8597" href="#L8597">8597</a>             + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L8598" href="#L8598">8598</a>             + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, "</span> +
<a class="jxr_linenumber" name="L8599" href="#L8599">8599</a>                 <span class="jxr_string">"grouper_groups gg, grouper_memberships gms, "</span>
<a class="jxr_linenumber" name="L8600" href="#L8600">8600</a>             + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, "</span> +
<a class="jxr_linenumber" name="L8601" href="#L8601">8601</a>                 <span class="jxr_string">"grouper_attribute_def gad1, grouper_attribute_def gad2, grouper_members gm, grouper_fields gf, "</span>
<a class="jxr_linenumber" name="L8602" href="#L8602">8602</a>             + <span class="jxr_string">"grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L8603" href="#L8603">8603</a>             + <span class="jxr_string">"where gaav.attribute_assign_id = gaa2.id "</span>
<a class="jxr_linenumber" name="L8604" href="#L8604">8604</a>             + <span class="jxr_string">" and gaa1.owner_membership_id = gms.id and gaa2.owner_attribute_assign_id = gaa1.id  "</span>
<a class="jxr_linenumber" name="L8605" href="#L8605">8605</a>             + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L8606" href="#L8606">8606</a>             + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L8607" href="#L8607">8607</a>             + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> 
<a class="jxr_linenumber" name="L8608" href="#L8608">8608</a>             + <span class="jxr_string">" and gms.field_id = gf.id and gms.member_id = gm.id and gms.owner_group_id = gg.id"</span> 
<a class="jxr_linenumber" name="L8609" href="#L8609">8609</a>             + <span class="jxr_string">" and gf.type = 'list' "</span>
<a class="jxr_linenumber" name="L8610" href="#L8610">8610</a>             + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L8611" href="#L8611">8611</a> 
<a class="jxr_linenumber" name="L8612" href="#L8612">8612</a> 
<a class="jxr_linenumber" name="L8613" href="#L8613">8613</a>       
<a class="jxr_linenumber" name="L8614" href="#L8614">8614</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_aval_asn_asn_attrdef_v"</span>, 
<a class="jxr_linenumber" name="L8615" href="#L8615">8615</a>           <span class="jxr_string">"grouper_aval_asn_asn_attrdef_v: attribute assigned to an assignment of an attribute to an attribute definition, and related cols and values (multiple rows if multiple values, no rows if no values)"</span>,
<a class="jxr_linenumber" name="L8616" href="#L8616">8616</a>           GrouperUtil.toSet(<span class="jxr_string">"name_of_attr_def_assigned_to"</span>,
<a class="jxr_linenumber" name="L8617" href="#L8617">8617</a>               <span class="jxr_string">"action1"</span>,
<a class="jxr_linenumber" name="L8618" href="#L8618">8618</a>               <span class="jxr_string">"action2"</span>,
<a class="jxr_linenumber" name="L8619" href="#L8619">8619</a>               <span class="jxr_string">"attribute_def_name_name1"</span>,
<a class="jxr_linenumber" name="L8620" href="#L8620">8620</a>               <span class="jxr_string">"attribute_def_name_name2"</span>,
<a class="jxr_linenumber" name="L8621" href="#L8621">8621</a>               <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L8622" href="#L8622">8622</a>               <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L8623" href="#L8623">8623</a>               <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L8624" href="#L8624">8624</a>               <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L8625" href="#L8625">8625</a>               <span class="jxr_string">"attribute_def_name_disp_name1"</span>,
<a class="jxr_linenumber" name="L8626" href="#L8626">8626</a>               <span class="jxr_string">"attribute_def_name_disp_name2"</span>,
<a class="jxr_linenumber" name="L8627" href="#L8627">8627</a>               <span class="jxr_string">"name_of_attribute_def1"</span>,
<a class="jxr_linenumber" name="L8628" href="#L8628">8628</a>               <span class="jxr_string">"name_of_attribute_def2"</span>,
<a class="jxr_linenumber" name="L8629" href="#L8629">8629</a>               <span class="jxr_string">"attribute_assign_notes1"</span>,
<a class="jxr_linenumber" name="L8630" href="#L8630">8630</a>               <span class="jxr_string">"attribute_assign_notes2"</span>,
<a class="jxr_linenumber" name="L8631" href="#L8631">8631</a>               <span class="jxr_string">"enabled2"</span>,
<a class="jxr_linenumber" name="L8632" href="#L8632">8632</a>               <span class="jxr_string">"enabled_time2"</span>,
<a class="jxr_linenumber" name="L8633" href="#L8633">8633</a>               <span class="jxr_string">"disabled_time2"</span>,
<a class="jxr_linenumber" name="L8634" href="#L8634">8634</a>               <span class="jxr_string">"id_of_attr_def_assigned_to"</span>,
<a class="jxr_linenumber" name="L8635" href="#L8635">8635</a>               <span class="jxr_string">"attribute_assign_id1"</span>,
<a class="jxr_linenumber" name="L8636" href="#L8636">8636</a>               <span class="jxr_string">"attribute_assign_id2"</span>,
<a class="jxr_linenumber" name="L8637" href="#L8637">8637</a>               <span class="jxr_string">"attribute_def_name_id1"</span>,
<a class="jxr_linenumber" name="L8638" href="#L8638">8638</a>               <span class="jxr_string">"attribute_def_name_id2"</span>,
<a class="jxr_linenumber" name="L8639" href="#L8639">8639</a>               <span class="jxr_string">"attribute_def_id1"</span>,
<a class="jxr_linenumber" name="L8640" href="#L8640">8640</a>               <span class="jxr_string">"attribute_def_id2"</span>,
<a class="jxr_linenumber" name="L8641" href="#L8641">8641</a>               <span class="jxr_string">"action_id1"</span>,
<a class="jxr_linenumber" name="L8642" href="#L8642">8642</a>               <span class="jxr_string">"action_id2"</span>,
<a class="jxr_linenumber" name="L8643" href="#L8643">8643</a>               <span class="jxr_string">"attribute_assign_value_id"</span>
<a class="jxr_linenumber" name="L8644" href="#L8644">8644</a>             ),
<a class="jxr_linenumber" name="L8645" href="#L8645">8645</a>             GrouperUtil.toSet(<span class="jxr_string">"name_of_attr_def_assigned_to: name of attribute_def originally assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8646" href="#L8646">8646</a>                 <span class="jxr_string">"action1: the action associated with the original attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8647" href="#L8647">8647</a>                 <span class="jxr_string">"action2: the action associated with this attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8648" href="#L8648">8648</a>                 <span class="jxr_string">"attribute_def_name_name1: name of the original attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8649" href="#L8649">8649</a>                 <span class="jxr_string">"attribute_def_name_name2: name of the current attribute definition name which is assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8650" href="#L8650">8650</a>                 <span class="jxr_string">"value_string: if this is a string attributeDef, then this is the string"</span>,
<a class="jxr_linenumber" name="L8651" href="#L8651">8651</a>                 <span class="jxr_string">"value_integer: if this is an integer attributeDef, then this is the integer"</span>,
<a class="jxr_linenumber" name="L8652" href="#L8652">8652</a>                 <span class="jxr_string">"value_floating: if this is a floating attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8653" href="#L8653">8653</a>                 <span class="jxr_string">"value_member_id: if this is a memberId attributeDef, then this is the value"</span>,
<a class="jxr_linenumber" name="L8654" href="#L8654">8654</a>                 <span class="jxr_string">"attribute_def_name_disp_name1: display name of the attribute definition name assigned to the original attribute"</span>,
<a class="jxr_linenumber" name="L8655" href="#L8655">8655</a>                 <span class="jxr_string">"attribute_def_name_disp_name2: display name of the attribute definition name assigned to the new attribute"</span>,
<a class="jxr_linenumber" name="L8656" href="#L8656">8656</a>                 <span class="jxr_string">"name_of_attribute_def1: name of the attribute definition associated with the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8657" href="#L8657">8657</a>                 <span class="jxr_string">"name_of_attribute_def2: name of the attribute definition associated with the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8658" href="#L8658">8658</a>                 <span class="jxr_string">"attribute_assign_notes1: notes related to the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L8659" href="#L8659">8659</a>                 <span class="jxr_string">"attribute_assign_notes2: notes related to the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L8660" href="#L8660">8660</a>                 <span class="jxr_string">"enabled2: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8661" href="#L8661">8661</a>                 <span class="jxr_string">"enabled_time2: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8662" href="#L8662">8662</a>                 <span class="jxr_string">"disabled_time2: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8663" href="#L8663">8663</a>                 <span class="jxr_string">"id_of_attr_def_assigned_to: id of the attribute def assigned the attribute"</span>,
<a class="jxr_linenumber" name="L8664" href="#L8664">8664</a>                 <span class="jxr_string">"attribute_assign_id1: id of the original attribute assignment to the group"</span>,
<a class="jxr_linenumber" name="L8665" href="#L8665">8665</a>                 <span class="jxr_string">"attribute_assign_id2: id of the new attribute assignment to the assignment"</span>,
<a class="jxr_linenumber" name="L8666" href="#L8666">8666</a>                 <span class="jxr_string">"attribute_def_name_id1: id of the original attribute definition name assigned to the group"</span>,
<a class="jxr_linenumber" name="L8667" href="#L8667">8667</a>                 <span class="jxr_string">"attribute_def_name_id2: id of the new attribute definition name assigned to the assignment"</span>,
<a class="jxr_linenumber" name="L8668" href="#L8668">8668</a>                 <span class="jxr_string">"attribute_def_id1: id of the original attribute definition assigned to the group"</span>,
<a class="jxr_linenumber" name="L8669" href="#L8669">8669</a>                 <span class="jxr_string">"attribute_def_id2: id of the new attribute definition assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8670" href="#L8670">8670</a>                 <span class="jxr_string">"action_id1: id of the attribute assign action of the original assignment"</span>,
<a class="jxr_linenumber" name="L8671" href="#L8671">8671</a>                 <span class="jxr_string">"action_id2: id of the attribute assign action assigned to the group"</span>,
<a class="jxr_linenumber" name="L8672" href="#L8672">8672</a>                 <span class="jxr_string">"attribute_assign_value_id: the id of the value"</span>
<a class="jxr_linenumber" name="L8673" href="#L8673">8673</a>             ),
<a class="jxr_linenumber" name="L8674" href="#L8674">8674</a>             <span class="jxr_string">"select gad.name as name_of_attr_def_assigned_to, "</span> +
<a class="jxr_linenumber" name="L8675" href="#L8675">8675</a>             <span class="jxr_string">"gaaa1.name as action1, gaaa2.name as action2,  "</span> +
<a class="jxr_linenumber" name="L8676" href="#L8676">8676</a>             <span class="jxr_string">"gadn1.name as attribute_def_name_name1, "</span> +
<a class="jxr_linenumber" name="L8677" href="#L8677">8677</a>             <span class="jxr_string">"gadn2.name as attribute_def_name_name2, "</span>
<a class="jxr_linenumber" name="L8678" href="#L8678">8678</a>             + <span class="jxr_string">" gaav.value_string AS value_string, "</span>          
<a class="jxr_linenumber" name="L8679" href="#L8679">8679</a>             + <span class="jxr_string">" gaav.value_integer AS value_integer, "</span>
<a class="jxr_linenumber" name="L8680" href="#L8680">8680</a>             + <span class="jxr_string">" gaav.value_floating AS value_floating, "</span>
<a class="jxr_linenumber" name="L8681" href="#L8681">8681</a>             + <span class="jxr_string">" gaav.value_member_id AS value_member_id, "</span>
<a class="jxr_linenumber" name="L8682" href="#L8682">8682</a>             + <span class="jxr_string">"gadn1.display_name as attribute_def_name_disp_name1, "</span>
<a class="jxr_linenumber" name="L8683" href="#L8683">8683</a>             + <span class="jxr_string">"gadn2.display_name as attribute_def_name_disp_name2, "</span>
<a class="jxr_linenumber" name="L8684" href="#L8684">8684</a>             + <span class="jxr_string">"gad1.name as name_of_attribute_def1, "</span>
<a class="jxr_linenumber" name="L8685" href="#L8685">8685</a>             + <span class="jxr_string">"gad2.name as name_of_attribute_def2, "</span>
<a class="jxr_linenumber" name="L8686" href="#L8686">8686</a>             + <span class="jxr_string">"gaa1.notes as attribute_assign_notes1, "</span>
<a class="jxr_linenumber" name="L8687" href="#L8687">8687</a>             + <span class="jxr_string">"gaa2.notes as attribute_assign_notes2, "</span>
<a class="jxr_linenumber" name="L8688" href="#L8688">8688</a>             + <span class="jxr_string">"gaa2.enabled as enabled2, "</span>
<a class="jxr_linenumber" name="L8689" href="#L8689">8689</a>             + <span class="jxr_string">"gaa2.enabled_time as enabled_time2, "</span>
<a class="jxr_linenumber" name="L8690" href="#L8690">8690</a>             + <span class="jxr_string">"gaa2.disabled_time as disabled_time2, "</span>
<a class="jxr_linenumber" name="L8691" href="#L8691">8691</a>             + <span class="jxr_string">"gad.id as id_of_attr_def_assigned_to, "</span>
<a class="jxr_linenumber" name="L8692" href="#L8692">8692</a>             + <span class="jxr_string">"gaa1.id as attribute_assign_id1, "</span>
<a class="jxr_linenumber" name="L8693" href="#L8693">8693</a>             + <span class="jxr_string">"gaa2.id as attribute_assign_id2, "</span>
<a class="jxr_linenumber" name="L8694" href="#L8694">8694</a>             + <span class="jxr_string">"gadn1.id as attribute_def_name_id1, "</span>
<a class="jxr_linenumber" name="L8695" href="#L8695">8695</a>             + <span class="jxr_string">"gadn2.id as attribute_def_name_id2, "</span>
<a class="jxr_linenumber" name="L8696" href="#L8696">8696</a>             + <span class="jxr_string">"gad1.id as attribute_def_id1, "</span>
<a class="jxr_linenumber" name="L8697" href="#L8697">8697</a>             + <span class="jxr_string">"gad2.id as attribute_def_id2, "</span>
<a class="jxr_linenumber" name="L8698" href="#L8698">8698</a>             + <span class="jxr_string">"gaaa1.id as action_id1, "</span>
<a class="jxr_linenumber" name="L8699" href="#L8699">8699</a>             + <span class="jxr_string">"gaaa2.id as action_id2, "</span>
<a class="jxr_linenumber" name="L8700" href="#L8700">8700</a>             + <span class="jxr_string">" gaav.id AS attribute_assign_value_id "</span>
<a class="jxr_linenumber" name="L8701" href="#L8701">8701</a>             + <span class="jxr_string">"from grouper_attribute_assign gaa1, grouper_attribute_assign gaa2, grouper_attribute_def gad, "</span>
<a class="jxr_linenumber" name="L8702" href="#L8702">8702</a>             + <span class="jxr_string">"grouper_attribute_def_name gadn1, grouper_attribute_def_name gadn2, grouper_attribute_def gad1, "</span>
<a class="jxr_linenumber" name="L8703" href="#L8703">8703</a>             + <span class="jxr_string">"grouper_attribute_def gad2, "</span>
<a class="jxr_linenumber" name="L8704" href="#L8704">8704</a>             + <span class="jxr_string">"grouper_attr_assign_action gaaa1, grouper_attr_assign_action gaaa2, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L8705" href="#L8705">8705</a>             + <span class="jxr_string">"where gaav.attribute_assign_id = gaa2.id "</span>
<a class="jxr_linenumber" name="L8706" href="#L8706">8706</a>             + <span class="jxr_string">" and gaa1.id = gaa2.owner_attribute_assign_id "</span>
<a class="jxr_linenumber" name="L8707" href="#L8707">8707</a>             + <span class="jxr_string">"and gaa1.attribute_def_name_id = gadn1.id "</span>
<a class="jxr_linenumber" name="L8708" href="#L8708">8708</a>             + <span class="jxr_string">"and gaa2.attribute_def_name_id = gadn2.id "</span>
<a class="jxr_linenumber" name="L8709" href="#L8709">8709</a>             + <span class="jxr_string">"and gadn1.attribute_def_id = gad1.id "</span>
<a class="jxr_linenumber" name="L8710" href="#L8710">8710</a>             + <span class="jxr_string">"and gadn2.attribute_def_id = gad2.id "</span>
<a class="jxr_linenumber" name="L8711" href="#L8711">8711</a>             + <span class="jxr_string">"and gaa1.enabled = 'T' "</span> 
<a class="jxr_linenumber" name="L8712" href="#L8712">8712</a>             + <span class="jxr_string">"and gad.id = gaa1.owner_attribute_def_id "</span>
<a class="jxr_linenumber" name="L8713" href="#L8713">8713</a>             + <span class="jxr_string">"and gaa1.attribute_assign_action_id = gaaa1.id and gaa2.attribute_assign_action_id = gaaa2.id "</span>);
<a class="jxr_linenumber" name="L8714" href="#L8714">8714</a> 
<a class="jxr_linenumber" name="L8715" href="#L8715">8715</a> 
<a class="jxr_linenumber" name="L8716" href="#L8716">8716</a>       
<a class="jxr_linenumber" name="L8717" href="#L8717">8717</a>       
<a class="jxr_linenumber" name="L8718" href="#L8718">8718</a>       
<a class="jxr_linenumber" name="L8719" href="#L8719">8719</a>       
<a class="jxr_linenumber" name="L8720" href="#L8720">8720</a>       
<a class="jxr_linenumber" name="L8721" href="#L8721">8721</a>     }
<a class="jxr_linenumber" name="L8722" href="#L8722">8722</a>     
<a class="jxr_linenumber" name="L8723" href="#L8723">8723</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_attr_def_priv_v"</span>, 
<a class="jxr_linenumber" name="L8724" href="#L8724">8724</a>         <span class="jxr_string">"grouper_attr_def_priv_v: shows all privileges internal to grouper of attribute defs"</span>,
<a class="jxr_linenumber" name="L8725" href="#L8725">8725</a>         GrouperUtil.toSet(<span class="jxr_string">"subject_id"</span>, 
<a class="jxr_linenumber" name="L8726" href="#L8726">8726</a>             <span class="jxr_string">"subject_source_id"</span>, 
<a class="jxr_linenumber" name="L8727" href="#L8727">8727</a>             <span class="jxr_string">"field_name"</span>, 
<a class="jxr_linenumber" name="L8728" href="#L8728">8728</a>             <span class="jxr_string">"attribute_def_name"</span>, 
<a class="jxr_linenumber" name="L8729" href="#L8729">8729</a>             <span class="jxr_string">"attribute_def_description"</span>,
<a class="jxr_linenumber" name="L8730" href="#L8730">8730</a>             <span class="jxr_string">"attribute_def_type"</span>, 
<a class="jxr_linenumber" name="L8731" href="#L8731">8731</a>             <span class="jxr_string">"attribute_def_stem_id"</span>, 
<a class="jxr_linenumber" name="L8732" href="#L8732">8732</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L8733" href="#L8733">8733</a>             <span class="jxr_string">"member_id"</span>, <span class="jxr_string">"field_id"</span>, 
<a class="jxr_linenumber" name="L8734" href="#L8734">8734</a>             <span class="jxr_string">"immediate_membership_id"</span>, 
<a class="jxr_linenumber" name="L8735" href="#L8735">8735</a>             <span class="jxr_string">"membership_id"</span>),
<a class="jxr_linenumber" name="L8736" href="#L8736">8736</a>         GrouperUtil.toSet(<span class="jxr_string">"subject_id: of who has the priv"</span>, 
<a class="jxr_linenumber" name="L8737" href="#L8737">8737</a>             <span class="jxr_string">"subject_source_id: source id of the subject with the priv"</span>, 
<a class="jxr_linenumber" name="L8738" href="#L8738">8738</a>             <span class="jxr_string">"field_name: field name of priv, e.g. attrView, attrRead, attrAdmin, attrUpdate, attrOptin, attrOptout, attrDefAttrRead, attrDefAttrUpdate"</span>,
<a class="jxr_linenumber" name="L8739" href="#L8739">8739</a>             <span class="jxr_string">"attribute_def_name: name of attribute definition"</span>,
<a class="jxr_linenumber" name="L8740" href="#L8740">8740</a>             <span class="jxr_string">"attribute_def_description: description of the attribute def"</span>,
<a class="jxr_linenumber" name="L8741" href="#L8741">8741</a>             <span class="jxr_string">"attribute_def_type: type of attribute, e.g. attribute, privilege, domain"</span>, 
<a class="jxr_linenumber" name="L8742" href="#L8742">8742</a>             <span class="jxr_string">"attribute_def_stem_id: id of stem the attribute def is in"</span>,
<a class="jxr_linenumber" name="L8743" href="#L8743">8743</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>, 
<a class="jxr_linenumber" name="L8744" href="#L8744">8744</a>             <span class="jxr_string">"member_id: id of the subject in the members table"</span>,
<a class="jxr_linenumber" name="L8745" href="#L8745">8745</a>             <span class="jxr_string">"field_id: id of the field of membership"</span>,
<a class="jxr_linenumber" name="L8746" href="#L8746">8746</a>             <span class="jxr_string">"immediate_membership_id: id of the membership in the memberships table"</span>,
<a class="jxr_linenumber" name="L8747" href="#L8747">8747</a>             <span class="jxr_string">"membership_id: id of the membership in the membership all view"</span>
<a class="jxr_linenumber" name="L8748" href="#L8748">8748</a>         ),
<a class="jxr_linenumber" name="L8749" href="#L8749">8749</a>         <span class="jxr_string">"select distinct gm.subject_id, "</span> +
<a class="jxr_linenumber" name="L8750" href="#L8750">8750</a>         <span class="jxr_string">"gm.subject_source as subject_source_id,  "</span>
<a class="jxr_linenumber" name="L8751" href="#L8751">8751</a>         + <span class="jxr_string">"gf.name as field_name, "</span> +
<a class="jxr_linenumber" name="L8752" href="#L8752">8752</a>         		<span class="jxr_string">"gad.name as attribute_def_name, "</span>
<a class="jxr_linenumber" name="L8753" href="#L8753">8753</a>         + <span class="jxr_string">"gad.description as attribute_def_description,  "</span>
<a class="jxr_linenumber" name="L8754" href="#L8754">8754</a>         + <span class="jxr_string">"gad.attribute_def_type, "</span>
<a class="jxr_linenumber" name="L8755" href="#L8755">8755</a>         + <span class="jxr_string">"gad.stem_id as attribute_def_stem_id, "</span>
<a class="jxr_linenumber" name="L8756" href="#L8756">8756</a>         + <span class="jxr_string">"gad.id as attribute_def_id,  "</span>
<a class="jxr_linenumber" name="L8757" href="#L8757">8757</a>         + <span class="jxr_string">"gm.id as member_id, "</span>
<a class="jxr_linenumber" name="L8758" href="#L8758">8758</a>         + <span class="jxr_string">"gmav.field_id, "</span> +
<a class="jxr_linenumber" name="L8759" href="#L8759">8759</a>         		<span class="jxr_string">"gmav.immediate_membership_id, "</span> +
<a class="jxr_linenumber" name="L8760" href="#L8760">8760</a>         		<span class="jxr_string">"gmav.membership_id  "</span>
<a class="jxr_linenumber" name="L8761" href="#L8761">8761</a>         + <span class="jxr_string">"from grouper_memberships_all_v gmav, grouper_attribute_def gad, grouper_fields gf, grouper_members gm "</span>
<a class="jxr_linenumber" name="L8762" href="#L8762">8762</a>         + <span class="jxr_string">"where gmav.owner_attr_def_id = gad.id and gmav.field_id = gf.id "</span>
<a class="jxr_linenumber" name="L8763" href="#L8763">8763</a>         + <span class="jxr_string">"and gmav.immediate_mship_enabled = 'T' and gmav.member_id = gm.id "</span>);
<a class="jxr_linenumber" name="L8764" href="#L8764">8764</a> 
<a class="jxr_linenumber" name="L8765" href="#L8765">8765</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_perms_assigned_role_v"</span>, 
<a class="jxr_linenumber" name="L8766" href="#L8766">8766</a>         <span class="jxr_string">"grouper_perms_assigned_role_v: shows all permissions assigned to roles"</span>,
<a class="jxr_linenumber" name="L8767" href="#L8767">8767</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name"</span>, 
<a class="jxr_linenumber" name="L8768" href="#L8768">8768</a>             <span class="jxr_string">"action"</span>, 
<a class="jxr_linenumber" name="L8769" href="#L8769">8769</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L8770" href="#L8770">8770</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L8771" href="#L8771">8771</a>             <span class="jxr_string">"role_display_name"</span>,
<a class="jxr_linenumber" name="L8772" href="#L8772">8772</a>             <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L8773" href="#L8773">8773</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L8774" href="#L8774">8774</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L8775" href="#L8775">8775</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L8776" href="#L8776">8776</a>             <span class="jxr_string">"role_id"</span>,
<a class="jxr_linenumber" name="L8777" href="#L8777">8777</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L8778" href="#L8778">8778</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L8779" href="#L8779">8779</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L8780" href="#L8780">8780</a>             <span class="jxr_string">"role_set_depth"</span>,
<a class="jxr_linenumber" name="L8781" href="#L8781">8781</a>             <span class="jxr_string">"attr_def_name_set_depth"</span>,
<a class="jxr_linenumber" name="L8782" href="#L8782">8782</a>             <span class="jxr_string">"attr_assign_action_set_depth"</span>,
<a class="jxr_linenumber" name="L8783" href="#L8783">8783</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L8784" href="#L8784">8784</a>             <span class="jxr_string">"assignment_notes"</span>,
<a class="jxr_linenumber" name="L8785" href="#L8785">8785</a>             <span class="jxr_string">"disallowed"</span>,
<a class="jxr_linenumber" name="L8786" href="#L8786">8786</a>             <span class="jxr_string">"permission_type"</span>),
<a class="jxr_linenumber" name="L8787" href="#L8787">8787</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name: name of the role that the user is in and that has the permission"</span>,
<a class="jxr_linenumber" name="L8788" href="#L8788">8788</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8789" href="#L8789">8789</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8790" href="#L8790">8790</a>             <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8791" href="#L8791">8791</a>             <span class="jxr_string">"role_display_name: display name of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L8792" href="#L8792">8792</a>             <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L8793" href="#L8793">8793</a>             <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8794" href="#L8794">8794</a>             <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8795" href="#L8795">8795</a>             <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8796" href="#L8796">8796</a>             <span class="jxr_string">"role_id: id of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L8797" href="#L8797">8797</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L8798" href="#L8798">8798</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L8799" href="#L8799">8799</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L8800" href="#L8800">8800</a>             <span class="jxr_string">"role_set_depth: depth of role hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L8801" href="#L8801">8801</a>             <span class="jxr_string">"attr_def_name_set_depth: depth of attribute def name set hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L8802" href="#L8802">8802</a>             <span class="jxr_string">"attr_assign_action_set_depth: depth of action hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L8803" href="#L8803">8803</a>             <span class="jxr_string">"attribute_assign_id: id of the underlying attribute assign"</span>,
<a class="jxr_linenumber" name="L8804" href="#L8804">8804</a>             <span class="jxr_string">"assignment_notes: notes on this assignment"</span>,
<a class="jxr_linenumber" name="L8805" href="#L8805">8805</a>             <span class="jxr_string">"disallowed: if permission is disallowed from a wider allow, null means false"</span>,
<a class="jxr_linenumber" name="L8806" href="#L8806">8806</a>             <span class="jxr_string">"permission_type: role since these are role assignments"</span>
<a class="jxr_linenumber" name="L8807" href="#L8807">8807</a>         ),
<a class="jxr_linenumber" name="L8808" href="#L8808">8808</a>         <span class="jxr_string">"SELECT distinct gr.name AS role_name,  "</span> +
<a class="jxr_linenumber" name="L8809" href="#L8809">8809</a>         <span class="jxr_string">"    gaaa.name AS action, "</span> +
<a class="jxr_linenumber" name="L8810" href="#L8810">8810</a>         <span class="jxr_string">"    gadn.name AS attribute_def_name_name, "</span> +
<a class="jxr_linenumber" name="L8811" href="#L8811">8811</a>         <span class="jxr_string">"    gadn.display_name AS attribute_def_name_disp_name, "</span> +
<a class="jxr_linenumber" name="L8812" href="#L8812">8812</a>         <span class="jxr_string">"    gr.display_name AS role_display_name, "</span> +
<a class="jxr_linenumber" name="L8813" href="#L8813">8813</a>         <span class="jxr_string">"    gaa.attribute_assign_delegatable,  "</span> +
<a class="jxr_linenumber" name="L8814" href="#L8814">8814</a>         <span class="jxr_string">"    gaa.enabled, "</span> +
<a class="jxr_linenumber" name="L8815" href="#L8815">8815</a>         <span class="jxr_string">"    gaa.enabled_time,  "</span> +
<a class="jxr_linenumber" name="L8816" href="#L8816">8816</a>         <span class="jxr_string">"    gaa.disabled_time,  "</span> +
<a class="jxr_linenumber" name="L8817" href="#L8817">8817</a>         <span class="jxr_string">"    gr.ID AS role_id, "</span> +
<a class="jxr_linenumber" name="L8818" href="#L8818">8818</a>         <span class="jxr_string">"    gadn.attribute_def_id, "</span> +
<a class="jxr_linenumber" name="L8819" href="#L8819">8819</a>         <span class="jxr_string">"    gadn.ID AS attribute_def_name_id,  "</span> +
<a class="jxr_linenumber" name="L8820" href="#L8820">8820</a>         <span class="jxr_string">"    gaaa.ID AS action_id, "</span> +
<a class="jxr_linenumber" name="L8821" href="#L8821">8821</a>         <span class="jxr_string">"    grs.DEPTH AS role_set_depth, "</span> +
<a class="jxr_linenumber" name="L8822" href="#L8822">8822</a>         <span class="jxr_string">"    gadns.DEPTH AS attr_def_name_set_depth, "</span> +
<a class="jxr_linenumber" name="L8823" href="#L8823">8823</a>         <span class="jxr_string">"    gaaas.DEPTH AS attr_assign_action_set_depth, "</span> +
<a class="jxr_linenumber" name="L8824" href="#L8824">8824</a>         <span class="jxr_string">"    gaa.ID AS attribute_assign_id, "</span> +
<a class="jxr_linenumber" name="L8825" href="#L8825">8825</a>         <span class="jxr_string">"    gaa.notes AS assignment_notes, "</span> +
<a class="jxr_linenumber" name="L8826" href="#L8826">8826</a>         <span class="jxr_string">"    gaa.disallowed, "</span> +
<a class="jxr_linenumber" name="L8827" href="#L8827">8827</a>         <span class="jxr_string">"    'role' AS permission_type "</span> +
<a class="jxr_linenumber" name="L8828" href="#L8828">8828</a>         <span class="jxr_string">"FROM grouper_groups gr, "</span> +
<a class="jxr_linenumber" name="L8829" href="#L8829">8829</a>         <span class="jxr_string">"    grouper_role_set grs, "</span> +
<a class="jxr_linenumber" name="L8830" href="#L8830">8830</a>         <span class="jxr_string">"    grouper_attribute_def gad, "</span> +
<a class="jxr_linenumber" name="L8831" href="#L8831">8831</a>         <span class="jxr_string">"    grouper_attribute_assign gaa, "</span> +
<a class="jxr_linenumber" name="L8832" href="#L8832">8832</a>         <span class="jxr_string">"    grouper_attribute_def_name gadn, "</span> +
<a class="jxr_linenumber" name="L8833" href="#L8833">8833</a>         <span class="jxr_string">"    grouper_attribute_def_name_set gadns, "</span> +
<a class="jxr_linenumber" name="L8834" href="#L8834">8834</a>         <span class="jxr_string">"    grouper_attr_assign_action gaaa, "</span> +
<a class="jxr_linenumber" name="L8835" href="#L8835">8835</a>         <span class="jxr_string">"    grouper_attr_assign_action_set gaaas "</span> +
<a class="jxr_linenumber" name="L8836" href="#L8836">8836</a>         <span class="jxr_string">"WHERE grs.if_has_role_id = gr.id "</span> +
<a class="jxr_linenumber" name="L8837" href="#L8837">8837</a>         <span class="jxr_string">"and gr.type_of_group = 'role'  "</span> +
<a class="jxr_linenumber" name="L8838" href="#L8838">8838</a>         <span class="jxr_string">"AND gadn.attribute_def_id = gad.id "</span> +
<a class="jxr_linenumber" name="L8839" href="#L8839">8839</a>         <span class="jxr_string">"AND gad.attribute_def_type = 'perm' "</span> +
<a class="jxr_linenumber" name="L8840" href="#L8840">8840</a>         <span class="jxr_string">"AND gaa.owner_group_id = grs.then_has_role_id "</span> +
<a class="jxr_linenumber" name="L8841" href="#L8841">8841</a>         <span class="jxr_string">"AND gaa.attribute_def_name_id = gadns.if_has_attribute_def_name_id "</span> +
<a class="jxr_linenumber" name="L8842" href="#L8842">8842</a>         <span class="jxr_string">"AND gadn.id = gadns.then_has_attribute_def_name_id "</span> +
<a class="jxr_linenumber" name="L8843" href="#L8843">8843</a>         <span class="jxr_string">"AND gaa.attribute_assign_type = 'group' "</span> +
<a class="jxr_linenumber" name="L8844" href="#L8844">8844</a>         <span class="jxr_string">"AND gaa.attribute_assign_action_id = gaaas.if_has_attr_assn_action_id "</span> +
<a class="jxr_linenumber" name="L8845" href="#L8845">8845</a>         <span class="jxr_string">"AND gaaa.id = gaaas.then_has_attr_assn_action_id "</span>);
<a class="jxr_linenumber" name="L8846" href="#L8846">8846</a> 
<a class="jxr_linenumber" name="L8847" href="#L8847">8847</a> 
<a class="jxr_linenumber" name="L8848" href="#L8848">8848</a> 
<a class="jxr_linenumber" name="L8849" href="#L8849">8849</a>     
<a class="jxr_linenumber" name="L8850" href="#L8850">8850</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_perms_role_v"</span>, 
<a class="jxr_linenumber" name="L8851" href="#L8851">8851</a>         <span class="jxr_string">"grouper_perms_role_v: shows all permissions assigned to users due to the users being in a role, and the role being assigned the permission"</span>,
<a class="jxr_linenumber" name="L8852" href="#L8852">8852</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name"</span>, 
<a class="jxr_linenumber" name="L8853" href="#L8853">8853</a>             <span class="jxr_string">"subject_source_id"</span>, 
<a class="jxr_linenumber" name="L8854" href="#L8854">8854</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L8855" href="#L8855">8855</a>             <span class="jxr_string">"action"</span>, 
<a class="jxr_linenumber" name="L8856" href="#L8856">8856</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L8857" href="#L8857">8857</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L8858" href="#L8858">8858</a>             <span class="jxr_string">"role_display_name"</span>,
<a class="jxr_linenumber" name="L8859" href="#L8859">8859</a>             <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L8860" href="#L8860">8860</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L8861" href="#L8861">8861</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L8862" href="#L8862">8862</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L8863" href="#L8863">8863</a>             <span class="jxr_string">"role_id"</span>,
<a class="jxr_linenumber" name="L8864" href="#L8864">8864</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L8865" href="#L8865">8865</a>             <span class="jxr_string">"member_id"</span>, 
<a class="jxr_linenumber" name="L8866" href="#L8866">8866</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L8867" href="#L8867">8867</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L8868" href="#L8868">8868</a>             <span class="jxr_string">"membership_depth"</span>,
<a class="jxr_linenumber" name="L8869" href="#L8869">8869</a>             <span class="jxr_string">"role_set_depth"</span>,
<a class="jxr_linenumber" name="L8870" href="#L8870">8870</a>             <span class="jxr_string">"attr_def_name_set_depth"</span>,
<a class="jxr_linenumber" name="L8871" href="#L8871">8871</a>             <span class="jxr_string">"attr_assign_action_set_depth"</span>,
<a class="jxr_linenumber" name="L8872" href="#L8872">8872</a>             <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L8873" href="#L8873">8873</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L8874" href="#L8874">8874</a>             <span class="jxr_string">"permission_type"</span>,
<a class="jxr_linenumber" name="L8875" href="#L8875">8875</a>             <span class="jxr_string">"assignment_notes"</span>,
<a class="jxr_linenumber" name="L8876" href="#L8876">8876</a>             <span class="jxr_string">"immediate_mship_enabled_time"</span>,
<a class="jxr_linenumber" name="L8877" href="#L8877">8877</a>             <span class="jxr_string">"immediate_mship_disabled_time"</span>,
<a class="jxr_linenumber" name="L8878" href="#L8878">8878</a>             <span class="jxr_string">"disallowed"</span>
<a class="jxr_linenumber" name="L8879" href="#L8879">8879</a>             ),
<a class="jxr_linenumber" name="L8880" href="#L8880">8880</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name: name of the role that the user is in and that has the permission"</span>,
<a class="jxr_linenumber" name="L8881" href="#L8881">8881</a>             <span class="jxr_string">"subject_source_id: source id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L8882" href="#L8882">8882</a>             <span class="jxr_string">"subject_id: subject id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L8883" href="#L8883">8883</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L8884" href="#L8884">8884</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L8885" href="#L8885">8885</a>             <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L8886" href="#L8886">8886</a>             <span class="jxr_string">"role_display_name: display name of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L8887" href="#L8887">8887</a>             <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L8888" href="#L8888">8888</a>             <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L8889" href="#L8889">8889</a>             <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L8890" href="#L8890">8890</a>             <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L8891" href="#L8891">8891</a>             <span class="jxr_string">"role_id: id of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L8892" href="#L8892">8892</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L8893" href="#L8893">8893</a>             <span class="jxr_string">"member_id: id of the subject in the members table"</span>,
<a class="jxr_linenumber" name="L8894" href="#L8894">8894</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L8895" href="#L8895">8895</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L8896" href="#L8896">8896</a>             <span class="jxr_string">"membership_depth: depth of membership, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L8897" href="#L8897">8897</a>             <span class="jxr_string">"role_set_depth: depth of role hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L8898" href="#L8898">8898</a>             <span class="jxr_string">"attr_def_name_set_depth: depth of attribute def name set hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L8899" href="#L8899">8899</a>             <span class="jxr_string">"attr_assign_action_set_depth: depth of action hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L8900" href="#L8900">8900</a>             <span class="jxr_string">"membership_id: id of the underlying membership"</span>,
<a class="jxr_linenumber" name="L8901" href="#L8901">8901</a>             <span class="jxr_string">"attribute_assign_id: id of the underlying attribute assign"</span>,
<a class="jxr_linenumber" name="L8902" href="#L8902">8902</a>             <span class="jxr_string">"permission_type: role or role_subject for assignment to role or to role subject pair"</span>,
<a class="jxr_linenumber" name="L8903" href="#L8903">8903</a>             <span class="jxr_string">"assignment_notes: notes on this assignment"</span>,
<a class="jxr_linenumber" name="L8904" href="#L8904">8904</a>             <span class="jxr_string">"immediate_mship_enabled_time: time this membership was enabled"</span>,
<a class="jxr_linenumber" name="L8905" href="#L8905">8905</a>             <span class="jxr_string">"immediate_mship_disabled_time: time this membership will be disabled"</span>,
<a class="jxr_linenumber" name="L8906" href="#L8906">8906</a>             <span class="jxr_string">"disallowed: if permission is disallowed from a wider allow, null means false"</span>
<a class="jxr_linenumber" name="L8907" href="#L8907">8907</a>         ),
<a class="jxr_linenumber" name="L8908" href="#L8908">8908</a>         <span class="jxr_string">"select distinct gr.name as role_name,  "</span>
<a class="jxr_linenumber" name="L8909" href="#L8909">8909</a>         + <span class="jxr_string">"gm.subject_source as subject_source_id,  "</span>
<a class="jxr_linenumber" name="L8910" href="#L8910">8910</a>         + <span class="jxr_string">"gm.subject_id,  "</span>
<a class="jxr_linenumber" name="L8911" href="#L8911">8911</a>         + <span class="jxr_string">"gaaa.name as action, "</span>
<a class="jxr_linenumber" name="L8912" href="#L8912">8912</a>         + <span class="jxr_string">"gadn.name as attribute_def_name_name,  "</span>
<a class="jxr_linenumber" name="L8913" href="#L8913">8913</a>         + <span class="jxr_string">"gadn.display_name as attribute_def_name_disp_name,  "</span>
<a class="jxr_linenumber" name="L8914" href="#L8914">8914</a>         + <span class="jxr_string">"gr.display_name as role_display_name,  "</span>
<a class="jxr_linenumber" name="L8915" href="#L8915">8915</a>         + <span class="jxr_string">"gaa.attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L8916" href="#L8916">8916</a>         + <span class="jxr_string">"gaa.enabled, "</span>
<a class="jxr_linenumber" name="L8917" href="#L8917">8917</a>         + <span class="jxr_string">"gaa.enabled_time, "</span>
<a class="jxr_linenumber" name="L8918" href="#L8918">8918</a>         + <span class="jxr_string">"gaa.disabled_time, "</span>
<a class="jxr_linenumber" name="L8919" href="#L8919">8919</a>         + <span class="jxr_string">"gr.id as role_id,  "</span>
<a class="jxr_linenumber" name="L8920" href="#L8920">8920</a>         + <span class="jxr_string">"gadn.attribute_def_id,  "</span>
<a class="jxr_linenumber" name="L8921" href="#L8921">8921</a>         + <span class="jxr_string">"gm.id as member_id,  "</span>
<a class="jxr_linenumber" name="L8922" href="#L8922">8922</a>         + <span class="jxr_string">"gadn.id as attribute_def_name_id,  "</span>
<a class="jxr_linenumber" name="L8923" href="#L8923">8923</a>         + <span class="jxr_string">"gaaa.id as action_id, "</span>
<a class="jxr_linenumber" name="L8924" href="#L8924">8924</a>         + <span class="jxr_string">"gmav.depth AS membership_depth, "</span>
<a class="jxr_linenumber" name="L8925" href="#L8925">8925</a>         + <span class="jxr_string">"grs.depth AS role_set_depth, "</span>
<a class="jxr_linenumber" name="L8926" href="#L8926">8926</a>         + <span class="jxr_string">"gadns.depth AS attr_def_name_set_depth, "</span>
<a class="jxr_linenumber" name="L8927" href="#L8927">8927</a>         + <span class="jxr_string">"gaaas.depth AS attr_assign_action_set_depth, "</span>
<a class="jxr_linenumber" name="L8928" href="#L8928">8928</a>         + <span class="jxr_string">"gmav.membership_id as membership_id, "</span> 
<a class="jxr_linenumber" name="L8929" href="#L8929">8929</a>         + <span class="jxr_string">"gaa.id AS attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L8930" href="#L8930">8930</a>         + <span class="jxr_string">"'role' as permission_type, "</span>
<a class="jxr_linenumber" name="L8931" href="#L8931">8931</a>         + <span class="jxr_string">"gaa.notes as assignment_notes, "</span>
<a class="jxr_linenumber" name="L8932" href="#L8932">8932</a>         + <span class="jxr_string">"gmav.immediate_mship_enabled_time, "</span>
<a class="jxr_linenumber" name="L8933" href="#L8933">8933</a>         + <span class="jxr_string">"gmav.immediate_mship_disabled_time, "</span>
<a class="jxr_linenumber" name="L8934" href="#L8934">8934</a>         + <span class="jxr_string">"gaa.disallowed "</span>
<a class="jxr_linenumber" name="L8935" href="#L8935">8935</a>         + <span class="jxr_string">"from grouper_groups gr,  "</span>
<a class="jxr_linenumber" name="L8936" href="#L8936">8936</a>         + <span class="jxr_string">"grouper_memberships_all_v gmav,  "</span>
<a class="jxr_linenumber" name="L8937" href="#L8937">8937</a>         + <span class="jxr_string">"grouper_members gm,  "</span>
<a class="jxr_linenumber" name="L8938" href="#L8938">8938</a>         + <span class="jxr_string">"grouper_fields gf,  "</span>
<a class="jxr_linenumber" name="L8939" href="#L8939">8939</a>         + <span class="jxr_string">"grouper_role_set grs,  "</span>
<a class="jxr_linenumber" name="L8940" href="#L8940">8940</a>         + <span class="jxr_string">"grouper_attribute_def gad,  "</span>
<a class="jxr_linenumber" name="L8941" href="#L8941">8941</a>         + <span class="jxr_string">"grouper_attribute_assign gaa,  "</span>
<a class="jxr_linenumber" name="L8942" href="#L8942">8942</a>         + <span class="jxr_string">"grouper_attribute_def_name gadn,  "</span>
<a class="jxr_linenumber" name="L8943" href="#L8943">8943</a>         + <span class="jxr_string">"grouper_attribute_def_name_set gadns, "</span>
<a class="jxr_linenumber" name="L8944" href="#L8944">8944</a>         + <span class="jxr_string">"grouper_attr_assign_action gaaa, "</span>
<a class="jxr_linenumber" name="L8945" href="#L8945">8945</a>         + <span class="jxr_string">"grouper_attr_assign_action_set gaaas "</span>
<a class="jxr_linenumber" name="L8946" href="#L8946">8946</a>         + <span class="jxr_string">"where gmav.owner_group_id = gr.id  "</span>
<a class="jxr_linenumber" name="L8947" href="#L8947">8947</a>         + <span class="jxr_string">"and gmav.field_id = gf.id  "</span>
<a class="jxr_linenumber" name="L8948" href="#L8948">8948</a>         + <span class="jxr_string">"and gr.type_of_group = 'role' "</span>
<a class="jxr_linenumber" name="L8949" href="#L8949">8949</a>         + <span class="jxr_string">"and gf.type = 'list'  "</span>
<a class="jxr_linenumber" name="L8950" href="#L8950">8950</a>         + <span class="jxr_string">"and gf.name = 'members'  "</span>
<a class="jxr_linenumber" name="L8951" href="#L8951">8951</a>         + <span class="jxr_string">"and gmav.immediate_mship_enabled = 'T'  "</span>
<a class="jxr_linenumber" name="L8952" href="#L8952">8952</a>         + <span class="jxr_string">"and gmav.member_id = gm.id  "</span>
<a class="jxr_linenumber" name="L8953" href="#L8953">8953</a>         + <span class="jxr_string">"and grs.if_has_role_id = gr.id  "</span>
<a class="jxr_linenumber" name="L8954" href="#L8954">8954</a>         + <span class="jxr_string">"and gadn.attribute_def_id = gad.id  "</span>
<a class="jxr_linenumber" name="L8955" href="#L8955">8955</a>         + <span class="jxr_string">"and gad.attribute_def_type = 'perm'  "</span>
<a class="jxr_linenumber" name="L8956" href="#L8956">8956</a>         + <span class="jxr_string">"and gaa.owner_group_id = grs.then_has_role_id  "</span>
<a class="jxr_linenumber" name="L8957" href="#L8957">8957</a>         + <span class="jxr_string">"and gaa.attribute_def_name_id = gadns.if_has_attribute_def_name_id  "</span>
<a class="jxr_linenumber" name="L8958" href="#L8958">8958</a>         + <span class="jxr_string">"and gadn.id = gadns.then_has_attribute_def_name_id  "</span>
<a class="jxr_linenumber" name="L8959" href="#L8959">8959</a>         + <span class="jxr_string">"and gaa.attribute_assign_type = 'group' "</span>
<a class="jxr_linenumber" name="L8960" href="#L8960">8960</a>         + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaas.if_has_attr_assn_action_id "</span>
<a class="jxr_linenumber" name="L8961" href="#L8961">8961</a>         + <span class="jxr_string">"and gaaa.id = gaaas.then_has_attr_assn_action_id "</span>);
<a class="jxr_linenumber" name="L8962" href="#L8962">8962</a> 
<a class="jxr_linenumber" name="L8963" href="#L8963">8963</a>     
<a class="jxr_linenumber" name="L8964" href="#L8964">8964</a> 
<a class="jxr_linenumber" name="L8965" href="#L8965">8965</a>     
<a class="jxr_linenumber" name="L8966" href="#L8966">8966</a> 
<a class="jxr_linenumber" name="L8967" href="#L8967">8967</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_perms_role_subject_v"</span>, 
<a class="jxr_linenumber" name="L8968" href="#L8968">8968</a>         <span class="jxr_string">"grouper_perms_role_subject_v: shows all permissions assigned to users directly while in a role"</span>,
<a class="jxr_linenumber" name="L8969" href="#L8969">8969</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name"</span>, 
<a class="jxr_linenumber" name="L8970" href="#L8970">8970</a>             <span class="jxr_string">"subject_source_id"</span>, 
<a class="jxr_linenumber" name="L8971" href="#L8971">8971</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L8972" href="#L8972">8972</a>             <span class="jxr_string">"action"</span>, 
<a class="jxr_linenumber" name="L8973" href="#L8973">8973</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L8974" href="#L8974">8974</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L8975" href="#L8975">8975</a>             <span class="jxr_string">"role_display_name"</span>,
<a class="jxr_linenumber" name="L8976" href="#L8976">8976</a>             <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L8977" href="#L8977">8977</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L8978" href="#L8978">8978</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L8979" href="#L8979">8979</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L8980" href="#L8980">8980</a>             <span class="jxr_string">"role_id"</span>,
<a class="jxr_linenumber" name="L8981" href="#L8981">8981</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L8982" href="#L8982">8982</a>             <span class="jxr_string">"member_id"</span>, 
<a class="jxr_linenumber" name="L8983" href="#L8983">8983</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L8984" href="#L8984">8984</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L8985" href="#L8985">8985</a>             <span class="jxr_string">"membership_depth"</span>,
<a class="jxr_linenumber" name="L8986" href="#L8986">8986</a>             <span class="jxr_string">"role_set_depth"</span>,
<a class="jxr_linenumber" name="L8987" href="#L8987">8987</a>             <span class="jxr_string">"attr_def_name_set_depth"</span>,
<a class="jxr_linenumber" name="L8988" href="#L8988">8988</a>             <span class="jxr_string">"attr_assign_action_set_depth"</span>,
<a class="jxr_linenumber" name="L8989" href="#L8989">8989</a>             <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L8990" href="#L8990">8990</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L8991" href="#L8991">8991</a>             <span class="jxr_string">"permission_type"</span>,
<a class="jxr_linenumber" name="L8992" href="#L8992">8992</a>             <span class="jxr_string">"assignment_notes"</span>,
<a class="jxr_linenumber" name="L8993" href="#L8993">8993</a>             <span class="jxr_string">"immediate_mship_enabled_time"</span>,
<a class="jxr_linenumber" name="L8994" href="#L8994">8994</a>             <span class="jxr_string">"immediate_mship_disabled_time"</span>,
<a class="jxr_linenumber" name="L8995" href="#L8995">8995</a>             <span class="jxr_string">"disallowed"</span>
<a class="jxr_linenumber" name="L8996" href="#L8996">8996</a>             ),
<a class="jxr_linenumber" name="L8997" href="#L8997">8997</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name: name of the role that the user is in and that has the permission"</span>,
<a class="jxr_linenumber" name="L8998" href="#L8998">8998</a>             <span class="jxr_string">"subject_source_id: source id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L8999" href="#L8999">8999</a>             <span class="jxr_string">"subject_id: subject id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9000" href="#L9000">9000</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L9001" href="#L9001">9001</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L9002" href="#L9002">9002</a>             <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L9003" href="#L9003">9003</a>             <span class="jxr_string">"role_display_name: display name of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9004" href="#L9004">9004</a>             <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L9005" href="#L9005">9005</a>             <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L9006" href="#L9006">9006</a>             <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L9007" href="#L9007">9007</a>             <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L9008" href="#L9008">9008</a>             <span class="jxr_string">"role_id: id of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9009" href="#L9009">9009</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L9010" href="#L9010">9010</a>             <span class="jxr_string">"member_id: id of the subject in the members table"</span>,
<a class="jxr_linenumber" name="L9011" href="#L9011">9011</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L9012" href="#L9012">9012</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L9013" href="#L9013">9013</a>             <span class="jxr_string">"membership_depth: depth of membership, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9014" href="#L9014">9014</a>             <span class="jxr_string">"role_set_depth: depth of role hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9015" href="#L9015">9015</a>             <span class="jxr_string">"attr_def_name_set_depth: depth of attribute def name set hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9016" href="#L9016">9016</a>             <span class="jxr_string">"attr_assign_action_set_depth: depth of action hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9017" href="#L9017">9017</a>             <span class="jxr_string">"membership_id: id of the underlying membership"</span>,
<a class="jxr_linenumber" name="L9018" href="#L9018">9018</a>             <span class="jxr_string">"attribute_assign_id: id of the underlying attribute assign"</span>,
<a class="jxr_linenumber" name="L9019" href="#L9019">9019</a>             <span class="jxr_string">"permission_type: role or role_subject for assignment to role or to role subject pair"</span>,
<a class="jxr_linenumber" name="L9020" href="#L9020">9020</a>             <span class="jxr_string">"assignment_notes: notes on this assignment"</span>,
<a class="jxr_linenumber" name="L9021" href="#L9021">9021</a>             <span class="jxr_string">"immediate_mship_enabled_time: time this membership was enabled"</span>,
<a class="jxr_linenumber" name="L9022" href="#L9022">9022</a>             <span class="jxr_string">"immediate_mship_disabled_time: time this membership will be disabled"</span>,
<a class="jxr_linenumber" name="L9023" href="#L9023">9023</a>             <span class="jxr_string">"disallowed: if permission is disallowed from a wider allow, null means false"</span>
<a class="jxr_linenumber" name="L9024" href="#L9024">9024</a>         ),
<a class="jxr_linenumber" name="L9025" href="#L9025">9025</a>         <span class="jxr_string">"SELECT DISTINCT gr.name AS role_name,   "</span> +
<a class="jxr_linenumber" name="L9026" href="#L9026">9026</a>         <span class="jxr_string">"gm.subject_source AS subject_source_id,   "</span> +
<a class="jxr_linenumber" name="L9027" href="#L9027">9027</a>         <span class="jxr_string">"gm.subject_id,   "</span> +
<a class="jxr_linenumber" name="L9028" href="#L9028">9028</a>         <span class="jxr_string">"gaaa.name AS ACTION,  "</span> +
<a class="jxr_linenumber" name="L9029" href="#L9029">9029</a>         <span class="jxr_string">"gadn.name AS attribute_def_name_name,   "</span> +
<a class="jxr_linenumber" name="L9030" href="#L9030">9030</a>         <span class="jxr_string">"gadn.display_name AS attribute_def_name_disp_name,   "</span> +
<a class="jxr_linenumber" name="L9031" href="#L9031">9031</a>         <span class="jxr_string">"gr.display_name AS role_display_name,   "</span> +
<a class="jxr_linenumber" name="L9032" href="#L9032">9032</a>         <span class="jxr_string">"gaa.attribute_assign_delegatable,  "</span> +
<a class="jxr_linenumber" name="L9033" href="#L9033">9033</a>         <span class="jxr_string">"gaa.enabled,  "</span> +
<a class="jxr_linenumber" name="L9034" href="#L9034">9034</a>         <span class="jxr_string">"gaa.enabled_time,  "</span> +
<a class="jxr_linenumber" name="L9035" href="#L9035">9035</a>         <span class="jxr_string">"gaa.disabled_time,  "</span> +
<a class="jxr_linenumber" name="L9036" href="#L9036">9036</a>         <span class="jxr_string">"gr.id AS role_id,   "</span> +
<a class="jxr_linenumber" name="L9037" href="#L9037">9037</a>         <span class="jxr_string">"gadn.attribute_def_id,   "</span> +
<a class="jxr_linenumber" name="L9038" href="#L9038">9038</a>         <span class="jxr_string">"gm.id AS member_id,   "</span> +
<a class="jxr_linenumber" name="L9039" href="#L9039">9039</a>         <span class="jxr_string">"gadn.id AS attribute_def_name_id,   "</span> +
<a class="jxr_linenumber" name="L9040" href="#L9040">9040</a>         <span class="jxr_string">"gaaa.id AS action_id, "</span> +
<a class="jxr_linenumber" name="L9041" href="#L9041">9041</a>         <span class="jxr_string">"gmav.depth AS membership_depth, "</span> +
<a class="jxr_linenumber" name="L9042" href="#L9042">9042</a>         <span class="jxr_string">"-1 AS role_set_depth, "</span> +
<a class="jxr_linenumber" name="L9043" href="#L9043">9043</a>         <span class="jxr_string">"gadns.depth AS attr_def_name_set_depth, "</span> +
<a class="jxr_linenumber" name="L9044" href="#L9044">9044</a>         <span class="jxr_string">"gaaas.depth AS attr_assign_action_set_depth, "</span> +
<a class="jxr_linenumber" name="L9045" href="#L9045">9045</a>         <span class="jxr_string">"gmav.membership_id as membership_id, "</span> +
<a class="jxr_linenumber" name="L9046" href="#L9046">9046</a>         <span class="jxr_string">"gaa.id as attribute_assign_id, "</span> +
<a class="jxr_linenumber" name="L9047" href="#L9047">9047</a>         <span class="jxr_string">"'role_subject' as permission_type, "</span> +
<a class="jxr_linenumber" name="L9048" href="#L9048">9048</a>         <span class="jxr_string">"gaa.notes as assignment_notes, "</span> +
<a class="jxr_linenumber" name="L9049" href="#L9049">9049</a>         <span class="jxr_string">"gmav.immediate_mship_enabled_time, "</span> +
<a class="jxr_linenumber" name="L9050" href="#L9050">9050</a>         <span class="jxr_string">"gmav.immediate_mship_disabled_time, "</span> +
<a class="jxr_linenumber" name="L9051" href="#L9051">9051</a>         <span class="jxr_string">"gaa.disallowed "</span> +
<a class="jxr_linenumber" name="L9052" href="#L9052">9052</a>         <span class="jxr_string">"FROM grouper_groups gr,   "</span> +
<a class="jxr_linenumber" name="L9053" href="#L9053">9053</a>         <span class="jxr_string">"grouper_memberships_all_v gmav,   "</span> +
<a class="jxr_linenumber" name="L9054" href="#L9054">9054</a>         <span class="jxr_string">"grouper_members gm,   "</span> +
<a class="jxr_linenumber" name="L9055" href="#L9055">9055</a>         <span class="jxr_string">"grouper_fields gf,   "</span> +
<a class="jxr_linenumber" name="L9056" href="#L9056">9056</a>         <span class="jxr_string">"grouper_attribute_def gad,  "</span> +
<a class="jxr_linenumber" name="L9057" href="#L9057">9057</a>         <span class="jxr_string">"grouper_attribute_assign gaa,   "</span> +
<a class="jxr_linenumber" name="L9058" href="#L9058">9058</a>         <span class="jxr_string">"grouper_attribute_def_name gadn,   "</span> +
<a class="jxr_linenumber" name="L9059" href="#L9059">9059</a>         <span class="jxr_string">"grouper_attribute_def_name_set gadns,   "</span> +
<a class="jxr_linenumber" name="L9060" href="#L9060">9060</a>         <span class="jxr_string">"grouper_attr_assign_action gaaa,  "</span> +
<a class="jxr_linenumber" name="L9061" href="#L9061">9061</a>         <span class="jxr_string">"grouper_attr_assign_action_set gaaas  "</span> +
<a class="jxr_linenumber" name="L9062" href="#L9062">9062</a>         <span class="jxr_string">"WHERE gmav.owner_group_id = gr.id  "</span> +
<a class="jxr_linenumber" name="L9063" href="#L9063">9063</a>         <span class="jxr_string">"and gr.type_of_group = 'role' "</span> +
<a class="jxr_linenumber" name="L9064" href="#L9064">9064</a>         <span class="jxr_string">"and gmav.field_id = gf.id  "</span> +
<a class="jxr_linenumber" name="L9065" href="#L9065">9065</a>         <span class="jxr_string">"and gmav.owner_group_id = gaa.owner_group_id  "</span> +
<a class="jxr_linenumber" name="L9066" href="#L9066">9066</a>         <span class="jxr_string">"AND gmav.member_id = gaa.owner_member_id   "</span> +
<a class="jxr_linenumber" name="L9067" href="#L9067">9067</a>         <span class="jxr_string">"AND gf.type = 'list'   "</span> +
<a class="jxr_linenumber" name="L9068" href="#L9068">9068</a>         <span class="jxr_string">"AND gf.name = 'members'   "</span> +
<a class="jxr_linenumber" name="L9069" href="#L9069">9069</a>         <span class="jxr_string">"AND gmav.immediate_mship_enabled = 'T'   "</span> +
<a class="jxr_linenumber" name="L9070" href="#L9070">9070</a>         <span class="jxr_string">"AND gmav.member_id = gm.id   "</span> +
<a class="jxr_linenumber" name="L9071" href="#L9071">9071</a>         <span class="jxr_string">"AND gadn.attribute_def_id = gad.id  "</span> + 
<a class="jxr_linenumber" name="L9072" href="#L9072">9072</a>         <span class="jxr_string">"AND gad.attribute_def_type = 'perm'  "</span> + 
<a class="jxr_linenumber" name="L9073" href="#L9073">9073</a>         <span class="jxr_string">"AND gaa.attribute_assign_type = 'any_mem'  "</span> +
<a class="jxr_linenumber" name="L9074" href="#L9074">9074</a>         <span class="jxr_string">"AND gaa.attribute_def_name_id = gadns.if_has_attribute_def_name_id   "</span> +
<a class="jxr_linenumber" name="L9075" href="#L9075">9075</a>         <span class="jxr_string">"AND gadn.id = gadns.then_has_attribute_def_name_id  "</span> +
<a class="jxr_linenumber" name="L9076" href="#L9076">9076</a>         <span class="jxr_string">"AND gaa.attribute_assign_action_id = gaaas.if_has_attr_assn_action_id  "</span> +
<a class="jxr_linenumber" name="L9077" href="#L9077">9077</a>         <span class="jxr_string">"AND gaaa.id = gaaas.then_has_attr_assn_action_id  "</span>);
<a class="jxr_linenumber" name="L9078" href="#L9078">9078</a> 
<a class="jxr_linenumber" name="L9079" href="#L9079">9079</a>     
<a class="jxr_linenumber" name="L9080" href="#L9080">9080</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_perms_all_v"</span>, 
<a class="jxr_linenumber" name="L9081" href="#L9081">9081</a>         <span class="jxr_string">"grouper_perms_all_v: shows all permissions assigned to users directly while in a role, or assigned to roles (and users in the role)"</span>,
<a class="jxr_linenumber" name="L9082" href="#L9082">9082</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name"</span>, 
<a class="jxr_linenumber" name="L9083" href="#L9083">9083</a>             <span class="jxr_string">"subject_source_id"</span>, 
<a class="jxr_linenumber" name="L9084" href="#L9084">9084</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L9085" href="#L9085">9085</a>             <span class="jxr_string">"action"</span>, 
<a class="jxr_linenumber" name="L9086" href="#L9086">9086</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L9087" href="#L9087">9087</a>             <span class="jxr_string">"attribute_def_name_disp_name"</span>,
<a class="jxr_linenumber" name="L9088" href="#L9088">9088</a>             <span class="jxr_string">"role_display_name"</span>,
<a class="jxr_linenumber" name="L9089" href="#L9089">9089</a>             <span class="jxr_string">"attribute_assign_delegatable"</span>,
<a class="jxr_linenumber" name="L9090" href="#L9090">9090</a>             <span class="jxr_string">"enabled"</span>,
<a class="jxr_linenumber" name="L9091" href="#L9091">9091</a>             <span class="jxr_string">"enabled_time"</span>,
<a class="jxr_linenumber" name="L9092" href="#L9092">9092</a>             <span class="jxr_string">"disabled_time"</span>,
<a class="jxr_linenumber" name="L9093" href="#L9093">9093</a>             <span class="jxr_string">"role_id"</span>,
<a class="jxr_linenumber" name="L9094" href="#L9094">9094</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L9095" href="#L9095">9095</a>             <span class="jxr_string">"member_id"</span>, 
<a class="jxr_linenumber" name="L9096" href="#L9096">9096</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L9097" href="#L9097">9097</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L9098" href="#L9098">9098</a>             <span class="jxr_string">"membership_depth"</span>,
<a class="jxr_linenumber" name="L9099" href="#L9099">9099</a>             <span class="jxr_string">"role_set_depth"</span>,
<a class="jxr_linenumber" name="L9100" href="#L9100">9100</a>             <span class="jxr_string">"attr_def_name_set_depth"</span>,
<a class="jxr_linenumber" name="L9101" href="#L9101">9101</a>             <span class="jxr_string">"attr_assign_action_set_depth"</span>,
<a class="jxr_linenumber" name="L9102" href="#L9102">9102</a>             <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L9103" href="#L9103">9103</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L9104" href="#L9104">9104</a>             <span class="jxr_string">"permission_type"</span>,
<a class="jxr_linenumber" name="L9105" href="#L9105">9105</a>             <span class="jxr_string">"assignment_notes"</span>,
<a class="jxr_linenumber" name="L9106" href="#L9106">9106</a>             <span class="jxr_string">"immediate_mship_enabled_time"</span>,
<a class="jxr_linenumber" name="L9107" href="#L9107">9107</a>             <span class="jxr_string">"immediate_mship_disabled_time"</span>,
<a class="jxr_linenumber" name="L9108" href="#L9108">9108</a>             <span class="jxr_string">"disallowed"</span>
<a class="jxr_linenumber" name="L9109" href="#L9109">9109</a>             ),
<a class="jxr_linenumber" name="L9110" href="#L9110">9110</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name: name of the role that the user is in and that has the permission"</span>,
<a class="jxr_linenumber" name="L9111" href="#L9111">9111</a>             <span class="jxr_string">"subject_source_id: source id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9112" href="#L9112">9112</a>             <span class="jxr_string">"subject_id: subject id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9113" href="#L9113">9113</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L9114" href="#L9114">9114</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L9115" href="#L9115">9115</a>             <span class="jxr_string">"attribute_def_name_disp_name: display name of the attribute definition name assigned to the attribute"</span>,
<a class="jxr_linenumber" name="L9116" href="#L9116">9116</a>             <span class="jxr_string">"role_display_name: display name of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9117" href="#L9117">9117</a>             <span class="jxr_string">"attribute_assign_delegatable: if this assignment is delegatable or grantable: TRUE, FALSE, GRANT"</span>,
<a class="jxr_linenumber" name="L9118" href="#L9118">9118</a>             <span class="jxr_string">"enabled: if this assignment is enabled: T, F"</span>,
<a class="jxr_linenumber" name="L9119" href="#L9119">9119</a>             <span class="jxr_string">"enabled_time: the time (seconds since 1970) that this assignment will be enabled"</span>,
<a class="jxr_linenumber" name="L9120" href="#L9120">9120</a>             <span class="jxr_string">"disabled_time: the time (seconds since 1970) that this assignment will be disabled"</span>,
<a class="jxr_linenumber" name="L9121" href="#L9121">9121</a>             <span class="jxr_string">"role_id: id of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9122" href="#L9122">9122</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L9123" href="#L9123">9123</a>             <span class="jxr_string">"member_id: id of the subject in the members table"</span>,
<a class="jxr_linenumber" name="L9124" href="#L9124">9124</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L9125" href="#L9125">9125</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L9126" href="#L9126">9126</a>             <span class="jxr_string">"membership_depth: depth of membership, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9127" href="#L9127">9127</a>             <span class="jxr_string">"role_set_depth: depth of role hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9128" href="#L9128">9128</a>             <span class="jxr_string">"attr_def_name_set_depth: depth of attribute def name set hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9129" href="#L9129">9129</a>             <span class="jxr_string">"attr_assign_action_set_depth: depth of action hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9130" href="#L9130">9130</a>             <span class="jxr_string">"membership_id: id of the underlying membership"</span>,
<a class="jxr_linenumber" name="L9131" href="#L9131">9131</a>             <span class="jxr_string">"attribute_assign_id: id of the underlying attribute assign"</span>,
<a class="jxr_linenumber" name="L9132" href="#L9132">9132</a>             <span class="jxr_string">"permission_type: role or role_subject for assignment to role or to role subject pair"</span>,
<a class="jxr_linenumber" name="L9133" href="#L9133">9133</a>             <span class="jxr_string">"assignment_notes: notes on this assignment"</span>,
<a class="jxr_linenumber" name="L9134" href="#L9134">9134</a>             <span class="jxr_string">"immediate_mship_enabled_time: time this membership was enabled"</span>,
<a class="jxr_linenumber" name="L9135" href="#L9135">9135</a>             <span class="jxr_string">"immediate_mship_disabled_time: time this membership will be disabled"</span>,
<a class="jxr_linenumber" name="L9136" href="#L9136">9136</a>             <span class="jxr_string">"disallowed: if permission is disallowed from a wider allow, null means false"</span>
<a class="jxr_linenumber" name="L9137" href="#L9137">9137</a>         ),
<a class="jxr_linenumber" name="L9138" href="#L9138">9138</a>         <span class="jxr_string">"select role_name,  "</span>
<a class="jxr_linenumber" name="L9139" href="#L9139">9139</a>         + <span class="jxr_string">"subject_source_id,  "</span>
<a class="jxr_linenumber" name="L9140" href="#L9140">9140</a>         + <span class="jxr_string">"subject_id,  "</span>
<a class="jxr_linenumber" name="L9141" href="#L9141">9141</a>         + <span class="jxr_string">"action,  "</span>
<a class="jxr_linenumber" name="L9142" href="#L9142">9142</a>         + <span class="jxr_string">"attribute_def_name_name,  "</span>
<a class="jxr_linenumber" name="L9143" href="#L9143">9143</a>         + <span class="jxr_string">"attribute_def_name_disp_name,  "</span>
<a class="jxr_linenumber" name="L9144" href="#L9144">9144</a>         + <span class="jxr_string">"role_display_name,  "</span>
<a class="jxr_linenumber" name="L9145" href="#L9145">9145</a>         + <span class="jxr_string">"attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L9146" href="#L9146">9146</a>         + <span class="jxr_string">"enabled, "</span>
<a class="jxr_linenumber" name="L9147" href="#L9147">9147</a>         + <span class="jxr_string">"enabled_time, "</span>
<a class="jxr_linenumber" name="L9148" href="#L9148">9148</a>         + <span class="jxr_string">"disabled_time, "</span>
<a class="jxr_linenumber" name="L9149" href="#L9149">9149</a>         + <span class="jxr_string">"role_id,  "</span>
<a class="jxr_linenumber" name="L9150" href="#L9150">9150</a>         + <span class="jxr_string">"attribute_def_id,  "</span>
<a class="jxr_linenumber" name="L9151" href="#L9151">9151</a>         + <span class="jxr_string">"member_id,  "</span>
<a class="jxr_linenumber" name="L9152" href="#L9152">9152</a>         + <span class="jxr_string">"attribute_def_name_id,  "</span>
<a class="jxr_linenumber" name="L9153" href="#L9153">9153</a>         + <span class="jxr_string">"action_id, "</span>
<a class="jxr_linenumber" name="L9154" href="#L9154">9154</a>         + <span class="jxr_string">"membership_depth, "</span>
<a class="jxr_linenumber" name="L9155" href="#L9155">9155</a>         + <span class="jxr_string">"role_set_depth, "</span>
<a class="jxr_linenumber" name="L9156" href="#L9156">9156</a>         + <span class="jxr_string">"attr_def_name_set_depth, "</span>
<a class="jxr_linenumber" name="L9157" href="#L9157">9157</a>         + <span class="jxr_string">"attr_assign_action_set_depth, "</span>
<a class="jxr_linenumber" name="L9158" href="#L9158">9158</a>         + <span class="jxr_string">"membership_id, "</span>
<a class="jxr_linenumber" name="L9159" href="#L9159">9159</a>         + <span class="jxr_string">"attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L9160" href="#L9160">9160</a>         + <span class="jxr_string">"permission_type, "</span>
<a class="jxr_linenumber" name="L9161" href="#L9161">9161</a>         + <span class="jxr_string">"assignment_notes, "</span>
<a class="jxr_linenumber" name="L9162" href="#L9162">9162</a>         + <span class="jxr_string">"immediate_mship_enabled_time, "</span>
<a class="jxr_linenumber" name="L9163" href="#L9163">9163</a>         + <span class="jxr_string">"immediate_mship_disabled_time, "</span>
<a class="jxr_linenumber" name="L9164" href="#L9164">9164</a>         + <span class="jxr_string">"disallowed "</span>
<a class="jxr_linenumber" name="L9165" href="#L9165">9165</a>         + <span class="jxr_string">"from grouper_perms_role_v  "</span>
<a class="jxr_linenumber" name="L9166" href="#L9166">9166</a>         + <span class="jxr_string">"union  "</span>
<a class="jxr_linenumber" name="L9167" href="#L9167">9167</a>         + <span class="jxr_string">"select role_name,  "</span>
<a class="jxr_linenumber" name="L9168" href="#L9168">9168</a>         + <span class="jxr_string">"subject_source_id,  "</span>
<a class="jxr_linenumber" name="L9169" href="#L9169">9169</a>         + <span class="jxr_string">"subject_id,  "</span>
<a class="jxr_linenumber" name="L9170" href="#L9170">9170</a>         + <span class="jxr_string">"action,  "</span>
<a class="jxr_linenumber" name="L9171" href="#L9171">9171</a>         + <span class="jxr_string">"attribute_def_name_name,  "</span>
<a class="jxr_linenumber" name="L9172" href="#L9172">9172</a>         + <span class="jxr_string">"attribute_def_name_disp_name,  "</span>
<a class="jxr_linenumber" name="L9173" href="#L9173">9173</a>         + <span class="jxr_string">"role_display_name,  "</span>
<a class="jxr_linenumber" name="L9174" href="#L9174">9174</a>         + <span class="jxr_string">"attribute_assign_delegatable, "</span>
<a class="jxr_linenumber" name="L9175" href="#L9175">9175</a>         + <span class="jxr_string">"enabled, "</span>
<a class="jxr_linenumber" name="L9176" href="#L9176">9176</a>         + <span class="jxr_string">"enabled_time, "</span>
<a class="jxr_linenumber" name="L9177" href="#L9177">9177</a>         + <span class="jxr_string">"disabled_time, "</span>
<a class="jxr_linenumber" name="L9178" href="#L9178">9178</a>         + <span class="jxr_string">"role_id,  "</span>
<a class="jxr_linenumber" name="L9179" href="#L9179">9179</a>         + <span class="jxr_string">"attribute_def_id,  "</span>
<a class="jxr_linenumber" name="L9180" href="#L9180">9180</a>         + <span class="jxr_string">"member_id,  "</span>
<a class="jxr_linenumber" name="L9181" href="#L9181">9181</a>         + <span class="jxr_string">"attribute_def_name_id,  "</span>
<a class="jxr_linenumber" name="L9182" href="#L9182">9182</a>         + <span class="jxr_string">"action_id, "</span>
<a class="jxr_linenumber" name="L9183" href="#L9183">9183</a>         + <span class="jxr_string">"membership_depth, "</span>
<a class="jxr_linenumber" name="L9184" href="#L9184">9184</a>         + <span class="jxr_string">"role_set_depth, "</span>
<a class="jxr_linenumber" name="L9185" href="#L9185">9185</a>         + <span class="jxr_string">"attr_def_name_set_depth, "</span>
<a class="jxr_linenumber" name="L9186" href="#L9186">9186</a>         + <span class="jxr_string">"attr_assign_action_set_depth, "</span>
<a class="jxr_linenumber" name="L9187" href="#L9187">9187</a>         + <span class="jxr_string">"membership_id, "</span>
<a class="jxr_linenumber" name="L9188" href="#L9188">9188</a>         + <span class="jxr_string">"attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L9189" href="#L9189">9189</a>         + <span class="jxr_string">"permission_type, "</span>
<a class="jxr_linenumber" name="L9190" href="#L9190">9190</a>         + <span class="jxr_string">"assignment_notes, "</span>
<a class="jxr_linenumber" name="L9191" href="#L9191">9191</a>         + <span class="jxr_string">"immediate_mship_enabled_time, "</span>
<a class="jxr_linenumber" name="L9192" href="#L9192">9192</a>         + <span class="jxr_string">"immediate_mship_disabled_time, "</span>
<a class="jxr_linenumber" name="L9193" href="#L9193">9193</a>         + <span class="jxr_string">"disallowed "</span>
<a class="jxr_linenumber" name="L9194" href="#L9194">9194</a>         + <span class="jxr_string">"from grouper_perms_role_subject_v  "</span>);
<a class="jxr_linenumber" name="L9195" href="#L9195">9195</a> 
<a class="jxr_linenumber" name="L9196" href="#L9196">9196</a> 
<a class="jxr_linenumber" name="L9197" href="#L9197">9197</a>   
<a class="jxr_linenumber" name="L9198" href="#L9198">9198</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_pit_perms_role_v"</span>, 
<a class="jxr_linenumber" name="L9199" href="#L9199">9199</a>         <span class="jxr_string">"grouper_pit_perms_role_v: shows all permissions assigned to users due to the users being in a role, and the role being assigned the permission"</span>,
<a class="jxr_linenumber" name="L9200" href="#L9200">9200</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name"</span>, 
<a class="jxr_linenumber" name="L9201" href="#L9201">9201</a>             <span class="jxr_string">"subject_source_id"</span>, 
<a class="jxr_linenumber" name="L9202" href="#L9202">9202</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L9203" href="#L9203">9203</a>             <span class="jxr_string">"action"</span>, 
<a class="jxr_linenumber" name="L9204" href="#L9204">9204</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L9205" href="#L9205">9205</a>             <span class="jxr_string">"role_id"</span>,
<a class="jxr_linenumber" name="L9206" href="#L9206">9206</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L9207" href="#L9207">9207</a>             <span class="jxr_string">"member_id"</span>, 
<a class="jxr_linenumber" name="L9208" href="#L9208">9208</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L9209" href="#L9209">9209</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L9210" href="#L9210">9210</a>             <span class="jxr_string">"membership_depth"</span>,
<a class="jxr_linenumber" name="L9211" href="#L9211">9211</a>             <span class="jxr_string">"role_set_depth"</span>,
<a class="jxr_linenumber" name="L9212" href="#L9212">9212</a>             <span class="jxr_string">"attr_def_name_set_depth"</span>,
<a class="jxr_linenumber" name="L9213" href="#L9213">9213</a>             <span class="jxr_string">"attr_assign_action_set_depth"</span>,
<a class="jxr_linenumber" name="L9214" href="#L9214">9214</a>             <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L9215" href="#L9215">9215</a>             <span class="jxr_string">"group_set_id"</span>, 
<a class="jxr_linenumber" name="L9216" href="#L9216">9216</a>             <span class="jxr_string">"role_set_id"</span>,
<a class="jxr_linenumber" name="L9217" href="#L9217">9217</a>             <span class="jxr_string">"attribute_def_name_set_id"</span>,
<a class="jxr_linenumber" name="L9218" href="#L9218">9218</a>             <span class="jxr_string">"action_set_id"</span>,
<a class="jxr_linenumber" name="L9219" href="#L9219">9219</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L9220" href="#L9220">9220</a>             <span class="jxr_string">"permission_type"</span>,
<a class="jxr_linenumber" name="L9221" href="#L9221">9221</a>             <span class="jxr_string">"group_set_active"</span>, 
<a class="jxr_linenumber" name="L9222" href="#L9222">9222</a>             <span class="jxr_string">"group_set_start_time"</span>, 
<a class="jxr_linenumber" name="L9223" href="#L9223">9223</a>             <span class="jxr_string">"group_set_end_time"</span>, 
<a class="jxr_linenumber" name="L9224" href="#L9224">9224</a>             <span class="jxr_string">"membership_active"</span>, 
<a class="jxr_linenumber" name="L9225" href="#L9225">9225</a>             <span class="jxr_string">"membership_start_time"</span>, 
<a class="jxr_linenumber" name="L9226" href="#L9226">9226</a>             <span class="jxr_string">"membership_end_time"</span>,
<a class="jxr_linenumber" name="L9227" href="#L9227">9227</a>             <span class="jxr_string">"role_set_active"</span>,
<a class="jxr_linenumber" name="L9228" href="#L9228">9228</a>             <span class="jxr_string">"role_set_start_time"</span>,
<a class="jxr_linenumber" name="L9229" href="#L9229">9229</a>             <span class="jxr_string">"role_set_end_time"</span>,
<a class="jxr_linenumber" name="L9230" href="#L9230">9230</a>             <span class="jxr_string">"action_set_active"</span>,
<a class="jxr_linenumber" name="L9231" href="#L9231">9231</a>             <span class="jxr_string">"action_set_start_time"</span>,
<a class="jxr_linenumber" name="L9232" href="#L9232">9232</a>             <span class="jxr_string">"action_set_end_time"</span>,
<a class="jxr_linenumber" name="L9233" href="#L9233">9233</a>             <span class="jxr_string">"attr_def_name_set_active"</span>,
<a class="jxr_linenumber" name="L9234" href="#L9234">9234</a>             <span class="jxr_string">"attr_def_name_set_start_time"</span>,
<a class="jxr_linenumber" name="L9235" href="#L9235">9235</a>             <span class="jxr_string">"attr_def_name_set_end_time"</span>,
<a class="jxr_linenumber" name="L9236" href="#L9236">9236</a>             <span class="jxr_string">"attribute_assign_active"</span>,
<a class="jxr_linenumber" name="L9237" href="#L9237">9237</a>             <span class="jxr_string">"attribute_assign_start_time"</span>,
<a class="jxr_linenumber" name="L9238" href="#L9238">9238</a>             <span class="jxr_string">"attribute_assign_end_time"</span>,
<a class="jxr_linenumber" name="L9239" href="#L9239">9239</a>             <span class="jxr_string">"disallowed"</span>,
<a class="jxr_linenumber" name="L9240" href="#L9240">9240</a>             <span class="jxr_string">"action_source_id"</span>,
<a class="jxr_linenumber" name="L9241" href="#L9241">9241</a>             <span class="jxr_string">"role_source_id"</span>,
<a class="jxr_linenumber" name="L9242" href="#L9242">9242</a>             <span class="jxr_string">"attribute_def_name_source_id"</span>,
<a class="jxr_linenumber" name="L9243" href="#L9243">9243</a>             <span class="jxr_string">"attribute_def_source_id"</span>,
<a class="jxr_linenumber" name="L9244" href="#L9244">9244</a>             <span class="jxr_string">"member_source_id"</span>,
<a class="jxr_linenumber" name="L9245" href="#L9245">9245</a>             <span class="jxr_string">"membership_source_id"</span>,
<a class="jxr_linenumber" name="L9246" href="#L9246">9246</a>             <span class="jxr_string">"attribute_assign_source_id"</span>
<a class="jxr_linenumber" name="L9247" href="#L9247">9247</a>             ),
<a class="jxr_linenumber" name="L9248" href="#L9248">9248</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name: name of the role that the user is in and that has the permission"</span>,
<a class="jxr_linenumber" name="L9249" href="#L9249">9249</a>             <span class="jxr_string">"subject_source_id: source id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9250" href="#L9250">9250</a>             <span class="jxr_string">"subject_id: subject id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9251" href="#L9251">9251</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L9252" href="#L9252">9252</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L9253" href="#L9253">9253</a>             <span class="jxr_string">"role_id: id of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9254" href="#L9254">9254</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L9255" href="#L9255">9255</a>             <span class="jxr_string">"member_id: id of the subject in the members table"</span>,
<a class="jxr_linenumber" name="L9256" href="#L9256">9256</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L9257" href="#L9257">9257</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L9258" href="#L9258">9258</a>             <span class="jxr_string">"membership_depth: depth of membership, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9259" href="#L9259">9259</a>             <span class="jxr_string">"role_set_depth: depth of role hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9260" href="#L9260">9260</a>             <span class="jxr_string">"attr_def_name_set_depth: depth of attribute def name set hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9261" href="#L9261">9261</a>             <span class="jxr_string">"attr_assign_action_set_depth: depth of action hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9262" href="#L9262">9262</a>             <span class="jxr_string">"membership_id: id of the immediate or composite membership in grouper_pit_memberships"</span>, 
<a class="jxr_linenumber" name="L9263" href="#L9263">9263</a>             <span class="jxr_string">"group_set_id: id of the group set"</span>, 
<a class="jxr_linenumber" name="L9264" href="#L9264">9264</a>             <span class="jxr_string">"role_set_id: id of the role set"</span>,
<a class="jxr_linenumber" name="L9265" href="#L9265">9265</a>             <span class="jxr_string">"attribute_def_name_set_id: id of the attribute def name set"</span>,
<a class="jxr_linenumber" name="L9266" href="#L9266">9266</a>             <span class="jxr_string">"action_set_id: id of the action set"</span>,
<a class="jxr_linenumber" name="L9267" href="#L9267">9267</a>             <span class="jxr_string">"attribute_assign_id: id of the underlying attribute assign"</span>,
<a class="jxr_linenumber" name="L9268" href="#L9268">9268</a>             <span class="jxr_string">"permission_type: role or role_subject for assignment to role or to role subject pair"</span>,
<a class="jxr_linenumber" name="L9269" href="#L9269">9269</a>             <span class="jxr_string">"group_set_active: whether the group set is currently active"</span>, 
<a class="jxr_linenumber" name="L9270" href="#L9270">9270</a>             <span class="jxr_string">"group_set_start_time: start time of group set"</span>, 
<a class="jxr_linenumber" name="L9271" href="#L9271">9271</a>             <span class="jxr_string">"group_set_end_time: end time of group set"</span>, 
<a class="jxr_linenumber" name="L9272" href="#L9272">9272</a>             <span class="jxr_string">"membership_active: whether the membership is currently active"</span>, 
<a class="jxr_linenumber" name="L9273" href="#L9273">9273</a>             <span class="jxr_string">"membership_start_time: start time of membership"</span>, 
<a class="jxr_linenumber" name="L9274" href="#L9274">9274</a>             <span class="jxr_string">"membership_end_time: end time of membership"</span>,
<a class="jxr_linenumber" name="L9275" href="#L9275">9275</a>             <span class="jxr_string">"role_set_active: whether the role set is currently active"</span>,
<a class="jxr_linenumber" name="L9276" href="#L9276">9276</a>             <span class="jxr_string">"role_set_start_time: start time of role set"</span>,
<a class="jxr_linenumber" name="L9277" href="#L9277">9277</a>             <span class="jxr_string">"role_set_end_time: end time of role set"</span>,
<a class="jxr_linenumber" name="L9278" href="#L9278">9278</a>             <span class="jxr_string">"action_set_active: whether the action set is currently active"</span>,
<a class="jxr_linenumber" name="L9279" href="#L9279">9279</a>             <span class="jxr_string">"action_set_start_time: start time of action set"</span>,
<a class="jxr_linenumber" name="L9280" href="#L9280">9280</a>             <span class="jxr_string">"action_set_end_time: end time of action set"</span>,
<a class="jxr_linenumber" name="L9281" href="#L9281">9281</a>             <span class="jxr_string">"attr_def_name_set_active: whether the attribute def name set is currently active"</span>,
<a class="jxr_linenumber" name="L9282" href="#L9282">9282</a>             <span class="jxr_string">"attr_def_name_set_start_time: start time of attribute def name set"</span>,
<a class="jxr_linenumber" name="L9283" href="#L9283">9283</a>             <span class="jxr_string">"attr_def_name_set_end_time: end time of attribute def name set"</span>,
<a class="jxr_linenumber" name="L9284" href="#L9284">9284</a>             <span class="jxr_string">"attribute_assign_active: whether the attribute assign is currently active"</span>,
<a class="jxr_linenumber" name="L9285" href="#L9285">9285</a>             <span class="jxr_string">"attribute_assign_start_time: start time of attribute assign"</span>,
<a class="jxr_linenumber" name="L9286" href="#L9286">9286</a>             <span class="jxr_string">"attribute_assign_end_time: end time of attribute assign"</span>,
<a class="jxr_linenumber" name="L9287" href="#L9287">9287</a>             <span class="jxr_string">"disallowed: if permission is disallowed from a wider allow, null means false"</span>,
<a class="jxr_linenumber" name="L9288" href="#L9288">9288</a>             <span class="jxr_string">"action_source_id: id of the actual (non-pit) attribute assign action"</span>,
<a class="jxr_linenumber" name="L9289" href="#L9289">9289</a>             <span class="jxr_string">"role_source_id: id of the actual (non-pit) role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9290" href="#L9290">9290</a>             <span class="jxr_string">"attribute_def_name_source_id: id of the actual (non-pit) attribute definition name"</span>,
<a class="jxr_linenumber" name="L9291" href="#L9291">9291</a>             <span class="jxr_string">"attribute_def_source_id: id of the actual (non-pit) attribute definition"</span>,
<a class="jxr_linenumber" name="L9292" href="#L9292">9292</a>             <span class="jxr_string">"member_source_id: id of the actual (non-pit) subject in the members table"</span>,
<a class="jxr_linenumber" name="L9293" href="#L9293">9293</a>             <span class="jxr_string">"membership_source_id: id of the actual (non-pit) immediate or composite membership"</span>,
<a class="jxr_linenumber" name="L9294" href="#L9294">9294</a>             <span class="jxr_string">"attribute_assign_source_id: id of the actual (non-pit) attribute assign"</span>
<a class="jxr_linenumber" name="L9295" href="#L9295">9295</a>         ),
<a class="jxr_linenumber" name="L9296" href="#L9296">9296</a>         <span class="jxr_string">"select distinct gr.name as role_name,  "</span>
<a class="jxr_linenumber" name="L9297" href="#L9297">9297</a>         + <span class="jxr_string">"gm.subject_source as subject_source_id,  "</span>
<a class="jxr_linenumber" name="L9298" href="#L9298">9298</a>         + <span class="jxr_string">"gm.subject_id,  "</span>
<a class="jxr_linenumber" name="L9299" href="#L9299">9299</a>         + <span class="jxr_string">"gaaa.name as action, "</span>
<a class="jxr_linenumber" name="L9300" href="#L9300">9300</a>         + <span class="jxr_string">"gadn.name as attribute_def_name_name,  "</span>
<a class="jxr_linenumber" name="L9301" href="#L9301">9301</a>         + <span class="jxr_string">"gr.id as role_id,  "</span>
<a class="jxr_linenumber" name="L9302" href="#L9302">9302</a>         + <span class="jxr_string">"gadn.attribute_def_id,  "</span>
<a class="jxr_linenumber" name="L9303" href="#L9303">9303</a>         + <span class="jxr_string">"gm.id as member_id,  "</span>
<a class="jxr_linenumber" name="L9304" href="#L9304">9304</a>         + <span class="jxr_string">"gadn.id as attribute_def_name_id,  "</span>
<a class="jxr_linenumber" name="L9305" href="#L9305">9305</a>         + <span class="jxr_string">"gaaa.id as action_id, "</span>
<a class="jxr_linenumber" name="L9306" href="#L9306">9306</a>         + <span class="jxr_string">"gmav.depth AS membership_depth, "</span>
<a class="jxr_linenumber" name="L9307" href="#L9307">9307</a>         + <span class="jxr_string">"grs.depth AS role_set_depth, "</span>
<a class="jxr_linenumber" name="L9308" href="#L9308">9308</a>         + <span class="jxr_string">"gadns.depth AS attr_def_name_set_depth, "</span>
<a class="jxr_linenumber" name="L9309" href="#L9309">9309</a>         + <span class="jxr_string">"gaaas.depth AS attr_assign_action_set_depth, "</span>
<a class="jxr_linenumber" name="L9310" href="#L9310">9310</a>         + <span class="jxr_string">"gmav.membership_id as membership_id, "</span> 
<a class="jxr_linenumber" name="L9311" href="#L9311">9311</a>         + <span class="jxr_string">"gmav.group_set_id as group_set_id, "</span>
<a class="jxr_linenumber" name="L9312" href="#L9312">9312</a>         + <span class="jxr_string">"grs.id as role_set_id, "</span>
<a class="jxr_linenumber" name="L9313" href="#L9313">9313</a>         + <span class="jxr_string">"gadns.id as attribute_def_name_set_id, "</span>
<a class="jxr_linenumber" name="L9314" href="#L9314">9314</a>         + <span class="jxr_string">"gaaas.id as action_set_id, "</span>
<a class="jxr_linenumber" name="L9315" href="#L9315">9315</a>         + <span class="jxr_string">"gaa.id AS attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L9316" href="#L9316">9316</a>         + <span class="jxr_string">"'role' as permission_type, "</span>        
<a class="jxr_linenumber" name="L9317" href="#L9317">9317</a>         + <span class="jxr_string">"gmav.group_set_active, "</span>
<a class="jxr_linenumber" name="L9318" href="#L9318">9318</a>         + <span class="jxr_string">"gmav.group_set_start_time, "</span>
<a class="jxr_linenumber" name="L9319" href="#L9319">9319</a>         + <span class="jxr_string">"gmav.group_set_end_time, "</span>
<a class="jxr_linenumber" name="L9320" href="#L9320">9320</a>         + <span class="jxr_string">"gmav.membership_active, "</span>
<a class="jxr_linenumber" name="L9321" href="#L9321">9321</a>         + <span class="jxr_string">"gmav.membership_start_time, "</span>
<a class="jxr_linenumber" name="L9322" href="#L9322">9322</a>         + <span class="jxr_string">"gmav.membership_end_time, "</span>        
<a class="jxr_linenumber" name="L9323" href="#L9323">9323</a>         + <span class="jxr_string">"grs.active as role_set_active, "</span>
<a class="jxr_linenumber" name="L9324" href="#L9324">9324</a>         + <span class="jxr_string">"grs.start_time as role_set_start_time, "</span>
<a class="jxr_linenumber" name="L9325" href="#L9325">9325</a>         + <span class="jxr_string">"grs.end_time as role_set_end_time, "</span>
<a class="jxr_linenumber" name="L9326" href="#L9326">9326</a>         + <span class="jxr_string">"gaaas.active as action_set_active, "</span>
<a class="jxr_linenumber" name="L9327" href="#L9327">9327</a>         + <span class="jxr_string">"gaaas.start_time as action_set_start_time, "</span>
<a class="jxr_linenumber" name="L9328" href="#L9328">9328</a>         + <span class="jxr_string">"gaaas.end_time as action_set_end_time, "</span>
<a class="jxr_linenumber" name="L9329" href="#L9329">9329</a>         + <span class="jxr_string">"gadns.active as attr_def_name_set_active, "</span>
<a class="jxr_linenumber" name="L9330" href="#L9330">9330</a>         + <span class="jxr_string">"gadns.start_time as attr_def_name_set_start_time, "</span>
<a class="jxr_linenumber" name="L9331" href="#L9331">9331</a>         + <span class="jxr_string">"gadns.end_time as attr_def_name_set_end_time, "</span>
<a class="jxr_linenumber" name="L9332" href="#L9332">9332</a>         + <span class="jxr_string">"gaa.active as attribute_assign_active, "</span>
<a class="jxr_linenumber" name="L9333" href="#L9333">9333</a>         + <span class="jxr_string">"gaa.start_time as attribute_assign_start_time, "</span>
<a class="jxr_linenumber" name="L9334" href="#L9334">9334</a>         + <span class="jxr_string">"gaa.end_time as attribute_assign_end_time, "</span>
<a class="jxr_linenumber" name="L9335" href="#L9335">9335</a>         + <span class="jxr_string">"gaa.disallowed,"</span> 
<a class="jxr_linenumber" name="L9336" href="#L9336">9336</a>         + <span class="jxr_string">"gaaa.source_id as action_source_id, "</span>
<a class="jxr_linenumber" name="L9337" href="#L9337">9337</a>         + <span class="jxr_string">"gr.source_id as role_source_id, "</span>
<a class="jxr_linenumber" name="L9338" href="#L9338">9338</a>         + <span class="jxr_string">"gadn.source_id as attribute_def_name_source_id, "</span>
<a class="jxr_linenumber" name="L9339" href="#L9339">9339</a>         + <span class="jxr_string">"gad.source_id as attribute_def_source_id, "</span>
<a class="jxr_linenumber" name="L9340" href="#L9340">9340</a>         + <span class="jxr_string">"gm.source_id as member_source_id, "</span>
<a class="jxr_linenumber" name="L9341" href="#L9341">9341</a>         + <span class="jxr_string">"gmav.membership_source_id as membership_source_id, "</span> 
<a class="jxr_linenumber" name="L9342" href="#L9342">9342</a>         + <span class="jxr_string">"gaa.source_id as attribute_assign_source_id "</span> 
<a class="jxr_linenumber" name="L9343" href="#L9343">9343</a>         + <span class="jxr_string">"from grouper_pit_groups gr,  "</span>
<a class="jxr_linenumber" name="L9344" href="#L9344">9344</a>         + <span class="jxr_string">"grouper_pit_memberships_all_v gmav,  "</span>
<a class="jxr_linenumber" name="L9345" href="#L9345">9345</a>         + <span class="jxr_string">"grouper_pit_members gm,  "</span>
<a class="jxr_linenumber" name="L9346" href="#L9346">9346</a>         + <span class="jxr_string">"grouper_pit_fields gf,  "</span>
<a class="jxr_linenumber" name="L9347" href="#L9347">9347</a>         + <span class="jxr_string">"grouper_pit_role_set grs,  "</span>
<a class="jxr_linenumber" name="L9348" href="#L9348">9348</a>         + <span class="jxr_string">"grouper_pit_attribute_def gad,  "</span>
<a class="jxr_linenumber" name="L9349" href="#L9349">9349</a>         + <span class="jxr_string">"grouper_pit_attribute_assign gaa,  "</span>
<a class="jxr_linenumber" name="L9350" href="#L9350">9350</a>         + <span class="jxr_string">"grouper_pit_attr_def_name gadn,  "</span>
<a class="jxr_linenumber" name="L9351" href="#L9351">9351</a>         + <span class="jxr_string">"grouper_pit_attr_def_name_set gadns, "</span>
<a class="jxr_linenumber" name="L9352" href="#L9352">9352</a>         + <span class="jxr_string">"grouper_pit_attr_assn_actn gaaa, "</span>
<a class="jxr_linenumber" name="L9353" href="#L9353">9353</a>         + <span class="jxr_string">"grouper_pit_attr_assn_actn_set gaaas "</span>
<a class="jxr_linenumber" name="L9354" href="#L9354">9354</a>         + <span class="jxr_string">"where gmav.owner_group_id = gr.id  "</span>
<a class="jxr_linenumber" name="L9355" href="#L9355">9355</a>         + <span class="jxr_string">"and gmav.field_id = gf.id  "</span>
<a class="jxr_linenumber" name="L9356" href="#L9356">9356</a>         + <span class="jxr_string">"and gf.type = 'list'  "</span>
<a class="jxr_linenumber" name="L9357" href="#L9357">9357</a>         + <span class="jxr_string">"and gf.name = 'members'  "</span>
<a class="jxr_linenumber" name="L9358" href="#L9358">9358</a>         + <span class="jxr_string">"and gmav.member_id = gm.id  "</span>
<a class="jxr_linenumber" name="L9359" href="#L9359">9359</a>         + <span class="jxr_string">"and grs.if_has_role_id = gr.id  "</span>
<a class="jxr_linenumber" name="L9360" href="#L9360">9360</a>         + <span class="jxr_string">"and gadn.attribute_def_id = gad.id  "</span>
<a class="jxr_linenumber" name="L9361" href="#L9361">9361</a>         + <span class="jxr_string">"and gad.attribute_def_type = 'perm'  "</span>
<a class="jxr_linenumber" name="L9362" href="#L9362">9362</a>         + <span class="jxr_string">"and gaa.owner_group_id = grs.then_has_role_id  "</span>
<a class="jxr_linenumber" name="L9363" href="#L9363">9363</a>         + <span class="jxr_string">"and gaa.attribute_def_name_id = gadns.if_has_attribute_def_name_id  "</span>
<a class="jxr_linenumber" name="L9364" href="#L9364">9364</a>         + <span class="jxr_string">"and gadn.id = gadns.then_has_attribute_def_name_id  "</span>
<a class="jxr_linenumber" name="L9365" href="#L9365">9365</a>         + <span class="jxr_string">"and gaa.attribute_assign_type = 'group' "</span>
<a class="jxr_linenumber" name="L9366" href="#L9366">9366</a>         + <span class="jxr_string">"and gaa.attribute_assign_action_id = gaaas.if_has_attr_assn_action_id "</span>
<a class="jxr_linenumber" name="L9367" href="#L9367">9367</a>         + <span class="jxr_string">"and gaaa.id = gaaas.then_has_attr_assn_action_id "</span>);
<a class="jxr_linenumber" name="L9368" href="#L9368">9368</a> 
<a class="jxr_linenumber" name="L9369" href="#L9369">9369</a>     
<a class="jxr_linenumber" name="L9370" href="#L9370">9370</a> 
<a class="jxr_linenumber" name="L9371" href="#L9371">9371</a>     
<a class="jxr_linenumber" name="L9372" href="#L9372">9372</a> 
<a class="jxr_linenumber" name="L9373" href="#L9373">9373</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_pit_perms_role_subj_v"</span>, 
<a class="jxr_linenumber" name="L9374" href="#L9374">9374</a>         <span class="jxr_string">"grouper_pit_perms_role_subj_v: shows all permissions assigned to users directly while in a role"</span>,
<a class="jxr_linenumber" name="L9375" href="#L9375">9375</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name"</span>, 
<a class="jxr_linenumber" name="L9376" href="#L9376">9376</a>             <span class="jxr_string">"subject_source_id"</span>, 
<a class="jxr_linenumber" name="L9377" href="#L9377">9377</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L9378" href="#L9378">9378</a>             <span class="jxr_string">"action"</span>, 
<a class="jxr_linenumber" name="L9379" href="#L9379">9379</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L9380" href="#L9380">9380</a>             <span class="jxr_string">"role_id"</span>,
<a class="jxr_linenumber" name="L9381" href="#L9381">9381</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L9382" href="#L9382">9382</a>             <span class="jxr_string">"member_id"</span>, 
<a class="jxr_linenumber" name="L9383" href="#L9383">9383</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L9384" href="#L9384">9384</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L9385" href="#L9385">9385</a>             <span class="jxr_string">"membership_depth"</span>,
<a class="jxr_linenumber" name="L9386" href="#L9386">9386</a>             <span class="jxr_string">"role_set_depth"</span>,
<a class="jxr_linenumber" name="L9387" href="#L9387">9387</a>             <span class="jxr_string">"attr_def_name_set_depth"</span>,
<a class="jxr_linenumber" name="L9388" href="#L9388">9388</a>             <span class="jxr_string">"attr_assign_action_set_depth"</span>,
<a class="jxr_linenumber" name="L9389" href="#L9389">9389</a>             <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L9390" href="#L9390">9390</a>             <span class="jxr_string">"group_set_id"</span>, 
<a class="jxr_linenumber" name="L9391" href="#L9391">9391</a>             <span class="jxr_string">"role_set_id"</span>,
<a class="jxr_linenumber" name="L9392" href="#L9392">9392</a>             <span class="jxr_string">"attribute_def_name_set_id"</span>,
<a class="jxr_linenumber" name="L9393" href="#L9393">9393</a>             <span class="jxr_string">"action_set_id"</span>,
<a class="jxr_linenumber" name="L9394" href="#L9394">9394</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L9395" href="#L9395">9395</a>             <span class="jxr_string">"permission_type"</span>,
<a class="jxr_linenumber" name="L9396" href="#L9396">9396</a>             <span class="jxr_string">"group_set_active"</span>, 
<a class="jxr_linenumber" name="L9397" href="#L9397">9397</a>             <span class="jxr_string">"group_set_start_time"</span>, 
<a class="jxr_linenumber" name="L9398" href="#L9398">9398</a>             <span class="jxr_string">"group_set_end_time"</span>, 
<a class="jxr_linenumber" name="L9399" href="#L9399">9399</a>             <span class="jxr_string">"membership_active"</span>, 
<a class="jxr_linenumber" name="L9400" href="#L9400">9400</a>             <span class="jxr_string">"membership_start_time"</span>, 
<a class="jxr_linenumber" name="L9401" href="#L9401">9401</a>             <span class="jxr_string">"membership_end_time"</span>,
<a class="jxr_linenumber" name="L9402" href="#L9402">9402</a>             <span class="jxr_string">"role_set_active"</span>,
<a class="jxr_linenumber" name="L9403" href="#L9403">9403</a>             <span class="jxr_string">"role_set_start_time"</span>,
<a class="jxr_linenumber" name="L9404" href="#L9404">9404</a>             <span class="jxr_string">"role_set_end_time"</span>,
<a class="jxr_linenumber" name="L9405" href="#L9405">9405</a>             <span class="jxr_string">"action_set_active"</span>,
<a class="jxr_linenumber" name="L9406" href="#L9406">9406</a>             <span class="jxr_string">"action_set_start_time"</span>,
<a class="jxr_linenumber" name="L9407" href="#L9407">9407</a>             <span class="jxr_string">"action_set_end_time"</span>,
<a class="jxr_linenumber" name="L9408" href="#L9408">9408</a>             <span class="jxr_string">"attr_def_name_set_active"</span>,
<a class="jxr_linenumber" name="L9409" href="#L9409">9409</a>             <span class="jxr_string">"attr_def_name_set_start_time"</span>,
<a class="jxr_linenumber" name="L9410" href="#L9410">9410</a>             <span class="jxr_string">"attr_def_name_set_end_time"</span>,
<a class="jxr_linenumber" name="L9411" href="#L9411">9411</a>             <span class="jxr_string">"attribute_assign_active"</span>,
<a class="jxr_linenumber" name="L9412" href="#L9412">9412</a>             <span class="jxr_string">"attribute_assign_start_time"</span>,
<a class="jxr_linenumber" name="L9413" href="#L9413">9413</a>             <span class="jxr_string">"attribute_assign_end_time"</span>,
<a class="jxr_linenumber" name="L9414" href="#L9414">9414</a>             <span class="jxr_string">"disallowed"</span>,
<a class="jxr_linenumber" name="L9415" href="#L9415">9415</a>             <span class="jxr_string">"action_source_id"</span>,
<a class="jxr_linenumber" name="L9416" href="#L9416">9416</a>             <span class="jxr_string">"role_source_id"</span>,
<a class="jxr_linenumber" name="L9417" href="#L9417">9417</a>             <span class="jxr_string">"attribute_def_name_source_id"</span>,
<a class="jxr_linenumber" name="L9418" href="#L9418">9418</a>             <span class="jxr_string">"attribute_def_source_id"</span>,
<a class="jxr_linenumber" name="L9419" href="#L9419">9419</a>             <span class="jxr_string">"member_source_id"</span>,
<a class="jxr_linenumber" name="L9420" href="#L9420">9420</a>             <span class="jxr_string">"membership_source_id"</span>,
<a class="jxr_linenumber" name="L9421" href="#L9421">9421</a>             <span class="jxr_string">"attribute_assign_source_id"</span>
<a class="jxr_linenumber" name="L9422" href="#L9422">9422</a>             ),
<a class="jxr_linenumber" name="L9423" href="#L9423">9423</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name: name of the role that the user is in and that has the permission"</span>,
<a class="jxr_linenumber" name="L9424" href="#L9424">9424</a>             <span class="jxr_string">"subject_source_id: source id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9425" href="#L9425">9425</a>             <span class="jxr_string">"subject_id: subject id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9426" href="#L9426">9426</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L9427" href="#L9427">9427</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L9428" href="#L9428">9428</a>             <span class="jxr_string">"role_id: id of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9429" href="#L9429">9429</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L9430" href="#L9430">9430</a>             <span class="jxr_string">"member_id: id of the subject in the members table"</span>,
<a class="jxr_linenumber" name="L9431" href="#L9431">9431</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L9432" href="#L9432">9432</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L9433" href="#L9433">9433</a>             <span class="jxr_string">"membership_depth: depth of membership, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9434" href="#L9434">9434</a>             <span class="jxr_string">"role_set_depth: depth of role hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9435" href="#L9435">9435</a>             <span class="jxr_string">"attr_def_name_set_depth: depth of attribute def name set hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9436" href="#L9436">9436</a>             <span class="jxr_string">"attr_assign_action_set_depth: depth of action hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9437" href="#L9437">9437</a>             <span class="jxr_string">"membership_id: id of the immediate or composite membership in grouper_pit_memberships"</span>, 
<a class="jxr_linenumber" name="L9438" href="#L9438">9438</a>             <span class="jxr_string">"group_set_id: id of the group set"</span>, 
<a class="jxr_linenumber" name="L9439" href="#L9439">9439</a>             <span class="jxr_string">"role_set_id: id of the role set"</span>,
<a class="jxr_linenumber" name="L9440" href="#L9440">9440</a>             <span class="jxr_string">"attribute_def_name_set_id: id of the attribute def name set"</span>,
<a class="jxr_linenumber" name="L9441" href="#L9441">9441</a>             <span class="jxr_string">"action_set_id: id of the action set"</span>,
<a class="jxr_linenumber" name="L9442" href="#L9442">9442</a>             <span class="jxr_string">"attribute_assign_id: id of the underlying attribute assign"</span>,
<a class="jxr_linenumber" name="L9443" href="#L9443">9443</a>             <span class="jxr_string">"permission_type: role or role_subject for assignment to role or to role subject pair"</span>,
<a class="jxr_linenumber" name="L9444" href="#L9444">9444</a>             <span class="jxr_string">"group_set_active: whether the group set is currently active"</span>, 
<a class="jxr_linenumber" name="L9445" href="#L9445">9445</a>             <span class="jxr_string">"group_set_start_time: start time of group set"</span>, 
<a class="jxr_linenumber" name="L9446" href="#L9446">9446</a>             <span class="jxr_string">"group_set_end_time: end time of group set"</span>, 
<a class="jxr_linenumber" name="L9447" href="#L9447">9447</a>             <span class="jxr_string">"membership_active: whether the membership is currently active"</span>, 
<a class="jxr_linenumber" name="L9448" href="#L9448">9448</a>             <span class="jxr_string">"membership_start_time: start time of membership"</span>, 
<a class="jxr_linenumber" name="L9449" href="#L9449">9449</a>             <span class="jxr_string">"membership_end_time: end time of membership"</span>,
<a class="jxr_linenumber" name="L9450" href="#L9450">9450</a>             <span class="jxr_string">"role_set_active: whether the role set is currently active"</span>,
<a class="jxr_linenumber" name="L9451" href="#L9451">9451</a>             <span class="jxr_string">"role_set_start_time: start time of role set"</span>,
<a class="jxr_linenumber" name="L9452" href="#L9452">9452</a>             <span class="jxr_string">"role_set_end_time: end time of role set"</span>,
<a class="jxr_linenumber" name="L9453" href="#L9453">9453</a>             <span class="jxr_string">"action_set_active: whether the action set is currently active"</span>,
<a class="jxr_linenumber" name="L9454" href="#L9454">9454</a>             <span class="jxr_string">"action_set_start_time: start time of action set"</span>,
<a class="jxr_linenumber" name="L9455" href="#L9455">9455</a>             <span class="jxr_string">"action_set_end_time: end time of action set"</span>,
<a class="jxr_linenumber" name="L9456" href="#L9456">9456</a>             <span class="jxr_string">"attr_def_name_set_active: whether the attribute def name set is currently active"</span>,
<a class="jxr_linenumber" name="L9457" href="#L9457">9457</a>             <span class="jxr_string">"attr_def_name_set_start_time: start time of attribute def name set"</span>,
<a class="jxr_linenumber" name="L9458" href="#L9458">9458</a>             <span class="jxr_string">"attr_def_name_set_end_time: end time of attribute def name set"</span>,
<a class="jxr_linenumber" name="L9459" href="#L9459">9459</a>             <span class="jxr_string">"attribute_assign_active: whether the attribute assign is currently active"</span>,
<a class="jxr_linenumber" name="L9460" href="#L9460">9460</a>             <span class="jxr_string">"attribute_assign_start_time: start time of attribute assign"</span>,
<a class="jxr_linenumber" name="L9461" href="#L9461">9461</a>             <span class="jxr_string">"attribute_assign_end_time: end time of attribute assign"</span>,
<a class="jxr_linenumber" name="L9462" href="#L9462">9462</a>             <span class="jxr_string">"disallowed: if permission is disallowed from a wider allow, null means false"</span>,
<a class="jxr_linenumber" name="L9463" href="#L9463">9463</a>             <span class="jxr_string">"action_source_id: id of the actual (non-pit) attribute assign action"</span>,
<a class="jxr_linenumber" name="L9464" href="#L9464">9464</a>             <span class="jxr_string">"role_source_id: id of the actual (non-pit) role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9465" href="#L9465">9465</a>             <span class="jxr_string">"attribute_def_name_source_id: id of the actual (non-pit) attribute definition name"</span>,
<a class="jxr_linenumber" name="L9466" href="#L9466">9466</a>             <span class="jxr_string">"attribute_def_source_id: id of the actual (non-pit) attribute definition"</span>,
<a class="jxr_linenumber" name="L9467" href="#L9467">9467</a>             <span class="jxr_string">"member_source_id: id of the actual (non-pit) subject in the members table"</span>,
<a class="jxr_linenumber" name="L9468" href="#L9468">9468</a>             <span class="jxr_string">"membership_source_id: id of the actual (non-pit) immediate or composite membership"</span>,
<a class="jxr_linenumber" name="L9469" href="#L9469">9469</a>             <span class="jxr_string">"attribute_assign_source_id: id of the actual (non-pit) attribute assign"</span>
<a class="jxr_linenumber" name="L9470" href="#L9470">9470</a>         ),
<a class="jxr_linenumber" name="L9471" href="#L9471">9471</a>         <span class="jxr_string">"SELECT DISTINCT gr.name AS role_name,   "</span> +
<a class="jxr_linenumber" name="L9472" href="#L9472">9472</a>         <span class="jxr_string">"gm.subject_source AS subject_source_id,   "</span> +
<a class="jxr_linenumber" name="L9473" href="#L9473">9473</a>         <span class="jxr_string">"gm.subject_id,   "</span> +
<a class="jxr_linenumber" name="L9474" href="#L9474">9474</a>         <span class="jxr_string">"gaaa.name AS ACTION,  "</span> +
<a class="jxr_linenumber" name="L9475" href="#L9475">9475</a>         <span class="jxr_string">"gadn.name AS attribute_def_name_name,   "</span> +
<a class="jxr_linenumber" name="L9476" href="#L9476">9476</a>         <span class="jxr_string">"gr.id AS role_id,   "</span> +
<a class="jxr_linenumber" name="L9477" href="#L9477">9477</a>         <span class="jxr_string">"gadn.attribute_def_id,   "</span> +
<a class="jxr_linenumber" name="L9478" href="#L9478">9478</a>         <span class="jxr_string">"gm.id AS member_id,   "</span> +
<a class="jxr_linenumber" name="L9479" href="#L9479">9479</a>         <span class="jxr_string">"gadn.id AS attribute_def_name_id,   "</span> +
<a class="jxr_linenumber" name="L9480" href="#L9480">9480</a>         <span class="jxr_string">"gaaa.id AS action_id, "</span> +
<a class="jxr_linenumber" name="L9481" href="#L9481">9481</a>         <span class="jxr_string">"gmav.depth AS membership_depth, "</span> +
<a class="jxr_linenumber" name="L9482" href="#L9482">9482</a>         <span class="jxr_string">"-1 AS role_set_depth, "</span> +
<a class="jxr_linenumber" name="L9483" href="#L9483">9483</a>         <span class="jxr_string">"gadns.depth AS attr_def_name_set_depth, "</span> +
<a class="jxr_linenumber" name="L9484" href="#L9484">9484</a>         <span class="jxr_string">"gaaas.depth AS attr_assign_action_set_depth, "</span> +
<a class="jxr_linenumber" name="L9485" href="#L9485">9485</a>         <span class="jxr_string">"gmav.membership_id as membership_id, "</span> +
<a class="jxr_linenumber" name="L9486" href="#L9486">9486</a>         <span class="jxr_string">"gmav.group_set_id as group_set_id, "</span> +
<a class="jxr_linenumber" name="L9487" href="#L9487">9487</a>         <span class="jxr_string">"grs.id as role_set_id, "</span> +
<a class="jxr_linenumber" name="L9488" href="#L9488">9488</a>         <span class="jxr_string">"gadns.id as attribute_def_name_set_id, "</span> +
<a class="jxr_linenumber" name="L9489" href="#L9489">9489</a>         <span class="jxr_string">"gaaas.id as action_set_id, "</span> +
<a class="jxr_linenumber" name="L9490" href="#L9490">9490</a>         <span class="jxr_string">"gaa.id as attribute_assign_id, "</span> +
<a class="jxr_linenumber" name="L9491" href="#L9491">9491</a>         <span class="jxr_string">"'role_subject' as permission_type, "</span> +
<a class="jxr_linenumber" name="L9492" href="#L9492">9492</a>         <span class="jxr_string">"gmav.group_set_active, "</span> +
<a class="jxr_linenumber" name="L9493" href="#L9493">9493</a>         <span class="jxr_string">"gmav.group_set_start_time, "</span> +
<a class="jxr_linenumber" name="L9494" href="#L9494">9494</a>         <span class="jxr_string">"gmav.group_set_end_time, "</span> +
<a class="jxr_linenumber" name="L9495" href="#L9495">9495</a>         <span class="jxr_string">"gmav.membership_active, "</span> +
<a class="jxr_linenumber" name="L9496" href="#L9496">9496</a>         <span class="jxr_string">"gmav.membership_start_time, "</span> +
<a class="jxr_linenumber" name="L9497" href="#L9497">9497</a>         <span class="jxr_string">"gmav.membership_end_time, "</span> +    
<a class="jxr_linenumber" name="L9498" href="#L9498">9498</a>         <span class="jxr_string">"grs.active as role_set_active, "</span> +
<a class="jxr_linenumber" name="L9499" href="#L9499">9499</a>         <span class="jxr_string">"grs.start_time as role_set_start_time, "</span> +
<a class="jxr_linenumber" name="L9500" href="#L9500">9500</a>         <span class="jxr_string">"grs.end_time as role_set_end_time, "</span> +
<a class="jxr_linenumber" name="L9501" href="#L9501">9501</a>         <span class="jxr_string">"gaaas.active as action_set_active, "</span> +
<a class="jxr_linenumber" name="L9502" href="#L9502">9502</a>         <span class="jxr_string">"gaaas.start_time as action_set_start_time, "</span> +
<a class="jxr_linenumber" name="L9503" href="#L9503">9503</a>         <span class="jxr_string">"gaaas.end_time as action_set_end_time, "</span> +
<a class="jxr_linenumber" name="L9504" href="#L9504">9504</a>         <span class="jxr_string">"gadns.active as attr_def_name_set_active, "</span> +
<a class="jxr_linenumber" name="L9505" href="#L9505">9505</a>         <span class="jxr_string">"gadns.start_time as attr_def_name_set_start_time, "</span> +
<a class="jxr_linenumber" name="L9506" href="#L9506">9506</a>         <span class="jxr_string">"gadns.end_time as attr_def_name_set_end_time, "</span> +
<a class="jxr_linenumber" name="L9507" href="#L9507">9507</a>         <span class="jxr_string">"gaa.active as attribute_assign_active, "</span> +
<a class="jxr_linenumber" name="L9508" href="#L9508">9508</a>         <span class="jxr_string">"gaa.start_time as attribute_assign_start_time, "</span> +
<a class="jxr_linenumber" name="L9509" href="#L9509">9509</a>         <span class="jxr_string">"gaa.end_time as attribute_assign_end_time, "</span> +
<a class="jxr_linenumber" name="L9510" href="#L9510">9510</a>         <span class="jxr_string">"gaa.disallowed, "</span> +
<a class="jxr_linenumber" name="L9511" href="#L9511">9511</a>         <span class="jxr_string">"gaaa.source_id as action_source_id, "</span> +
<a class="jxr_linenumber" name="L9512" href="#L9512">9512</a>         <span class="jxr_string">"gr.source_id as role_source_id, "</span> +
<a class="jxr_linenumber" name="L9513" href="#L9513">9513</a>         <span class="jxr_string">"gadn.source_id as attribute_def_name_source_id, "</span> +
<a class="jxr_linenumber" name="L9514" href="#L9514">9514</a>         <span class="jxr_string">"gad.source_id as attribute_def_source_id, "</span> +
<a class="jxr_linenumber" name="L9515" href="#L9515">9515</a>         <span class="jxr_string">"gm.source_id as member_source_id, "</span> +
<a class="jxr_linenumber" name="L9516" href="#L9516">9516</a>         <span class="jxr_string">"gmav.membership_source_id as membership_source_id, "</span> +
<a class="jxr_linenumber" name="L9517" href="#L9517">9517</a>         <span class="jxr_string">"gaa.source_id as attribute_assign_source_id "</span> +
<a class="jxr_linenumber" name="L9518" href="#L9518">9518</a>         <span class="jxr_string">"FROM grouper_pit_groups gr,   "</span> +
<a class="jxr_linenumber" name="L9519" href="#L9519">9519</a>         <span class="jxr_string">"grouper_pit_memberships_all_v gmav,   "</span> +
<a class="jxr_linenumber" name="L9520" href="#L9520">9520</a>         <span class="jxr_string">"grouper_pit_members gm,   "</span> +
<a class="jxr_linenumber" name="L9521" href="#L9521">9521</a>         <span class="jxr_string">"grouper_pit_fields gf,   "</span> +
<a class="jxr_linenumber" name="L9522" href="#L9522">9522</a>         <span class="jxr_string">"grouper_pit_role_set grs,  "</span> +
<a class="jxr_linenumber" name="L9523" href="#L9523">9523</a>         <span class="jxr_string">"grouper_pit_attribute_def gad,  "</span> +
<a class="jxr_linenumber" name="L9524" href="#L9524">9524</a>         <span class="jxr_string">"grouper_pit_attribute_assign gaa,   "</span> +
<a class="jxr_linenumber" name="L9525" href="#L9525">9525</a>         <span class="jxr_string">"grouper_pit_attr_def_name gadn,   "</span> +
<a class="jxr_linenumber" name="L9526" href="#L9526">9526</a>         <span class="jxr_string">"grouper_pit_attr_def_name_set gadns,   "</span> +
<a class="jxr_linenumber" name="L9527" href="#L9527">9527</a>         <span class="jxr_string">"grouper_pit_attr_assn_actn gaaa,  "</span> +
<a class="jxr_linenumber" name="L9528" href="#L9528">9528</a>         <span class="jxr_string">"grouper_pit_attr_assn_actn_set gaaas  "</span> +
<a class="jxr_linenumber" name="L9529" href="#L9529">9529</a>         <span class="jxr_string">"WHERE gmav.owner_group_id = gr.id  "</span> +
<a class="jxr_linenumber" name="L9530" href="#L9530">9530</a>         <span class="jxr_string">"and gmav.field_id = gf.id  "</span> +
<a class="jxr_linenumber" name="L9531" href="#L9531">9531</a>         <span class="jxr_string">"and gmav.owner_group_id = gaa.owner_group_id  "</span> +
<a class="jxr_linenumber" name="L9532" href="#L9532">9532</a>         <span class="jxr_string">"AND gmav.member_id = gaa.owner_member_id   "</span> +
<a class="jxr_linenumber" name="L9533" href="#L9533">9533</a>         <span class="jxr_string">"AND gf.type = 'list'   "</span> +
<a class="jxr_linenumber" name="L9534" href="#L9534">9534</a>         <span class="jxr_string">"AND gf.name = 'members'   "</span> +
<a class="jxr_linenumber" name="L9535" href="#L9535">9535</a>         <span class="jxr_string">"AND gmav.member_id = gm.id   "</span> +
<a class="jxr_linenumber" name="L9536" href="#L9536">9536</a>         <span class="jxr_string">"AND gadn.attribute_def_id = gad.id  "</span> + 
<a class="jxr_linenumber" name="L9537" href="#L9537">9537</a>         <span class="jxr_string">"AND gad.attribute_def_type = 'perm'  "</span> + 
<a class="jxr_linenumber" name="L9538" href="#L9538">9538</a>         <span class="jxr_string">"AND gaa.attribute_assign_type = 'any_mem'  "</span> +
<a class="jxr_linenumber" name="L9539" href="#L9539">9539</a>         <span class="jxr_string">"AND gaa.attribute_def_name_id = gadns.if_has_attribute_def_name_id   "</span> +
<a class="jxr_linenumber" name="L9540" href="#L9540">9540</a>         <span class="jxr_string">"AND gadn.id = gadns.then_has_attribute_def_name_id  "</span> +
<a class="jxr_linenumber" name="L9541" href="#L9541">9541</a>         <span class="jxr_string">"AND gaa.attribute_assign_action_id = gaaas.if_has_attr_assn_action_id  "</span> +
<a class="jxr_linenumber" name="L9542" href="#L9542">9542</a>         <span class="jxr_string">"AND gaaa.id = gaaas.then_has_attr_assn_action_id  "</span> +
<a class="jxr_linenumber" name="L9543" href="#L9543">9543</a>         <span class="jxr_string">"AND grs.if_has_role_id = gr.id and grs.depth='0'  "</span>);
<a class="jxr_linenumber" name="L9544" href="#L9544">9544</a> 
<a class="jxr_linenumber" name="L9545" href="#L9545">9545</a>     
<a class="jxr_linenumber" name="L9546" href="#L9546">9546</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_pit_perms_all_v"</span>, 
<a class="jxr_linenumber" name="L9547" href="#L9547">9547</a>         <span class="jxr_string">"grouper_pit_perms_all_v: shows all permissions assigned to users directly while in a role, or assigned to roles (and users in the role)"</span>,
<a class="jxr_linenumber" name="L9548" href="#L9548">9548</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name"</span>, 
<a class="jxr_linenumber" name="L9549" href="#L9549">9549</a>             <span class="jxr_string">"subject_source_id"</span>, 
<a class="jxr_linenumber" name="L9550" href="#L9550">9550</a>             <span class="jxr_string">"subject_id"</span>,
<a class="jxr_linenumber" name="L9551" href="#L9551">9551</a>             <span class="jxr_string">"action"</span>, 
<a class="jxr_linenumber" name="L9552" href="#L9552">9552</a>             <span class="jxr_string">"attribute_def_name_name"</span>,
<a class="jxr_linenumber" name="L9553" href="#L9553">9553</a>             <span class="jxr_string">"role_id"</span>,
<a class="jxr_linenumber" name="L9554" href="#L9554">9554</a>             <span class="jxr_string">"attribute_def_id"</span>,
<a class="jxr_linenumber" name="L9555" href="#L9555">9555</a>             <span class="jxr_string">"member_id"</span>, 
<a class="jxr_linenumber" name="L9556" href="#L9556">9556</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L9557" href="#L9557">9557</a>             <span class="jxr_string">"action_id"</span>,
<a class="jxr_linenumber" name="L9558" href="#L9558">9558</a>             <span class="jxr_string">"membership_depth"</span>,
<a class="jxr_linenumber" name="L9559" href="#L9559">9559</a>             <span class="jxr_string">"role_set_depth"</span>,
<a class="jxr_linenumber" name="L9560" href="#L9560">9560</a>             <span class="jxr_string">"attr_def_name_set_depth"</span>,
<a class="jxr_linenumber" name="L9561" href="#L9561">9561</a>             <span class="jxr_string">"attr_assign_action_set_depth"</span>,
<a class="jxr_linenumber" name="L9562" href="#L9562">9562</a>             <span class="jxr_string">"membership_id"</span>,
<a class="jxr_linenumber" name="L9563" href="#L9563">9563</a>             <span class="jxr_string">"group_set_id"</span>, 
<a class="jxr_linenumber" name="L9564" href="#L9564">9564</a>             <span class="jxr_string">"role_set_id"</span>,
<a class="jxr_linenumber" name="L9565" href="#L9565">9565</a>             <span class="jxr_string">"attribute_def_name_set_id"</span>,
<a class="jxr_linenumber" name="L9566" href="#L9566">9566</a>             <span class="jxr_string">"action_set_id"</span>,
<a class="jxr_linenumber" name="L9567" href="#L9567">9567</a>             <span class="jxr_string">"attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L9568" href="#L9568">9568</a>             <span class="jxr_string">"permission_type"</span>,
<a class="jxr_linenumber" name="L9569" href="#L9569">9569</a>             <span class="jxr_string">"group_set_active"</span>, 
<a class="jxr_linenumber" name="L9570" href="#L9570">9570</a>             <span class="jxr_string">"group_set_start_time"</span>, 
<a class="jxr_linenumber" name="L9571" href="#L9571">9571</a>             <span class="jxr_string">"group_set_end_time"</span>, 
<a class="jxr_linenumber" name="L9572" href="#L9572">9572</a>             <span class="jxr_string">"membership_active"</span>, 
<a class="jxr_linenumber" name="L9573" href="#L9573">9573</a>             <span class="jxr_string">"membership_start_time"</span>, 
<a class="jxr_linenumber" name="L9574" href="#L9574">9574</a>             <span class="jxr_string">"membership_end_time"</span>,
<a class="jxr_linenumber" name="L9575" href="#L9575">9575</a>             <span class="jxr_string">"role_set_active"</span>,
<a class="jxr_linenumber" name="L9576" href="#L9576">9576</a>             <span class="jxr_string">"role_set_start_time"</span>,
<a class="jxr_linenumber" name="L9577" href="#L9577">9577</a>             <span class="jxr_string">"role_set_end_time"</span>,
<a class="jxr_linenumber" name="L9578" href="#L9578">9578</a>             <span class="jxr_string">"action_set_active"</span>,
<a class="jxr_linenumber" name="L9579" href="#L9579">9579</a>             <span class="jxr_string">"action_set_start_time"</span>,
<a class="jxr_linenumber" name="L9580" href="#L9580">9580</a>             <span class="jxr_string">"action_set_end_time"</span>,
<a class="jxr_linenumber" name="L9581" href="#L9581">9581</a>             <span class="jxr_string">"attr_def_name_set_active"</span>,
<a class="jxr_linenumber" name="L9582" href="#L9582">9582</a>             <span class="jxr_string">"attr_def_name_set_start_time"</span>,
<a class="jxr_linenumber" name="L9583" href="#L9583">9583</a>             <span class="jxr_string">"attr_def_name_set_end_time"</span>,
<a class="jxr_linenumber" name="L9584" href="#L9584">9584</a>             <span class="jxr_string">"attribute_assign_active"</span>,
<a class="jxr_linenumber" name="L9585" href="#L9585">9585</a>             <span class="jxr_string">"attribute_assign_start_time"</span>,
<a class="jxr_linenumber" name="L9586" href="#L9586">9586</a>             <span class="jxr_string">"attribute_assign_end_time"</span>,
<a class="jxr_linenumber" name="L9587" href="#L9587">9587</a>             <span class="jxr_string">"disallowed"</span>,
<a class="jxr_linenumber" name="L9588" href="#L9588">9588</a>             <span class="jxr_string">"action_source_id"</span>,
<a class="jxr_linenumber" name="L9589" href="#L9589">9589</a>             <span class="jxr_string">"role_source_id"</span>,
<a class="jxr_linenumber" name="L9590" href="#L9590">9590</a>             <span class="jxr_string">"attribute_def_name_source_id"</span>,
<a class="jxr_linenumber" name="L9591" href="#L9591">9591</a>             <span class="jxr_string">"attribute_def_source_id"</span>,
<a class="jxr_linenumber" name="L9592" href="#L9592">9592</a>             <span class="jxr_string">"member_source_id"</span>,
<a class="jxr_linenumber" name="L9593" href="#L9593">9593</a>             <span class="jxr_string">"membership_source_id"</span>,
<a class="jxr_linenumber" name="L9594" href="#L9594">9594</a>             <span class="jxr_string">"attribute_assign_source_id"</span>
<a class="jxr_linenumber" name="L9595" href="#L9595">9595</a>             ),
<a class="jxr_linenumber" name="L9596" href="#L9596">9596</a>         GrouperUtil.toSet(<span class="jxr_string">"role_name: name of the role that the user is in and that has the permission"</span>,
<a class="jxr_linenumber" name="L9597" href="#L9597">9597</a>             <span class="jxr_string">"subject_source_id: source id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9598" href="#L9598">9598</a>             <span class="jxr_string">"subject_id: subject id of the subject which is in the role and thus has the permission"</span>,
<a class="jxr_linenumber" name="L9599" href="#L9599">9599</a>             <span class="jxr_string">"action: the action associated with the attribute assignment (default is assign)"</span>,
<a class="jxr_linenumber" name="L9600" href="#L9600">9600</a>             <span class="jxr_string">"attribute_def_name_name: name of the attribute definition name which is assigned to the group"</span>,
<a class="jxr_linenumber" name="L9601" href="#L9601">9601</a>             <span class="jxr_string">"role_id: id of role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9602" href="#L9602">9602</a>             <span class="jxr_string">"attribute_def_id: id of the attribute definition"</span>,
<a class="jxr_linenumber" name="L9603" href="#L9603">9603</a>             <span class="jxr_string">"member_id: id of the subject in the members table"</span>,
<a class="jxr_linenumber" name="L9604" href="#L9604">9604</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L9605" href="#L9605">9605</a>             <span class="jxr_string">"action_id: id of the attribute assign action"</span>,
<a class="jxr_linenumber" name="L9606" href="#L9606">9606</a>             <span class="jxr_string">"membership_depth: depth of membership, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9607" href="#L9607">9607</a>             <span class="jxr_string">"role_set_depth: depth of role hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9608" href="#L9608">9608</a>             <span class="jxr_string">"attr_def_name_set_depth: depth of attribute def name set hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9609" href="#L9609">9609</a>             <span class="jxr_string">"attr_assign_action_set_depth: depth of action hierarchy, 0 is immediate"</span>,
<a class="jxr_linenumber" name="L9610" href="#L9610">9610</a>             <span class="jxr_string">"membership_id: id of the immediate or composite membership in grouper_pit_memberships"</span>, 
<a class="jxr_linenumber" name="L9611" href="#L9611">9611</a>             <span class="jxr_string">"group_set_id: id of the group set"</span>, 
<a class="jxr_linenumber" name="L9612" href="#L9612">9612</a>             <span class="jxr_string">"role_set_id: id of the role set"</span>,
<a class="jxr_linenumber" name="L9613" href="#L9613">9613</a>             <span class="jxr_string">"attribute_def_name_set_id: id of the attribute def name set"</span>,
<a class="jxr_linenumber" name="L9614" href="#L9614">9614</a>             <span class="jxr_string">"action_set_id: id of the action set"</span>,
<a class="jxr_linenumber" name="L9615" href="#L9615">9615</a>             <span class="jxr_string">"attribute_assign_id: id of the underlying attribute assign"</span>,
<a class="jxr_linenumber" name="L9616" href="#L9616">9616</a>             <span class="jxr_string">"permission_type: role or role_subject for assignment to role or to role subject pair"</span>,
<a class="jxr_linenumber" name="L9617" href="#L9617">9617</a>             <span class="jxr_string">"group_set_active: whether the group set is currently active"</span>, 
<a class="jxr_linenumber" name="L9618" href="#L9618">9618</a>             <span class="jxr_string">"group_set_start_time: start time of group set"</span>, 
<a class="jxr_linenumber" name="L9619" href="#L9619">9619</a>             <span class="jxr_string">"group_set_end_time: end time of group set"</span>, 
<a class="jxr_linenumber" name="L9620" href="#L9620">9620</a>             <span class="jxr_string">"membership_active: whether the membership is currently active"</span>, 
<a class="jxr_linenumber" name="L9621" href="#L9621">9621</a>             <span class="jxr_string">"membership_start_time: start time of membership"</span>, 
<a class="jxr_linenumber" name="L9622" href="#L9622">9622</a>             <span class="jxr_string">"membership_end_time: end time of membership"</span>,
<a class="jxr_linenumber" name="L9623" href="#L9623">9623</a>             <span class="jxr_string">"role_set_active: whether the role set is currently active"</span>,
<a class="jxr_linenumber" name="L9624" href="#L9624">9624</a>             <span class="jxr_string">"role_set_start_time: start time of role set"</span>,
<a class="jxr_linenumber" name="L9625" href="#L9625">9625</a>             <span class="jxr_string">"role_set_end_time: end time of role set"</span>,
<a class="jxr_linenumber" name="L9626" href="#L9626">9626</a>             <span class="jxr_string">"action_set_active: whether the action set is currently active"</span>,
<a class="jxr_linenumber" name="L9627" href="#L9627">9627</a>             <span class="jxr_string">"action_set_start_time: start time of action set"</span>,
<a class="jxr_linenumber" name="L9628" href="#L9628">9628</a>             <span class="jxr_string">"action_set_end_time: end time of action set"</span>,
<a class="jxr_linenumber" name="L9629" href="#L9629">9629</a>             <span class="jxr_string">"attr_def_name_set_active: whether the attribute def name set is currently active"</span>,
<a class="jxr_linenumber" name="L9630" href="#L9630">9630</a>             <span class="jxr_string">"attr_def_name_set_start_time: start time of attribute def name set"</span>,
<a class="jxr_linenumber" name="L9631" href="#L9631">9631</a>             <span class="jxr_string">"attr_def_name_set_end_time: end time of attribute def name set"</span>,
<a class="jxr_linenumber" name="L9632" href="#L9632">9632</a>             <span class="jxr_string">"attribute_assign_active: whether the attribute assign is currently active"</span>,
<a class="jxr_linenumber" name="L9633" href="#L9633">9633</a>             <span class="jxr_string">"attribute_assign_start_time: start time of attribute assign"</span>,
<a class="jxr_linenumber" name="L9634" href="#L9634">9634</a>             <span class="jxr_string">"attribute_assign_end_time: end time of attribute assign"</span>,
<a class="jxr_linenumber" name="L9635" href="#L9635">9635</a>             <span class="jxr_string">"disallowed: if permission is disallowed from a wider allow, null means false"</span>,
<a class="jxr_linenumber" name="L9636" href="#L9636">9636</a>             <span class="jxr_string">"action_source_id: id of the actual (non-pit) attribute assign action"</span>,
<a class="jxr_linenumber" name="L9637" href="#L9637">9637</a>             <span class="jxr_string">"role_source_id: id of the actual (non-pit) role the subject is in, and that the permissions are assigned to"</span>,
<a class="jxr_linenumber" name="L9638" href="#L9638">9638</a>             <span class="jxr_string">"attribute_def_name_source_id: id of the actual (non-pit) attribute definition name"</span>,
<a class="jxr_linenumber" name="L9639" href="#L9639">9639</a>             <span class="jxr_string">"attribute_def_source_id: id of the actual (non-pit) attribute definition"</span>,
<a class="jxr_linenumber" name="L9640" href="#L9640">9640</a>             <span class="jxr_string">"member_source_id: id of the actual (non-pit) subject in the members table"</span>,
<a class="jxr_linenumber" name="L9641" href="#L9641">9641</a>             <span class="jxr_string">"membership_source_id: id of the actual (non-pit) immediate or composite membership"</span>,
<a class="jxr_linenumber" name="L9642" href="#L9642">9642</a>             <span class="jxr_string">"attribute_assign_source_id: id of the actual (non-pit) attribute assign"</span>
<a class="jxr_linenumber" name="L9643" href="#L9643">9643</a>         ),
<a class="jxr_linenumber" name="L9644" href="#L9644">9644</a>         <span class="jxr_string">"select role_name,  "</span>
<a class="jxr_linenumber" name="L9645" href="#L9645">9645</a>         + <span class="jxr_string">"subject_source_id,  "</span>
<a class="jxr_linenumber" name="L9646" href="#L9646">9646</a>         + <span class="jxr_string">"subject_id,  "</span>
<a class="jxr_linenumber" name="L9647" href="#L9647">9647</a>         + <span class="jxr_string">"action,  "</span>
<a class="jxr_linenumber" name="L9648" href="#L9648">9648</a>         + <span class="jxr_string">"attribute_def_name_name,  "</span>
<a class="jxr_linenumber" name="L9649" href="#L9649">9649</a>         + <span class="jxr_string">"role_id,  "</span>
<a class="jxr_linenumber" name="L9650" href="#L9650">9650</a>         + <span class="jxr_string">"attribute_def_id,  "</span>
<a class="jxr_linenumber" name="L9651" href="#L9651">9651</a>         + <span class="jxr_string">"member_id,  "</span>
<a class="jxr_linenumber" name="L9652" href="#L9652">9652</a>         + <span class="jxr_string">"attribute_def_name_id,  "</span>
<a class="jxr_linenumber" name="L9653" href="#L9653">9653</a>         + <span class="jxr_string">"action_id, "</span>
<a class="jxr_linenumber" name="L9654" href="#L9654">9654</a>         + <span class="jxr_string">"membership_depth, "</span>
<a class="jxr_linenumber" name="L9655" href="#L9655">9655</a>         + <span class="jxr_string">"role_set_depth, "</span>
<a class="jxr_linenumber" name="L9656" href="#L9656">9656</a>         + <span class="jxr_string">"attr_def_name_set_depth, "</span>
<a class="jxr_linenumber" name="L9657" href="#L9657">9657</a>         + <span class="jxr_string">"attr_assign_action_set_depth, "</span>
<a class="jxr_linenumber" name="L9658" href="#L9658">9658</a>         + <span class="jxr_string">"membership_id, "</span>
<a class="jxr_linenumber" name="L9659" href="#L9659">9659</a>         + <span class="jxr_string">"group_set_id, "</span>
<a class="jxr_linenumber" name="L9660" href="#L9660">9660</a>         + <span class="jxr_string">"role_set_id, "</span>
<a class="jxr_linenumber" name="L9661" href="#L9661">9661</a>         + <span class="jxr_string">"attribute_def_name_set_id, "</span>
<a class="jxr_linenumber" name="L9662" href="#L9662">9662</a>         + <span class="jxr_string">"action_set_id, "</span>
<a class="jxr_linenumber" name="L9663" href="#L9663">9663</a>         + <span class="jxr_string">"attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L9664" href="#L9664">9664</a>         + <span class="jxr_string">"permission_type, "</span>
<a class="jxr_linenumber" name="L9665" href="#L9665">9665</a>         + <span class="jxr_string">"group_set_active, "</span>
<a class="jxr_linenumber" name="L9666" href="#L9666">9666</a>         + <span class="jxr_string">"group_set_start_time, "</span>
<a class="jxr_linenumber" name="L9667" href="#L9667">9667</a>         + <span class="jxr_string">"group_set_end_time, "</span>
<a class="jxr_linenumber" name="L9668" href="#L9668">9668</a>         + <span class="jxr_string">"membership_active, "</span>
<a class="jxr_linenumber" name="L9669" href="#L9669">9669</a>         + <span class="jxr_string">"membership_start_time, "</span>
<a class="jxr_linenumber" name="L9670" href="#L9670">9670</a>         + <span class="jxr_string">"membership_end_time, "</span>
<a class="jxr_linenumber" name="L9671" href="#L9671">9671</a>         + <span class="jxr_string">"role_set_active, "</span>
<a class="jxr_linenumber" name="L9672" href="#L9672">9672</a>         + <span class="jxr_string">"role_set_start_time, "</span>
<a class="jxr_linenumber" name="L9673" href="#L9673">9673</a>         + <span class="jxr_string">"role_set_end_time, "</span>
<a class="jxr_linenumber" name="L9674" href="#L9674">9674</a>         + <span class="jxr_string">"action_set_active, "</span>
<a class="jxr_linenumber" name="L9675" href="#L9675">9675</a>         + <span class="jxr_string">"action_set_start_time, "</span>
<a class="jxr_linenumber" name="L9676" href="#L9676">9676</a>         + <span class="jxr_string">"action_set_end_time, "</span>
<a class="jxr_linenumber" name="L9677" href="#L9677">9677</a>         + <span class="jxr_string">"attr_def_name_set_active, "</span>
<a class="jxr_linenumber" name="L9678" href="#L9678">9678</a>         + <span class="jxr_string">"attr_def_name_set_start_time, "</span>
<a class="jxr_linenumber" name="L9679" href="#L9679">9679</a>         + <span class="jxr_string">"attr_def_name_set_end_time, "</span>
<a class="jxr_linenumber" name="L9680" href="#L9680">9680</a>         + <span class="jxr_string">"attribute_assign_active, "</span>
<a class="jxr_linenumber" name="L9681" href="#L9681">9681</a>         + <span class="jxr_string">"attribute_assign_start_time, "</span>
<a class="jxr_linenumber" name="L9682" href="#L9682">9682</a>         + <span class="jxr_string">"attribute_assign_end_time, "</span>
<a class="jxr_linenumber" name="L9683" href="#L9683">9683</a>         + <span class="jxr_string">"disallowed, "</span>
<a class="jxr_linenumber" name="L9684" href="#L9684">9684</a>         + <span class="jxr_string">"action_source_id, "</span>
<a class="jxr_linenumber" name="L9685" href="#L9685">9685</a>         + <span class="jxr_string">"role_source_id, "</span>
<a class="jxr_linenumber" name="L9686" href="#L9686">9686</a>         + <span class="jxr_string">"attribute_def_name_source_id, "</span>
<a class="jxr_linenumber" name="L9687" href="#L9687">9687</a>         + <span class="jxr_string">"attribute_def_source_id, "</span>
<a class="jxr_linenumber" name="L9688" href="#L9688">9688</a>         + <span class="jxr_string">"member_source_id, "</span>
<a class="jxr_linenumber" name="L9689" href="#L9689">9689</a>         + <span class="jxr_string">"membership_source_id, "</span> 
<a class="jxr_linenumber" name="L9690" href="#L9690">9690</a>         + <span class="jxr_string">"attribute_assign_source_id "</span> 
<a class="jxr_linenumber" name="L9691" href="#L9691">9691</a>         + <span class="jxr_string">"from grouper_pit_perms_role_v  "</span>
<a class="jxr_linenumber" name="L9692" href="#L9692">9692</a>         + <span class="jxr_string">"union  "</span>
<a class="jxr_linenumber" name="L9693" href="#L9693">9693</a>         + <span class="jxr_string">"select role_name,  "</span>
<a class="jxr_linenumber" name="L9694" href="#L9694">9694</a>         + <span class="jxr_string">"subject_source_id,  "</span>
<a class="jxr_linenumber" name="L9695" href="#L9695">9695</a>         + <span class="jxr_string">"subject_id,  "</span>
<a class="jxr_linenumber" name="L9696" href="#L9696">9696</a>         + <span class="jxr_string">"action,  "</span>
<a class="jxr_linenumber" name="L9697" href="#L9697">9697</a>         + <span class="jxr_string">"attribute_def_name_name,  "</span>
<a class="jxr_linenumber" name="L9698" href="#L9698">9698</a>         + <span class="jxr_string">"role_id,  "</span>
<a class="jxr_linenumber" name="L9699" href="#L9699">9699</a>         + <span class="jxr_string">"attribute_def_id,  "</span>
<a class="jxr_linenumber" name="L9700" href="#L9700">9700</a>         + <span class="jxr_string">"member_id,  "</span>
<a class="jxr_linenumber" name="L9701" href="#L9701">9701</a>         + <span class="jxr_string">"attribute_def_name_id,  "</span>
<a class="jxr_linenumber" name="L9702" href="#L9702">9702</a>         + <span class="jxr_string">"action_id, "</span>
<a class="jxr_linenumber" name="L9703" href="#L9703">9703</a>         + <span class="jxr_string">"membership_depth, "</span>
<a class="jxr_linenumber" name="L9704" href="#L9704">9704</a>         + <span class="jxr_string">"role_set_depth, "</span>
<a class="jxr_linenumber" name="L9705" href="#L9705">9705</a>         + <span class="jxr_string">"attr_def_name_set_depth, "</span>
<a class="jxr_linenumber" name="L9706" href="#L9706">9706</a>         + <span class="jxr_string">"attr_assign_action_set_depth, "</span>
<a class="jxr_linenumber" name="L9707" href="#L9707">9707</a>         + <span class="jxr_string">"membership_id, "</span>
<a class="jxr_linenumber" name="L9708" href="#L9708">9708</a>         + <span class="jxr_string">"group_set_id, "</span>
<a class="jxr_linenumber" name="L9709" href="#L9709">9709</a>         + <span class="jxr_string">"role_set_id, "</span>
<a class="jxr_linenumber" name="L9710" href="#L9710">9710</a>         + <span class="jxr_string">"attribute_def_name_set_id, "</span>
<a class="jxr_linenumber" name="L9711" href="#L9711">9711</a>         + <span class="jxr_string">"action_set_id, "</span>
<a class="jxr_linenumber" name="L9712" href="#L9712">9712</a>         + <span class="jxr_string">"attribute_assign_id, "</span>
<a class="jxr_linenumber" name="L9713" href="#L9713">9713</a>         + <span class="jxr_string">"permission_type, "</span>
<a class="jxr_linenumber" name="L9714" href="#L9714">9714</a>         + <span class="jxr_string">"group_set_active, "</span>
<a class="jxr_linenumber" name="L9715" href="#L9715">9715</a>         + <span class="jxr_string">"group_set_start_time, "</span>
<a class="jxr_linenumber" name="L9716" href="#L9716">9716</a>         + <span class="jxr_string">"group_set_end_time, "</span>
<a class="jxr_linenumber" name="L9717" href="#L9717">9717</a>         + <span class="jxr_string">"membership_active, "</span>
<a class="jxr_linenumber" name="L9718" href="#L9718">9718</a>         + <span class="jxr_string">"membership_start_time, "</span>
<a class="jxr_linenumber" name="L9719" href="#L9719">9719</a>         + <span class="jxr_string">"membership_end_time, "</span>
<a class="jxr_linenumber" name="L9720" href="#L9720">9720</a>         + <span class="jxr_string">"role_set_active, "</span>
<a class="jxr_linenumber" name="L9721" href="#L9721">9721</a>         + <span class="jxr_string">"role_set_start_time, "</span>
<a class="jxr_linenumber" name="L9722" href="#L9722">9722</a>         + <span class="jxr_string">"role_set_end_time, "</span>
<a class="jxr_linenumber" name="L9723" href="#L9723">9723</a>         + <span class="jxr_string">"action_set_active, "</span>
<a class="jxr_linenumber" name="L9724" href="#L9724">9724</a>         + <span class="jxr_string">"action_set_start_time, "</span>
<a class="jxr_linenumber" name="L9725" href="#L9725">9725</a>         + <span class="jxr_string">"action_set_end_time, "</span>
<a class="jxr_linenumber" name="L9726" href="#L9726">9726</a>         + <span class="jxr_string">"attr_def_name_set_active, "</span>
<a class="jxr_linenumber" name="L9727" href="#L9727">9727</a>         + <span class="jxr_string">"attr_def_name_set_start_time, "</span>
<a class="jxr_linenumber" name="L9728" href="#L9728">9728</a>         + <span class="jxr_string">"attr_def_name_set_end_time, "</span>
<a class="jxr_linenumber" name="L9729" href="#L9729">9729</a>         + <span class="jxr_string">"attribute_assign_active, "</span>
<a class="jxr_linenumber" name="L9730" href="#L9730">9730</a>         + <span class="jxr_string">"attribute_assign_start_time, "</span>
<a class="jxr_linenumber" name="L9731" href="#L9731">9731</a>         + <span class="jxr_string">"attribute_assign_end_time, "</span>
<a class="jxr_linenumber" name="L9732" href="#L9732">9732</a>         + <span class="jxr_string">"disallowed, "</span>
<a class="jxr_linenumber" name="L9733" href="#L9733">9733</a>         + <span class="jxr_string">"action_source_id, "</span>
<a class="jxr_linenumber" name="L9734" href="#L9734">9734</a>         + <span class="jxr_string">"role_source_id, "</span>
<a class="jxr_linenumber" name="L9735" href="#L9735">9735</a>         + <span class="jxr_string">"attribute_def_name_source_id, "</span>
<a class="jxr_linenumber" name="L9736" href="#L9736">9736</a>         + <span class="jxr_string">"attribute_def_source_id, "</span>
<a class="jxr_linenumber" name="L9737" href="#L9737">9737</a>         + <span class="jxr_string">"member_source_id, "</span>
<a class="jxr_linenumber" name="L9738" href="#L9738">9738</a>         + <span class="jxr_string">"membership_source_id, "</span> 
<a class="jxr_linenumber" name="L9739" href="#L9739">9739</a>         + <span class="jxr_string">"attribute_assign_source_id "</span> 
<a class="jxr_linenumber" name="L9740" href="#L9740">9740</a>         + <span class="jxr_string">"from grouper_pit_perms_role_subj_v  "</span>);
<a class="jxr_linenumber" name="L9741" href="#L9741">9741</a>       
<a class="jxr_linenumber" name="L9742" href="#L9742">9742</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_pit_attr_asn_value_v"</span>, 
<a class="jxr_linenumber" name="L9743" href="#L9743">9743</a>         <span class="jxr_string">"grouper_pit_attr_asn_value_v: joins attribute values with their assignments"</span>,
<a class="jxr_linenumber" name="L9744" href="#L9744">9744</a>         GrouperUtil.toSet(<span class="jxr_string">"attribute_assign_value_id"</span>, 
<a class="jxr_linenumber" name="L9745" href="#L9745">9745</a>             <span class="jxr_string">"attribute_assign_id"</span>, 
<a class="jxr_linenumber" name="L9746" href="#L9746">9746</a>             <span class="jxr_string">"attribute_def_name_id"</span>,
<a class="jxr_linenumber" name="L9747" href="#L9747">9747</a>             <span class="jxr_string">"attribute_assign_action_id"</span>, 
<a class="jxr_linenumber" name="L9748" href="#L9748">9748</a>             <span class="jxr_string">"attribute_assign_type"</span>,
<a class="jxr_linenumber" name="L9749" href="#L9749">9749</a>             <span class="jxr_string">"owner_attribute_assign_id"</span>,
<a class="jxr_linenumber" name="L9750" href="#L9750">9750</a>             <span class="jxr_string">"owner_attribute_def_id"</span>,
<a class="jxr_linenumber" name="L9751" href="#L9751">9751</a>             <span class="jxr_string">"owner_group_id"</span>, 
<a class="jxr_linenumber" name="L9752" href="#L9752">9752</a>             <span class="jxr_string">"owner_member_id"</span>,
<a class="jxr_linenumber" name="L9753" href="#L9753">9753</a>             <span class="jxr_string">"owner_membership_id"</span>,
<a class="jxr_linenumber" name="L9754" href="#L9754">9754</a>             <span class="jxr_string">"owner_stem_id"</span>,
<a class="jxr_linenumber" name="L9755" href="#L9755">9755</a>             <span class="jxr_string">"value_integer"</span>,
<a class="jxr_linenumber" name="L9756" href="#L9756">9756</a>             <span class="jxr_string">"value_floating"</span>,
<a class="jxr_linenumber" name="L9757" href="#L9757">9757</a>             <span class="jxr_string">"value_string"</span>,
<a class="jxr_linenumber" name="L9758" href="#L9758">9758</a>             <span class="jxr_string">"value_member_id"</span>,
<a class="jxr_linenumber" name="L9759" href="#L9759">9759</a>             <span class="jxr_string">"active"</span>, 
<a class="jxr_linenumber" name="L9760" href="#L9760">9760</a>             <span class="jxr_string">"start_time"</span>,
<a class="jxr_linenumber" name="L9761" href="#L9761">9761</a>             <span class="jxr_string">"end_time"</span>
<a class="jxr_linenumber" name="L9762" href="#L9762">9762</a>             ),
<a class="jxr_linenumber" name="L9763" href="#L9763">9763</a>         GrouperUtil.toSet(<span class="jxr_string">"attribute_assign_value_id: id of the attribute assign value"</span>,
<a class="jxr_linenumber" name="L9764" href="#L9764">9764</a>             <span class="jxr_string">"attribute_assign_id: id of the attribute assignment"</span>,
<a class="jxr_linenumber" name="L9765" href="#L9765">9765</a>             <span class="jxr_string">"attribute_def_name_id: id of the attribute definition name"</span>,
<a class="jxr_linenumber" name="L9766" href="#L9766">9766</a>             <span class="jxr_string">"attribute_assign_action_id: id of the attribute assign action"</span>, 
<a class="jxr_linenumber" name="L9767" href="#L9767">9767</a>             <span class="jxr_string">"attribute_assign_type: type of assignment"</span>,
<a class="jxr_linenumber" name="L9768" href="#L9768">9768</a>             <span class="jxr_string">"owner_attribute_assign_id: owner id of the attribute assignment if applicable"</span>,
<a class="jxr_linenumber" name="L9769" href="#L9769">9769</a>             <span class="jxr_string">"owner_attribute_def_id: owner id of the attribute definition if applicable"</span>,
<a class="jxr_linenumber" name="L9770" href="#L9770">9770</a>             <span class="jxr_string">"owner_group_id: owner id of the group if applicable"</span>, 
<a class="jxr_linenumber" name="L9771" href="#L9771">9771</a>             <span class="jxr_string">"owner_member_id: owner id of the member if applicable"</span>,
<a class="jxr_linenumber" name="L9772" href="#L9772">9772</a>             <span class="jxr_string">"owner_membership_id: owner id of the membership if applicable"</span>,
<a class="jxr_linenumber" name="L9773" href="#L9773">9773</a>             <span class="jxr_string">"owner_stem_id: owner id of the stem if applicable"</span>,
<a class="jxr_linenumber" name="L9774" href="#L9774">9774</a>             <span class="jxr_string">"value_integer: integer value if applicable"</span>,
<a class="jxr_linenumber" name="L9775" href="#L9775">9775</a>             <span class="jxr_string">"value_floating: floating point value if applicable"</span>,
<a class="jxr_linenumber" name="L9776" href="#L9776">9776</a>             <span class="jxr_string">"value_string: string value if applicable"</span>,
<a class="jxr_linenumber" name="L9777" href="#L9777">9777</a>             <span class="jxr_string">"value_member_id: member id value if applicable"</span>,
<a class="jxr_linenumber" name="L9778" href="#L9778">9778</a>             <span class="jxr_string">"active: whether the value is currently active"</span>, 
<a class="jxr_linenumber" name="L9779" href="#L9779">9779</a>             <span class="jxr_string">"start_time: start time of value"</span>,
<a class="jxr_linenumber" name="L9780" href="#L9780">9780</a>             <span class="jxr_string">"end_time: end time of value"</span>
<a class="jxr_linenumber" name="L9781" href="#L9781">9781</a>         ),
<a class="jxr_linenumber" name="L9782" href="#L9782">9782</a>         <span class="jxr_string">"select gpaav.id as attribute_assign_value_id,  "</span>
<a class="jxr_linenumber" name="L9783" href="#L9783">9783</a>         + <span class="jxr_string">"gpaa.id as attribute_assign_id,  "</span>
<a class="jxr_linenumber" name="L9784" href="#L9784">9784</a>         + <span class="jxr_string">"gpaa.attribute_def_name_id,  "</span>
<a class="jxr_linenumber" name="L9785" href="#L9785">9785</a>         + <span class="jxr_string">"gpaa.attribute_assign_action_id,  "</span>
<a class="jxr_linenumber" name="L9786" href="#L9786">9786</a>         + <span class="jxr_string">"gpaa.attribute_assign_type,  "</span>
<a class="jxr_linenumber" name="L9787" href="#L9787">9787</a>         + <span class="jxr_string">"gpaa.owner_attribute_assign_id,  "</span>
<a class="jxr_linenumber" name="L9788" href="#L9788">9788</a>         + <span class="jxr_string">"gpaa.owner_attribute_def_id,  "</span>
<a class="jxr_linenumber" name="L9789" href="#L9789">9789</a>         + <span class="jxr_string">"gpaa.owner_group_id,  "</span>
<a class="jxr_linenumber" name="L9790" href="#L9790">9790</a>         + <span class="jxr_string">"gpaa.owner_member_id,  "</span>
<a class="jxr_linenumber" name="L9791" href="#L9791">9791</a>         + <span class="jxr_string">"gpaa.owner_membership_id, "</span>
<a class="jxr_linenumber" name="L9792" href="#L9792">9792</a>         + <span class="jxr_string">"gpaa.owner_stem_id, "</span>
<a class="jxr_linenumber" name="L9793" href="#L9793">9793</a>         + <span class="jxr_string">"gpaav.value_integer, "</span>
<a class="jxr_linenumber" name="L9794" href="#L9794">9794</a>         + <span class="jxr_string">"gpaav.value_floating, "</span>
<a class="jxr_linenumber" name="L9795" href="#L9795">9795</a>         + <span class="jxr_string">"gpaav.value_string, "</span>
<a class="jxr_linenumber" name="L9796" href="#L9796">9796</a>         + <span class="jxr_string">"gpaav.value_member_id, "</span>
<a class="jxr_linenumber" name="L9797" href="#L9797">9797</a>         + <span class="jxr_string">"gpaav.active, "</span>
<a class="jxr_linenumber" name="L9798" href="#L9798">9798</a>         + <span class="jxr_string">"gpaav.start_time, "</span>
<a class="jxr_linenumber" name="L9799" href="#L9799">9799</a>         + <span class="jxr_string">"gpaav.end_time "</span>
<a class="jxr_linenumber" name="L9800" href="#L9800">9800</a>         + <span class="jxr_string">"from grouper_pit_attribute_assign gpaa, grouper_pit_attr_assn_value gpaav "</span> 
<a class="jxr_linenumber" name="L9801" href="#L9801">9801</a>         + <span class="jxr_string">"where gpaa.id = gpaav.attribute_assign_id"</span>);
<a class="jxr_linenumber" name="L9802" href="#L9802">9802</a>     
<a class="jxr_linenumber" name="L9803" href="#L9803">9803</a>     
<a class="jxr_linenumber" name="L9804" href="#L9804">9804</a>     GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_stem_set_v"</span>, 
<a class="jxr_linenumber" name="L9805" href="#L9805">9805</a>         <span class="jxr_string">"grouper_stem_set_v: shows all stem set relationships"</span>,
<a class="jxr_linenumber" name="L9806" href="#L9806">9806</a>         GrouperUtil.toSet(<span class="jxr_string">"if_has_stem_name"</span>, 
<a class="jxr_linenumber" name="L9807" href="#L9807">9807</a>             <span class="jxr_string">"then_has_stem_name"</span>, 
<a class="jxr_linenumber" name="L9808" href="#L9808">9808</a>             <span class="jxr_string">"depth"</span>, <span class="jxr_string">"type"</span>, 
<a class="jxr_linenumber" name="L9809" href="#L9809">9809</a>             <span class="jxr_string">"parent_if_has_name"</span>, <span class="jxr_string">"parent_then_has_name"</span>,
<a class="jxr_linenumber" name="L9810" href="#L9810">9810</a>             <span class="jxr_string">"id"</span>, <span class="jxr_string">"if_has_stem_id"</span>, <span class="jxr_string">"then_has_stem_id"</span>,
<a class="jxr_linenumber" name="L9811" href="#L9811">9811</a>             <span class="jxr_string">"parent_stem_set_id"</span>),
<a class="jxr_linenumber" name="L9812" href="#L9812">9812</a>         GrouperUtil.toSet(<span class="jxr_string">"if_has_stem_name: name of the if_has stem"</span>, 
<a class="jxr_linenumber" name="L9813" href="#L9813">9813</a>             <span class="jxr_string">"then_has_stem_name: name of the then_has stem"</span>, 
<a class="jxr_linenumber" name="L9814" href="#L9814">9814</a>             <span class="jxr_string">"depth: number of hops in the directed graph"</span>,
<a class="jxr_linenumber" name="L9815" href="#L9815">9815</a>             <span class="jxr_string">"type: self, immediate, effective"</span>,
<a class="jxr_linenumber" name="L9816" href="#L9816">9816</a>             <span class="jxr_string">"parent_if_has_name: name of the stem record which is the parent ifHas on effective path (everything but last hop)"</span>,
<a class="jxr_linenumber" name="L9817" href="#L9817">9817</a>             <span class="jxr_string">"parent_then_has_name: name of the stem record which is the parent thenHas on effective path (everything but last hop)"</span>,
<a class="jxr_linenumber" name="L9818" href="#L9818">9818</a>             <span class="jxr_string">"id: id of the set record"</span>, 
<a class="jxr_linenumber" name="L9819" href="#L9819">9819</a>             <span class="jxr_string">"if_has_stem_id: id of the if_has stem"</span>,
<a class="jxr_linenumber" name="L9820" href="#L9820">9820</a>             <span class="jxr_string">"then_has_stem_id: id of the then_has stem"</span>, 
<a class="jxr_linenumber" name="L9821" href="#L9821">9821</a>             <span class="jxr_string">"parent_stem_set_id: id of the stem set record which is the parent on effective path (everything but last hop)"</span>
<a class="jxr_linenumber" name="L9822" href="#L9822">9822</a>         ),
<a class="jxr_linenumber" name="L9823" href="#L9823">9823</a>         <span class="jxr_string">"select ifHas.name as if_has_stem_name , thenHas.name as then_has_stem_name,   "</span>
<a class="jxr_linenumber" name="L9824" href="#L9824">9824</a>         + <span class="jxr_string">"gss.depth,   "</span>
<a class="jxr_linenumber" name="L9825" href="#L9825">9825</a>         + <span class="jxr_string">"gss.type, gsParentIfHas.name as parent_if_has_name, gsParentThenHas.name as parent_then_has_name,   "</span>
<a class="jxr_linenumber" name="L9826" href="#L9826">9826</a>         + <span class="jxr_string">"gss.id,   "</span>
<a class="jxr_linenumber" name="L9827" href="#L9827">9827</a>         + <span class="jxr_string">"ifHas.id as if_has_stem_id, thenHas.id as then_has_stem_id,   "</span>
<a class="jxr_linenumber" name="L9828" href="#L9828">9828</a>         + <span class="jxr_string">"gss.parent_stem_set_id  "</span>
<a class="jxr_linenumber" name="L9829" href="#L9829">9829</a>         + <span class="jxr_string">"from grouper_stem_set gss,   "</span>
<a class="jxr_linenumber" name="L9830" href="#L9830">9830</a>         + <span class="jxr_string">"grouper_stem_set gssParent,   "</span>
<a class="jxr_linenumber" name="L9831" href="#L9831">9831</a>         + <span class="jxr_string">"grouper_stems gsParentIfHas,   "</span>
<a class="jxr_linenumber" name="L9832" href="#L9832">9832</a>         + <span class="jxr_string">"grouper_stems gsParentThenHas,   "</span>
<a class="jxr_linenumber" name="L9833" href="#L9833">9833</a>         + <span class="jxr_string">"grouper_stems ifHas, "</span>
<a class="jxr_linenumber" name="L9834" href="#L9834">9834</a>         +	<span class="jxr_string">"grouper_stems thenHas   "</span>
<a class="jxr_linenumber" name="L9835" href="#L9835">9835</a>         + <span class="jxr_string">"where  thenHas.id = gss.then_has_stem_id   "</span>
<a class="jxr_linenumber" name="L9836" href="#L9836">9836</a>         + <span class="jxr_string">"and ifHas.id = gss.if_has_stem_id   "</span>
<a class="jxr_linenumber" name="L9837" href="#L9837">9837</a>         + <span class="jxr_string">"and gss.parent_stem_set_id = gssParent.id   "</span>
<a class="jxr_linenumber" name="L9838" href="#L9838">9838</a>         + <span class="jxr_string">"and gsParentIfHas.id = gssParent.if_has_stem_id   "</span>
<a class="jxr_linenumber" name="L9839" href="#L9839">9839</a>         + <span class="jxr_string">"and gsParentThenHas.id = gssParent.then_has_stem_id   "</span>);
<a class="jxr_linenumber" name="L9840" href="#L9840">9840</a>     
<a class="jxr_linenumber" name="L9841" href="#L9841">9841</a>     {
<a class="jxr_linenumber" name="L9842" href="#L9842">9842</a>       
<a class="jxr_linenumber" name="L9843" href="#L9843">9843</a>       String attributeRootStem = GrouperConfig.retrieveConfig().propertyValueString(<span class="jxr_string">"grouper.attribute.rootStem"</span>);
<a class="jxr_linenumber" name="L9844" href="#L9844">9844</a> 
<a class="jxr_linenumber" name="L9845" href="#L9845">9845</a>       <strong class="jxr_keyword">if</strong> (StringUtils.isBlank(attributeRootStem)) {
<a class="jxr_linenumber" name="L9846" href="#L9846">9846</a>         attributeRootStem = <span class="jxr_string">"etc:attribute"</span>;
<a class="jxr_linenumber" name="L9847" href="#L9847">9847</a>       }
<a class="jxr_linenumber" name="L9848" href="#L9848">9848</a>       
<a class="jxr_linenumber" name="L9849" href="#L9849">9849</a>       <em class="jxr_comment">//SELECT </em>
<a class="jxr_linenumber" name="L9850" href="#L9850">9850</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L9851" href="#L9851">9851</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav</em>
<a class="jxr_linenumber" name="L9852" href="#L9852">9852</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteUuid'</em>
<a class="jxr_linenumber" name="L9853" href="#L9853">9853</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2</em>
<a class="jxr_linenumber" name="L9854" href="#L9854">9854</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_id,</em>
<a class="jxr_linenumber" name="L9855" href="#L9855">9855</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L9856" href="#L9856">9856</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav</em>
<a class="jxr_linenumber" name="L9857" href="#L9857">9857</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteMemberId'</em>
<a class="jxr_linenumber" name="L9858" href="#L9858">9858</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2</em>
<a class="jxr_linenumber" name="L9859" href="#L9859">9859</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_member_id,</em>
<a class="jxr_linenumber" name="L9860" href="#L9860">9860</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L9861" href="#L9861">9861</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav</em>
<a class="jxr_linenumber" name="L9862" href="#L9862">9862</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteDate'</em>
<a class="jxr_linenumber" name="L9863" href="#L9863">9863</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2</em>
<a class="jxr_linenumber" name="L9864" href="#L9864">9864</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_date,</em>
<a class="jxr_linenumber" name="L9865" href="#L9865">9865</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L9866" href="#L9866">9866</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav</em>
<a class="jxr_linenumber" name="L9867" href="#L9867">9867</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectEmailAddress'</em>
<a class="jxr_linenumber" name="L9868" href="#L9868">9868</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2</em>
<a class="jxr_linenumber" name="L9869" href="#L9869">9869</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS email_address,</em>
<a class="jxr_linenumber" name="L9870" href="#L9870">9870</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L9871" href="#L9871">9871</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav</em>
<a class="jxr_linenumber" name="L9872" href="#L9872">9872</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteEmailWhenRegistered'</em>
<a class="jxr_linenumber" name="L9873" href="#L9873">9873</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2</em>
<a class="jxr_linenumber" name="L9874" href="#L9874">9874</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_email_when_registered,</em>
<a class="jxr_linenumber" name="L9875" href="#L9875">9875</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L9876" href="#L9876">9876</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav</em>
<a class="jxr_linenumber" name="L9877" href="#L9877">9877</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteGroupUuids'</em>
<a class="jxr_linenumber" name="L9878" href="#L9878">9878</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2</em>
<a class="jxr_linenumber" name="L9879" href="#L9879">9879</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_group_uuids,</em>
<a class="jxr_linenumber" name="L9880" href="#L9880">9880</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L9881" href="#L9881">9881</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav</em>
<a class="jxr_linenumber" name="L9882" href="#L9882">9882</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteExpireDate'</em>
<a class="jxr_linenumber" name="L9883" href="#L9883">9883</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2</em>
<a class="jxr_linenumber" name="L9884" href="#L9884">9884</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_expire_date,</em>
<a class="jxr_linenumber" name="L9885" href="#L9885">9885</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L9886" href="#L9886">9886</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav</em>
<a class="jxr_linenumber" name="L9887" href="#L9887">9887</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteEmail'</em>
<a class="jxr_linenumber" name="L9888" href="#L9888">9888</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2</em>
<a class="jxr_linenumber" name="L9889" href="#L9889">9889</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS email_body,</em>
<a class="jxr_linenumber" name="L9890" href="#L9890">9890</a>       <em class="jxr_comment">//(SELECT gaaasv.disabled_time2</em>
<a class="jxr_linenumber" name="L9891" href="#L9891">9891</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv</em>
<a class="jxr_linenumber" name="L9892" href="#L9892">9892</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteExpireDate'</em>
<a class="jxr_linenumber" name="L9893" href="#L9893">9893</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS expire_attr_expire_date,</em>
<a class="jxr_linenumber" name="L9894" href="#L9894">9894</a>       <em class="jxr_comment">//(SELECT gaaasv.enabled2</em>
<a class="jxr_linenumber" name="L9895" href="#L9895">9895</a>       <em class="jxr_comment">// FROM grouper_attr_asn_asn_stem_v gaaasv</em>
<a class="jxr_linenumber" name="L9896" href="#L9896">9896</a>       <em class="jxr_comment">// WHERE gaaasv.attribute_def_name_name2 = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInviteExpireDate'</em>
<a class="jxr_linenumber" name="L9897" href="#L9897">9897</a>       <em class="jxr_comment">// AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS expire_attr_enabled,</em>
<a class="jxr_linenumber" name="L9898" href="#L9898">9898</a>       <em class="jxr_comment">//gaasv.disabled_time AS assignment_expire_date,</em>
<a class="jxr_linenumber" name="L9899" href="#L9899">9899</a>       <em class="jxr_comment">//gaasv.enabled AS assignment_enabled,</em>
<a class="jxr_linenumber" name="L9900" href="#L9900">9900</a>       <em class="jxr_comment">//gaasv.attribute_assign_id</em>
<a class="jxr_linenumber" name="L9901" href="#L9901">9901</a>       <em class="jxr_comment">//FROM grouper_attr_asn_stem_v gaasv </em>
<a class="jxr_linenumber" name="L9902" href="#L9902">9902</a>       <em class="jxr_comment">//WHERE gaasv.attribute_def_name_name = 'etc:attribute:attrExternalSubjectInvite:externalSubjectInvite'</em>
<a class="jxr_linenumber" name="L9903" href="#L9903">9903</a>       
<a class="jxr_linenumber" name="L9904" href="#L9904">9904</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_ext_subj_invite_v"</span>, 
<a class="jxr_linenumber" name="L9905" href="#L9905">9905</a>           <span class="jxr_string">"External subject invites pending, waiting for someone to respond"</span>,
<a class="jxr_linenumber" name="L9906" href="#L9906">9906</a>           GrouperUtil.toSet(<span class="jxr_string">"invite_id"</span>, 
<a class="jxr_linenumber" name="L9907" href="#L9907">9907</a>               <span class="jxr_string">"invite_member_id"</span>, 
<a class="jxr_linenumber" name="L9908" href="#L9908">9908</a>               <span class="jxr_string">"invite_date"</span>, 
<a class="jxr_linenumber" name="L9909" href="#L9909">9909</a>               <span class="jxr_string">"email_address"</span>, 
<a class="jxr_linenumber" name="L9910" href="#L9910">9910</a>               <span class="jxr_string">"invite_email_when_registered"</span>, 
<a class="jxr_linenumber" name="L9911" href="#L9911">9911</a>               <span class="jxr_string">"invite_group_uuids"</span>, 
<a class="jxr_linenumber" name="L9912" href="#L9912">9912</a>               <span class="jxr_string">"invite_expire_date"</span>,
<a class="jxr_linenumber" name="L9913" href="#L9913">9913</a>               <span class="jxr_string">"email_body"</span>,
<a class="jxr_linenumber" name="L9914" href="#L9914">9914</a>               <span class="jxr_string">"expire_attr_expire_date"</span>,
<a class="jxr_linenumber" name="L9915" href="#L9915">9915</a>               <span class="jxr_string">"expire_attr_enabled"</span>,
<a class="jxr_linenumber" name="L9916" href="#L9916">9916</a>               <span class="jxr_string">"assignment_expire_date"</span>,
<a class="jxr_linenumber" name="L9917" href="#L9917">9917</a>               <span class="jxr_string">"assignment_enabled"</span>,
<a class="jxr_linenumber" name="L9918" href="#L9918">9918</a>               <span class="jxr_string">"attribute_assign_id"</span>),
<a class="jxr_linenumber" name="L9919" href="#L9919">9919</a>           GrouperUtil.toSet(<span class="jxr_string">"invite_id: id of the invite, in the url of the link"</span>, 
<a class="jxr_linenumber" name="L9920" href="#L9920">9920</a>               <span class="jxr_string">"invite_member_id: member id of who invited the user"</span>, 
<a class="jxr_linenumber" name="L9921" href="#L9921">9921</a>               <span class="jxr_string">"invite_date: date of the invite"</span>, 
<a class="jxr_linenumber" name="L9922" href="#L9922">9922</a>               <span class="jxr_string">"email_address: email address where the invite went"</span>, 
<a class="jxr_linenumber" name="L9923" href="#L9923">9923</a>               <span class="jxr_string">"invite_email_when_registered: email sent to this address when person registered"</span>, 
<a class="jxr_linenumber" name="L9924" href="#L9924">9924</a>               <span class="jxr_string">"invite_group_uuids: group uuids that the user should be provisioned to when accepting the invite"</span>, 
<a class="jxr_linenumber" name="L9925" href="#L9925">9925</a>               <span class="jxr_string">"invite_expire_date: when the invite expires, attribute value"</span>,
<a class="jxr_linenumber" name="L9926" href="#L9926">9926</a>               <span class="jxr_string">"email_body: email body sent to user, might be truncated if too long"</span>,
<a class="jxr_linenumber" name="L9927" href="#L9927">9927</a>               <span class="jxr_string">"expire_attr_expire_date: expire date of the expire attribute assignment"</span>,
<a class="jxr_linenumber" name="L9928" href="#L9928">9928</a>               <span class="jxr_string">"expire_attr_enabled: if the expire attribute is enabled"</span>,
<a class="jxr_linenumber" name="L9929" href="#L9929">9929</a>               <span class="jxr_string">"assignment_expire_date: expire date of the attribute assignment on the stem"</span>,
<a class="jxr_linenumber" name="L9930" href="#L9930">9930</a>               <span class="jxr_string">"assignment_enabled: if the attribute assignment on the stem is enabled"</span>,
<a class="jxr_linenumber" name="L9931" href="#L9931">9931</a>               <span class="jxr_string">"attribute_assign_id: attribute assign id of the attribute assignment on the stem"</span>),
<a class="jxr_linenumber" name="L9932" href="#L9932">9932</a>               <span class="jxr_string">"SELECT "</span>
<a class="jxr_linenumber" name="L9933" href="#L9933">9933</a>               + <span class="jxr_string">"(SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L9934" href="#L9934">9934</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L9935" href="#L9935">9935</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteUuid' "</span>
<a class="jxr_linenumber" name="L9936" href="#L9936">9936</a>               + <span class="jxr_string">" AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2 "</span>
<a class="jxr_linenumber" name="L9937" href="#L9937">9937</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_id, "</span>
<a class="jxr_linenumber" name="L9938" href="#L9938">9938</a>               + <span class="jxr_string">"(SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L9939" href="#L9939">9939</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L9940" href="#L9940">9940</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteMemberId' "</span>
<a class="jxr_linenumber" name="L9941" href="#L9941">9941</a>               + <span class="jxr_string">" AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2 "</span>
<a class="jxr_linenumber" name="L9942" href="#L9942">9942</a>               +	<span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_member_id, "</span>
<a class="jxr_linenumber" name="L9943" href="#L9943">9943</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L9944" href="#L9944">9944</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L9945" href="#L9945">9945</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteDate' "</span>
<a class="jxr_linenumber" name="L9946" href="#L9946">9946</a>               + <span class="jxr_string">" AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2 "</span>
<a class="jxr_linenumber" name="L9947" href="#L9947">9947</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_date, "</span>
<a class="jxr_linenumber" name="L9948" href="#L9948">9948</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L9949" href="#L9949">9949</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L9950" href="#L9950">9950</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectEmailAddress' "</span>
<a class="jxr_linenumber" name="L9951" href="#L9951">9951</a>               + <span class="jxr_string">" AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2 "</span>
<a class="jxr_linenumber" name="L9952" href="#L9952">9952</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS email_address, "</span>
<a class="jxr_linenumber" name="L9953" href="#L9953">9953</a>               + <span class="jxr_string">"(SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L9954" href="#L9954">9954</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L9955" href="#L9955">9955</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteEmailWhenRegistered' "</span>
<a class="jxr_linenumber" name="L9956" href="#L9956">9956</a>               + <span class="jxr_string">" AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2 "</span>
<a class="jxr_linenumber" name="L9957" href="#L9957">9957</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_email_when_registered, "</span>
<a class="jxr_linenumber" name="L9958" href="#L9958">9958</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L9959" href="#L9959">9959</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L9960" href="#L9960">9960</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteGroupUuids' "</span>
<a class="jxr_linenumber" name="L9961" href="#L9961">9961</a>               + <span class="jxr_string">" AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2 "</span>
<a class="jxr_linenumber" name="L9962" href="#L9962">9962</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_group_uuids, "</span>
<a class="jxr_linenumber" name="L9963" href="#L9963">9963</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L9964" href="#L9964">9964</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L9965" href="#L9965">9965</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteExpireDate' "</span>
<a class="jxr_linenumber" name="L9966" href="#L9966">9966</a>               + <span class="jxr_string">" AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2 "</span>
<a class="jxr_linenumber" name="L9967" href="#L9967">9967</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS invite_expire_date, "</span>
<a class="jxr_linenumber" name="L9968" href="#L9968">9968</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L9969" href="#L9969">9969</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv, grouper_attribute_assign_value gaav "</span>
<a class="jxr_linenumber" name="L9970" href="#L9970">9970</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteEmail' "</span>
<a class="jxr_linenumber" name="L9971" href="#L9971">9971</a>               + <span class="jxr_string">" AND gaav.attribute_assign_id = gaaasv.attribute_assign_id2 "</span>
<a class="jxr_linenumber" name="L9972" href="#L9972">9972</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS email_body, "</span>
<a class="jxr_linenumber" name="L9973" href="#L9973">9973</a>               + <span class="jxr_string">" (SELECT gaaasv.disabled_time2 "</span>
<a class="jxr_linenumber" name="L9974" href="#L9974">9974</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv "</span>
<a class="jxr_linenumber" name="L9975" href="#L9975">9975</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteExpireDate' "</span>
<a class="jxr_linenumber" name="L9976" href="#L9976">9976</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS expire_attr_expire_date, "</span>
<a class="jxr_linenumber" name="L9977" href="#L9977">9977</a>               + <span class="jxr_string">" (SELECT gaaasv.enabled2 "</span>
<a class="jxr_linenumber" name="L9978" href="#L9978">9978</a>               + <span class="jxr_string">" FROM grouper_attr_asn_asn_stem_v gaaasv "</span>
<a class="jxr_linenumber" name="L9979" href="#L9979">9979</a>               + <span class="jxr_string">" WHERE gaaasv.attribute_def_name_name2 = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInviteExpireDate' "</span>
<a class="jxr_linenumber" name="L9980" href="#L9980">9980</a>               + <span class="jxr_string">" AND gaaasv.attribute_assign_id1 = gaasv.attribute_assign_id) AS expire_attr_enabled, "</span>
<a class="jxr_linenumber" name="L9981" href="#L9981">9981</a>               + <span class="jxr_string">" gaasv.disabled_time AS assignment_expire_date, "</span>
<a class="jxr_linenumber" name="L9982" href="#L9982">9982</a>               + <span class="jxr_string">" gaasv.enabled AS assignment_enabled, "</span>
<a class="jxr_linenumber" name="L9983" href="#L9983">9983</a>               + <span class="jxr_string">" gaasv.attribute_assign_id "</span>
<a class="jxr_linenumber" name="L9984" href="#L9984">9984</a>               + <span class="jxr_string">" FROM grouper_attr_asn_stem_v gaasv "</span>
<a class="jxr_linenumber" name="L9985" href="#L9985">9985</a>               + <span class="jxr_string">" WHERE gaasv.attribute_def_name_name = '"</span> + attributeRootStem + <span class="jxr_string">":attrExternalSubjectInvite:externalSubjectInvite' "</span> 
<a class="jxr_linenumber" name="L9986" href="#L9986">9986</a>               + <span class="jxr_string">" AND gaasv.enabled = 'T' "</span>      
<a class="jxr_linenumber" name="L9987" href="#L9987">9987</a>       );
<a class="jxr_linenumber" name="L9988" href="#L9988">9988</a> 
<a class="jxr_linenumber" name="L9989" href="#L9989">9989</a>       <em class="jxr_comment">//SELECT main_gaa.attribute_assign_type AS assigned_to_type,</em>
<a class="jxr_linenumber" name="L9990" href="#L9990">9990</a>       <em class="jxr_comment">//(SELECT gg.name</em>
<a class="jxr_linenumber" name="L9991" href="#L9991">9991</a>       <em class="jxr_comment">//FROM grouper_groups gg WHERE gg.id = main_gaa.owner_group_id</em>
<a class="jxr_linenumber" name="L9992" href="#L9992">9992</a>       <em class="jxr_comment">//) AS assigned_to_group_name,</em>
<a class="jxr_linenumber" name="L9993" href="#L9993">9993</a>       <em class="jxr_comment">//(SELECT gs.name</em>
<a class="jxr_linenumber" name="L9994" href="#L9994">9994</a>       <em class="jxr_comment">//FROM grouper_stems gs WHERE gs.id = main_gaa.owner_stem_id</em>
<a class="jxr_linenumber" name="L9995" href="#L9995">9995</a>       <em class="jxr_comment">//) AS assigned_to_stem_name,</em>
<a class="jxr_linenumber" name="L9996" href="#L9996">9996</a>       <em class="jxr_comment">//(SELECT gm.subject_id</em>
<a class="jxr_linenumber" name="L9997" href="#L9997">9997</a>       <em class="jxr_comment">//FROM grouper_members gm WHERE gm.id = main_gaa.owner_member_id</em>
<a class="jxr_linenumber" name="L9998" href="#L9998">9998</a>       <em class="jxr_comment">//) AS assigned_to_member_subject_id,</em>
<a class="jxr_linenumber" name="L9999" href="#L9999">9999</a>       <em class="jxr_comment">//(SELECT gad.name</em>
<a class="jxr_linenumber" name="L10000" href="#L10000">10000</a>       <em class="jxr_comment">//FROM grouper_attribute_def gad WHERE gad.id = main_gaa.owner_attribute_def_id</em>
<a class="jxr_linenumber" name="L10001" href="#L10001">10001</a>       <em class="jxr_comment">//) AS assigned_to_attribute_def_name,</em>
<a class="jxr_linenumber" name="L10002" href="#L10002">10002</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10003" href="#L10003">10003</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10004" href="#L10004">10004</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleCheckType'</em>
<a class="jxr_linenumber" name="L10005" href="#L10005">10005</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10006" href="#L10006">10006</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10007" href="#L10007">10007</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10008" href="#L10008">10008</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_check_type,</em>
<a class="jxr_linenumber" name="L10009" href="#L10009">10009</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10010" href="#L10010">10010</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10011" href="#L10011">10011</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleCheckOwnerId'</em>
<a class="jxr_linenumber" name="L10012" href="#L10012">10012</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10013" href="#L10013">10013</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10014" href="#L10014">10014</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10015" href="#L10015">10015</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_check_owner_id,</em>
<a class="jxr_linenumber" name="L10016" href="#L10016">10016</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10017" href="#L10017">10017</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10018" href="#L10018">10018</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleCheckOwnerName'</em>
<a class="jxr_linenumber" name="L10019" href="#L10019">10019</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10020" href="#L10020">10020</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10021" href="#L10021">10021</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10022" href="#L10022">10022</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_check_owner_name,</em>
<a class="jxr_linenumber" name="L10023" href="#L10023">10023</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10024" href="#L10024">10024</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10025" href="#L10025">10025</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleCheckStemScope'</em>
<a class="jxr_linenumber" name="L10026" href="#L10026">10026</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10027" href="#L10027">10027</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10028" href="#L10028">10028</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10029" href="#L10029">10029</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_check_stem_scope,</em>
<a class="jxr_linenumber" name="L10030" href="#L10030">10030</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10031" href="#L10031">10031</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10032" href="#L10032">10032</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleCheckArg0'</em>
<a class="jxr_linenumber" name="L10033" href="#L10033">10033</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10034" href="#L10034">10034</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10035" href="#L10035">10035</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10036" href="#L10036">10036</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_check_arg0,</em>
<a class="jxr_linenumber" name="L10037" href="#L10037">10037</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10038" href="#L10038">10038</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10039" href="#L10039">10039</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleCheckArg1'</em>
<a class="jxr_linenumber" name="L10040" href="#L10040">10040</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10041" href="#L10041">10041</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10042" href="#L10042">10042</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10043" href="#L10043">10043</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_check_arg1,</em>
<a class="jxr_linenumber" name="L10044" href="#L10044">10044</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10045" href="#L10045">10045</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10046" href="#L10046">10046</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleIfConditionEl'</em>
<a class="jxr_linenumber" name="L10047" href="#L10047">10047</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10048" href="#L10048">10048</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10049" href="#L10049">10049</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10050" href="#L10050">10050</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_if_condition_el,</em>
<a class="jxr_linenumber" name="L10051" href="#L10051">10051</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10052" href="#L10052">10052</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10053" href="#L10053">10053</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleIfConditionEnum'</em>
<a class="jxr_linenumber" name="L10054" href="#L10054">10054</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10055" href="#L10055">10055</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10056" href="#L10056">10056</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10057" href="#L10057">10057</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_if_condition_enum,</em>
<a class="jxr_linenumber" name="L10058" href="#L10058">10058</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10059" href="#L10059">10059</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10060" href="#L10060">10060</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleIfConditionEnumArg0'</em>
<a class="jxr_linenumber" name="L10061" href="#L10061">10061</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10062" href="#L10062">10062</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10063" href="#L10063">10063</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10064" href="#L10064">10064</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_if_condition_enum_arg0,</em>
<a class="jxr_linenumber" name="L10065" href="#L10065">10065</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10066" href="#L10066">10066</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10067" href="#L10067">10067</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleIfConditionEnumArg1'</em>
<a class="jxr_linenumber" name="L10068" href="#L10068">10068</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10069" href="#L10069">10069</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10070" href="#L10070">10070</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10071" href="#L10071">10071</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_if_condition_enum_arg1,</em>
<a class="jxr_linenumber" name="L10072" href="#L10072">10072</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10073" href="#L10073">10073</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10074" href="#L10074">10074</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleIfOwnerId'</em>
<a class="jxr_linenumber" name="L10075" href="#L10075">10075</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10076" href="#L10076">10076</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10077" href="#L10077">10077</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10078" href="#L10078">10078</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_if_owner_id,</em>
<a class="jxr_linenumber" name="L10079" href="#L10079">10079</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10080" href="#L10080">10080</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10081" href="#L10081">10081</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleIfOwnerName'</em>
<a class="jxr_linenumber" name="L10082" href="#L10082">10082</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10083" href="#L10083">10083</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10084" href="#L10084">10084</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10085" href="#L10085">10085</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_if_owner_name,</em>
<a class="jxr_linenumber" name="L10086" href="#L10086">10086</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10087" href="#L10087">10087</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10088" href="#L10088">10088</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleIfStemScope'</em>
<a class="jxr_linenumber" name="L10089" href="#L10089">10089</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10090" href="#L10090">10090</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10091" href="#L10091">10091</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10092" href="#L10092">10092</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_if_stem_scope,</em>
<a class="jxr_linenumber" name="L10093" href="#L10093">10093</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10094" href="#L10094">10094</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10095" href="#L10095">10095</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleThenEl'</em>
<a class="jxr_linenumber" name="L10096" href="#L10096">10096</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10097" href="#L10097">10097</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10098" href="#L10098">10098</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10099" href="#L10099">10099</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_then_el,</em>
<a class="jxr_linenumber" name="L10100" href="#L10100">10100</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10101" href="#L10101">10101</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10102" href="#L10102">10102</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleThenEnum'</em>
<a class="jxr_linenumber" name="L10103" href="#L10103">10103</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10104" href="#L10104">10104</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10105" href="#L10105">10105</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10106" href="#L10106">10106</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_then_enum,</em>
<a class="jxr_linenumber" name="L10107" href="#L10107">10107</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10108" href="#L10108">10108</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10109" href="#L10109">10109</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleThenEnumArg0'</em>
<a class="jxr_linenumber" name="L10110" href="#L10110">10110</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10111" href="#L10111">10111</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10112" href="#L10112">10112</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10113" href="#L10113">10113</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_then_enum_arg0,</em>
<a class="jxr_linenumber" name="L10114" href="#L10114">10114</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10115" href="#L10115">10115</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10116" href="#L10116">10116</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleThenEnumArg1'</em>
<a class="jxr_linenumber" name="L10117" href="#L10117">10117</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10118" href="#L10118">10118</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10119" href="#L10119">10119</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10120" href="#L10120">10120</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_then_enum_arg1,</em>
<a class="jxr_linenumber" name="L10121" href="#L10121">10121</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10122" href="#L10122">10122</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10123" href="#L10123">10123</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleThenEnumArg2'</em>
<a class="jxr_linenumber" name="L10124" href="#L10124">10124</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10125" href="#L10125">10125</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10126" href="#L10126">10126</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10127" href="#L10127">10127</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_then_enum_arg2,</em>
<a class="jxr_linenumber" name="L10128" href="#L10128">10128</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10129" href="#L10129">10129</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10130" href="#L10130">10130</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleValid'</em>
<a class="jxr_linenumber" name="L10131" href="#L10131">10131</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10132" href="#L10132">10132</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10133" href="#L10133">10133</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10134" href="#L10134">10134</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_valid,</em>
<a class="jxr_linenumber" name="L10135" href="#L10135">10135</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10136" href="#L10136">10136</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10137" href="#L10137">10137</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleRunDaemon'</em>
<a class="jxr_linenumber" name="L10138" href="#L10138">10138</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10139" href="#L10139">10139</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10140" href="#L10140">10140</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10141" href="#L10141">10141</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_run_daemon,</em>
<a class="jxr_linenumber" name="L10142" href="#L10142">10142</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10143" href="#L10143">10143</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10144" href="#L10144">10144</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleActAsSubjectId'</em>
<a class="jxr_linenumber" name="L10145" href="#L10145">10145</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10146" href="#L10146">10146</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10147" href="#L10147">10147</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10148" href="#L10148">10148</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_act_as_subject_id,</em>
<a class="jxr_linenumber" name="L10149" href="#L10149">10149</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10150" href="#L10150">10150</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10151" href="#L10151">10151</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleActAsSubjectIdentifier'</em>
<a class="jxr_linenumber" name="L10152" href="#L10152">10152</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10153" href="#L10153">10153</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10154" href="#L10154">10154</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10155" href="#L10155">10155</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_act_as_subject_identifier,</em>
<a class="jxr_linenumber" name="L10156" href="#L10156">10156</a>       <em class="jxr_comment">//(SELECT gaav.value_string</em>
<a class="jxr_linenumber" name="L10157" href="#L10157">10157</a>       <em class="jxr_comment">// FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn</em>
<a class="jxr_linenumber" name="L10158" href="#L10158">10158</a>       <em class="jxr_comment">// WHERE gadn.name = 'etc:attribute:rules:ruleActAsSubjectSourceId'</em>
<a class="jxr_linenumber" name="L10159" href="#L10159">10159</a>       <em class="jxr_comment">// AND gaav.attribute_assign_id = gaa.id</em>
<a class="jxr_linenumber" name="L10160" href="#L10160">10160</a>       <em class="jxr_comment">// AND gaa.attribute_def_name_id = gadn.id</em>
<a class="jxr_linenumber" name="L10161" href="#L10161">10161</a>       <em class="jxr_comment">// AND gaa.owner_attribute_assign_id = main_gaa.id</em>
<a class="jxr_linenumber" name="L10162" href="#L10162">10162</a>       <em class="jxr_comment">// AND gaa.enabled = 'T') AS rule_act_as_subject_source_id,</em>
<a class="jxr_linenumber" name="L10163" href="#L10163">10163</a>       <em class="jxr_comment">//main_gaa.enabled AS assignment_enabled,</em>
<a class="jxr_linenumber" name="L10164" href="#L10164">10164</a>       <em class="jxr_comment">//main_gaa.id AS attribute_assign_id</em>
<a class="jxr_linenumber" name="L10165" href="#L10165">10165</a>       <em class="jxr_comment">//FROM grouper_attribute_assign main_gaa, grouper_attribute_def_name main_gadn </em>
<a class="jxr_linenumber" name="L10166" href="#L10166">10166</a>       <em class="jxr_comment">//WHERE main_gadn.name = 'etc:attribute:rules:rule'</em>
<a class="jxr_linenumber" name="L10167" href="#L10167">10167</a>       <em class="jxr_comment">//AND main_gaa.attribute_def_name_id = main_gadn.id</em>
<a class="jxr_linenumber" name="L10168" href="#L10168">10168</a> 
<a class="jxr_linenumber" name="L10169" href="#L10169">10169</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_rules_v"</span>, 
<a class="jxr_linenumber" name="L10170" href="#L10170">10170</a>           <span class="jxr_string">"Rules setup in grouper"</span>,
<a class="jxr_linenumber" name="L10171" href="#L10171">10171</a>           GrouperUtil.toSet(<span class="jxr_string">"assigned_to_type"</span>, 
<a class="jxr_linenumber" name="L10172" href="#L10172">10172</a>               <span class="jxr_string">"assigned_to_group_name"</span>, 
<a class="jxr_linenumber" name="L10173" href="#L10173">10173</a>               <span class="jxr_string">"assigned_to_stem_name"</span>,
<a class="jxr_linenumber" name="L10174" href="#L10174">10174</a>               <span class="jxr_string">"assigned_to_member_subject_id"</span>,
<a class="jxr_linenumber" name="L10175" href="#L10175">10175</a>               <span class="jxr_string">"assigned_to_attribute_def_name"</span>,
<a class="jxr_linenumber" name="L10176" href="#L10176">10176</a>               <span class="jxr_string">"rule_check_type"</span>,
<a class="jxr_linenumber" name="L10177" href="#L10177">10177</a>               <span class="jxr_string">"rule_check_owner_id"</span>,
<a class="jxr_linenumber" name="L10178" href="#L10178">10178</a>               <span class="jxr_string">"rule_check_owner_name"</span>,
<a class="jxr_linenumber" name="L10179" href="#L10179">10179</a>               <span class="jxr_string">"rule_check_stem_scope"</span>,
<a class="jxr_linenumber" name="L10180" href="#L10180">10180</a>               <span class="jxr_string">"rule_check_arg0"</span>,
<a class="jxr_linenumber" name="L10181" href="#L10181">10181</a>               <span class="jxr_string">"rule_check_arg1"</span>,
<a class="jxr_linenumber" name="L10182" href="#L10182">10182</a>               <span class="jxr_string">"rule_if_condition_el"</span>,
<a class="jxr_linenumber" name="L10183" href="#L10183">10183</a>               <span class="jxr_string">"rule_if_condition_enum"</span>,
<a class="jxr_linenumber" name="L10184" href="#L10184">10184</a>               <span class="jxr_string">"rule_if_condition_enum_arg0"</span>,
<a class="jxr_linenumber" name="L10185" href="#L10185">10185</a>               <span class="jxr_string">"rule_if_condition_enum_arg1"</span>,
<a class="jxr_linenumber" name="L10186" href="#L10186">10186</a>               <span class="jxr_string">"rule_if_owner_id"</span>,
<a class="jxr_linenumber" name="L10187" href="#L10187">10187</a>               <span class="jxr_string">"rule_if_owner_name"</span>,
<a class="jxr_linenumber" name="L10188" href="#L10188">10188</a>               <span class="jxr_string">"rule_if_stem_scope"</span>,
<a class="jxr_linenumber" name="L10189" href="#L10189">10189</a>               <span class="jxr_string">"rule_then_el"</span>,
<a class="jxr_linenumber" name="L10190" href="#L10190">10190</a>               <span class="jxr_string">"rule_then_enum"</span>,
<a class="jxr_linenumber" name="L10191" href="#L10191">10191</a>               <span class="jxr_string">"rule_then_enum_arg0"</span>,
<a class="jxr_linenumber" name="L10192" href="#L10192">10192</a>               <span class="jxr_string">"rule_then_enum_arg1"</span>,
<a class="jxr_linenumber" name="L10193" href="#L10193">10193</a>               <span class="jxr_string">"rule_then_enum_arg2"</span>,
<a class="jxr_linenumber" name="L10194" href="#L10194">10194</a>               <span class="jxr_string">"rule_valid"</span>,
<a class="jxr_linenumber" name="L10195" href="#L10195">10195</a>               <span class="jxr_string">"rule_run_daemon"</span>,
<a class="jxr_linenumber" name="L10196" href="#L10196">10196</a>               <span class="jxr_string">"rule_act_as_subject_id"</span>,
<a class="jxr_linenumber" name="L10197" href="#L10197">10197</a>               <span class="jxr_string">"rule_act_as_subject_identifier"</span>,
<a class="jxr_linenumber" name="L10198" href="#L10198">10198</a>               <span class="jxr_string">"rule_act_as_subject_source_id"</span>,
<a class="jxr_linenumber" name="L10199" href="#L10199">10199</a>               <span class="jxr_string">"assignment_enabled"</span>,
<a class="jxr_linenumber" name="L10200" href="#L10200">10200</a>               <span class="jxr_string">"attribute_assign_id"</span>
<a class="jxr_linenumber" name="L10201" href="#L10201">10201</a>           ),
<a class="jxr_linenumber" name="L10202" href="#L10202">10202</a>           GrouperUtil.toSet(<span class="jxr_string">"assigned_to_type: attribute_assign_type of rule assignment, e.g. group, stem, etc"</span>, 
<a class="jxr_linenumber" name="L10203" href="#L10203">10203</a>               <span class="jxr_string">"assigned_to_group_name: if rule is assigned to group, this is the group name"</span>, 
<a class="jxr_linenumber" name="L10204" href="#L10204">10204</a>               <span class="jxr_string">"assigned_to_stem_name: if rule is assigned to stem, this is the stem name"</span>,
<a class="jxr_linenumber" name="L10205" href="#L10205">10205</a>               <span class="jxr_string">"assigned_to_member_subject_id: if rule is assigned to member, this is the subject id"</span>,
<a class="jxr_linenumber" name="L10206" href="#L10206">10206</a>               <span class="jxr_string">"assigned_to_attribute_def_name: if rule is assigned to attribute_def, this is the name of the attribute_def"</span>,
<a class="jxr_linenumber" name="L10207" href="#L10207">10207</a>               <span class="jxr_string">"rule_check_type: RuleCheckType enum of when this rule is fired and how to decides which rules are affected"</span>,
<a class="jxr_linenumber" name="L10208" href="#L10208">10208</a>               <span class="jxr_string">"rule_check_owner_id: If the owner is not the object where the rule is assigned, specify id here.  Check owner affects when rule is fired.  Mutually exclusive with rule_check_owner_name"</span>,
<a class="jxr_linenumber" name="L10209" href="#L10209">10209</a>               <span class="jxr_string">"rule_check_owner_name: If the owner is not the object where the rule is assigned, specify name here.  Check owner affects when rule is fired.  Mutually exclusive with rule_check_owner_id"</span>,
<a class="jxr_linenumber" name="L10210" href="#L10210">10210</a>               <span class="jxr_string">"rule_check_stem_scope: If the owner type is stem, then this is the scope: ONE or SUB"</span>,
<a class="jxr_linenumber" name="L10211" href="#L10211">10211</a>               <span class="jxr_string">"rule_check_arg0: If the rule check type has arguments, this is the first"</span>,
<a class="jxr_linenumber" name="L10212" href="#L10212">10212</a>               <span class="jxr_string">"rule_check_arg1: If the rule check type has arguments, this is the second"</span>,
<a class="jxr_linenumber" name="L10213" href="#L10213">10213</a>               <span class="jxr_string">"rule_if_condition_el: If there is expression language to decide if the rule should fire, it is here.  Mutually exclusive with if_condition_enum"</span>,
<a class="jxr_linenumber" name="L10214" href="#L10214">10214</a>               <span class="jxr_string">"rule_if_condition_enum: If the if condition is a built in enum, that IfConditionEnum should be here.  Mutually exclusive with if_condition_el"</span>,
<a class="jxr_linenumber" name="L10215" href="#L10215">10215</a>               <span class="jxr_string">"rule_if_condition_enum_arg0: If the if_condition_enum has arguments, this is the first"</span>,
<a class="jxr_linenumber" name="L10216" href="#L10216">10216</a>               <span class="jxr_string">"rule_if_condition_enum_arg1: If the if_condition_enum has arguments, this is the second"</span>,
<a class="jxr_linenumber" name="L10217" href="#L10217">10217</a>               <span class="jxr_string">"rule_if_owner_id: If the if condition enum has an owner, the id is here.  Mutually exclusive with rule_if_owner_name"</span>,
<a class="jxr_linenumber" name="L10218" href="#L10218">10218</a>               <span class="jxr_string">"rule_if_owner_name: If the if condition enum has an owner, the name is here.  Mutually exclusive with rule_if_owner_id"</span>,
<a class="jxr_linenumber" name="L10219" href="#L10219">10219</a>               <span class="jxr_string">"rule_if_stem_scope: If the if condition enum is a stem type, this is the scope, ONE or SUB"</span>,
<a class="jxr_linenumber" name="L10220" href="#L10220">10220</a>               <span class="jxr_string">"rule_then_el: Then condition expression language if the rule fires.  Mutually exclusive with rule_then_enum"</span>,
<a class="jxr_linenumber" name="L10221" href="#L10221">10221</a>               <span class="jxr_string">"rule_then_enum: then condition built in enum: ThenConditionEnum.  Mutually exclusive with rule_then_el"</span>,
<a class="jxr_linenumber" name="L10222" href="#L10222">10222</a>               <span class="jxr_string">"rule_then_enum_arg0: If the then condition enum has arguments, this is the first"</span>,
<a class="jxr_linenumber" name="L10223" href="#L10223">10223</a>               <span class="jxr_string">"rule_then_enum_arg1: If the then condition enum has arguments, this is the second"</span>,
<a class="jxr_linenumber" name="L10224" href="#L10224">10224</a>               <span class="jxr_string">"rule_then_enum_arg2: If the then condition enum has arguments, this is the third"</span>,
<a class="jxr_linenumber" name="L10225" href="#L10225">10225</a>               <span class="jxr_string">"rule_valid: If the rule is valid, this will be T, else it is the error message"</span>,
<a class="jxr_linenumber" name="L10226" href="#L10226">10226</a>               <span class="jxr_string">"rule_run_daemon: If this rule should run a daemon.  Needs to be daemonable..."</span>,
<a class="jxr_linenumber" name="L10227" href="#L10227">10227</a>               <span class="jxr_string">"rule_act_as_subject_id: Who this rule should act as when firing.  Mutually exclusive with rule_act_as_subject_identifier"</span>,
<a class="jxr_linenumber" name="L10228" href="#L10228">10228</a>               <span class="jxr_string">"rule_act_as_subject_identifier: Who this rule should act as when firing.  Mutually exclusive with rule_act_as_subject_id"</span>,
<a class="jxr_linenumber" name="L10229" href="#L10229">10229</a>               <span class="jxr_string">"rule_act_as_subject_source_id: Optional, source id of who this rule should act as"</span>,
<a class="jxr_linenumber" name="L10230" href="#L10230">10230</a>               <span class="jxr_string">"assignment_enabled: If the rule assignment is enabled"</span>,
<a class="jxr_linenumber" name="L10231" href="#L10231">10231</a>               <span class="jxr_string">"attribute_assign_id: The attribute assign id in the grouper_attribute_assign table for the main rule definition"</span>
<a class="jxr_linenumber" name="L10232" href="#L10232">10232</a>           ),
<a class="jxr_linenumber" name="L10233" href="#L10233">10233</a>               <span class="jxr_string">"SELECT main_gaa.attribute_assign_type AS assigned_to_type, "</span>
<a class="jxr_linenumber" name="L10234" href="#L10234">10234</a>               + <span class="jxr_string">" (SELECT gg.name "</span>
<a class="jxr_linenumber" name="L10235" href="#L10235">10235</a>               + <span class="jxr_string">" FROM grouper_groups gg WHERE gg.id = main_gaa.owner_group_id "</span>
<a class="jxr_linenumber" name="L10236" href="#L10236">10236</a>               + <span class="jxr_string">" ) AS assigned_to_group_name, "</span>
<a class="jxr_linenumber" name="L10237" href="#L10237">10237</a>               + <span class="jxr_string">" (SELECT gs.name "</span>
<a class="jxr_linenumber" name="L10238" href="#L10238">10238</a>               + <span class="jxr_string">" FROM grouper_stems gs WHERE gs.id = main_gaa.owner_stem_id "</span>
<a class="jxr_linenumber" name="L10239" href="#L10239">10239</a>               + <span class="jxr_string">" ) AS assigned_to_stem_name, "</span>
<a class="jxr_linenumber" name="L10240" href="#L10240">10240</a>               + <span class="jxr_string">" (SELECT gm.subject_id "</span>
<a class="jxr_linenumber" name="L10241" href="#L10241">10241</a>               + <span class="jxr_string">" FROM grouper_members gm WHERE gm.id = main_gaa.owner_member_id "</span>
<a class="jxr_linenumber" name="L10242" href="#L10242">10242</a>               + <span class="jxr_string">" ) AS assigned_to_member_subject_id, "</span>
<a class="jxr_linenumber" name="L10243" href="#L10243">10243</a>               + <span class="jxr_string">" (SELECT gad.name "</span>
<a class="jxr_linenumber" name="L10244" href="#L10244">10244</a>               + <span class="jxr_string">" FROM grouper_attribute_def gad WHERE gad.id = main_gaa.owner_attribute_def_id "</span>
<a class="jxr_linenumber" name="L10245" href="#L10245">10245</a>               + <span class="jxr_string">" ) AS assigned_to_attribute_def_name, "</span>
<a class="jxr_linenumber" name="L10246" href="#L10246">10246</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10247" href="#L10247">10247</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10248" href="#L10248">10248</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleCheckType' "</span>
<a class="jxr_linenumber" name="L10249" href="#L10249">10249</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10250" href="#L10250">10250</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10251" href="#L10251">10251</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10252" href="#L10252">10252</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_check_type, "</span>
<a class="jxr_linenumber" name="L10253" href="#L10253">10253</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10254" href="#L10254">10254</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10255" href="#L10255">10255</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleCheckOwnerId' "</span>
<a class="jxr_linenumber" name="L10256" href="#L10256">10256</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10257" href="#L10257">10257</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10258" href="#L10258">10258</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10259" href="#L10259">10259</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_check_owner_id, "</span>
<a class="jxr_linenumber" name="L10260" href="#L10260">10260</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10261" href="#L10261">10261</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10262" href="#L10262">10262</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleCheckOwnerName' "</span>
<a class="jxr_linenumber" name="L10263" href="#L10263">10263</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10264" href="#L10264">10264</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10265" href="#L10265">10265</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10266" href="#L10266">10266</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_check_owner_name, "</span>
<a class="jxr_linenumber" name="L10267" href="#L10267">10267</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10268" href="#L10268">10268</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10269" href="#L10269">10269</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleCheckStemScope' "</span>
<a class="jxr_linenumber" name="L10270" href="#L10270">10270</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10271" href="#L10271">10271</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10272" href="#L10272">10272</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10273" href="#L10273">10273</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_check_stem_scope, "</span>
<a class="jxr_linenumber" name="L10274" href="#L10274">10274</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10275" href="#L10275">10275</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10276" href="#L10276">10276</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleCheckArg0' "</span>
<a class="jxr_linenumber" name="L10277" href="#L10277">10277</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10278" href="#L10278">10278</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10279" href="#L10279">10279</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10280" href="#L10280">10280</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_check_arg0, "</span>
<a class="jxr_linenumber" name="L10281" href="#L10281">10281</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10282" href="#L10282">10282</a>               + <span class="jxr_string">" FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10283" href="#L10283">10283</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleCheckArg1' "</span>
<a class="jxr_linenumber" name="L10284" href="#L10284">10284</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10285" href="#L10285">10285</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10286" href="#L10286">10286</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10287" href="#L10287">10287</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_check_arg1, "</span>
<a class="jxr_linenumber" name="L10288" href="#L10288">10288</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10289" href="#L10289">10289</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10290" href="#L10290">10290</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleIfConditionEl' "</span>
<a class="jxr_linenumber" name="L10291" href="#L10291">10291</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10292" href="#L10292">10292</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10293" href="#L10293">10293</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10294" href="#L10294">10294</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_if_condition_el, "</span>
<a class="jxr_linenumber" name="L10295" href="#L10295">10295</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10296" href="#L10296">10296</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10297" href="#L10297">10297</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleIfConditionEnum' "</span>
<a class="jxr_linenumber" name="L10298" href="#L10298">10298</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10299" href="#L10299">10299</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10300" href="#L10300">10300</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10301" href="#L10301">10301</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_if_condition_enum, "</span>
<a class="jxr_linenumber" name="L10302" href="#L10302">10302</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10303" href="#L10303">10303</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10304" href="#L10304">10304</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleIfConditionEnumArg0' "</span>
<a class="jxr_linenumber" name="L10305" href="#L10305">10305</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10306" href="#L10306">10306</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10307" href="#L10307">10307</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10308" href="#L10308">10308</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_if_condition_enum_arg0, "</span>
<a class="jxr_linenumber" name="L10309" href="#L10309">10309</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10310" href="#L10310">10310</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10311" href="#L10311">10311</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleIfConditionEnumArg1' "</span>
<a class="jxr_linenumber" name="L10312" href="#L10312">10312</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10313" href="#L10313">10313</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10314" href="#L10314">10314</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10315" href="#L10315">10315</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_if_condition_enum_arg1, "</span>
<a class="jxr_linenumber" name="L10316" href="#L10316">10316</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10317" href="#L10317">10317</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10318" href="#L10318">10318</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleIfOwnerId' "</span>
<a class="jxr_linenumber" name="L10319" href="#L10319">10319</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10320" href="#L10320">10320</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10321" href="#L10321">10321</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10322" href="#L10322">10322</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_if_owner_id, "</span>
<a class="jxr_linenumber" name="L10323" href="#L10323">10323</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10324" href="#L10324">10324</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10325" href="#L10325">10325</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleIfOwnerName' "</span>
<a class="jxr_linenumber" name="L10326" href="#L10326">10326</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10327" href="#L10327">10327</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10328" href="#L10328">10328</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10329" href="#L10329">10329</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_if_owner_name, "</span>
<a class="jxr_linenumber" name="L10330" href="#L10330">10330</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10331" href="#L10331">10331</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10332" href="#L10332">10332</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleIfStemScope' "</span>
<a class="jxr_linenumber" name="L10333" href="#L10333">10333</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10334" href="#L10334">10334</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10335" href="#L10335">10335</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10336" href="#L10336">10336</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_if_stem_scope, "</span>
<a class="jxr_linenumber" name="L10337" href="#L10337">10337</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10338" href="#L10338">10338</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10339" href="#L10339">10339</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleThenEl' "</span>
<a class="jxr_linenumber" name="L10340" href="#L10340">10340</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10341" href="#L10341">10341</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10342" href="#L10342">10342</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10343" href="#L10343">10343</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_then_el, "</span>
<a class="jxr_linenumber" name="L10344" href="#L10344">10344</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10345" href="#L10345">10345</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10346" href="#L10346">10346</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleThenEnum' "</span>
<a class="jxr_linenumber" name="L10347" href="#L10347">10347</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10348" href="#L10348">10348</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10349" href="#L10349">10349</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10350" href="#L10350">10350</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_then_enum, "</span>
<a class="jxr_linenumber" name="L10351" href="#L10351">10351</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10352" href="#L10352">10352</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10353" href="#L10353">10353</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleThenEnumArg0' "</span>
<a class="jxr_linenumber" name="L10354" href="#L10354">10354</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10355" href="#L10355">10355</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10356" href="#L10356">10356</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10357" href="#L10357">10357</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_then_enum_arg0, "</span>
<a class="jxr_linenumber" name="L10358" href="#L10358">10358</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10359" href="#L10359">10359</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10360" href="#L10360">10360</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleThenEnumArg1' "</span>
<a class="jxr_linenumber" name="L10361" href="#L10361">10361</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10362" href="#L10362">10362</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10363" href="#L10363">10363</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10364" href="#L10364">10364</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_then_enum_arg1, "</span>
<a class="jxr_linenumber" name="L10365" href="#L10365">10365</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10366" href="#L10366">10366</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10367" href="#L10367">10367</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleThenEnumArg2' "</span>
<a class="jxr_linenumber" name="L10368" href="#L10368">10368</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10369" href="#L10369">10369</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10370" href="#L10370">10370</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10371" href="#L10371">10371</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_then_enum_arg2, "</span>
<a class="jxr_linenumber" name="L10372" href="#L10372">10372</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10373" href="#L10373">10373</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10374" href="#L10374">10374</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleValid' "</span>
<a class="jxr_linenumber" name="L10375" href="#L10375">10375</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10376" href="#L10376">10376</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10377" href="#L10377">10377</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10378" href="#L10378">10378</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_valid, "</span>
<a class="jxr_linenumber" name="L10379" href="#L10379">10379</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10380" href="#L10380">10380</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10381" href="#L10381">10381</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleRunDaemon' "</span>
<a class="jxr_linenumber" name="L10382" href="#L10382">10382</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10383" href="#L10383">10383</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10384" href="#L10384">10384</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10385" href="#L10385">10385</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_run_daemon, "</span>
<a class="jxr_linenumber" name="L10386" href="#L10386">10386</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10387" href="#L10387">10387</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10388" href="#L10388">10388</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleActAsSubjectId' "</span>
<a class="jxr_linenumber" name="L10389" href="#L10389">10389</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10390" href="#L10390">10390</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10391" href="#L10391">10391</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10392" href="#L10392">10392</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_act_as_subject_id, "</span>
<a class="jxr_linenumber" name="L10393" href="#L10393">10393</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10394" href="#L10394">10394</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10395" href="#L10395">10395</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleActAsSubjectIdentifier' "</span>
<a class="jxr_linenumber" name="L10396" href="#L10396">10396</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10397" href="#L10397">10397</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10398" href="#L10398">10398</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10399" href="#L10399">10399</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_act_as_subject_identifier, "</span>
<a class="jxr_linenumber" name="L10400" href="#L10400">10400</a>               + <span class="jxr_string">" (SELECT gaav.value_string "</span>
<a class="jxr_linenumber" name="L10401" href="#L10401">10401</a>               + <span class="jxr_string">"  FROM grouper_attribute_assign gaa, grouper_attribute_assign_value gaav, grouper_attribute_def_name gadn "</span>
<a class="jxr_linenumber" name="L10402" href="#L10402">10402</a>               + <span class="jxr_string">"  WHERE gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:ruleActAsSubjectSourceId' "</span>
<a class="jxr_linenumber" name="L10403" href="#L10403">10403</a>               + <span class="jxr_string">"  AND gaav.attribute_assign_id = gaa.id "</span>
<a class="jxr_linenumber" name="L10404" href="#L10404">10404</a>               + <span class="jxr_string">"  AND gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10405" href="#L10405">10405</a>               + <span class="jxr_string">"  AND gaa.owner_attribute_assign_id = main_gaa.id "</span>
<a class="jxr_linenumber" name="L10406" href="#L10406">10406</a>               + <span class="jxr_string">"  AND gaa.enabled = 'T') AS rule_act_as_subject_source_id, "</span>
<a class="jxr_linenumber" name="L10407" href="#L10407">10407</a>               + <span class="jxr_string">"  main_gaa.enabled AS assignment_enabled, "</span>
<a class="jxr_linenumber" name="L10408" href="#L10408">10408</a>               + <span class="jxr_string">" main_gaa.id AS attribute_assign_id "</span>
<a class="jxr_linenumber" name="L10409" href="#L10409">10409</a>               + <span class="jxr_string">" FROM grouper_attribute_assign main_gaa, grouper_attribute_def_name main_gadn "</span> 
<a class="jxr_linenumber" name="L10410" href="#L10410">10410</a>               + <span class="jxr_string">" WHERE main_gadn.name = '"</span> + attributeRootStem + <span class="jxr_string">":rules:rule' "</span>
<a class="jxr_linenumber" name="L10411" href="#L10411">10411</a>               + <span class="jxr_string">" AND main_gaa.attribute_def_name_id = main_gadn.id "</span>
<a class="jxr_linenumber" name="L10412" href="#L10412">10412</a>       );
<a class="jxr_linenumber" name="L10413" href="#L10413">10413</a>       
<a class="jxr_linenumber" name="L10414" href="#L10414">10414</a>       
<a class="jxr_linenumber" name="L10415" href="#L10415">10415</a>       <em class="jxr_comment">//select distinct </em>
<a class="jxr_linenumber" name="L10416" href="#L10416">10416</a>       <em class="jxr_comment">//(CASE gf.name WHEN 'admins' THEN 'admin'</em>
<a class="jxr_linenumber" name="L10417" href="#L10417">10417</a>       <em class="jxr_comment">//WHEN 'readers' THEN 'admin'</em>
<a class="jxr_linenumber" name="L10418" href="#L10418">10418</a>       <em class="jxr_comment">//when 'updaters' then 'admin'</em>
<a class="jxr_linenumber" name="L10419" href="#L10419">10419</a>       <em class="jxr_comment">//when 'members' then 'user'</em>
<a class="jxr_linenumber" name="L10420" href="#L10420">10420</a>       <em class="jxr_comment">//end</em>
<a class="jxr_linenumber" name="L10421" href="#L10421">10421</a>       <em class="jxr_comment">//) as service_role,</em>
<a class="jxr_linenumber" name="L10422" href="#L10422">10422</a>       <em class="jxr_comment">//gg.name as group_name, gadn.name as name_of_service_def_name, </em>
<a class="jxr_linenumber" name="L10423" href="#L10423">10423</a>       <em class="jxr_comment">//gm.subject_source as subject_source_id, gm.subject_id, </em>
<a class="jxr_linenumber" name="L10424" href="#L10424">10424</a>       <em class="jxr_comment">//gf.name as field_name, gad.name as name_of_service_def, </em>
<a class="jxr_linenumber" name="L10425" href="#L10425">10425</a>       <em class="jxr_comment">//gg.display_name as group_display_name, gg.id as group_id, gad.id as service_def_id, </em>
<a class="jxr_linenumber" name="L10426" href="#L10426">10426</a>       <em class="jxr_comment">//gadn.id as service_name_id, gm.id as member_id, gf.id as field_id,</em>
<a class="jxr_linenumber" name="L10427" href="#L10427">10427</a>       <em class="jxr_comment">//gadn.display_name as display_name_of_service_name</em>
<a class="jxr_linenumber" name="L10428" href="#L10428">10428</a>       <em class="jxr_comment">//from grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_groups gg,</em>
<a class="jxr_linenumber" name="L10429" href="#L10429">10429</a>       <em class="jxr_comment">//grouper_memberships_all_v gmav, grouper_attribute_assign gaa, grouper_stem_set gss,</em>
<a class="jxr_linenumber" name="L10430" href="#L10430">10430</a>       <em class="jxr_comment">//grouper_members gm, grouper_fields gf</em>
<a class="jxr_linenumber" name="L10431" href="#L10431">10431</a>       <em class="jxr_comment">//where gadn.attribute_def_id = gad.id and gad.attribute_def_type='service'</em>
<a class="jxr_linenumber" name="L10432" href="#L10432">10432</a>       <em class="jxr_comment">//and gad.assign_to_stem='T' and gmav.field_id = gf.id</em>
<a class="jxr_linenumber" name="L10433" href="#L10433">10433</a>       <em class="jxr_comment">//and gmav.immediate_mship_enabled='T' and gmav.owner_group_id = gg.id</em>
<a class="jxr_linenumber" name="L10434" href="#L10434">10434</a>       <em class="jxr_comment">//and gaa.owner_stem_id = gss.then_has_stem_id and gg.parent_stem=gss.if_has_stem_id</em>
<a class="jxr_linenumber" name="L10435" href="#L10435">10435</a>       <em class="jxr_comment">//and gaa.enabled='T' and gmav.member_id = gm.id</em>
<a class="jxr_linenumber" name="L10436" href="#L10436">10436</a>       <em class="jxr_comment">//and gf.name in ('admins', 'members', 'readers', 'updaters')</em>
<a class="jxr_linenumber" name="L10437" href="#L10437">10437</a>       GrouperDdlUtils.ddlutilsCreateOrReplaceView(ddlVersionBean, <span class="jxr_string">"grouper_service_role_v"</span>, 
<a class="jxr_linenumber" name="L10438" href="#L10438">10438</a>           <span class="jxr_string">"grouper_service_role_v: shows service admin or user relationships to folders/groups"</span>,
<a class="jxr_linenumber" name="L10439" href="#L10439">10439</a>           GrouperUtil.toSet(<span class="jxr_string">"service_role"</span>, <span class="jxr_string">"group_name"</span>, <span class="jxr_string">"name_of_service_def_name"</span>, 
<a class="jxr_linenumber" name="L10440" href="#L10440">10440</a>                   <span class="jxr_string">"subject_source_id"</span>, <span class="jxr_string">"subject_id"</span>, 
<a class="jxr_linenumber" name="L10441" href="#L10441">10441</a>                   <span class="jxr_string">"field_name"</span>, <span class="jxr_string">"name_of_service_def"</span>, 
<a class="jxr_linenumber" name="L10442" href="#L10442">10442</a>                   <span class="jxr_string">"group_display_name"</span>, <span class="jxr_string">"group_id"</span>, <span class="jxr_string">"service_def_id"</span>, 
<a class="jxr_linenumber" name="L10443" href="#L10443">10443</a>                   <span class="jxr_string">"service_name_id"</span>, <span class="jxr_string">"member_id"</span>, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"display_name_of_service_name"</span>, <span class="jxr_string">"service_stem_id"</span>),
<a class="jxr_linenumber" name="L10444" href="#L10444">10444</a>           GrouperUtil.toSet(
<a class="jxr_linenumber" name="L10445" href="#L10445">10445</a>               <span class="jxr_string">"service_role: admin or user is the subject is an admin/updater/reader of a group in the service folder, or user is the subject is a member of a group in the service folder"</span>, 
<a class="jxr_linenumber" name="L10446" href="#L10446">10446</a>               <span class="jxr_string">"group_name: group name in the service that the user is an admin or user of"</span>, 
<a class="jxr_linenumber" name="L10447" href="#L10447">10447</a>               <span class="jxr_string">"name_of_service_def_name: name of the service dev name, this generally is the system name of the service"</span>, 
<a class="jxr_linenumber" name="L10448" href="#L10448">10448</a>               <span class="jxr_string">"subject_source_id: subject source id of the subject who is the admin or user of the service"</span>, 
<a class="jxr_linenumber" name="L10449" href="#L10449">10449</a>               <span class="jxr_string">"subject_id: subject id of the subject who is the admin or user of the service"</span>, 
<a class="jxr_linenumber" name="L10450" href="#L10450">10450</a>               <span class="jxr_string">"field_name: field of the membership of the subject who is the admin or user of the service"</span>, 
<a class="jxr_linenumber" name="L10451" href="#L10451">10451</a>               <span class="jxr_string">"name_of_service_def: name of the attribute definition of the service"</span>, 
<a class="jxr_linenumber" name="L10452" href="#L10452">10452</a>               <span class="jxr_string">"group_display_name: display name of the group that the subject is an admin or user of the service"</span>, 
<a class="jxr_linenumber" name="L10453" href="#L10453">10453</a>               <span class="jxr_string">"group_id: group id of the group that the subject is an admin or user of the service"</span>, 
<a class="jxr_linenumber" name="L10454" href="#L10454">10454</a>               <span class="jxr_string">"service_def_id: id of the attribute definition that is related to the service"</span>, 
<a class="jxr_linenumber" name="L10455" href="#L10455">10455</a>               <span class="jxr_string">"service_name_id: id of the attribute name that is the service"</span>, 
<a class="jxr_linenumber" name="L10456" href="#L10456">10456</a>               <span class="jxr_string">"member_id: id in the member table of the subject who is an admin or user of the service"</span>, 
<a class="jxr_linenumber" name="L10457" href="#L10457">10457</a>               <span class="jxr_string">"field_id: id of the field for the membership of the subject who an admin or user of the service"</span>,
<a class="jxr_linenumber" name="L10458" href="#L10458">10458</a>               <span class="jxr_string">"display_name_of_service_name: display name of the service definition name"</span>,
<a class="jxr_linenumber" name="L10459" href="#L10459">10459</a>               <span class="jxr_string">"service_stem_id: id of the stem where the service tag is assigned"</span>
<a class="jxr_linenumber" name="L10460" href="#L10460">10460</a>           ),
<a class="jxr_linenumber" name="L10461" href="#L10461">10461</a>         <span class="jxr_string">"select distinct "</span> 
<a class="jxr_linenumber" name="L10462" href="#L10462">10462</a>         + <span class="jxr_string">"(CASE gf.name WHEN 'admins' THEN 'admin' "</span>
<a class="jxr_linenumber" name="L10463" href="#L10463">10463</a>         + <span class="jxr_string">"WHEN 'updaters' then 'admin' "</span>
<a class="jxr_linenumber" name="L10464" href="#L10464">10464</a>         + <span class="jxr_string">"when 'members' then 'user' "</span>
<a class="jxr_linenumber" name="L10465" href="#L10465">10465</a>         + <span class="jxr_string">"end "</span>
<a class="jxr_linenumber" name="L10466" href="#L10466">10466</a>         + <span class="jxr_string">") as service_role, "</span>
<a class="jxr_linenumber" name="L10467" href="#L10467">10467</a>         + <span class="jxr_string">"gg.name as group_name, gadn.name as name_of_service_def_name,  "</span>
<a class="jxr_linenumber" name="L10468" href="#L10468">10468</a>         + <span class="jxr_string">"gm.subject_source as subject_source_id, gm.subject_id,  "</span>
<a class="jxr_linenumber" name="L10469" href="#L10469">10469</a>         + <span class="jxr_string">"gf.name as field_name, gad.name as name_of_service_def,  "</span>
<a class="jxr_linenumber" name="L10470" href="#L10470">10470</a>         + <span class="jxr_string">"gg.display_name as group_display_name, gg.id as group_id, gad.id as service_def_id, "</span> 
<a class="jxr_linenumber" name="L10471" href="#L10471">10471</a>         + <span class="jxr_string">"gadn.id as service_name_id, gm.id as member_id, gf.id as field_id, "</span>
<a class="jxr_linenumber" name="L10472" href="#L10472">10472</a>         + <span class="jxr_string">"gadn.display_name as display_name_of_service_name, "</span>
<a class="jxr_linenumber" name="L10473" href="#L10473">10473</a>         + <span class="jxr_string">"gaa.owner_stem_id as service_stem_id "</span>
<a class="jxr_linenumber" name="L10474" href="#L10474">10474</a>         + <span class="jxr_string">"from grouper_attribute_def_name gadn, grouper_attribute_def gad, grouper_groups gg, "</span>
<a class="jxr_linenumber" name="L10475" href="#L10475">10475</a>         + <span class="jxr_string">"grouper_memberships_all_v gmav, grouper_attribute_assign gaa, grouper_stem_set gss, "</span>
<a class="jxr_linenumber" name="L10476" href="#L10476">10476</a>         + <span class="jxr_string">"grouper_members gm, grouper_fields gf "</span>
<a class="jxr_linenumber" name="L10477" href="#L10477">10477</a>         + <span class="jxr_string">"where gadn.attribute_def_id = gad.id and gad.attribute_def_type='service' "</span>
<a class="jxr_linenumber" name="L10478" href="#L10478">10478</a>         + <span class="jxr_string">"and gaa.attribute_def_name_id = gadn.id "</span>
<a class="jxr_linenumber" name="L10479" href="#L10479">10479</a>         + <span class="jxr_string">"and gad.assign_to_stem='T' and gmav.field_id = gf.id "</span>
<a class="jxr_linenumber" name="L10480" href="#L10480">10480</a>         + <span class="jxr_string">"and gmav.immediate_mship_enabled='T' and gmav.owner_group_id = gg.id "</span>
<a class="jxr_linenumber" name="L10481" href="#L10481">10481</a>         + <span class="jxr_string">"and gaa.owner_stem_id = gss.then_has_stem_id and gg.parent_stem=gss.if_has_stem_id "</span>
<a class="jxr_linenumber" name="L10482" href="#L10482">10482</a>         + <span class="jxr_string">"and gaa.enabled='T' and gmav.member_id = gm.id "</span>
<a class="jxr_linenumber" name="L10483" href="#L10483">10483</a>         + <span class="jxr_string">"and gf.name in ('admins', 'members', 'readers', 'updaters') "</span>);
<a class="jxr_linenumber" name="L10484" href="#L10484">10484</a> 
<a class="jxr_linenumber" name="L10485" href="#L10485">10485</a>       
<a class="jxr_linenumber" name="L10486" href="#L10486">10486</a>     }
<a class="jxr_linenumber" name="L10487" href="#L10487">10487</a>     
<a class="jxr_linenumber" name="L10488" href="#L10488">10488</a> 
<a class="jxr_linenumber" name="L10489" href="#L10489">10489</a>     
<a class="jxr_linenumber" name="L10490" href="#L10490">10490</a>   }
<a class="jxr_linenumber" name="L10491" href="#L10491">10491</a> 
<a class="jxr_linenumber" name="L10492" href="#L10492">10492</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L10493" href="#L10493">10493</a> <em class="jxr_javadoccomment">   * an example table name so we can hone in on the exact metadata</em>
<a class="jxr_linenumber" name="L10494" href="#L10494">10494</a> <em class="jxr_javadoccomment">   * @return the table name</em>
<a class="jxr_linenumber" name="L10495" href="#L10495">10495</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L10496" href="#L10496">10496</a>   <strong class="jxr_keyword">public</strong> String[] getSampleTablenames() {
<a class="jxr_linenumber" name="L10497" href="#L10497">10497</a>     <strong class="jxr_keyword">return</strong> <strong class="jxr_keyword">new</strong> String[]{<span class="jxr_string">"grouper_groups"</span>, <span class="jxr_string">"grouper_ddl"</span>, <span class="jxr_string">"grouper_attributes"</span>, <span class="jxr_string">"grouper_composites"</span>,
<a class="jxr_linenumber" name="L10498" href="#L10498">10498</a>         <span class="jxr_string">"grouper_fields"</span>, <span class="jxr_string">"grouper_loader_log"</span>, <span class="jxr_string">"grouper_members"</span>, <span class="jxr_string">"grouper_memberships"</span>, 
<a class="jxr_linenumber" name="L10499" href="#L10499">10499</a>         <span class="jxr_string">"grouper_stems"</span>};
<a class="jxr_linenumber" name="L10500" href="#L10500">10500</a>   }
<a class="jxr_linenumber" name="L10501" href="#L10501">10501</a>   
<a class="jxr_linenumber" name="L10502" href="#L10502">10502</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L10503" href="#L10503">10503</a> <em class="jxr_javadoccomment">   * Add PIT tables</em>
<a class="jxr_linenumber" name="L10504" href="#L10504">10504</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean </em>
<a class="jxr_linenumber" name="L10505" href="#L10505">10505</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L10506" href="#L10506">10506</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L10507" href="#L10507">10507</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addPITTables(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Database database) {
<a class="jxr_linenumber" name="L10508" href="#L10508">10508</a>     
<a class="jxr_linenumber" name="L10509" href="#L10509">10509</a>     {
<a class="jxr_linenumber" name="L10510" href="#L10510">10510</a>       Table pitMembersTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10511" href="#L10511">10511</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS);
<a class="jxr_linenumber" name="L10512" href="#L10512">10512</a>       
<a class="jxr_linenumber" name="L10513" href="#L10513">10513</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_ID, 
<a class="jxr_linenumber" name="L10514" href="#L10514">10514</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10515" href="#L10515">10515</a>       
<a class="jxr_linenumber" name="L10516" href="#L10516">10516</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10517" href="#L10517">10517</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10518" href="#L10518">10518</a>   
<a class="jxr_linenumber" name="L10519" href="#L10519">10519</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_SUBJECT_ID, 
<a class="jxr_linenumber" name="L10520" href="#L10520">10520</a>           Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10521" href="#L10521">10521</a>       
<a class="jxr_linenumber" name="L10522" href="#L10522">10522</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_SUBJECT_SOURCE, 
<a class="jxr_linenumber" name="L10523" href="#L10523">10523</a>           Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10524" href="#L10524">10524</a>       
<a class="jxr_linenumber" name="L10525" href="#L10525">10525</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_SUBJECT_TYPE, 
<a class="jxr_linenumber" name="L10526" href="#L10526">10526</a>           Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10527" href="#L10527">10527</a>       
<a class="jxr_linenumber" name="L10528" href="#L10528">10528</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10529" href="#L10529">10529</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10530" href="#L10530">10530</a>       
<a class="jxr_linenumber" name="L10531" href="#L10531">10531</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10532" href="#L10532">10532</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10533" href="#L10533">10533</a>       
<a class="jxr_linenumber" name="L10534" href="#L10534">10534</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10535" href="#L10535">10535</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10536" href="#L10536">10536</a>       
<a class="jxr_linenumber" name="L10537" href="#L10537">10537</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10538" href="#L10538">10538</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10539" href="#L10539">10539</a>       
<a class="jxr_linenumber" name="L10540" href="#L10540">10540</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembersTable, PITMember.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10541" href="#L10541">10541</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10542" href="#L10542">10542</a>     }
<a class="jxr_linenumber" name="L10543" href="#L10543">10543</a>     
<a class="jxr_linenumber" name="L10544" href="#L10544">10544</a>     {
<a class="jxr_linenumber" name="L10545" href="#L10545">10545</a>       Table pitFieldsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10546" href="#L10546">10546</a>           PITField.TABLE_GROUPER_PIT_FIELDS);
<a class="jxr_linenumber" name="L10547" href="#L10547">10547</a>       
<a class="jxr_linenumber" name="L10548" href="#L10548">10548</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_ID, 
<a class="jxr_linenumber" name="L10549" href="#L10549">10549</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10550" href="#L10550">10550</a>       
<a class="jxr_linenumber" name="L10551" href="#L10551">10551</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10552" href="#L10552">10552</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10553" href="#L10553">10553</a>   
<a class="jxr_linenumber" name="L10554" href="#L10554">10554</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_NAME, 
<a class="jxr_linenumber" name="L10555" href="#L10555">10555</a>           Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10556" href="#L10556">10556</a>       
<a class="jxr_linenumber" name="L10557" href="#L10557">10557</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_TYPE, 
<a class="jxr_linenumber" name="L10558" href="#L10558">10558</a>           Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10559" href="#L10559">10559</a>       
<a class="jxr_linenumber" name="L10560" href="#L10560">10560</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10561" href="#L10561">10561</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10562" href="#L10562">10562</a>       
<a class="jxr_linenumber" name="L10563" href="#L10563">10563</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10564" href="#L10564">10564</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10565" href="#L10565">10565</a>       
<a class="jxr_linenumber" name="L10566" href="#L10566">10566</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10567" href="#L10567">10567</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10568" href="#L10568">10568</a>       
<a class="jxr_linenumber" name="L10569" href="#L10569">10569</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10570" href="#L10570">10570</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10571" href="#L10571">10571</a>       
<a class="jxr_linenumber" name="L10572" href="#L10572">10572</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitFieldsTable, PITField.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10573" href="#L10573">10573</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10574" href="#L10574">10574</a>     }
<a class="jxr_linenumber" name="L10575" href="#L10575">10575</a>     
<a class="jxr_linenumber" name="L10576" href="#L10576">10576</a>     {
<a class="jxr_linenumber" name="L10577" href="#L10577">10577</a>       Table pitGroupsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10578" href="#L10578">10578</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS);
<a class="jxr_linenumber" name="L10579" href="#L10579">10579</a>       
<a class="jxr_linenumber" name="L10580" href="#L10580">10580</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_ID, 
<a class="jxr_linenumber" name="L10581" href="#L10581">10581</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10582" href="#L10582">10582</a>       
<a class="jxr_linenumber" name="L10583" href="#L10583">10583</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10584" href="#L10584">10584</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10585" href="#L10585">10585</a>   
<a class="jxr_linenumber" name="L10586" href="#L10586">10586</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_NAME, 
<a class="jxr_linenumber" name="L10587" href="#L10587">10587</a>           Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10588" href="#L10588">10588</a>       
<a class="jxr_linenumber" name="L10589" href="#L10589">10589</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_STEM_ID, 
<a class="jxr_linenumber" name="L10590" href="#L10590">10590</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10591" href="#L10591">10591</a>       
<a class="jxr_linenumber" name="L10592" href="#L10592">10592</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10593" href="#L10593">10593</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10594" href="#L10594">10594</a>       
<a class="jxr_linenumber" name="L10595" href="#L10595">10595</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10596" href="#L10596">10596</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10597" href="#L10597">10597</a>       
<a class="jxr_linenumber" name="L10598" href="#L10598">10598</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10599" href="#L10599">10599</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10600" href="#L10600">10600</a>       
<a class="jxr_linenumber" name="L10601" href="#L10601">10601</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10602" href="#L10602">10602</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10603" href="#L10603">10603</a>       
<a class="jxr_linenumber" name="L10604" href="#L10604">10604</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupsTable, PITGroup.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10605" href="#L10605">10605</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10606" href="#L10606">10606</a>     }
<a class="jxr_linenumber" name="L10607" href="#L10607">10607</a>     
<a class="jxr_linenumber" name="L10608" href="#L10608">10608</a>     {
<a class="jxr_linenumber" name="L10609" href="#L10609">10609</a>       Table pitStemsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10610" href="#L10610">10610</a>           PITStem.TABLE_GROUPER_PIT_STEMS);
<a class="jxr_linenumber" name="L10611" href="#L10611">10611</a>       
<a class="jxr_linenumber" name="L10612" href="#L10612">10612</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_ID, 
<a class="jxr_linenumber" name="L10613" href="#L10613">10613</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10614" href="#L10614">10614</a>       
<a class="jxr_linenumber" name="L10615" href="#L10615">10615</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10616" href="#L10616">10616</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10617" href="#L10617">10617</a>   
<a class="jxr_linenumber" name="L10618" href="#L10618">10618</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_NAME, 
<a class="jxr_linenumber" name="L10619" href="#L10619">10619</a>           Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10620" href="#L10620">10620</a>       
<a class="jxr_linenumber" name="L10621" href="#L10621">10621</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_PARENT_STEM_ID, 
<a class="jxr_linenumber" name="L10622" href="#L10622">10622</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10623" href="#L10623">10623</a>       
<a class="jxr_linenumber" name="L10624" href="#L10624">10624</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10625" href="#L10625">10625</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10626" href="#L10626">10626</a>       
<a class="jxr_linenumber" name="L10627" href="#L10627">10627</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10628" href="#L10628">10628</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10629" href="#L10629">10629</a>       
<a class="jxr_linenumber" name="L10630" href="#L10630">10630</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10631" href="#L10631">10631</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10632" href="#L10632">10632</a>       
<a class="jxr_linenumber" name="L10633" href="#L10633">10633</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10634" href="#L10634">10634</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10635" href="#L10635">10635</a>       
<a class="jxr_linenumber" name="L10636" href="#L10636">10636</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitStemsTable, PITStem.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10637" href="#L10637">10637</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10638" href="#L10638">10638</a>     }
<a class="jxr_linenumber" name="L10639" href="#L10639">10639</a>     
<a class="jxr_linenumber" name="L10640" href="#L10640">10640</a>     {
<a class="jxr_linenumber" name="L10641" href="#L10641">10641</a>       Table pitAttributeDefTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10642" href="#L10642">10642</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF);
<a class="jxr_linenumber" name="L10643" href="#L10643">10643</a>       
<a class="jxr_linenumber" name="L10644" href="#L10644">10644</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_ID, 
<a class="jxr_linenumber" name="L10645" href="#L10645">10645</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10646" href="#L10646">10646</a>       
<a class="jxr_linenumber" name="L10647" href="#L10647">10647</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10648" href="#L10648">10648</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10649" href="#L10649">10649</a>   
<a class="jxr_linenumber" name="L10650" href="#L10650">10650</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_NAME, 
<a class="jxr_linenumber" name="L10651" href="#L10651">10651</a>           Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10652" href="#L10652">10652</a>       
<a class="jxr_linenumber" name="L10653" href="#L10653">10653</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_STEM_ID, 
<a class="jxr_linenumber" name="L10654" href="#L10654">10654</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10655" href="#L10655">10655</a>       
<a class="jxr_linenumber" name="L10656" href="#L10656">10656</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_ATTRIBUTE_DEF_TYPE,
<a class="jxr_linenumber" name="L10657" href="#L10657">10657</a>           Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10658" href="#L10658">10658</a>       
<a class="jxr_linenumber" name="L10659" href="#L10659">10659</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10660" href="#L10660">10660</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10661" href="#L10661">10661</a>       
<a class="jxr_linenumber" name="L10662" href="#L10662">10662</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10663" href="#L10663">10663</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10664" href="#L10664">10664</a>       
<a class="jxr_linenumber" name="L10665" href="#L10665">10665</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10666" href="#L10666">10666</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10667" href="#L10667">10667</a>       
<a class="jxr_linenumber" name="L10668" href="#L10668">10668</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10669" href="#L10669">10669</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10670" href="#L10670">10670</a>       
<a class="jxr_linenumber" name="L10671" href="#L10671">10671</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefTable, PITAttributeDef.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10672" href="#L10672">10672</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10673" href="#L10673">10673</a>       
<a class="jxr_linenumber" name="L10674" href="#L10674">10674</a>     }
<a class="jxr_linenumber" name="L10675" href="#L10675">10675</a>     
<a class="jxr_linenumber" name="L10676" href="#L10676">10676</a>     {
<a class="jxr_linenumber" name="L10677" href="#L10677">10677</a>       Table pitMembershipTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10678" href="#L10678">10678</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS);
<a class="jxr_linenumber" name="L10679" href="#L10679">10679</a>       
<a class="jxr_linenumber" name="L10680" href="#L10680">10680</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_ID, 
<a class="jxr_linenumber" name="L10681" href="#L10681">10681</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10682" href="#L10682">10682</a>       
<a class="jxr_linenumber" name="L10683" href="#L10683">10683</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10684" href="#L10684">10684</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10685" href="#L10685">10685</a>   
<a class="jxr_linenumber" name="L10686" href="#L10686">10686</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_OWNER_ID,
<a class="jxr_linenumber" name="L10687" href="#L10687">10687</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10688" href="#L10688">10688</a>       
<a class="jxr_linenumber" name="L10689" href="#L10689">10689</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_OWNER_ATTR_DEF_ID,
<a class="jxr_linenumber" name="L10690" href="#L10690">10690</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10691" href="#L10691">10691</a>       
<a class="jxr_linenumber" name="L10692" href="#L10692">10692</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_OWNER_GROUP_ID,
<a class="jxr_linenumber" name="L10693" href="#L10693">10693</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10694" href="#L10694">10694</a>       
<a class="jxr_linenumber" name="L10695" href="#L10695">10695</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_OWNER_STEM_ID,
<a class="jxr_linenumber" name="L10696" href="#L10696">10696</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10697" href="#L10697">10697</a>       
<a class="jxr_linenumber" name="L10698" href="#L10698">10698</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_MEMBER_ID,
<a class="jxr_linenumber" name="L10699" href="#L10699">10699</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10700" href="#L10700">10700</a>   
<a class="jxr_linenumber" name="L10701" href="#L10701">10701</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_FIELD_ID,
<a class="jxr_linenumber" name="L10702" href="#L10702">10702</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10703" href="#L10703">10703</a>       
<a class="jxr_linenumber" name="L10704" href="#L10704">10704</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10705" href="#L10705">10705</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10706" href="#L10706">10706</a>       
<a class="jxr_linenumber" name="L10707" href="#L10707">10707</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10708" href="#L10708">10708</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10709" href="#L10709">10709</a>       
<a class="jxr_linenumber" name="L10710" href="#L10710">10710</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10711" href="#L10711">10711</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10712" href="#L10712">10712</a>       
<a class="jxr_linenumber" name="L10713" href="#L10713">10713</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10714" href="#L10714">10714</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10715" href="#L10715">10715</a>       
<a class="jxr_linenumber" name="L10716" href="#L10716">10716</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitMembershipTable, PITMembership.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10717" href="#L10717">10717</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10718" href="#L10718">10718</a>     }
<a class="jxr_linenumber" name="L10719" href="#L10719">10719</a>     
<a class="jxr_linenumber" name="L10720" href="#L10720">10720</a>     {
<a class="jxr_linenumber" name="L10721" href="#L10721">10721</a>       Table pitGroupSetTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10722" href="#L10722">10722</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET);
<a class="jxr_linenumber" name="L10723" href="#L10723">10723</a>       
<a class="jxr_linenumber" name="L10724" href="#L10724">10724</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L10725" href="#L10725">10725</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10726" href="#L10726">10726</a>   
<a class="jxr_linenumber" name="L10727" href="#L10727">10727</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10728" href="#L10728">10728</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10729" href="#L10729">10729</a>       
<a class="jxr_linenumber" name="L10730" href="#L10730">10730</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_OWNER_ID,
<a class="jxr_linenumber" name="L10731" href="#L10731">10731</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10732" href="#L10732">10732</a>       
<a class="jxr_linenumber" name="L10733" href="#L10733">10733</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_OWNER_ATTR_DEF_ID,
<a class="jxr_linenumber" name="L10734" href="#L10734">10734</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10735" href="#L10735">10735</a>       
<a class="jxr_linenumber" name="L10736" href="#L10736">10736</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_OWNER_GROUP_ID,
<a class="jxr_linenumber" name="L10737" href="#L10737">10737</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10738" href="#L10738">10738</a>       
<a class="jxr_linenumber" name="L10739" href="#L10739">10739</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_OWNER_STEM_ID,
<a class="jxr_linenumber" name="L10740" href="#L10740">10740</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10741" href="#L10741">10741</a>       
<a class="jxr_linenumber" name="L10742" href="#L10742">10742</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_MEMBER_ID,
<a class="jxr_linenumber" name="L10743" href="#L10743">10743</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10744" href="#L10744">10744</a>       
<a class="jxr_linenumber" name="L10745" href="#L10745">10745</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_MEMBER_ATTR_DEF_ID,
<a class="jxr_linenumber" name="L10746" href="#L10746">10746</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10747" href="#L10747">10747</a>       
<a class="jxr_linenumber" name="L10748" href="#L10748">10748</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_MEMBER_GROUP_ID,
<a class="jxr_linenumber" name="L10749" href="#L10749">10749</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10750" href="#L10750">10750</a>       
<a class="jxr_linenumber" name="L10751" href="#L10751">10751</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_MEMBER_STEM_ID,
<a class="jxr_linenumber" name="L10752" href="#L10752">10752</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10753" href="#L10753">10753</a>   
<a class="jxr_linenumber" name="L10754" href="#L10754">10754</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_FIELD_ID,
<a class="jxr_linenumber" name="L10755" href="#L10755">10755</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10756" href="#L10756">10756</a>       
<a class="jxr_linenumber" name="L10757" href="#L10757">10757</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_MEMBER_FIELD_ID,
<a class="jxr_linenumber" name="L10758" href="#L10758">10758</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10759" href="#L10759">10759</a>   
<a class="jxr_linenumber" name="L10760" href="#L10760">10760</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_DEPTH,
<a class="jxr_linenumber" name="L10761" href="#L10761">10761</a>           Types.INTEGER, <span class="jxr_string">"11"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10762" href="#L10762">10762</a>       
<a class="jxr_linenumber" name="L10763" href="#L10763">10763</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_PARENT_ID,
<a class="jxr_linenumber" name="L10764" href="#L10764">10764</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10765" href="#L10765">10765</a>       
<a class="jxr_linenumber" name="L10766" href="#L10766">10766</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10767" href="#L10767">10767</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10768" href="#L10768">10768</a>       
<a class="jxr_linenumber" name="L10769" href="#L10769">10769</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10770" href="#L10770">10770</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10771" href="#L10771">10771</a>       
<a class="jxr_linenumber" name="L10772" href="#L10772">10772</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10773" href="#L10773">10773</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10774" href="#L10774">10774</a>       
<a class="jxr_linenumber" name="L10775" href="#L10775">10775</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10776" href="#L10776">10776</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10777" href="#L10777">10777</a>       
<a class="jxr_linenumber" name="L10778" href="#L10778">10778</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitGroupSetTable, PITGroupSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10779" href="#L10779">10779</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10780" href="#L10780">10780</a>     }
<a class="jxr_linenumber" name="L10781" href="#L10781">10781</a>     
<a class="jxr_linenumber" name="L10782" href="#L10782">10782</a>     {
<a class="jxr_linenumber" name="L10783" href="#L10783">10783</a>       
<a class="jxr_linenumber" name="L10784" href="#L10784">10784</a>       Table pitAttributeAssignTable = GrouperDdlUtils.ddlutilsFindTable(
<a class="jxr_linenumber" name="L10785" href="#L10785">10785</a>           database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, false);
<a class="jxr_linenumber" name="L10786" href="#L10786">10786</a>       
<a class="jxr_linenumber" name="L10787" href="#L10787">10787</a>       <strong class="jxr_keyword">boolean</strong> created = pitAttributeAssignTable == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L10788" href="#L10788">10788</a>       
<a class="jxr_linenumber" name="L10789" href="#L10789">10789</a>       <strong class="jxr_keyword">if</strong> (created) {
<a class="jxr_linenumber" name="L10790" href="#L10790">10790</a>         pitAttributeAssignTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10791" href="#L10791">10791</a>             PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN);
<a class="jxr_linenumber" name="L10792" href="#L10792">10792</a>       }
<a class="jxr_linenumber" name="L10793" href="#L10793">10793</a> 
<a class="jxr_linenumber" name="L10794" href="#L10794">10794</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_ID, 
<a class="jxr_linenumber" name="L10795" href="#L10795">10795</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10796" href="#L10796">10796</a>   
<a class="jxr_linenumber" name="L10797" href="#L10797">10797</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10798" href="#L10798">10798</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10799" href="#L10799">10799</a>       
<a class="jxr_linenumber" name="L10800" href="#L10800">10800</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L10801" href="#L10801">10801</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10802" href="#L10802">10802</a>       
<a class="jxr_linenumber" name="L10803" href="#L10803">10803</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID, 
<a class="jxr_linenumber" name="L10804" href="#L10804">10804</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10805" href="#L10805">10805</a>   
<a class="jxr_linenumber" name="L10806" href="#L10806">10806</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_TYPE, 
<a class="jxr_linenumber" name="L10807" href="#L10807">10807</a>           Types.VARCHAR, <span class="jxr_string">"15"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10808" href="#L10808">10808</a>       
<a class="jxr_linenumber" name="L10809" href="#L10809">10809</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_OWNER_ATTRIBUTE_ASSIGN_ID, 
<a class="jxr_linenumber" name="L10810" href="#L10810">10810</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10811" href="#L10811">10811</a>       
<a class="jxr_linenumber" name="L10812" href="#L10812">10812</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_OWNER_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L10813" href="#L10813">10813</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10814" href="#L10814">10814</a>       
<a class="jxr_linenumber" name="L10815" href="#L10815">10815</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_OWNER_GROUP_ID, 
<a class="jxr_linenumber" name="L10816" href="#L10816">10816</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10817" href="#L10817">10817</a>       
<a class="jxr_linenumber" name="L10818" href="#L10818">10818</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_OWNER_MEMBER_ID, 
<a class="jxr_linenumber" name="L10819" href="#L10819">10819</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10820" href="#L10820">10820</a>       
<a class="jxr_linenumber" name="L10821" href="#L10821">10821</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_OWNER_MEMBERSHIP_ID, 
<a class="jxr_linenumber" name="L10822" href="#L10822">10822</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10823" href="#L10823">10823</a>       
<a class="jxr_linenumber" name="L10824" href="#L10824">10824</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_OWNER_STEM_ID, 
<a class="jxr_linenumber" name="L10825" href="#L10825">10825</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10826" href="#L10826">10826</a>       
<a class="jxr_linenumber" name="L10827" href="#L10827">10827</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10828" href="#L10828">10828</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10829" href="#L10829">10829</a>       
<a class="jxr_linenumber" name="L10830" href="#L10830">10830</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10831" href="#L10831">10831</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10832" href="#L10832">10832</a>       
<a class="jxr_linenumber" name="L10833" href="#L10833">10833</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10834" href="#L10834">10834</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10835" href="#L10835">10835</a>       
<a class="jxr_linenumber" name="L10836" href="#L10836">10836</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10837" href="#L10837">10837</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10838" href="#L10838">10838</a>       
<a class="jxr_linenumber" name="L10839" href="#L10839">10839</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10840" href="#L10840">10840</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10841" href="#L10841">10841</a>       
<a class="jxr_linenumber" name="L10842" href="#L10842">10842</a>       <strong class="jxr_keyword">if</strong> (created) {
<a class="jxr_linenumber" name="L10843" href="#L10843">10843</a> 
<a class="jxr_linenumber" name="L10844" href="#L10844">10844</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable,
<a class="jxr_linenumber" name="L10845" href="#L10845">10845</a>             PITAttributeAssign.COLUMN_DISALLOWED, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, false);
<a class="jxr_linenumber" name="L10846" href="#L10846">10846</a> 
<a class="jxr_linenumber" name="L10847" href="#L10847">10847</a>       }
<a class="jxr_linenumber" name="L10848" href="#L10848">10848</a>       
<a class="jxr_linenumber" name="L10849" href="#L10849">10849</a>     }
<a class="jxr_linenumber" name="L10850" href="#L10850">10850</a>     
<a class="jxr_linenumber" name="L10851" href="#L10851">10851</a>     {
<a class="jxr_linenumber" name="L10852" href="#L10852">10852</a>       Table pitAttributeAssignValueTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10853" href="#L10853">10853</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE);
<a class="jxr_linenumber" name="L10854" href="#L10854">10854</a>       
<a class="jxr_linenumber" name="L10855" href="#L10855">10855</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_ID, 
<a class="jxr_linenumber" name="L10856" href="#L10856">10856</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10857" href="#L10857">10857</a>       
<a class="jxr_linenumber" name="L10858" href="#L10858">10858</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10859" href="#L10859">10859</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10860" href="#L10860">10860</a>   
<a class="jxr_linenumber" name="L10861" href="#L10861">10861</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_ATTRIBUTE_ASSIGN_ID, 
<a class="jxr_linenumber" name="L10862" href="#L10862">10862</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10863" href="#L10863">10863</a>       
<a class="jxr_linenumber" name="L10864" href="#L10864">10864</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_VALUE_INTEGER, 
<a class="jxr_linenumber" name="L10865" href="#L10865">10865</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10866" href="#L10866">10866</a> 
<a class="jxr_linenumber" name="L10867" href="#L10867">10867</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_VALUE_FLOATING, 
<a class="jxr_linenumber" name="L10868" href="#L10868">10868</a>           Types.FLOAT, <span class="jxr_string">"20,5"</span>, false, false);
<a class="jxr_linenumber" name="L10869" href="#L10869">10869</a> 
<a class="jxr_linenumber" name="L10870" href="#L10870">10870</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_VALUE_STRING, 
<a class="jxr_linenumber" name="L10871" href="#L10871">10871</a>           Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false);
<a class="jxr_linenumber" name="L10872" href="#L10872">10872</a> 
<a class="jxr_linenumber" name="L10873" href="#L10873">10873</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_VALUE_MEMBER_ID, 
<a class="jxr_linenumber" name="L10874" href="#L10874">10874</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10875" href="#L10875">10875</a>       
<a class="jxr_linenumber" name="L10876" href="#L10876">10876</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10877" href="#L10877">10877</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10878" href="#L10878">10878</a>       
<a class="jxr_linenumber" name="L10879" href="#L10879">10879</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10880" href="#L10880">10880</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10881" href="#L10881">10881</a>       
<a class="jxr_linenumber" name="L10882" href="#L10882">10882</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10883" href="#L10883">10883</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10884" href="#L10884">10884</a>       
<a class="jxr_linenumber" name="L10885" href="#L10885">10885</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10886" href="#L10886">10886</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10887" href="#L10887">10887</a>       
<a class="jxr_linenumber" name="L10888" href="#L10888">10888</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignValueTable, PITAttributeAssignValue.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10889" href="#L10889">10889</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10890" href="#L10890">10890</a>     }
<a class="jxr_linenumber" name="L10891" href="#L10891">10891</a>     
<a class="jxr_linenumber" name="L10892" href="#L10892">10892</a>     {
<a class="jxr_linenumber" name="L10893" href="#L10893">10893</a>       Table pitAttributeAssignActionTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10894" href="#L10894">10894</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION);
<a class="jxr_linenumber" name="L10895" href="#L10895">10895</a>       
<a class="jxr_linenumber" name="L10896" href="#L10896">10896</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_ID, 
<a class="jxr_linenumber" name="L10897" href="#L10897">10897</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10898" href="#L10898">10898</a>   
<a class="jxr_linenumber" name="L10899" href="#L10899">10899</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10900" href="#L10900">10900</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10901" href="#L10901">10901</a>       
<a class="jxr_linenumber" name="L10902" href="#L10902">10902</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L10903" href="#L10903">10903</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10904" href="#L10904">10904</a>       
<a class="jxr_linenumber" name="L10905" href="#L10905">10905</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_NAME, 
<a class="jxr_linenumber" name="L10906" href="#L10906">10906</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10907" href="#L10907">10907</a>       
<a class="jxr_linenumber" name="L10908" href="#L10908">10908</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10909" href="#L10909">10909</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10910" href="#L10910">10910</a>       
<a class="jxr_linenumber" name="L10911" href="#L10911">10911</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10912" href="#L10912">10912</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10913" href="#L10913">10913</a>       
<a class="jxr_linenumber" name="L10914" href="#L10914">10914</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10915" href="#L10915">10915</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10916" href="#L10916">10916</a>       
<a class="jxr_linenumber" name="L10917" href="#L10917">10917</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10918" href="#L10918">10918</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10919" href="#L10919">10919</a>       
<a class="jxr_linenumber" name="L10920" href="#L10920">10920</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionTable, PITAttributeAssignAction.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10921" href="#L10921">10921</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10922" href="#L10922">10922</a>     }
<a class="jxr_linenumber" name="L10923" href="#L10923">10923</a>     
<a class="jxr_linenumber" name="L10924" href="#L10924">10924</a>     {
<a class="jxr_linenumber" name="L10925" href="#L10925">10925</a>       Table pitAttributeDefNameTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10926" href="#L10926">10926</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME);
<a class="jxr_linenumber" name="L10927" href="#L10927">10927</a>       
<a class="jxr_linenumber" name="L10928" href="#L10928">10928</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_ID, 
<a class="jxr_linenumber" name="L10929" href="#L10929">10929</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10930" href="#L10930">10930</a>       
<a class="jxr_linenumber" name="L10931" href="#L10931">10931</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10932" href="#L10932">10932</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10933" href="#L10933">10933</a>   
<a class="jxr_linenumber" name="L10934" href="#L10934">10934</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_STEM_ID, 
<a class="jxr_linenumber" name="L10935" href="#L10935">10935</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10936" href="#L10936">10936</a>       
<a class="jxr_linenumber" name="L10937" href="#L10937">10937</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_ATTRIBUTE_DEF_ID, 
<a class="jxr_linenumber" name="L10938" href="#L10938">10938</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10939" href="#L10939">10939</a>       
<a class="jxr_linenumber" name="L10940" href="#L10940">10940</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable,
<a class="jxr_linenumber" name="L10941" href="#L10941">10941</a>           PITAttributeDefName.COLUMN_NAME, Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10942" href="#L10942">10942</a>       
<a class="jxr_linenumber" name="L10943" href="#L10943">10943</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10944" href="#L10944">10944</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10945" href="#L10945">10945</a>       
<a class="jxr_linenumber" name="L10946" href="#L10946">10946</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10947" href="#L10947">10947</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10948" href="#L10948">10948</a>       
<a class="jxr_linenumber" name="L10949" href="#L10949">10949</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10950" href="#L10950">10950</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10951" href="#L10951">10951</a>       
<a class="jxr_linenumber" name="L10952" href="#L10952">10952</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10953" href="#L10953">10953</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10954" href="#L10954">10954</a>       
<a class="jxr_linenumber" name="L10955" href="#L10955">10955</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameTable, PITAttributeDefName.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10956" href="#L10956">10956</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10957" href="#L10957">10957</a>     }
<a class="jxr_linenumber" name="L10958" href="#L10958">10958</a>     
<a class="jxr_linenumber" name="L10959" href="#L10959">10959</a>     {
<a class="jxr_linenumber" name="L10960" href="#L10960">10960</a>       Table pitAttributeDefNameSet = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10961" href="#L10961">10961</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET);
<a class="jxr_linenumber" name="L10962" href="#L10962">10962</a>       
<a class="jxr_linenumber" name="L10963" href="#L10963">10963</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L10964" href="#L10964">10964</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10965" href="#L10965">10965</a>   
<a class="jxr_linenumber" name="L10966" href="#L10966">10966</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L10967" href="#L10967">10967</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10968" href="#L10968">10968</a>       
<a class="jxr_linenumber" name="L10969" href="#L10969">10969</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L10970" href="#L10970">10970</a>           Types.BIGINT, <span class="jxr_string">"10"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10971" href="#L10971">10971</a>       
<a class="jxr_linenumber" name="L10972" href="#L10972">10972</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L10973" href="#L10973">10973</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10974" href="#L10974">10974</a>       
<a class="jxr_linenumber" name="L10975" href="#L10975">10975</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID, 
<a class="jxr_linenumber" name="L10976" href="#L10976">10976</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10977" href="#L10977">10977</a>       
<a class="jxr_linenumber" name="L10978" href="#L10978">10978</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_PARENT_ATTR_DEF_NAME_SET_ID, 
<a class="jxr_linenumber" name="L10979" href="#L10979">10979</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10980" href="#L10980">10980</a>       
<a class="jxr_linenumber" name="L10981" href="#L10981">10981</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L10982" href="#L10982">10982</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10983" href="#L10983">10983</a>       
<a class="jxr_linenumber" name="L10984" href="#L10984">10984</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L10985" href="#L10985">10985</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L10986" href="#L10986">10986</a>       
<a class="jxr_linenumber" name="L10987" href="#L10987">10987</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L10988" href="#L10988">10988</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L10989" href="#L10989">10989</a>       
<a class="jxr_linenumber" name="L10990" href="#L10990">10990</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L10991" href="#L10991">10991</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L10992" href="#L10992">10992</a>       
<a class="jxr_linenumber" name="L10993" href="#L10993">10993</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeDefNameSet, PITAttributeDefNameSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L10994" href="#L10994">10994</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L10995" href="#L10995">10995</a>     }
<a class="jxr_linenumber" name="L10996" href="#L10996">10996</a>     
<a class="jxr_linenumber" name="L10997" href="#L10997">10997</a>     {
<a class="jxr_linenumber" name="L10998" href="#L10998">10998</a>       Table pitAttributeAssignActionSet = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L10999" href="#L10999">10999</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET);
<a class="jxr_linenumber" name="L11000" href="#L11000">11000</a>       
<a class="jxr_linenumber" name="L11001" href="#L11001">11001</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L11002" href="#L11002">11002</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11003" href="#L11003">11003</a>       
<a class="jxr_linenumber" name="L11004" href="#L11004">11004</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L11005" href="#L11005">11005</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11006" href="#L11006">11006</a>       
<a class="jxr_linenumber" name="L11007" href="#L11007">11007</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L11008" href="#L11008">11008</a>           Types.BIGINT, <span class="jxr_string">"10"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11009" href="#L11009">11009</a>   
<a class="jxr_linenumber" name="L11010" href="#L11010">11010</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L11011" href="#L11011">11011</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11012" href="#L11012">11012</a>       
<a class="jxr_linenumber" name="L11013" href="#L11013">11013</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L11014" href="#L11014">11014</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11015" href="#L11015">11015</a>       
<a class="jxr_linenumber" name="L11016" href="#L11016">11016</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_PARENT_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L11017" href="#L11017">11017</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11018" href="#L11018">11018</a>       
<a class="jxr_linenumber" name="L11019" href="#L11019">11019</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L11020" href="#L11020">11020</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11021" href="#L11021">11021</a>       
<a class="jxr_linenumber" name="L11022" href="#L11022">11022</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L11023" href="#L11023">11023</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11024" href="#L11024">11024</a>       
<a class="jxr_linenumber" name="L11025" href="#L11025">11025</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L11026" href="#L11026">11026</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L11027" href="#L11027">11027</a>       
<a class="jxr_linenumber" name="L11028" href="#L11028">11028</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11029" href="#L11029">11029</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11030" href="#L11030">11030</a>       
<a class="jxr_linenumber" name="L11031" href="#L11031">11031</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignActionSet, PITAttributeAssignActionSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L11032" href="#L11032">11032</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L11033" href="#L11033">11033</a>     }
<a class="jxr_linenumber" name="L11034" href="#L11034">11034</a>     
<a class="jxr_linenumber" name="L11035" href="#L11035">11035</a>     {
<a class="jxr_linenumber" name="L11036" href="#L11036">11036</a>       Table pitRoleSet = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11037" href="#L11037">11037</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET);
<a class="jxr_linenumber" name="L11038" href="#L11038">11038</a>       
<a class="jxr_linenumber" name="L11039" href="#L11039">11039</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_ID, 
<a class="jxr_linenumber" name="L11040" href="#L11040">11040</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11041" href="#L11041">11041</a>       
<a class="jxr_linenumber" name="L11042" href="#L11042">11042</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_SOURCE_ID, 
<a class="jxr_linenumber" name="L11043" href="#L11043">11043</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11044" href="#L11044">11044</a>       
<a class="jxr_linenumber" name="L11045" href="#L11045">11045</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_DEPTH, 
<a class="jxr_linenumber" name="L11046" href="#L11046">11046</a>           Types.BIGINT, <span class="jxr_string">"10"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11047" href="#L11047">11047</a>   
<a class="jxr_linenumber" name="L11048" href="#L11048">11048</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_IF_HAS_ROLE_ID, 
<a class="jxr_linenumber" name="L11049" href="#L11049">11049</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11050" href="#L11050">11050</a>       
<a class="jxr_linenumber" name="L11051" href="#L11051">11051</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_THEN_HAS_ROLE_ID, 
<a class="jxr_linenumber" name="L11052" href="#L11052">11052</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11053" href="#L11053">11053</a>       
<a class="jxr_linenumber" name="L11054" href="#L11054">11054</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_PARENT_ROLE_SET_ID, 
<a class="jxr_linenumber" name="L11055" href="#L11055">11055</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11056" href="#L11056">11056</a>       
<a class="jxr_linenumber" name="L11057" href="#L11057">11057</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_ACTIVE,
<a class="jxr_linenumber" name="L11058" href="#L11058">11058</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11059" href="#L11059">11059</a>       
<a class="jxr_linenumber" name="L11060" href="#L11060">11060</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_START_TIME,
<a class="jxr_linenumber" name="L11061" href="#L11061">11061</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11062" href="#L11062">11062</a>       
<a class="jxr_linenumber" name="L11063" href="#L11063">11063</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_END_TIME,
<a class="jxr_linenumber" name="L11064" href="#L11064">11064</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L11065" href="#L11065">11065</a>       
<a class="jxr_linenumber" name="L11066" href="#L11066">11066</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11067" href="#L11067">11067</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11068" href="#L11068">11068</a>       
<a class="jxr_linenumber" name="L11069" href="#L11069">11069</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitRoleSet, PITRoleSet.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L11070" href="#L11070">11070</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L11071" href="#L11071">11071</a>     }
<a class="jxr_linenumber" name="L11072" href="#L11072">11072</a>   }
<a class="jxr_linenumber" name="L11073" href="#L11073">11073</a> 
<a class="jxr_linenumber" name="L11074" href="#L11074">11074</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11075" href="#L11075">11075</a> <em class="jxr_javadoccomment">   * Add PIT indexes</em>
<a class="jxr_linenumber" name="L11076" href="#L11076">11076</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean </em>
<a class="jxr_linenumber" name="L11077" href="#L11077">11077</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11078" href="#L11078">11078</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11079" href="#L11079">11079</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addPITIndexes(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Database database) {
<a class="jxr_linenumber" name="L11080" href="#L11080">11080</a>     
<a class="jxr_linenumber" name="L11081" href="#L11081">11081</a>     {
<a class="jxr_linenumber" name="L11082" href="#L11082">11082</a>       Table pitMembersTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11083" href="#L11083">11083</a>           PITMember.TABLE_GROUPER_PIT_MEMBERS);
<a class="jxr_linenumber" name="L11084" href="#L11084">11084</a>       
<a class="jxr_linenumber" name="L11085" href="#L11085">11085</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembersTable.getName(), 
<a class="jxr_linenumber" name="L11086" href="#L11086">11086</a>           <span class="jxr_string">"pit_member_source_id_idx"</span>, false, PITMember.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11087" href="#L11087">11087</a>       
<a class="jxr_linenumber" name="L11088" href="#L11088">11088</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembersTable.getName(), 
<a class="jxr_linenumber" name="L11089" href="#L11089">11089</a>           <span class="jxr_string">"pit_member_subject_id_idx"</span>, false, PITMember.COLUMN_SUBJECT_ID);
<a class="jxr_linenumber" name="L11090" href="#L11090">11090</a>       
<a class="jxr_linenumber" name="L11091" href="#L11091">11091</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembersTable.getName(), 
<a class="jxr_linenumber" name="L11092" href="#L11092">11092</a>           <span class="jxr_string">"pit_member_context_idx"</span>, false, PITMember.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11093" href="#L11093">11093</a>       
<a class="jxr_linenumber" name="L11094" href="#L11094">11094</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembersTable.getName(), 
<a class="jxr_linenumber" name="L11095" href="#L11095">11095</a>           <span class="jxr_string">"pit_member_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITMember.COLUMN_START_TIME, PITMember.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11096" href="#L11096">11096</a>       
<a class="jxr_linenumber" name="L11097" href="#L11097">11097</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembersTable.getName(), 
<a class="jxr_linenumber" name="L11098" href="#L11098">11098</a>           <span class="jxr_string">"pit_member_end_idx"</span>, false, PITMember.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11099" href="#L11099">11099</a>     }
<a class="jxr_linenumber" name="L11100" href="#L11100">11100</a>     
<a class="jxr_linenumber" name="L11101" href="#L11101">11101</a>     {
<a class="jxr_linenumber" name="L11102" href="#L11102">11102</a>       Table pitFieldsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11103" href="#L11103">11103</a>           PITField.TABLE_GROUPER_PIT_FIELDS);
<a class="jxr_linenumber" name="L11104" href="#L11104">11104</a>       
<a class="jxr_linenumber" name="L11105" href="#L11105">11105</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitFieldsTable.getName(), 
<a class="jxr_linenumber" name="L11106" href="#L11106">11106</a>           <span class="jxr_string">"pit_field_source_id_idx"</span>, false, PITField.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11107" href="#L11107">11107</a>       
<a class="jxr_linenumber" name="L11108" href="#L11108">11108</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitFieldsTable.getName(), 
<a class="jxr_linenumber" name="L11109" href="#L11109">11109</a>           <span class="jxr_string">"pit_field_name_idx"</span>, false, PITField.COLUMN_NAME);
<a class="jxr_linenumber" name="L11110" href="#L11110">11110</a>       
<a class="jxr_linenumber" name="L11111" href="#L11111">11111</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitFieldsTable.getName(), 
<a class="jxr_linenumber" name="L11112" href="#L11112">11112</a>           <span class="jxr_string">"pit_field_context_idx"</span>, false, PITField.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11113" href="#L11113">11113</a>       
<a class="jxr_linenumber" name="L11114" href="#L11114">11114</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitFieldsTable.getName(), 
<a class="jxr_linenumber" name="L11115" href="#L11115">11115</a>           <span class="jxr_string">"pit_field_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITField.COLUMN_START_TIME, PITField.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11116" href="#L11116">11116</a>       
<a class="jxr_linenumber" name="L11117" href="#L11117">11117</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitFieldsTable.getName(), 
<a class="jxr_linenumber" name="L11118" href="#L11118">11118</a>           <span class="jxr_string">"pit_field_end_idx"</span>, false, PITField.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11119" href="#L11119">11119</a>     }
<a class="jxr_linenumber" name="L11120" href="#L11120">11120</a>     
<a class="jxr_linenumber" name="L11121" href="#L11121">11121</a>     {
<a class="jxr_linenumber" name="L11122" href="#L11122">11122</a>       Table pitGroupsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11123" href="#L11123">11123</a>           PITGroup.TABLE_GROUPER_PIT_GROUPS);
<a class="jxr_linenumber" name="L11124" href="#L11124">11124</a>       
<a class="jxr_linenumber" name="L11125" href="#L11125">11125</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupsTable.getName(), 
<a class="jxr_linenumber" name="L11126" href="#L11126">11126</a>           <span class="jxr_string">"pit_group_source_id_idx"</span>, false, PITGroup.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11127" href="#L11127">11127</a>       
<a class="jxr_linenumber" name="L11128" href="#L11128">11128</a>       String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX pit_group_name_idx "</span> +
<a class="jxr_linenumber" name="L11129" href="#L11129">11129</a>           <span class="jxr_string">"ON grouper_pit_groups (name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L11130" href="#L11130">11130</a>       
<a class="jxr_linenumber" name="L11131" href="#L11131">11131</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, pitGroupsTable.getName(), 
<a class="jxr_linenumber" name="L11132" href="#L11132">11132</a>           <span class="jxr_string">"pit_group_name_idx"</span>, scriptOverride, false, PITGroup.COLUMN_NAME);
<a class="jxr_linenumber" name="L11133" href="#L11133">11133</a>       
<a class="jxr_linenumber" name="L11134" href="#L11134">11134</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupsTable.getName(), 
<a class="jxr_linenumber" name="L11135" href="#L11135">11135</a>           <span class="jxr_string">"pit_group_parent_idx"</span>, false, PITGroup.COLUMN_STEM_ID);
<a class="jxr_linenumber" name="L11136" href="#L11136">11136</a>       
<a class="jxr_linenumber" name="L11137" href="#L11137">11137</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupsTable.getName(), 
<a class="jxr_linenumber" name="L11138" href="#L11138">11138</a>           <span class="jxr_string">"pit_group_context_idx"</span>, false, PITGroup.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11139" href="#L11139">11139</a>       
<a class="jxr_linenumber" name="L11140" href="#L11140">11140</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupsTable.getName(), 
<a class="jxr_linenumber" name="L11141" href="#L11141">11141</a>           <span class="jxr_string">"pit_group_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITGroup.COLUMN_START_TIME, PITGroup.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11142" href="#L11142">11142</a>       
<a class="jxr_linenumber" name="L11143" href="#L11143">11143</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupsTable.getName(), 
<a class="jxr_linenumber" name="L11144" href="#L11144">11144</a>           <span class="jxr_string">"pit_group_end_idx"</span>, false, PITGroup.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11145" href="#L11145">11145</a>     }
<a class="jxr_linenumber" name="L11146" href="#L11146">11146</a>     
<a class="jxr_linenumber" name="L11147" href="#L11147">11147</a>     {
<a class="jxr_linenumber" name="L11148" href="#L11148">11148</a>       Table pitStemsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11149" href="#L11149">11149</a>           PITStem.TABLE_GROUPER_PIT_STEMS);
<a class="jxr_linenumber" name="L11150" href="#L11150">11150</a>       
<a class="jxr_linenumber" name="L11151" href="#L11151">11151</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitStemsTable.getName(), 
<a class="jxr_linenumber" name="L11152" href="#L11152">11152</a>           <span class="jxr_string">"pit_stem_source_id_idx"</span>, false, PITStem.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11153" href="#L11153">11153</a>       
<a class="jxr_linenumber" name="L11154" href="#L11154">11154</a>       String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX pit_stem_name_idx "</span> +
<a class="jxr_linenumber" name="L11155" href="#L11155">11155</a>           <span class="jxr_string">"ON grouper_pit_stems (name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L11156" href="#L11156">11156</a>       
<a class="jxr_linenumber" name="L11157" href="#L11157">11157</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, pitStemsTable.getName(), 
<a class="jxr_linenumber" name="L11158" href="#L11158">11158</a>           <span class="jxr_string">"pit_stem_name_idx"</span>, scriptOverride, false, PITStem.COLUMN_NAME);
<a class="jxr_linenumber" name="L11159" href="#L11159">11159</a>       
<a class="jxr_linenumber" name="L11160" href="#L11160">11160</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitStemsTable.getName(), 
<a class="jxr_linenumber" name="L11161" href="#L11161">11161</a>           <span class="jxr_string">"pit_stem_parent_idx"</span>, false, PITStem.COLUMN_PARENT_STEM_ID);
<a class="jxr_linenumber" name="L11162" href="#L11162">11162</a>       
<a class="jxr_linenumber" name="L11163" href="#L11163">11163</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitStemsTable.getName(), 
<a class="jxr_linenumber" name="L11164" href="#L11164">11164</a>           <span class="jxr_string">"pit_stem_context_idx"</span>, false, PITStem.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11165" href="#L11165">11165</a>       
<a class="jxr_linenumber" name="L11166" href="#L11166">11166</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitStemsTable.getName(), 
<a class="jxr_linenumber" name="L11167" href="#L11167">11167</a>           <span class="jxr_string">"pit_stem_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITStem.COLUMN_START_TIME, PITStem.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11168" href="#L11168">11168</a>       
<a class="jxr_linenumber" name="L11169" href="#L11169">11169</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitStemsTable.getName(), 
<a class="jxr_linenumber" name="L11170" href="#L11170">11170</a>           <span class="jxr_string">"pit_stem_end_idx"</span>, false, PITStem.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11171" href="#L11171">11171</a>     }
<a class="jxr_linenumber" name="L11172" href="#L11172">11172</a>     
<a class="jxr_linenumber" name="L11173" href="#L11173">11173</a>     {
<a class="jxr_linenumber" name="L11174" href="#L11174">11174</a>       Table pitAttributeDefTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11175" href="#L11175">11175</a>           PITAttributeDef.TABLE_GROUPER_PIT_ATTRIBUTE_DEF);
<a class="jxr_linenumber" name="L11176" href="#L11176">11176</a>       
<a class="jxr_linenumber" name="L11177" href="#L11177">11177</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefTable.getName(), 
<a class="jxr_linenumber" name="L11178" href="#L11178">11178</a>           <span class="jxr_string">"pit_attr_def_source_id_idx"</span>, false, PITAttributeDef.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11179" href="#L11179">11179</a>       
<a class="jxr_linenumber" name="L11180" href="#L11180">11180</a>       String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX pit_attribute_def_name_idx "</span> +
<a class="jxr_linenumber" name="L11181" href="#L11181">11181</a>           <span class="jxr_string">"ON grouper_pit_attribute_def (name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L11182" href="#L11182">11182</a>       
<a class="jxr_linenumber" name="L11183" href="#L11183">11183</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, pitAttributeDefTable.getName(), 
<a class="jxr_linenumber" name="L11184" href="#L11184">11184</a>           <span class="jxr_string">"pit_attribute_def_name_idx"</span>, scriptOverride, false, PITAttributeDef.COLUMN_NAME);
<a class="jxr_linenumber" name="L11185" href="#L11185">11185</a>       
<a class="jxr_linenumber" name="L11186" href="#L11186">11186</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefTable.getName(), 
<a class="jxr_linenumber" name="L11187" href="#L11187">11187</a>           <span class="jxr_string">"pit_attribute_def_parent_idx"</span>, false, PITAttributeDef.COLUMN_STEM_ID);
<a class="jxr_linenumber" name="L11188" href="#L11188">11188</a>       
<a class="jxr_linenumber" name="L11189" href="#L11189">11189</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefTable.getName(), 
<a class="jxr_linenumber" name="L11190" href="#L11190">11190</a>           <span class="jxr_string">"pit_attribute_def_context_idx"</span>, false, PITAttributeDef.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11191" href="#L11191">11191</a>       
<a class="jxr_linenumber" name="L11192" href="#L11192">11192</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefTable.getName(), 
<a class="jxr_linenumber" name="L11193" href="#L11193">11193</a>           <span class="jxr_string">"pit_attribute_def_type_idx"</span>, false, PITAttributeDef.COLUMN_ATTRIBUTE_DEF_TYPE);
<a class="jxr_linenumber" name="L11194" href="#L11194">11194</a>       
<a class="jxr_linenumber" name="L11195" href="#L11195">11195</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefTable.getName(), 
<a class="jxr_linenumber" name="L11196" href="#L11196">11196</a>           <span class="jxr_string">"pit_attribute_def_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeDef.COLUMN_START_TIME, PITAttributeDef.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11197" href="#L11197">11197</a>       
<a class="jxr_linenumber" name="L11198" href="#L11198">11198</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefTable.getName(), 
<a class="jxr_linenumber" name="L11199" href="#L11199">11199</a>           <span class="jxr_string">"pit_attribute_def_end_idx"</span>, false, PITAttributeDef.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11200" href="#L11200">11200</a>     }
<a class="jxr_linenumber" name="L11201" href="#L11201">11201</a>     
<a class="jxr_linenumber" name="L11202" href="#L11202">11202</a>     {
<a class="jxr_linenumber" name="L11203" href="#L11203">11203</a>       Table pitMembershipTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11204" href="#L11204">11204</a>           PITMembership.TABLE_GROUPER_PIT_MEMBERSHIPS);
<a class="jxr_linenumber" name="L11205" href="#L11205">11205</a>       
<a class="jxr_linenumber" name="L11206" href="#L11206">11206</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11207" href="#L11207">11207</a>           <span class="jxr_string">"pit_ms_source_id_idx"</span>, false, PITMembership.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11208" href="#L11208">11208</a>       
<a class="jxr_linenumber" name="L11209" href="#L11209">11209</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11210" href="#L11210">11210</a>           <span class="jxr_string">"pit_ms_context_idx"</span>, false, PITMembership.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11211" href="#L11211">11211</a>       
<a class="jxr_linenumber" name="L11212" href="#L11212">11212</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11213" href="#L11213">11213</a>           <span class="jxr_string">"pit_ms_owner_attr_def_idx"</span>, false, PITMembership.COLUMN_OWNER_ATTR_DEF_ID);
<a class="jxr_linenumber" name="L11214" href="#L11214">11214</a>       
<a class="jxr_linenumber" name="L11215" href="#L11215">11215</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11216" href="#L11216">11216</a>           <span class="jxr_string">"pit_ms_owner_stem_idx"</span>, false, PITMembership.COLUMN_OWNER_STEM_ID);
<a class="jxr_linenumber" name="L11217" href="#L11217">11217</a>       
<a class="jxr_linenumber" name="L11218" href="#L11218">11218</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11219" href="#L11219">11219</a>           <span class="jxr_string">"pit_ms_owner_group_idx"</span>, false, PITMembership.COLUMN_OWNER_GROUP_ID);
<a class="jxr_linenumber" name="L11220" href="#L11220">11220</a>       
<a class="jxr_linenumber" name="L11221" href="#L11221">11221</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11222" href="#L11222">11222</a>           <span class="jxr_string">"pit_ms_member_idx"</span>, false, PITMembership.COLUMN_MEMBER_ID);
<a class="jxr_linenumber" name="L11223" href="#L11223">11223</a>       
<a class="jxr_linenumber" name="L11224" href="#L11224">11224</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11225" href="#L11225">11225</a>           <span class="jxr_string">"pit_ms_field_idx"</span>, false, PITMembership.COLUMN_FIELD_ID);
<a class="jxr_linenumber" name="L11226" href="#L11226">11226</a>       
<a class="jxr_linenumber" name="L11227" href="#L11227">11227</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11228" href="#L11228">11228</a>           <span class="jxr_string">"pit_ms_owner_field_idx"</span>, false, PITMembership.COLUMN_OWNER_ID, PITMembership.COLUMN_FIELD_ID);
<a class="jxr_linenumber" name="L11229" href="#L11229">11229</a>       
<a class="jxr_linenumber" name="L11230" href="#L11230">11230</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11231" href="#L11231">11231</a>           <span class="jxr_string">"pit_ms_owner_member_field_idx"</span>, false, PITMembership.COLUMN_OWNER_ID, PITMembership.COLUMN_MEMBER_ID, PITMembership.COLUMN_FIELD_ID);
<a class="jxr_linenumber" name="L11232" href="#L11232">11232</a>       
<a class="jxr_linenumber" name="L11233" href="#L11233">11233</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11234" href="#L11234">11234</a>           <span class="jxr_string">"pit_ms_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITMembership.COLUMN_START_TIME, PITMembership.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11235" href="#L11235">11235</a>       
<a class="jxr_linenumber" name="L11236" href="#L11236">11236</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitMembershipTable.getName(), 
<a class="jxr_linenumber" name="L11237" href="#L11237">11237</a>           <span class="jxr_string">"pit_ms_end_idx"</span>, false, PITMembership.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11238" href="#L11238">11238</a>     }
<a class="jxr_linenumber" name="L11239" href="#L11239">11239</a>     
<a class="jxr_linenumber" name="L11240" href="#L11240">11240</a>     {
<a class="jxr_linenumber" name="L11241" href="#L11241">11241</a>       Table pitGroupSetTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11242" href="#L11242">11242</a>           PITGroupSet.TABLE_GROUPER_PIT_GROUP_SET);
<a class="jxr_linenumber" name="L11243" href="#L11243">11243</a>       
<a class="jxr_linenumber" name="L11244" href="#L11244">11244</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11245" href="#L11245">11245</a>           <span class="jxr_string">"pit_gs_source_id_idx"</span>, false, PITGroupSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11246" href="#L11246">11246</a>       
<a class="jxr_linenumber" name="L11247" href="#L11247">11247</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11248" href="#L11248">11248</a>           <span class="jxr_string">"pit_gs_context_idx"</span>, false, PITGroupSet.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11249" href="#L11249">11249</a>       
<a class="jxr_linenumber" name="L11250" href="#L11250">11250</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11251" href="#L11251">11251</a>           <span class="jxr_string">"pit_gs_owner_attr_def_idx"</span>, false, PITGroupSet.COLUMN_OWNER_ATTR_DEF_ID);
<a class="jxr_linenumber" name="L11252" href="#L11252">11252</a>       
<a class="jxr_linenumber" name="L11253" href="#L11253">11253</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11254" href="#L11254">11254</a>           <span class="jxr_string">"pit_gs_owner_group_idx"</span>, false, PITGroupSet.COLUMN_OWNER_GROUP_ID);
<a class="jxr_linenumber" name="L11255" href="#L11255">11255</a>       
<a class="jxr_linenumber" name="L11256" href="#L11256">11256</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11257" href="#L11257">11257</a>           <span class="jxr_string">"pit_gs_owner_stem_idx"</span>, false, PITGroupSet.COLUMN_OWNER_STEM_ID);
<a class="jxr_linenumber" name="L11258" href="#L11258">11258</a>       
<a class="jxr_linenumber" name="L11259" href="#L11259">11259</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11260" href="#L11260">11260</a>           <span class="jxr_string">"pit_gs_member_idx"</span>, false, PITGroupSet.COLUMN_MEMBER_ID);
<a class="jxr_linenumber" name="L11261" href="#L11261">11261</a>       
<a class="jxr_linenumber" name="L11262" href="#L11262">11262</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11263" href="#L11263">11263</a>           <span class="jxr_string">"pit_gs_member_attr_def_idx"</span>, false, PITGroupSet.COLUMN_MEMBER_ATTR_DEF_ID);
<a class="jxr_linenumber" name="L11264" href="#L11264">11264</a>       
<a class="jxr_linenumber" name="L11265" href="#L11265">11265</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11266" href="#L11266">11266</a>           <span class="jxr_string">"pit_gs_member_group_idx"</span>, false, PITGroupSet.COLUMN_MEMBER_GROUP_ID);
<a class="jxr_linenumber" name="L11267" href="#L11267">11267</a>       
<a class="jxr_linenumber" name="L11268" href="#L11268">11268</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11269" href="#L11269">11269</a>           <span class="jxr_string">"pit_gs_member_stem_idx"</span>, false, PITGroupSet.COLUMN_MEMBER_STEM_ID);
<a class="jxr_linenumber" name="L11270" href="#L11270">11270</a>       
<a class="jxr_linenumber" name="L11271" href="#L11271">11271</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11272" href="#L11272">11272</a>           <span class="jxr_string">"pit_gs_field_idx"</span>, false, PITGroupSet.COLUMN_FIELD_ID);
<a class="jxr_linenumber" name="L11273" href="#L11273">11273</a>       
<a class="jxr_linenumber" name="L11274" href="#L11274">11274</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11275" href="#L11275">11275</a>           <span class="jxr_string">"pit_gs_member_field_idx"</span>, false, PITGroupSet.COLUMN_MEMBER_FIELD_ID);
<a class="jxr_linenumber" name="L11276" href="#L11276">11276</a>       
<a class="jxr_linenumber" name="L11277" href="#L11277">11277</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11278" href="#L11278">11278</a>           <span class="jxr_string">"pit_gs_parent_idx"</span>, false, PITGroupSet.COLUMN_PARENT_ID);
<a class="jxr_linenumber" name="L11279" href="#L11279">11279</a>       
<a class="jxr_linenumber" name="L11280" href="#L11280">11280</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11281" href="#L11281">11281</a>           <span class="jxr_string">"pit_gs_member_member_field_idx"</span>, false, PITGroupSet.COLUMN_MEMBER_ID, PITGroupSet.COLUMN_MEMBER_FIELD_ID);
<a class="jxr_linenumber" name="L11282" href="#L11282">11282</a>       
<a class="jxr_linenumber" name="L11283" href="#L11283">11283</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11284" href="#L11284">11284</a>           <span class="jxr_string">"pit_gs_group_field_member_idx"</span>, false, PITGroupSet.COLUMN_OWNER_GROUP_ID, PITGroupSet.COLUMN_FIELD_ID, PITGroupSet.COLUMN_MEMBER_ID);
<a class="jxr_linenumber" name="L11285" href="#L11285">11285</a>       
<a class="jxr_linenumber" name="L11286" href="#L11286">11286</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11287" href="#L11287">11287</a>           <span class="jxr_string">"pit_gs_owner_field_idx"</span>, false, PITGroupSet.COLUMN_OWNER_ID, PITGroupSet.COLUMN_FIELD_ID);
<a class="jxr_linenumber" name="L11288" href="#L11288">11288</a>       
<a class="jxr_linenumber" name="L11289" href="#L11289">11289</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11290" href="#L11290">11290</a>           <span class="jxr_string">"pit_gs_owner_member_field_idx"</span>, false, PITGroupSet.COLUMN_OWNER_ID, PITGroupSet.COLUMN_MEMBER_ID, PITGroupSet.COLUMN_FIELD_ID);
<a class="jxr_linenumber" name="L11291" href="#L11291">11291</a>       
<a class="jxr_linenumber" name="L11292" href="#L11292">11292</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11293" href="#L11293">11293</a>           <span class="jxr_string">"pit_gs_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITGroupSet.COLUMN_START_TIME, PITGroupSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11294" href="#L11294">11294</a>       
<a class="jxr_linenumber" name="L11295" href="#L11295">11295</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitGroupSetTable.getName(), 
<a class="jxr_linenumber" name="L11296" href="#L11296">11296</a>           <span class="jxr_string">"pit_gs_end_idx"</span>, false, PITGroupSet.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11297" href="#L11297">11297</a>     }
<a class="jxr_linenumber" name="L11298" href="#L11298">11298</a>     
<a class="jxr_linenumber" name="L11299" href="#L11299">11299</a>     {
<a class="jxr_linenumber" name="L11300" href="#L11300">11300</a>       Table pitAttributeAssignTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11301" href="#L11301">11301</a>           PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN);
<a class="jxr_linenumber" name="L11302" href="#L11302">11302</a>       
<a class="jxr_linenumber" name="L11303" href="#L11303">11303</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11304" href="#L11304">11304</a>           <span class="jxr_string">"pit_attr_assn_source_id_idx"</span>, false, PITAttributeAssign.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11305" href="#L11305">11305</a>       
<a class="jxr_linenumber" name="L11306" href="#L11306">11306</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11307" href="#L11307">11307</a>           <span class="jxr_string">"pit_attr_assn_action_idx"</span>, false, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L11308" href="#L11308">11308</a>       
<a class="jxr_linenumber" name="L11309" href="#L11309">11309</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11310" href="#L11310">11310</a>           <span class="jxr_string">"pit_attr_assn_type_idx"</span>, false, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_TYPE);
<a class="jxr_linenumber" name="L11311" href="#L11311">11311</a>       
<a class="jxr_linenumber" name="L11312" href="#L11312">11312</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11313" href="#L11313">11313</a>           <span class="jxr_string">"pit_attr_assn_def_name_idx"</span>, false, PITAttributeAssign.COLUMN_ATTRIBUTE_DEF_NAME_ID, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L11314" href="#L11314">11314</a>       
<a class="jxr_linenumber" name="L11315" href="#L11315">11315</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11316" href="#L11316">11316</a>           <span class="jxr_string">"pit_attr_assn_own_assn_idx"</span>, false, PITAttributeAssign.COLUMN_OWNER_ATTRIBUTE_ASSIGN_ID, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L11317" href="#L11317">11317</a> 
<a class="jxr_linenumber" name="L11318" href="#L11318">11318</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11319" href="#L11319">11319</a>           <span class="jxr_string">"pit_attr_assn_own_def_idx"</span>, false, PITAttributeAssign.COLUMN_OWNER_ATTRIBUTE_DEF_ID, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L11320" href="#L11320">11320</a> 
<a class="jxr_linenumber" name="L11321" href="#L11321">11321</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11322" href="#L11322">11322</a>           <span class="jxr_string">"pit_attr_assn_own_group_idx"</span>, false, PITAttributeAssign.COLUMN_OWNER_GROUP_ID, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L11323" href="#L11323">11323</a> 
<a class="jxr_linenumber" name="L11324" href="#L11324">11324</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11325" href="#L11325">11325</a>           <span class="jxr_string">"pit_attr_assn_own_mem_idx"</span>, false, PITAttributeAssign.COLUMN_OWNER_MEMBER_ID, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L11326" href="#L11326">11326</a> 
<a class="jxr_linenumber" name="L11327" href="#L11327">11327</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11328" href="#L11328">11328</a>           <span class="jxr_string">"pit_attr_assn_own_mship_idx"</span>, false, PITAttributeAssign.COLUMN_OWNER_MEMBERSHIP_ID, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L11329" href="#L11329">11329</a> 
<a class="jxr_linenumber" name="L11330" href="#L11330">11330</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11331" href="#L11331">11331</a>           <span class="jxr_string">"pit_attr_assn_own_stem_idx"</span>, false, PITAttributeAssign.COLUMN_OWNER_STEM_ID, PITAttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L11332" href="#L11332">11332</a>       
<a class="jxr_linenumber" name="L11333" href="#L11333">11333</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11334" href="#L11334">11334</a>           <span class="jxr_string">"pit_attr_assn_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeAssign.COLUMN_START_TIME, PITAttributeAssign.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11335" href="#L11335">11335</a>       
<a class="jxr_linenumber" name="L11336" href="#L11336">11336</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L11337" href="#L11337">11337</a>           <span class="jxr_string">"pit_attr_assn_end_idx"</span>, false, PITAttributeAssign.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11338" href="#L11338">11338</a>     }
<a class="jxr_linenumber" name="L11339" href="#L11339">11339</a>     
<a class="jxr_linenumber" name="L11340" href="#L11340">11340</a>     {
<a class="jxr_linenumber" name="L11341" href="#L11341">11341</a>       Table pitAttributeAssignValueTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11342" href="#L11342">11342</a>           PITAttributeAssignValue.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN_VALUE);
<a class="jxr_linenumber" name="L11343" href="#L11343">11343</a>       
<a class="jxr_linenumber" name="L11344" href="#L11344">11344</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L11345" href="#L11345">11345</a>           <span class="jxr_string">"pit_attr_val_source_id_idx"</span>, false, PITAttributeAssignValue.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11346" href="#L11346">11346</a>       
<a class="jxr_linenumber" name="L11347" href="#L11347">11347</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignValueTable.getName(),
<a class="jxr_linenumber" name="L11348" href="#L11348">11348</a>           <span class="jxr_string">"pit_attr_val_assign_idx"</span>, false, PITAttributeAssignValue.COLUMN_ATTRIBUTE_ASSIGN_ID);
<a class="jxr_linenumber" name="L11349" href="#L11349">11349</a> 
<a class="jxr_linenumber" name="L11350" href="#L11350">11350</a>       <strong class="jxr_keyword">if</strong> (!ddlVersionBean.isSqlServer()) {
<a class="jxr_linenumber" name="L11351" href="#L11351">11351</a>         String scriptOverrideName = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX pit_attr_val_string_idx "</span> +
<a class="jxr_linenumber" name="L11352" href="#L11352">11352</a>             <span class="jxr_string">"ON grouper_pit_attr_assn_value (value_string(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L11353" href="#L11353">11353</a>         
<a class="jxr_linenumber" name="L11354" href="#L11354">11354</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, pitAttributeAssignValueTable.getName(),
<a class="jxr_linenumber" name="L11355" href="#L11355">11355</a>             <span class="jxr_string">"pit_attr_val_string_idx"</span>, scriptOverrideName, false, PITAttributeAssignValue.COLUMN_VALUE_STRING);
<a class="jxr_linenumber" name="L11356" href="#L11356">11356</a>       }
<a class="jxr_linenumber" name="L11357" href="#L11357">11357</a>       
<a class="jxr_linenumber" name="L11358" href="#L11358">11358</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L11359" href="#L11359">11359</a>           <span class="jxr_string">"pit_attr_val_integer_idx"</span>, false,  PITAttributeAssignValue.COLUMN_VALUE_INTEGER);
<a class="jxr_linenumber" name="L11360" href="#L11360">11360</a>       
<a class="jxr_linenumber" name="L11361" href="#L11361">11361</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L11362" href="#L11362">11362</a>           <span class="jxr_string">"pit_attr_val_floating_idx"</span>, false,  PITAttributeAssignValue.COLUMN_VALUE_FLOATING);
<a class="jxr_linenumber" name="L11363" href="#L11363">11363</a> 
<a class="jxr_linenumber" name="L11364" href="#L11364">11364</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignValueTable.getName(),
<a class="jxr_linenumber" name="L11365" href="#L11365">11365</a>           <span class="jxr_string">"pit_attr_val_member_id_idx"</span>, false, PITAttributeAssignValue.COLUMN_VALUE_MEMBER_ID);
<a class="jxr_linenumber" name="L11366" href="#L11366">11366</a>       
<a class="jxr_linenumber" name="L11367" href="#L11367">11367</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L11368" href="#L11368">11368</a>           <span class="jxr_string">"pit_attr_val_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeAssignValue.COLUMN_START_TIME, PITAttributeAssignValue.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11369" href="#L11369">11369</a>       
<a class="jxr_linenumber" name="L11370" href="#L11370">11370</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L11371" href="#L11371">11371</a>           <span class="jxr_string">"pit_attr_val_end_idx"</span>, false, PITAttributeAssignValue.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11372" href="#L11372">11372</a>     }
<a class="jxr_linenumber" name="L11373" href="#L11373">11373</a>     
<a class="jxr_linenumber" name="L11374" href="#L11374">11374</a>     {
<a class="jxr_linenumber" name="L11375" href="#L11375">11375</a>       Table pitAttributeAssignActionTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11376" href="#L11376">11376</a>           PITAttributeAssignAction.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION);
<a class="jxr_linenumber" name="L11377" href="#L11377">11377</a>       
<a class="jxr_linenumber" name="L11378" href="#L11378">11378</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionTable.getName(), 
<a class="jxr_linenumber" name="L11379" href="#L11379">11379</a>           <span class="jxr_string">"pit_attr_asn_act_source_id_idx"</span>, false, PITAttributeAssignAction.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11380" href="#L11380">11380</a>       
<a class="jxr_linenumber" name="L11381" href="#L11381">11381</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionTable.getName(), 
<a class="jxr_linenumber" name="L11382" href="#L11382">11382</a>           <span class="jxr_string">"pit_attr_assn_act_def_id_idx"</span>, false, PITAttributeAssignAction.COLUMN_ATTRIBUTE_DEF_ID);
<a class="jxr_linenumber" name="L11383" href="#L11383">11383</a>       
<a class="jxr_linenumber" name="L11384" href="#L11384">11384</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionTable.getName(), 
<a class="jxr_linenumber" name="L11385" href="#L11385">11385</a>           <span class="jxr_string">"pit_attr_assn_act_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeAssignAction.COLUMN_START_TIME, PITAttributeAssignAction.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11386" href="#L11386">11386</a>       
<a class="jxr_linenumber" name="L11387" href="#L11387">11387</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionTable.getName(), 
<a class="jxr_linenumber" name="L11388" href="#L11388">11388</a>           <span class="jxr_string">"pit_attr_assn_act_end_idx"</span>, false, PITAttributeAssignAction.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11389" href="#L11389">11389</a>     }
<a class="jxr_linenumber" name="L11390" href="#L11390">11390</a>     
<a class="jxr_linenumber" name="L11391" href="#L11391">11391</a>     {
<a class="jxr_linenumber" name="L11392" href="#L11392">11392</a>       Table pitAttributeDefNameTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11393" href="#L11393">11393</a>           PITAttributeDefName.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME);
<a class="jxr_linenumber" name="L11394" href="#L11394">11394</a>       
<a class="jxr_linenumber" name="L11395" href="#L11395">11395</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameTable.getName(), 
<a class="jxr_linenumber" name="L11396" href="#L11396">11396</a>           <span class="jxr_string">"pit_attrdef_name_srcid_idx"</span>, false, PITAttributeDefName.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11397" href="#L11397">11397</a>       
<a class="jxr_linenumber" name="L11398" href="#L11398">11398</a>       String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX pit_attr_def_name_name_idx "</span> +
<a class="jxr_linenumber" name="L11399" href="#L11399">11399</a>           <span class="jxr_string">"ON grouper_pit_attr_def_name (name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L11400" href="#L11400">11400</a>       
<a class="jxr_linenumber" name="L11401" href="#L11401">11401</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, pitAttributeDefNameTable.getName(), 
<a class="jxr_linenumber" name="L11402" href="#L11402">11402</a>           <span class="jxr_string">"pit_attr_def_name_name_idx"</span>, scriptOverride, false, PITAttributeDefName.COLUMN_NAME);    
<a class="jxr_linenumber" name="L11403" href="#L11403">11403</a>       
<a class="jxr_linenumber" name="L11404" href="#L11404">11404</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameTable.getName(), 
<a class="jxr_linenumber" name="L11405" href="#L11405">11405</a>           <span class="jxr_string">"pit_attr_def_name_stem_idx"</span>, false, PITAttributeDefName.COLUMN_STEM_ID);
<a class="jxr_linenumber" name="L11406" href="#L11406">11406</a>       
<a class="jxr_linenumber" name="L11407" href="#L11407">11407</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameTable.getName(), 
<a class="jxr_linenumber" name="L11408" href="#L11408">11408</a>           <span class="jxr_string">"pit_attr_def_name_def_idx"</span>, false, PITAttributeDefName.COLUMN_ATTRIBUTE_DEF_ID);
<a class="jxr_linenumber" name="L11409" href="#L11409">11409</a>       
<a class="jxr_linenumber" name="L11410" href="#L11410">11410</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameTable.getName(), 
<a class="jxr_linenumber" name="L11411" href="#L11411">11411</a>           <span class="jxr_string">"pit_attr_def_name_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeDefName.COLUMN_START_TIME, PITAttributeDefName.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11412" href="#L11412">11412</a>       
<a class="jxr_linenumber" name="L11413" href="#L11413">11413</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameTable.getName(), 
<a class="jxr_linenumber" name="L11414" href="#L11414">11414</a>           <span class="jxr_string">"pit_attr_def_name_end_idx"</span>, false, PITAttributeDefName.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11415" href="#L11415">11415</a>     }
<a class="jxr_linenumber" name="L11416" href="#L11416">11416</a>     
<a class="jxr_linenumber" name="L11417" href="#L11417">11417</a>     {
<a class="jxr_linenumber" name="L11418" href="#L11418">11418</a>       Table pitAttributeDefNameSet = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11419" href="#L11419">11419</a>           PITAttributeDefNameSet.TABLE_GROUPER_PIT_ATTRIBUTE_DEF_NAME_SET);
<a class="jxr_linenumber" name="L11420" href="#L11420">11420</a>       
<a class="jxr_linenumber" name="L11421" href="#L11421">11421</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameSet.getName(), 
<a class="jxr_linenumber" name="L11422" href="#L11422">11422</a>           <span class="jxr_string">"pit_attrdef_name_set_srcid_idx"</span>, false, PITAttributeDefNameSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11423" href="#L11423">11423</a>       
<a class="jxr_linenumber" name="L11424" href="#L11424">11424</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameSet.getName(), 
<a class="jxr_linenumber" name="L11425" href="#L11425">11425</a>           <span class="jxr_string">"pit_attr_def_name_set_if_idx"</span>, false, PITAttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID);
<a class="jxr_linenumber" name="L11426" href="#L11426">11426</a>       
<a class="jxr_linenumber" name="L11427" href="#L11427">11427</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameSet.getName(), 
<a class="jxr_linenumber" name="L11428" href="#L11428">11428</a>           <span class="jxr_string">"pit_attr_def_name_set_then_idx"</span>, false, PITAttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID);
<a class="jxr_linenumber" name="L11429" href="#L11429">11429</a>       
<a class="jxr_linenumber" name="L11430" href="#L11430">11430</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameSet.getName(), 
<a class="jxr_linenumber" name="L11431" href="#L11431">11431</a>           <span class="jxr_string">"pit_attr_def_name_set_prnt_idx"</span>, false, PITAttributeDefNameSet.COLUMN_PARENT_ATTR_DEF_NAME_SET_ID);
<a class="jxr_linenumber" name="L11432" href="#L11432">11432</a>       
<a class="jxr_linenumber" name="L11433" href="#L11433">11433</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameSet.getName(), 
<a class="jxr_linenumber" name="L11434" href="#L11434">11434</a>           <span class="jxr_string">"pit_attr_def_name_set_strt_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeDefNameSet.COLUMN_START_TIME, PITAttributeDefNameSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11435" href="#L11435">11435</a>       
<a class="jxr_linenumber" name="L11436" href="#L11436">11436</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeDefNameSet.getName(), 
<a class="jxr_linenumber" name="L11437" href="#L11437">11437</a>           <span class="jxr_string">"pit_attr_def_name_set_end_idx"</span>, false, PITAttributeDefNameSet.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11438" href="#L11438">11438</a>     }
<a class="jxr_linenumber" name="L11439" href="#L11439">11439</a>     
<a class="jxr_linenumber" name="L11440" href="#L11440">11440</a>     {
<a class="jxr_linenumber" name="L11441" href="#L11441">11441</a>       Table pitAttributeAssignActionSet = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11442" href="#L11442">11442</a>           PITAttributeAssignActionSet.TABLE_GROUPER_PIT_ATTR_ASSIGN_ACTION_SET);
<a class="jxr_linenumber" name="L11443" href="#L11443">11443</a>       
<a class="jxr_linenumber" name="L11444" href="#L11444">11444</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionSet.getName(), 
<a class="jxr_linenumber" name="L11445" href="#L11445">11445</a>           <span class="jxr_string">"pit_action_set_source_id_idx"</span>, false, PITAttributeAssignActionSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11446" href="#L11446">11446</a>       
<a class="jxr_linenumber" name="L11447" href="#L11447">11447</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionSet.getName(), 
<a class="jxr_linenumber" name="L11448" href="#L11448">11448</a>           <span class="jxr_string">"pit_action_set_if_idx"</span>, false, PITAttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID);
<a class="jxr_linenumber" name="L11449" href="#L11449">11449</a>       
<a class="jxr_linenumber" name="L11450" href="#L11450">11450</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionSet.getName(), 
<a class="jxr_linenumber" name="L11451" href="#L11451">11451</a>           <span class="jxr_string">"pit_action_set_then_idx"</span>, false, PITAttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID);
<a class="jxr_linenumber" name="L11452" href="#L11452">11452</a>       
<a class="jxr_linenumber" name="L11453" href="#L11453">11453</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionSet.getName(), 
<a class="jxr_linenumber" name="L11454" href="#L11454">11454</a>           <span class="jxr_string">"pit_action_set_parent_idx"</span>, false, PITAttributeAssignActionSet.COLUMN_PARENT_ATTR_ASSN_ACTION_ID);
<a class="jxr_linenumber" name="L11455" href="#L11455">11455</a>       
<a class="jxr_linenumber" name="L11456" href="#L11456">11456</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionSet.getName(), 
<a class="jxr_linenumber" name="L11457" href="#L11457">11457</a>           <span class="jxr_string">"pit_action_set_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITAttributeAssignActionSet.COLUMN_START_TIME, PITAttributeAssignActionSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11458" href="#L11458">11458</a>       
<a class="jxr_linenumber" name="L11459" href="#L11459">11459</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitAttributeAssignActionSet.getName(), 
<a class="jxr_linenumber" name="L11460" href="#L11460">11460</a>           <span class="jxr_string">"pit_action_set_end_idx"</span>, false, PITAttributeAssignActionSet.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11461" href="#L11461">11461</a>     }
<a class="jxr_linenumber" name="L11462" href="#L11462">11462</a>     
<a class="jxr_linenumber" name="L11463" href="#L11463">11463</a>     {
<a class="jxr_linenumber" name="L11464" href="#L11464">11464</a>       Table pitRoleSet = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11465" href="#L11465">11465</a>           PITRoleSet.TABLE_GROUPER_PIT_ROLE_SET);
<a class="jxr_linenumber" name="L11466" href="#L11466">11466</a>       
<a class="jxr_linenumber" name="L11467" href="#L11467">11467</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitRoleSet.getName(), 
<a class="jxr_linenumber" name="L11468" href="#L11468">11468</a>           <span class="jxr_string">"pit_rs_source_id_idx"</span>, false, PITRoleSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11469" href="#L11469">11469</a>       
<a class="jxr_linenumber" name="L11470" href="#L11470">11470</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitRoleSet.getName(), 
<a class="jxr_linenumber" name="L11471" href="#L11471">11471</a>           <span class="jxr_string">"pit_rs_if_idx"</span>, false, PITRoleSet.COLUMN_IF_HAS_ROLE_ID);
<a class="jxr_linenumber" name="L11472" href="#L11472">11472</a>       
<a class="jxr_linenumber" name="L11473" href="#L11473">11473</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitRoleSet.getName(), 
<a class="jxr_linenumber" name="L11474" href="#L11474">11474</a>           <span class="jxr_string">"pit_rs_then_idx"</span>, false, PITRoleSet.COLUMN_THEN_HAS_ROLE_ID);
<a class="jxr_linenumber" name="L11475" href="#L11475">11475</a>       
<a class="jxr_linenumber" name="L11476" href="#L11476">11476</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitRoleSet.getName(), 
<a class="jxr_linenumber" name="L11477" href="#L11477">11477</a>           <span class="jxr_string">"pit_rs_parent_idx"</span>, false, PITRoleSet.COLUMN_PARENT_ROLE_SET_ID);
<a class="jxr_linenumber" name="L11478" href="#L11478">11478</a>       
<a class="jxr_linenumber" name="L11479" href="#L11479">11479</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitRoleSet.getName(), 
<a class="jxr_linenumber" name="L11480" href="#L11480">11480</a>           <span class="jxr_string">"pit_rs_start_idx"</span>, <strong class="jxr_keyword">true</strong>, PITRoleSet.COLUMN_START_TIME, PITRoleSet.COLUMN_SOURCE_ID);
<a class="jxr_linenumber" name="L11481" href="#L11481">11481</a>       
<a class="jxr_linenumber" name="L11482" href="#L11482">11482</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, pitRoleSet.getName(), 
<a class="jxr_linenumber" name="L11483" href="#L11483">11483</a>           <span class="jxr_string">"pit_rs_end_idx"</span>, false, PITRoleSet.COLUMN_END_TIME);
<a class="jxr_linenumber" name="L11484" href="#L11484">11484</a>     }
<a class="jxr_linenumber" name="L11485" href="#L11485">11485</a>   }
<a class="jxr_linenumber" name="L11486" href="#L11486">11486</a>   
<a class="jxr_linenumber" name="L11487" href="#L11487">11487</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11488" href="#L11488">11488</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L11489" href="#L11489">11489</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11490" href="#L11490">11490</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L11491" href="#L11491">11491</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11492" href="#L11492">11492</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> populatePITTables(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L11493" href="#L11493">11493</a>     <strong class="jxr_keyword">long</strong> startTime = <strong class="jxr_keyword">new</strong> Date().getTime() * 1000;
<a class="jxr_linenumber" name="L11494" href="#L11494">11494</a> 
<a class="jxr_linenumber" name="L11495" href="#L11495">11495</a>     <strong class="jxr_keyword">int</strong> count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_fields"</span>, false);
<a class="jxr_linenumber" name="L11496" href="#L11496">11496</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11497" href="#L11497">11497</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_fields"</span>, false);
<a class="jxr_linenumber" name="L11498" href="#L11498">11498</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11499" href="#L11499">11499</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_fields (id, source_id, name, type, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11500" href="#L11500">11500</a>             <span class="jxr_string">"select id, id, name, type, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_fields;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11501" href="#L11501">11501</a>       }
<a class="jxr_linenumber" name="L11502" href="#L11502">11502</a>     } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L11503" href="#L11503">11503</a>       <strong class="jxr_keyword">return</strong>;
<a class="jxr_linenumber" name="L11504" href="#L11504">11504</a>     }
<a class="jxr_linenumber" name="L11505" href="#L11505">11505</a>     
<a class="jxr_linenumber" name="L11506" href="#L11506">11506</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_stems"</span>, false);
<a class="jxr_linenumber" name="L11507" href="#L11507">11507</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11508" href="#L11508">11508</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_stems"</span>, false);
<a class="jxr_linenumber" name="L11509" href="#L11509">11509</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11510" href="#L11510">11510</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_stems (id, source_id, name, parent_stem_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11511" href="#L11511">11511</a>             <span class="jxr_string">"select id, id, name, parent_stem, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_stems;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11512" href="#L11512">11512</a>       }
<a class="jxr_linenumber" name="L11513" href="#L11513">11513</a>     }
<a class="jxr_linenumber" name="L11514" href="#L11514">11514</a>     
<a class="jxr_linenumber" name="L11515" href="#L11515">11515</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_attribute_def"</span>, false);
<a class="jxr_linenumber" name="L11516" href="#L11516">11516</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11517" href="#L11517">11517</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_attribute_def"</span>, false);
<a class="jxr_linenumber" name="L11518" href="#L11518">11518</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11519" href="#L11519">11519</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_attribute_def (id, source_id, name, stem_id, attribute_def_type, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11520" href="#L11520">11520</a>             <span class="jxr_string">"select id, id, name, stem_id, attribute_def_type, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_attribute_def;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11521" href="#L11521">11521</a>       }
<a class="jxr_linenumber" name="L11522" href="#L11522">11522</a>     }
<a class="jxr_linenumber" name="L11523" href="#L11523">11523</a>     
<a class="jxr_linenumber" name="L11524" href="#L11524">11524</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_groups"</span>, false);
<a class="jxr_linenumber" name="L11525" href="#L11525">11525</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11526" href="#L11526">11526</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_groups"</span>, false);
<a class="jxr_linenumber" name="L11527" href="#L11527">11527</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11528" href="#L11528">11528</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_groups (id, source_id, name, stem_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11529" href="#L11529">11529</a>             <span class="jxr_string">"select id, id, name, parent_stem, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_groups;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11530" href="#L11530">11530</a>       }
<a class="jxr_linenumber" name="L11531" href="#L11531">11531</a>     }
<a class="jxr_linenumber" name="L11532" href="#L11532">11532</a>     
<a class="jxr_linenumber" name="L11533" href="#L11533">11533</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_members"</span>, false);
<a class="jxr_linenumber" name="L11534" href="#L11534">11534</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11535" href="#L11535">11535</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_members"</span>, false);
<a class="jxr_linenumber" name="L11536" href="#L11536">11536</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11537" href="#L11537">11537</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_members (id, source_id, subject_id, subject_source, subject_type, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11538" href="#L11538">11538</a>             <span class="jxr_string">"select id, id, subject_id, subject_source, subject_type, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_members;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11539" href="#L11539">11539</a>       }
<a class="jxr_linenumber" name="L11540" href="#L11540">11540</a>     }
<a class="jxr_linenumber" name="L11541" href="#L11541">11541</a>     
<a class="jxr_linenumber" name="L11542" href="#L11542">11542</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_attr_def_name"</span>, false);
<a class="jxr_linenumber" name="L11543" href="#L11543">11543</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11544" href="#L11544">11544</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_attribute_def_name"</span>, false);
<a class="jxr_linenumber" name="L11545" href="#L11545">11545</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11546" href="#L11546">11546</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_attr_def_name (id, source_id, stem_id, attribute_def_id, name, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11547" href="#L11547">11547</a>             <span class="jxr_string">"select id, id, stem_id, attribute_def_id, name, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_attribute_def_name;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11548" href="#L11548">11548</a>       }
<a class="jxr_linenumber" name="L11549" href="#L11549">11549</a>     }
<a class="jxr_linenumber" name="L11550" href="#L11550">11550</a>     
<a class="jxr_linenumber" name="L11551" href="#L11551">11551</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_attr_def_name_set"</span>, false);
<a class="jxr_linenumber" name="L11552" href="#L11552">11552</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11553" href="#L11553">11553</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_attribute_def_name_set"</span>, false);
<a class="jxr_linenumber" name="L11554" href="#L11554">11554</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11555" href="#L11555">11555</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_attr_def_name_set (id, source_id, depth, if_has_attribute_def_name_id, then_has_attribute_def_name_id, parent_attr_def_name_set_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11556" href="#L11556">11556</a>             <span class="jxr_string">"select id, id, depth, if_has_attribute_def_name_id, then_has_attribute_def_name_id, parent_attr_def_name_set_id, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_attribute_def_name_set;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11557" href="#L11557">11557</a>       }
<a class="jxr_linenumber" name="L11558" href="#L11558">11558</a>     }
<a class="jxr_linenumber" name="L11559" href="#L11559">11559</a>         
<a class="jxr_linenumber" name="L11560" href="#L11560">11560</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_attr_assn_actn"</span>, false);
<a class="jxr_linenumber" name="L11561" href="#L11561">11561</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11562" href="#L11562">11562</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_attr_assign_action"</span>, false);
<a class="jxr_linenumber" name="L11563" href="#L11563">11563</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11564" href="#L11564">11564</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_attr_assn_actn (id, source_id, attribute_def_id, name, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11565" href="#L11565">11565</a>             <span class="jxr_string">"select id, id, attribute_def_id, name, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_attr_assign_action;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11566" href="#L11566">11566</a>       }
<a class="jxr_linenumber" name="L11567" href="#L11567">11567</a>     }
<a class="jxr_linenumber" name="L11568" href="#L11568">11568</a>     
<a class="jxr_linenumber" name="L11569" href="#L11569">11569</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_attr_assn_actn_set"</span>, false);
<a class="jxr_linenumber" name="L11570" href="#L11570">11570</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11571" href="#L11571">11571</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_attr_assign_action_set"</span>, false);
<a class="jxr_linenumber" name="L11572" href="#L11572">11572</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11573" href="#L11573">11573</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_attr_assn_actn_set (id, source_id, depth, if_has_attr_assn_action_id, then_has_attr_assn_action_id, parent_attr_assn_action_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11574" href="#L11574">11574</a>             <span class="jxr_string">"select id, id, depth, if_has_attr_assn_action_id, then_has_attr_assn_action_id, parent_attr_assn_action_id, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_attr_assign_action_set;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11575" href="#L11575">11575</a>       }
<a class="jxr_linenumber" name="L11576" href="#L11576">11576</a>     }    
<a class="jxr_linenumber" name="L11577" href="#L11577">11577</a>     
<a class="jxr_linenumber" name="L11578" href="#L11578">11578</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_group_set"</span>, false);
<a class="jxr_linenumber" name="L11579" href="#L11579">11579</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11580" href="#L11580">11580</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_group_set"</span>, false);
<a class="jxr_linenumber" name="L11581" href="#L11581">11581</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11582" href="#L11582">11582</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_group_set (id, source_id, owner_id, owner_attr_def_id, owner_group_id, owner_stem_id, member_id, member_attr_def_id, member_group_id, member_stem_id, field_id, member_field_id, depth, parent_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11583" href="#L11583">11583</a>         		<span class="jxr_string">"select id, id, owner_id, owner_attr_def_id, owner_group_id, owner_stem_id, member_id, member_attr_def_id, member_group_id, member_stem_id, field_id, member_field_id, depth, parent_id, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_group_set;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11584" href="#L11584">11584</a>       }
<a class="jxr_linenumber" name="L11585" href="#L11585">11585</a>     }
<a class="jxr_linenumber" name="L11586" href="#L11586">11586</a>     
<a class="jxr_linenumber" name="L11587" href="#L11587">11587</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_memberships"</span>, false);
<a class="jxr_linenumber" name="L11588" href="#L11588">11588</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11589" href="#L11589">11589</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_memberships"</span>, false);
<a class="jxr_linenumber" name="L11590" href="#L11590">11590</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11591" href="#L11591">11591</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_memberships (id, source_id, owner_id, owner_attr_def_id, owner_group_id, owner_stem_id, member_id, field_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11592" href="#L11592">11592</a>             <span class="jxr_string">"select id, id, owner_id, owner_attr_def_id, owner_group_id, owner_stem_id, member_id, field_id, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_memberships where enabled='T';\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11593" href="#L11593">11593</a>       }
<a class="jxr_linenumber" name="L11594" href="#L11594">11594</a>     }
<a class="jxr_linenumber" name="L11595" href="#L11595">11595</a>     
<a class="jxr_linenumber" name="L11596" href="#L11596">11596</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_role_set"</span>, false);
<a class="jxr_linenumber" name="L11597" href="#L11597">11597</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11598" href="#L11598">11598</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_role_set"</span>, false);
<a class="jxr_linenumber" name="L11599" href="#L11599">11599</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11600" href="#L11600">11600</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_role_set (id, source_id, depth, if_has_role_id, then_has_role_id, parent_role_set_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11601" href="#L11601">11601</a>             <span class="jxr_string">"select id, id, depth, if_has_role_id, then_has_role_id, parent_role_set_id, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_role_set;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11602" href="#L11602">11602</a>       }
<a class="jxr_linenumber" name="L11603" href="#L11603">11603</a>     }
<a class="jxr_linenumber" name="L11604" href="#L11604">11604</a>     
<a class="jxr_linenumber" name="L11605" href="#L11605">11605</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_attribute_assign"</span>, false);
<a class="jxr_linenumber" name="L11606" href="#L11606">11606</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11607" href="#L11607">11607</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_attribute_assign"</span>, false);
<a class="jxr_linenumber" name="L11608" href="#L11608">11608</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11609" href="#L11609">11609</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_attribute_assign (id, source_id, attribute_def_name_id, attribute_assign_action_id, attribute_assign_type, owner_attribute_assign_id, owner_attribute_def_id, owner_group_id, owner_member_id, owner_membership_id, owner_stem_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11610" href="#L11610">11610</a>             <span class="jxr_string">"select id, id, attribute_def_name_id, attribute_assign_action_id, attribute_assign_type, owner_attribute_assign_id, owner_attribute_def_id, owner_group_id, owner_member_id, owner_membership_id, owner_stem_id, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_attribute_assign where enabled='T' and owner_attribute_assign_id is null;\n"</span>);
<a class="jxr_linenumber" name="L11611" href="#L11611">11611</a>         
<a class="jxr_linenumber" name="L11612" href="#L11612">11612</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_attribute_assign (id, source_id, attribute_def_name_id, attribute_assign_action_id, attribute_assign_type, owner_attribute_assign_id, owner_attribute_def_id, owner_group_id, owner_member_id, owner_membership_id, owner_stem_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11613" href="#L11613">11613</a>             <span class="jxr_string">"select id, id, attribute_def_name_id, attribute_assign_action_id, attribute_assign_type, owner_attribute_assign_id, owner_attribute_def_id, owner_group_id, owner_member_id, owner_membership_id, owner_stem_id, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_attribute_assign where enabled='T' and owner_attribute_assign_id is not null;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11614" href="#L11614">11614</a>       }
<a class="jxr_linenumber" name="L11615" href="#L11615">11615</a>     }
<a class="jxr_linenumber" name="L11616" href="#L11616">11616</a>     
<a class="jxr_linenumber" name="L11617" href="#L11617">11617</a>     count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_pit_attr_assn_value"</span>, false);
<a class="jxr_linenumber" name="L11618" href="#L11618">11618</a>     <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L11619" href="#L11619">11619</a>       count = GrouperDdlUtils.getTableCount(<span class="jxr_string">"grouper_attribute_assign_value"</span>, false);
<a class="jxr_linenumber" name="L11620" href="#L11620">11620</a>       <strong class="jxr_keyword">if</strong> (count != 0) {
<a class="jxr_linenumber" name="L11621" href="#L11621">11621</a>         ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_pit_attr_assn_value (id, source_id, attribute_assign_id, value_integer, value_floating, value_string, value_member_id, active, start_time, context_id, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L11622" href="#L11622">11622</a>             <span class="jxr_string">"select id, id, attribute_assign_id, value_integer, value_floating, value_string, value_member_id, 'T', '"</span> + startTime + <span class="jxr_string">"', context_id, '0' from grouper_attribute_assign_value;\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L11623" href="#L11623">11623</a>       }
<a class="jxr_linenumber" name="L11624" href="#L11624">11624</a>     }
<a class="jxr_linenumber" name="L11625" href="#L11625">11625</a>   }
<a class="jxr_linenumber" name="L11626" href="#L11626">11626</a> 
<a class="jxr_linenumber" name="L11627" href="#L11627">11627</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11628" href="#L11628">11628</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11629" href="#L11629">11629</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L11630" href="#L11630">11630</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11631" href="#L11631">11631</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addGrouperLoaderJobNameIndex(Database database,
<a class="jxr_linenumber" name="L11632" href="#L11632">11632</a>       <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L11633" href="#L11633">11633</a>     <em class="jxr_comment">//see if the grouper_ext_loader_log table is there</em>
<a class="jxr_linenumber" name="L11634" href="#L11634">11634</a>     String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX grouper_loader_job_name_idx "</span> +
<a class="jxr_linenumber" name="L11635" href="#L11635">11635</a>         <span class="jxr_string">"ON grouper_loader_log (job_name(255), status, ended_time);\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L11636" href="#L11636">11636</a>     
<a class="jxr_linenumber" name="L11637" href="#L11637">11637</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, <span class="jxr_string">"grouper_loader_log"</span>,
<a class="jxr_linenumber" name="L11638" href="#L11638">11638</a>         <span class="jxr_string">"grouper_loader_job_name_idx"</span>, scriptOverride, false, <span class="jxr_string">"job_name"</span>, <span class="jxr_string">"status"</span>, <span class="jxr_string">"ended_time"</span>);
<a class="jxr_linenumber" name="L11639" href="#L11639">11639</a>   }
<a class="jxr_linenumber" name="L11640" href="#L11640">11640</a> 
<a class="jxr_linenumber" name="L11641" href="#L11641">11641</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11642" href="#L11642">11642</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11643" href="#L11643">11643</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11644" href="#L11644">11644</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addContextIdColsLoader(Database database) {
<a class="jxr_linenumber" name="L11645" href="#L11645">11645</a>     Table loaderLogTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L11646" href="#L11646">11646</a>         Hib3GrouperLoaderLog.TABLE_GROUPER_LOADER_LOG, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11647" href="#L11647">11647</a>  
<a class="jxr_linenumber" name="L11648" href="#L11648">11648</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(loaderLogTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11649" href="#L11649">11649</a>         Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11650" href="#L11650">11650</a>     
<a class="jxr_linenumber" name="L11651" href="#L11651">11651</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Hib3GrouperLoaderLog.TABLE_GROUPER_LOADER_LOG,
<a class="jxr_linenumber" name="L11652" href="#L11652">11652</a>         <span class="jxr_string">"loader_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11653" href="#L11653">11653</a>   }
<a class="jxr_linenumber" name="L11654" href="#L11654">11654</a> 
<a class="jxr_linenumber" name="L11655" href="#L11655">11655</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11656" href="#L11656">11656</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L11657" href="#L11657">11657</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11658" href="#L11658">11658</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11659" href="#L11659">11659</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addAttributeFloatValueCol(Database database) {
<a class="jxr_linenumber" name="L11660" href="#L11660">11660</a>     
<a class="jxr_linenumber" name="L11661" href="#L11661">11661</a>     Table attributeAssignValueTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L11662" href="#L11662">11662</a>         database, AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE);
<a class="jxr_linenumber" name="L11663" href="#L11663">11663</a> 
<a class="jxr_linenumber" name="L11664" href="#L11664">11664</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L11665" href="#L11665">11665</a>         AttributeAssignValue.COLUMN_VALUE_FLOATING, Types.FLOAT, <span class="jxr_string">"20,5"</span>, false, false);
<a class="jxr_linenumber" name="L11666" href="#L11666">11666</a> 
<a class="jxr_linenumber" name="L11667" href="#L11667">11667</a>   }
<a class="jxr_linenumber" name="L11668" href="#L11668">11668</a>   
<a class="jxr_linenumber" name="L11669" href="#L11669">11669</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11670" href="#L11670">11670</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L11671" href="#L11671">11671</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11672" href="#L11672">11672</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11673" href="#L11673">11673</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addAttributeAssignDisallowed(Database database) {
<a class="jxr_linenumber" name="L11674" href="#L11674">11674</a>     Table attributeAssignTable = GrouperDdlUtils.ddlutilsFindTable(database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11675" href="#L11675">11675</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable, AttributeAssign.COLUMN_DISALLOWED, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, false);
<a class="jxr_linenumber" name="L11676" href="#L11676">11676</a>   }
<a class="jxr_linenumber" name="L11677" href="#L11677">11677</a>   
<a class="jxr_linenumber" name="L11678" href="#L11678">11678</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11679" href="#L11679">11679</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L11680" href="#L11680">11680</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11681" href="#L11681">11681</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11682" href="#L11682">11682</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addAttributeAssignPitDisallowed(Database database) {
<a class="jxr_linenumber" name="L11683" href="#L11683">11683</a>     Table pitAttributeAssignTable = GrouperDdlUtils.ddlutilsFindTable(database, PITAttributeAssign.TABLE_GROUPER_PIT_ATTRIBUTE_ASSIGN, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11684" href="#L11684">11684</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(pitAttributeAssignTable, PITAttributeAssign.COLUMN_DISALLOWED, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, false);
<a class="jxr_linenumber" name="L11685" href="#L11685">11685</a>   }
<a class="jxr_linenumber" name="L11686" href="#L11686">11686</a>   
<a class="jxr_linenumber" name="L11687" href="#L11687">11687</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11688" href="#L11688">11688</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L11689" href="#L11689">11689</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11690" href="#L11690">11690</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L11691" href="#L11691">11691</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11692" href="#L11692">11692</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addMemberAttributes(Database database, <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L11693" href="#L11693">11693</a>     Table membersTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database, Member.TABLE_GROUPER_MEMBERS);
<a class="jxr_linenumber" name="L11694" href="#L11694">11694</a>     
<a class="jxr_linenumber" name="L11695" href="#L11695">11695</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SORT_STRING0, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false);
<a class="jxr_linenumber" name="L11696" href="#L11696">11696</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SORT_STRING1, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false);
<a class="jxr_linenumber" name="L11697" href="#L11697">11697</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SORT_STRING2, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false);
<a class="jxr_linenumber" name="L11698" href="#L11698">11698</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SORT_STRING3, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false);
<a class="jxr_linenumber" name="L11699" href="#L11699">11699</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SORT_STRING4, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false);
<a class="jxr_linenumber" name="L11700" href="#L11700">11700</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SEARCH_STRING0, Types.VARCHAR, <span class="jxr_string">"2048"</span>, false, false);
<a class="jxr_linenumber" name="L11701" href="#L11701">11701</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SEARCH_STRING1, Types.VARCHAR, <span class="jxr_string">"2048"</span>, false, false);
<a class="jxr_linenumber" name="L11702" href="#L11702">11702</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SEARCH_STRING2, Types.VARCHAR, <span class="jxr_string">"2048"</span>, false, false);
<a class="jxr_linenumber" name="L11703" href="#L11703">11703</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SEARCH_STRING3, Types.VARCHAR, <span class="jxr_string">"2048"</span>, false, false);
<a class="jxr_linenumber" name="L11704" href="#L11704">11704</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_SEARCH_STRING4, Types.VARCHAR, <span class="jxr_string">"2048"</span>, false, false);
<a class="jxr_linenumber" name="L11705" href="#L11705">11705</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_NAME, Types.VARCHAR, <span class="jxr_string">"2048"</span>, false, false);
<a class="jxr_linenumber" name="L11706" href="#L11706">11706</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, Member.COLUMN_DESCRIPTION, Types.VARCHAR, <span class="jxr_string">"2048"</span>, false, false);
<a class="jxr_linenumber" name="L11707" href="#L11707">11707</a> 
<a class="jxr_linenumber" name="L11708" href="#L11708">11708</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), <span class="jxr_string">"member_sort_string0_idx"</span>, false, Member.COLUMN_SORT_STRING0);
<a class="jxr_linenumber" name="L11709" href="#L11709">11709</a> 
<a class="jxr_linenumber" name="L11710" href="#L11710">11710</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), <span class="jxr_string">"member_sort_string1_idx"</span>, false, Member.COLUMN_SORT_STRING1);
<a class="jxr_linenumber" name="L11711" href="#L11711">11711</a> 
<a class="jxr_linenumber" name="L11712" href="#L11712">11712</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), <span class="jxr_string">"member_sort_string2_idx"</span>, false, Member.COLUMN_SORT_STRING2);
<a class="jxr_linenumber" name="L11713" href="#L11713">11713</a>     
<a class="jxr_linenumber" name="L11714" href="#L11714">11714</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), <span class="jxr_string">"member_sort_string3_idx"</span>, false, Member.COLUMN_SORT_STRING3);
<a class="jxr_linenumber" name="L11715" href="#L11715">11715</a> 
<a class="jxr_linenumber" name="L11716" href="#L11716">11716</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membersTable.getName(), <span class="jxr_string">"member_sort_string4_idx"</span>, false, Member.COLUMN_SORT_STRING4);
<a class="jxr_linenumber" name="L11717" href="#L11717">11717</a> 
<a class="jxr_linenumber" name="L11718" href="#L11718">11718</a>     String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX member_name_idx ON grouper_members (name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L11719" href="#L11719">11719</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, membersTable.getName(), <span class="jxr_string">"member_name_idx"</span>, scriptOverride, false, Member.COLUMN_NAME);
<a class="jxr_linenumber" name="L11720" href="#L11720">11720</a> 
<a class="jxr_linenumber" name="L11721" href="#L11721">11721</a>     scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX member_description_idx ON grouper_members (description(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L11722" href="#L11722">11722</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, membersTable.getName(), <span class="jxr_string">"member_description_idx"</span>, scriptOverride, false, Member.COLUMN_DESCRIPTION);
<a class="jxr_linenumber" name="L11723" href="#L11723">11723</a>   }
<a class="jxr_linenumber" name="L11724" href="#L11724">11724</a>   
<a class="jxr_linenumber" name="L11725" href="#L11725">11725</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11726" href="#L11726">11726</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11727" href="#L11727">11727</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11728" href="#L11728">11728</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addContextIdCols(Database database) {
<a class="jxr_linenumber" name="L11729" href="#L11729">11729</a>     {
<a class="jxr_linenumber" name="L11730" href="#L11730">11730</a>       Table attributeTable = GrouperDdlUtils.ddlutilsFindTable(database,
<a class="jxr_linenumber" name="L11731" href="#L11731">11731</a>           Attribute.TABLE_OLD_GROUPER_ATTRIBUTES, false);
<a class="jxr_linenumber" name="L11732" href="#L11732">11732</a> 
<a class="jxr_linenumber" name="L11733" href="#L11733">11733</a>       <strong class="jxr_keyword">if</strong> (attributeTable != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L11734" href="#L11734">11734</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11735" href="#L11735">11735</a>             Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11736" href="#L11736">11736</a> 
<a class="jxr_linenumber" name="L11737" href="#L11737">11737</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Attribute.TABLE_OLD_GROUPER_ATTRIBUTES,
<a class="jxr_linenumber" name="L11738" href="#L11738">11738</a>             <span class="jxr_string">"attribute_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11739" href="#L11739">11739</a>       }
<a class="jxr_linenumber" name="L11740" href="#L11740">11740</a>     }
<a class="jxr_linenumber" name="L11741" href="#L11741">11741</a>     {
<a class="jxr_linenumber" name="L11742" href="#L11742">11742</a>       Table compositeTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11743" href="#L11743">11743</a>           Composite.TABLE_GROUPER_COMPOSITES);
<a class="jxr_linenumber" name="L11744" href="#L11744">11744</a>  
<a class="jxr_linenumber" name="L11745" href="#L11745">11745</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(compositeTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11746" href="#L11746">11746</a>           Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11747" href="#L11747">11747</a>  
<a class="jxr_linenumber" name="L11748" href="#L11748">11748</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Composite.TABLE_GROUPER_COMPOSITES,
<a class="jxr_linenumber" name="L11749" href="#L11749">11749</a>           <span class="jxr_string">"composite_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11750" href="#L11750">11750</a>     }
<a class="jxr_linenumber" name="L11751" href="#L11751">11751</a>     
<a class="jxr_linenumber" name="L11752" href="#L11752">11752</a>     {
<a class="jxr_linenumber" name="L11753" href="#L11753">11753</a>       Table fieldsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11754" href="#L11754">11754</a>           Field.TABLE_GROUPER_FIELDS);
<a class="jxr_linenumber" name="L11755" href="#L11755">11755</a>  
<a class="jxr_linenumber" name="L11756" href="#L11756">11756</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(fieldsTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11757" href="#L11757">11757</a>           Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11758" href="#L11758">11758</a>  
<a class="jxr_linenumber" name="L11759" href="#L11759">11759</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Field.TABLE_GROUPER_FIELDS,
<a class="jxr_linenumber" name="L11760" href="#L11760">11760</a>           <span class="jxr_string">"fields_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11761" href="#L11761">11761</a>     }
<a class="jxr_linenumber" name="L11762" href="#L11762">11762</a>     
<a class="jxr_linenumber" name="L11763" href="#L11763">11763</a>     {
<a class="jxr_linenumber" name="L11764" href="#L11764">11764</a>       Table groupsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L11765" href="#L11765">11765</a>           Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11766" href="#L11766">11766</a>  
<a class="jxr_linenumber" name="L11767" href="#L11767">11767</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11768" href="#L11768">11768</a>           Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11769" href="#L11769">11769</a>       
<a class="jxr_linenumber" name="L11770" href="#L11770">11770</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Group.TABLE_GROUPER_GROUPS,
<a class="jxr_linenumber" name="L11771" href="#L11771">11771</a>           <span class="jxr_string">"group_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11772" href="#L11772">11772</a>     }
<a class="jxr_linenumber" name="L11773" href="#L11773">11773</a>     
<a class="jxr_linenumber" name="L11774" href="#L11774">11774</a>     {
<a class="jxr_linenumber" name="L11775" href="#L11775">11775</a>       Table groupsTypesTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L11776" href="#L11776">11776</a>           GroupTypeTuple.TABLE_OLD_GROUPER_GROUPS_TYPES, false);
<a class="jxr_linenumber" name="L11777" href="#L11777">11777</a>  
<a class="jxr_linenumber" name="L11778" href="#L11778">11778</a>       <strong class="jxr_keyword">if</strong> (groupsTypesTable != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L11779" href="#L11779">11779</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTypesTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11780" href="#L11780">11780</a>             Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11781" href="#L11781">11781</a>         
<a class="jxr_linenumber" name="L11782" href="#L11782">11782</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, GroupTypeTuple.TABLE_OLD_GROUPER_GROUPS_TYPES,
<a class="jxr_linenumber" name="L11783" href="#L11783">11783</a>             <span class="jxr_string">"grouptypetuple_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11784" href="#L11784">11784</a>       }
<a class="jxr_linenumber" name="L11785" href="#L11785">11785</a>     }
<a class="jxr_linenumber" name="L11786" href="#L11786">11786</a> 
<a class="jxr_linenumber" name="L11787" href="#L11787">11787</a>     {
<a class="jxr_linenumber" name="L11788" href="#L11788">11788</a>       Table membersTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L11789" href="#L11789">11789</a>           Member.TABLE_GROUPER_MEMBERS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11790" href="#L11790">11790</a>  
<a class="jxr_linenumber" name="L11791" href="#L11791">11791</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(membersTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11792" href="#L11792">11792</a>           Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11793" href="#L11793">11793</a>       
<a class="jxr_linenumber" name="L11794" href="#L11794">11794</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Member.TABLE_GROUPER_MEMBERS,
<a class="jxr_linenumber" name="L11795" href="#L11795">11795</a>           <span class="jxr_string">"member_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11796" href="#L11796">11796</a>     }
<a class="jxr_linenumber" name="L11797" href="#L11797">11797</a>     
<a class="jxr_linenumber" name="L11798" href="#L11798">11798</a>     {
<a class="jxr_linenumber" name="L11799" href="#L11799">11799</a>       Table membershipsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L11800" href="#L11800">11800</a>           Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11801" href="#L11801">11801</a>  
<a class="jxr_linenumber" name="L11802" href="#L11802">11802</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11803" href="#L11803">11803</a>           Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11804" href="#L11804">11804</a>       
<a class="jxr_linenumber" name="L11805" href="#L11805">11805</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Membership.TABLE_GROUPER_MEMBERSHIPS,
<a class="jxr_linenumber" name="L11806" href="#L11806">11806</a>           <span class="jxr_string">"membership_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11807" href="#L11807">11807</a>     }
<a class="jxr_linenumber" name="L11808" href="#L11808">11808</a>     
<a class="jxr_linenumber" name="L11809" href="#L11809">11809</a>     {
<a class="jxr_linenumber" name="L11810" href="#L11810">11810</a>       Table stemsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L11811" href="#L11811">11811</a>           Stem.TABLE_GROUPER_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11812" href="#L11812">11812</a>  
<a class="jxr_linenumber" name="L11813" href="#L11813">11813</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemsTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11814" href="#L11814">11814</a>           Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L11815" href="#L11815">11815</a>  
<a class="jxr_linenumber" name="L11816" href="#L11816">11816</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Stem.TABLE_GROUPER_STEMS,
<a class="jxr_linenumber" name="L11817" href="#L11817">11817</a>           <span class="jxr_string">"stem_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11818" href="#L11818">11818</a>     }
<a class="jxr_linenumber" name="L11819" href="#L11819">11819</a> 
<a class="jxr_linenumber" name="L11820" href="#L11820">11820</a>     {
<a class="jxr_linenumber" name="L11821" href="#L11821">11821</a>       Table typesTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L11822" href="#L11822">11822</a>           GroupType.TABLE_OLD_GROUPER_TYPES, false);
<a class="jxr_linenumber" name="L11823" href="#L11823">11823</a>  
<a class="jxr_linenumber" name="L11824" href="#L11824">11824</a>       <strong class="jxr_keyword">if</strong> (typesTable != <strong class="jxr_keyword">null</strong>) {
<a class="jxr_linenumber" name="L11825" href="#L11825">11825</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(typesTable, COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L11826" href="#L11826">11826</a>             Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L11827" href="#L11827">11827</a>    
<a class="jxr_linenumber" name="L11828" href="#L11828">11828</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, GroupType.TABLE_OLD_GROUPER_TYPES,
<a class="jxr_linenumber" name="L11829" href="#L11829">11829</a>             <span class="jxr_string">"type_context_idx"</span>, false, COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L11830" href="#L11830">11830</a>       }
<a class="jxr_linenumber" name="L11831" href="#L11831">11831</a>     }
<a class="jxr_linenumber" name="L11832" href="#L11832">11832</a>   }
<a class="jxr_linenumber" name="L11833" href="#L11833">11833</a> 
<a class="jxr_linenumber" name="L11834" href="#L11834">11834</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11835" href="#L11835">11835</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11836" href="#L11836">11836</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean </em>
<a class="jxr_linenumber" name="L11837" href="#L11837">11837</a> <em class="jxr_javadoccomment">   * @param requireNewMembershipColumns </em>
<a class="jxr_linenumber" name="L11838" href="#L11838">11838</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11839" href="#L11839">11839</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> runMembershipAndGroupSetConversion(Database database, <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean,
<a class="jxr_linenumber" name="L11840" href="#L11840">11840</a>       <strong class="jxr_keyword">boolean</strong> requireNewMembershipColumns) {
<a class="jxr_linenumber" name="L11841" href="#L11841">11841</a> 
<a class="jxr_linenumber" name="L11842" href="#L11842">11842</a>     Table membershipsTable = GrouperDdlUtils.ddlutilsFindTable(database, 
<a class="jxr_linenumber" name="L11843" href="#L11843">11843</a>         Membership.TABLE_GROUPER_MEMBERSHIPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11844" href="#L11844">11844</a>     GrouperDdlUtils.ddlutilsDropIndexes(membershipsTable, Membership.COLUMN_VIA_ID);
<a class="jxr_linenumber" name="L11845" href="#L11845">11845</a>     GrouperDdlUtils.ddlutilsDropIndexes(membershipsTable, Membership.COLUMN_OWNER_ID);
<a class="jxr_linenumber" name="L11846" href="#L11846">11846</a>     GrouperDdlUtils.ddlutilsDropIndexes(membershipsTable, Membership.COLUMN_DEPTH);
<a class="jxr_linenumber" name="L11847" href="#L11847">11847</a>     GrouperDdlUtils.ddlutilsDropIndexes(membershipsTable, Membership.COLUMN_PARENT_MEMBERSHIP);
<a class="jxr_linenumber" name="L11848" href="#L11848">11848</a>         
<a class="jxr_linenumber" name="L11849" href="#L11849">11849</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_OWNER_GROUP_ID, 
<a class="jxr_linenumber" name="L11850" href="#L11850">11850</a>         Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11851" href="#L11851">11851</a>   
<a class="jxr_linenumber" name="L11852" href="#L11852">11852</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11853" href="#L11853">11853</a>         <span class="jxr_string">"membership_owner_group_idx"</span>, false, Membership.COLUMN_OWNER_GROUP_ID);
<a class="jxr_linenumber" name="L11854" href="#L11854">11854</a> 
<a class="jxr_linenumber" name="L11855" href="#L11855">11855</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_OWNER_STEM_ID, 
<a class="jxr_linenumber" name="L11856" href="#L11856">11856</a>         Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11857" href="#L11857">11857</a>     
<a class="jxr_linenumber" name="L11858" href="#L11858">11858</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11859" href="#L11859">11859</a>         <span class="jxr_string">"membership_owner_stem_idx"</span>, false, Membership.COLUMN_OWNER_STEM_ID);
<a class="jxr_linenumber" name="L11860" href="#L11860">11860</a>     
<a class="jxr_linenumber" name="L11861" href="#L11861">11861</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_OWNER_ATTR_DEF_ID, 
<a class="jxr_linenumber" name="L11862" href="#L11862">11862</a>         Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11863" href="#L11863">11863</a>   
<a class="jxr_linenumber" name="L11864" href="#L11864">11864</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11865" href="#L11865">11865</a>         <span class="jxr_string">"membership_owner_attr_idx"</span>, false, Membership.COLUMN_OWNER_ATTR_DEF_ID);
<a class="jxr_linenumber" name="L11866" href="#L11866">11866</a> 
<a class="jxr_linenumber" name="L11867" href="#L11867">11867</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable, Membership.COLUMN_VIA_COMPOSITE_ID, 
<a class="jxr_linenumber" name="L11868" href="#L11868">11868</a>         Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L11869" href="#L11869">11869</a> 
<a class="jxr_linenumber" name="L11870" href="#L11870">11870</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11871" href="#L11871">11871</a>         <span class="jxr_string">"membership_via_composite_idx"</span>, false, Membership.COLUMN_VIA_COMPOSITE_ID);
<a class="jxr_linenumber" name="L11872" href="#L11872">11872</a>     
<a class="jxr_linenumber" name="L11873" href="#L11873">11873</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11874" href="#L11874">11874</a>         <span class="jxr_string">"membership_member_cvia_idx"</span>, false, <span class="jxr_string">"member_id"</span>, Membership.COLUMN_VIA_COMPOSITE_ID);
<a class="jxr_linenumber" name="L11875" href="#L11875">11875</a>     
<a class="jxr_linenumber" name="L11876" href="#L11876">11876</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11877" href="#L11877">11877</a>         <span class="jxr_string">"membership_gowner_member_idx"</span>, false, Membership.COLUMN_OWNER_GROUP_ID, <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L11878" href="#L11878">11878</a>         <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L11879" href="#L11879">11879</a>     
<a class="jxr_linenumber" name="L11880" href="#L11880">11880</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11881" href="#L11881">11881</a>         <span class="jxr_string">"membership_sowner_member_idx"</span>, false, Membership.COLUMN_OWNER_STEM_ID, <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L11882" href="#L11882">11882</a>         <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L11883" href="#L11883">11883</a>     
<a class="jxr_linenumber" name="L11884" href="#L11884">11884</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11885" href="#L11885">11885</a>         <span class="jxr_string">"membership_aowner_member_idx"</span>, false, Membership.COLUMN_OWNER_ATTR_DEF_ID, <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L11886" href="#L11886">11886</a>         <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L11887" href="#L11887">11887</a>     
<a class="jxr_linenumber" name="L11888" href="#L11888">11888</a>     <em class="jxr_comment">// add columns for membership expiration</em>
<a class="jxr_linenumber" name="L11889" href="#L11889">11889</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable,
<a class="jxr_linenumber" name="L11890" href="#L11890">11890</a>         Membership.COLUMN_ENABLED, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, requireNewMembershipColumns, <span class="jxr_string">"T"</span>);
<a class="jxr_linenumber" name="L11891" href="#L11891">11891</a>     
<a class="jxr_linenumber" name="L11892" href="#L11892">11892</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable,
<a class="jxr_linenumber" name="L11893" href="#L11893">11893</a>         Membership.COLUMN_ENABLED_TIMESTAMP, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L11894" href="#L11894">11894</a>     
<a class="jxr_linenumber" name="L11895" href="#L11895">11895</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(membershipsTable,
<a class="jxr_linenumber" name="L11896" href="#L11896">11896</a>         Membership.COLUMN_DISABLED_TIMESTAMP, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L11897" href="#L11897">11897</a>     
<a class="jxr_linenumber" name="L11898" href="#L11898">11898</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11899" href="#L11899">11899</a>         <span class="jxr_string">"membership_enabled_idx"</span>, false, Membership.COLUMN_ENABLED);
<a class="jxr_linenumber" name="L11900" href="#L11900">11900</a>     
<a class="jxr_linenumber" name="L11901" href="#L11901">11901</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11902" href="#L11902">11902</a>         <span class="jxr_string">"membership_enabled_time_idx"</span>, false, Membership.COLUMN_ENABLED_TIMESTAMP);
<a class="jxr_linenumber" name="L11903" href="#L11903">11903</a>     
<a class="jxr_linenumber" name="L11904" href="#L11904">11904</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L11905" href="#L11905">11905</a>         <span class="jxr_string">"membership_disabled_time_idx"</span>, false, Membership.COLUMN_DISABLED_TIMESTAMP);
<a class="jxr_linenumber" name="L11906" href="#L11906">11906</a>     
<a class="jxr_linenumber" name="L11907" href="#L11907">11907</a>     addGroupSetTable(database, ddlVersionBean);
<a class="jxr_linenumber" name="L11908" href="#L11908">11908</a>   }
<a class="jxr_linenumber" name="L11909" href="#L11909">11909</a> 
<a class="jxr_linenumber" name="L11910" href="#L11910">11910</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L11911" href="#L11911">11911</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L11912" href="#L11912">11912</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L11913" href="#L11913">11913</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L11914" href="#L11914">11914</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L11915" href="#L11915">11915</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addGroupSetTable(Database database, <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L11916" href="#L11916">11916</a>     Table grouperGroupSet = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L11917" href="#L11917">11917</a>         GroupSet.TABLE_GROUPER_GROUP_SET);
<a class="jxr_linenumber" name="L11918" href="#L11918">11918</a>     
<a class="jxr_linenumber" name="L11919" href="#L11919">11919</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L11920" href="#L11920">11920</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11921" href="#L11921">11921</a>         
<a class="jxr_linenumber" name="L11922" href="#L11922">11922</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"owner_attr_def_id"</span>,
<a class="jxr_linenumber" name="L11923" href="#L11923">11923</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11924" href="#L11924">11924</a> 
<a class="jxr_linenumber" name="L11925" href="#L11925">11925</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"owner_attr_def_id_null"</span>,
<a class="jxr_linenumber" name="L11926" href="#L11926">11926</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>, GroupSet.nullColumnValue);
<a class="jxr_linenumber" name="L11927" href="#L11927">11927</a>     
<a class="jxr_linenumber" name="L11928" href="#L11928">11928</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"owner_group_id"</span>,
<a class="jxr_linenumber" name="L11929" href="#L11929">11929</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11930" href="#L11930">11930</a> 
<a class="jxr_linenumber" name="L11931" href="#L11931">11931</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"owner_group_id_null"</span>,
<a class="jxr_linenumber" name="L11932" href="#L11932">11932</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>, GroupSet.nullColumnValue);
<a class="jxr_linenumber" name="L11933" href="#L11933">11933</a>     
<a class="jxr_linenumber" name="L11934" href="#L11934">11934</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"owner_stem_id"</span>,
<a class="jxr_linenumber" name="L11935" href="#L11935">11935</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11936" href="#L11936">11936</a>     
<a class="jxr_linenumber" name="L11937" href="#L11937">11937</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"owner_stem_id_null"</span>,
<a class="jxr_linenumber" name="L11938" href="#L11938">11938</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>, GroupSet.nullColumnValue);
<a class="jxr_linenumber" name="L11939" href="#L11939">11939</a>     
<a class="jxr_linenumber" name="L11940" href="#L11940">11940</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"member_attr_def_id"</span>,
<a class="jxr_linenumber" name="L11941" href="#L11941">11941</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11942" href="#L11942">11942</a>     
<a class="jxr_linenumber" name="L11943" href="#L11943">11943</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"member_group_id"</span>,
<a class="jxr_linenumber" name="L11944" href="#L11944">11944</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11945" href="#L11945">11945</a>     
<a class="jxr_linenumber" name="L11946" href="#L11946">11946</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"member_stem_id"</span>,
<a class="jxr_linenumber" name="L11947" href="#L11947">11947</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11948" href="#L11948">11948</a>     
<a class="jxr_linenumber" name="L11949" href="#L11949">11949</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L11950" href="#L11950">11950</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11951" href="#L11951">11951</a> 
<a class="jxr_linenumber" name="L11952" href="#L11952">11952</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"field_id"</span>,
<a class="jxr_linenumber" name="L11953" href="#L11953">11953</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11954" href="#L11954">11954</a>     
<a class="jxr_linenumber" name="L11955" href="#L11955">11955</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"member_field_id"</span>,
<a class="jxr_linenumber" name="L11956" href="#L11956">11956</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11957" href="#L11957">11957</a>     
<a class="jxr_linenumber" name="L11958" href="#L11958">11958</a>     addGroupSetOwnerIdColumn(database, ddlVersionBean);
<a class="jxr_linenumber" name="L11959" href="#L11959">11959</a>     
<a class="jxr_linenumber" name="L11960" href="#L11960">11960</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"mship_type"</span>,
<a class="jxr_linenumber" name="L11961" href="#L11961">11961</a>         Types.VARCHAR, <span class="jxr_string">"16"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11962" href="#L11962">11962</a>     
<a class="jxr_linenumber" name="L11963" href="#L11963">11963</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"depth"</span>,
<a class="jxr_linenumber" name="L11964" href="#L11964">11964</a>         Types.INTEGER, <span class="jxr_string">"11"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11965" href="#L11965">11965</a> 
<a class="jxr_linenumber" name="L11966" href="#L11966">11966</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"via_group_id"</span>,
<a class="jxr_linenumber" name="L11967" href="#L11967">11967</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11968" href="#L11968">11968</a>     
<a class="jxr_linenumber" name="L11969" href="#L11969">11969</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"parent_id"</span>,
<a class="jxr_linenumber" name="L11970" href="#L11970">11970</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11971" href="#L11971">11971</a> 
<a class="jxr_linenumber" name="L11972" href="#L11972">11972</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"creator_id"</span>,
<a class="jxr_linenumber" name="L11973" href="#L11973">11973</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11974" href="#L11974">11974</a> 
<a class="jxr_linenumber" name="L11975" href="#L11975">11975</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"create_time"</span>,
<a class="jxr_linenumber" name="L11976" href="#L11976">11976</a>         Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L11977" href="#L11977">11977</a>     
<a class="jxr_linenumber" name="L11978" href="#L11978">11978</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"context_id"</span>, 
<a class="jxr_linenumber" name="L11979" href="#L11979">11979</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L11980" href="#L11980">11980</a>     
<a class="jxr_linenumber" name="L11981" href="#L11981">11981</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, <span class="jxr_string">"hibernate_version_number"</span>, 
<a class="jxr_linenumber" name="L11982" href="#L11982">11982</a>         Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L11983" href="#L11983">11983</a>     
<a class="jxr_linenumber" name="L11984" href="#L11984">11984</a>     <em class="jxr_comment">// field_id doesn't need to be in the unique index, but i'm adding it so that we can</em>
<a class="jxr_linenumber" name="L11985" href="#L11985">11985</a>     <em class="jxr_comment">// set parent_id to null before removing self groupSets without getting a constraint</em>
<a class="jxr_linenumber" name="L11986" href="#L11986">11986</a>     <em class="jxr_comment">// violiations.</em>
<a class="jxr_linenumber" name="L11987" href="#L11987">11987</a>     <em class="jxr_comment">// Also having a member_id, field_id index seems to be helpful in Oracle and MySQL when you</em>
<a class="jxr_linenumber" name="L11988" href="#L11988">11988</a>     <em class="jxr_comment">// have a member with a lot of effective privileges.</em>
<a class="jxr_linenumber" name="L11989" href="#L11989">11989</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L11990" href="#L11990">11990</a>         <span class="jxr_string">"group_set_uniq_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"member_id"</span>, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"owner_id"</span>, <span class="jxr_string">"parent_id"</span>, <span class="jxr_string">"mship_type"</span>);
<a class="jxr_linenumber" name="L11991" href="#L11991">11991</a>     
<a class="jxr_linenumber" name="L11992" href="#L11992">11992</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L11993" href="#L11993">11993</a>         <span class="jxr_string">"group_set_creator_idx"</span>, false, <span class="jxr_string">"creator_id"</span>);
<a class="jxr_linenumber" name="L11994" href="#L11994">11994</a>     
<a class="jxr_linenumber" name="L11995" href="#L11995">11995</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L11996" href="#L11996">11996</a>         <span class="jxr_string">"group_set_parent_idx"</span>, false, <span class="jxr_string">"parent_id"</span>);
<a class="jxr_linenumber" name="L11997" href="#L11997">11997</a>     
<a class="jxr_linenumber" name="L11998" href="#L11998">11998</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L11999" href="#L11999">11999</a>         <span class="jxr_string">"group_set_via_group_idx"</span>, false, <span class="jxr_string">"via_group_id"</span>);
<a class="jxr_linenumber" name="L12000" href="#L12000">12000</a>     
<a class="jxr_linenumber" name="L12001" href="#L12001">12001</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12002" href="#L12002">12002</a>         <span class="jxr_string">"group_set_context_idx"</span>, false, <span class="jxr_string">"context_id"</span>);
<a class="jxr_linenumber" name="L12003" href="#L12003">12003</a>     
<a class="jxr_linenumber" name="L12004" href="#L12004">12004</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12005" href="#L12005">12005</a>         <span class="jxr_string">"group_set_gmember_idx"</span>, false, <span class="jxr_string">"member_group_id"</span>);
<a class="jxr_linenumber" name="L12006" href="#L12006">12006</a>     
<a class="jxr_linenumber" name="L12007" href="#L12007">12007</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12008" href="#L12008">12008</a>         <span class="jxr_string">"group_set_smember_idx"</span>, false, <span class="jxr_string">"member_stem_id"</span>);
<a class="jxr_linenumber" name="L12009" href="#L12009">12009</a>     
<a class="jxr_linenumber" name="L12010" href="#L12010">12010</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12011" href="#L12011">12011</a>         <span class="jxr_string">"group_set_amember_idx"</span>, false, <span class="jxr_string">"member_attr_def_id"</span>);
<a class="jxr_linenumber" name="L12012" href="#L12012">12012</a>     
<a class="jxr_linenumber" name="L12013" href="#L12013">12013</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12014" href="#L12014">12014</a>         <span class="jxr_string">"group_set_gowner_field_idx"</span>, false, <span class="jxr_string">"owner_group_id"</span>, <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L12015" href="#L12015">12015</a>     
<a class="jxr_linenumber" name="L12016" href="#L12016">12016</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12017" href="#L12017">12017</a>         <span class="jxr_string">"group_set_sowner_field_idx"</span>, false, <span class="jxr_string">"owner_stem_id"</span>, <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L12018" href="#L12018">12018</a>     
<a class="jxr_linenumber" name="L12019" href="#L12019">12019</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12020" href="#L12020">12020</a>         <span class="jxr_string">"group_set_aowner_field_idx"</span>, false, <span class="jxr_string">"owner_attr_def_id"</span>, <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L12021" href="#L12021">12021</a>     
<a class="jxr_linenumber" name="L12022" href="#L12022">12022</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12023" href="#L12023">12023</a>         <span class="jxr_string">"group_set_gowner_member_idx"</span>, false, <span class="jxr_string">"owner_group_id"</span>, <span class="jxr_string">"member_group_id"</span>, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"depth"</span>);
<a class="jxr_linenumber" name="L12024" href="#L12024">12024</a>     
<a class="jxr_linenumber" name="L12025" href="#L12025">12025</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12026" href="#L12026">12026</a>         <span class="jxr_string">"group_set_sowner_member_idx"</span>, false, <span class="jxr_string">"owner_stem_id"</span>, <span class="jxr_string">"member_stem_id"</span>, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"depth"</span>);
<a class="jxr_linenumber" name="L12027" href="#L12027">12027</a>     
<a class="jxr_linenumber" name="L12028" href="#L12028">12028</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12029" href="#L12029">12029</a>         <span class="jxr_string">"group_set_aowner_member_idx"</span>, false, <span class="jxr_string">"owner_attr_def_id"</span>, <span class="jxr_string">"member_attr_def_id"</span>, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"depth"</span>);
<a class="jxr_linenumber" name="L12030" href="#L12030">12030</a>   }
<a class="jxr_linenumber" name="L12031" href="#L12031">12031</a> 
<a class="jxr_linenumber" name="L12032" href="#L12032">12032</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L12033" href="#L12033">12033</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L12034" href="#L12034">12034</a> <em class="jxr_javadoccomment">   * @param membershipsTable</em>
<a class="jxr_linenumber" name="L12035" href="#L12035">12035</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L12036" href="#L12036">12036</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addMembershipFieldIndexes(Database database, Table membershipsTable) {
<a class="jxr_linenumber" name="L12037" href="#L12037">12037</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L12038" href="#L12038">12038</a>         <span class="jxr_string">"membership_member_list_idx"</span>, false, <span class="jxr_string">"member_id"</span>, <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L12039" href="#L12039">12039</a> 
<a class="jxr_linenumber" name="L12040" href="#L12040">12040</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L12041" href="#L12041">12041</a>         <span class="jxr_string">"membership_gowner_field_type_idx"</span>, false, Membership.COLUMN_OWNER_GROUP_ID, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"mship_type"</span>);
<a class="jxr_linenumber" name="L12042" href="#L12042">12042</a> 
<a class="jxr_linenumber" name="L12043" href="#L12043">12043</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L12044" href="#L12044">12044</a>         <span class="jxr_string">"membership_sowner_field_type_idx"</span>, false, Membership.COLUMN_OWNER_STEM_ID, <span class="jxr_string">"field_id"</span>, <span class="jxr_string">"mship_type"</span>);
<a class="jxr_linenumber" name="L12045" href="#L12045">12045</a> 
<a class="jxr_linenumber" name="L12046" href="#L12046">12046</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L12047" href="#L12047">12047</a>         <span class="jxr_string">"membership_gowner_member_idx"</span>, false, Membership.COLUMN_OWNER_GROUP_ID, <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L12048" href="#L12048">12048</a>         <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L12049" href="#L12049">12049</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L12050" href="#L12050">12050</a>         <span class="jxr_string">"membership_sowner_member_idx"</span>, false, Membership.COLUMN_OWNER_STEM_ID, <span class="jxr_string">"member_id"</span>,
<a class="jxr_linenumber" name="L12051" href="#L12051">12051</a>         <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L12052" href="#L12052">12052</a> 
<a class="jxr_linenumber" name="L12053" href="#L12053">12053</a>   }
<a class="jxr_linenumber" name="L12054" href="#L12054">12054</a>   
<a class="jxr_linenumber" name="L12055" href="#L12055">12055</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L12056" href="#L12056">12056</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L12057" href="#L12057">12057</a> <em class="jxr_javadoccomment">   * @param membershipsTable</em>
<a class="jxr_linenumber" name="L12058" href="#L12058">12058</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L12059" href="#L12059">12059</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addMembershipUniqueIndex(Database database, Table membershipsTable) {
<a class="jxr_linenumber" name="L12060" href="#L12060">12060</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, membershipsTable.getName(), 
<a class="jxr_linenumber" name="L12061" href="#L12061">12061</a>         <span class="jxr_string">"membership_uniq_idx"</span>, <strong class="jxr_keyword">true</strong>, Membership.COLUMN_OWNER_ID, Membership.COLUMN_MEMBER_ID, Membership.COLUMN_FIELD_ID);
<a class="jxr_linenumber" name="L12062" href="#L12062">12062</a>   }
<a class="jxr_linenumber" name="L12063" href="#L12063">12063</a> 
<a class="jxr_linenumber" name="L12064" href="#L12064">12064</a>   <em class="jxr_javadoccomment">/** logger */</em>
<a class="jxr_linenumber" name="L12065" href="#L12065">12065</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">final</strong> Log LOG = GrouperUtil.getLog(GrouperDdl.<strong class="jxr_keyword">class</strong>);
<a class="jxr_linenumber" name="L12066" href="#L12066">12066</a> 
<a class="jxr_linenumber" name="L12067" href="#L12067">12067</a>   <em class="jxr_javadoccomment">/** set to false when testing if shouldnt add the group columns e.g. name */</em>
<a class="jxr_linenumber" name="L12068" href="#L12068">12068</a>   <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> addGroupNameColumns = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L12069" href="#L12069">12069</a>   
<a class="jxr_linenumber" name="L12070" href="#L12070">12070</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L12071" href="#L12071">12071</a> <em class="jxr_javadoccomment">   * add group name columns if supposed to</em>
<a class="jxr_linenumber" name="L12072" href="#L12072">12072</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L12073" href="#L12073">12073</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L12074" href="#L12074">12074</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L12075" href="#L12075">12075</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addGroupNameColumns(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Database database) {
<a class="jxr_linenumber" name="L12076" href="#L12076">12076</a>     
<a class="jxr_linenumber" name="L12077" href="#L12077">12077</a>     <strong class="jxr_keyword">if</strong> (!addGroupNameColumns) {
<a class="jxr_linenumber" name="L12078" href="#L12078">12078</a>       <strong class="jxr_keyword">return</strong>;
<a class="jxr_linenumber" name="L12079" href="#L12079">12079</a>     }
<a class="jxr_linenumber" name="L12080" href="#L12080">12080</a> 
<a class="jxr_linenumber" name="L12081" href="#L12081">12081</a>     Table groupsTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12082" href="#L12082">12082</a>         Group.TABLE_GROUPER_GROUPS);
<a class="jxr_linenumber" name="L12083" href="#L12083">12083</a>     
<a class="jxr_linenumber" name="L12084" href="#L12084">12084</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"name"</span>, 
<a class="jxr_linenumber" name="L12085" href="#L12085">12085</a>         Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L12086" href="#L12086">12086</a> 
<a class="jxr_linenumber" name="L12087" href="#L12087">12087</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"display_name"</span>, 
<a class="jxr_linenumber" name="L12088" href="#L12088">12088</a>         Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L12089" href="#L12089">12089</a> 
<a class="jxr_linenumber" name="L12090" href="#L12090">12090</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"extension"</span>, 
<a class="jxr_linenumber" name="L12091" href="#L12091">12091</a>         Types.VARCHAR, <span class="jxr_string">"255"</span>, false, false);
<a class="jxr_linenumber" name="L12092" href="#L12092">12092</a>     
<a class="jxr_linenumber" name="L12093" href="#L12093">12093</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"display_extension"</span>, 
<a class="jxr_linenumber" name="L12094" href="#L12094">12094</a>         Types.VARCHAR, <span class="jxr_string">"255"</span>, false, false);
<a class="jxr_linenumber" name="L12095" href="#L12095">12095</a>     
<a class="jxr_linenumber" name="L12096" href="#L12096">12096</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupsTable, <span class="jxr_string">"description"</span>, 
<a class="jxr_linenumber" name="L12097" href="#L12097">12097</a>         Types.VARCHAR, <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L12098" href="#L12098">12098</a> 
<a class="jxr_linenumber" name="L12099" href="#L12099">12099</a>   }
<a class="jxr_linenumber" name="L12100" href="#L12100">12100</a>   
<a class="jxr_linenumber" name="L12101" href="#L12101">12101</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L12102" href="#L12102">12102</a> <em class="jxr_javadoccomment">   * add audit tables in v2 or when needed</em>
<a class="jxr_linenumber" name="L12103" href="#L12103">12103</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L12104" href="#L12104">12104</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L12105" href="#L12105">12105</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L12106" href="#L12106">12106</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addAuditTables(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Database database) {
<a class="jxr_linenumber" name="L12107" href="#L12107">12107</a>     {
<a class="jxr_linenumber" name="L12108" href="#L12108">12108</a>       Table grouperAuditTypeTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12109" href="#L12109">12109</a>           AuditType.TABLE_GROUPER_AUDIT_TYPE);
<a class="jxr_linenumber" name="L12110" href="#L12110">12110</a>       
<a class="jxr_linenumber" name="L12111" href="#L12111">12111</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"action_name"</span>, 
<a class="jxr_linenumber" name="L12112" href="#L12112">12112</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12113" href="#L12113">12113</a> 
<a class="jxr_linenumber" name="L12114" href="#L12114">12114</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"audit_category"</span>, 
<a class="jxr_linenumber" name="L12115" href="#L12115">12115</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12116" href="#L12116">12116</a>       
<a class="jxr_linenumber" name="L12117" href="#L12117">12117</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"context_id"</span>, 
<a class="jxr_linenumber" name="L12118" href="#L12118">12118</a>           Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L12119" href="#L12119">12119</a> 
<a class="jxr_linenumber" name="L12120" href="#L12120">12120</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"created_on"</span>, 
<a class="jxr_linenumber" name="L12121" href="#L12121">12121</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12122" href="#L12122">12122</a> 
<a class="jxr_linenumber" name="L12123" href="#L12123">12123</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"hibernate_version_number"</span>, 
<a class="jxr_linenumber" name="L12124" href="#L12124">12124</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12125" href="#L12125">12125</a> 
<a class="jxr_linenumber" name="L12126" href="#L12126">12126</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L12127" href="#L12127">12127</a>           Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12128" href="#L12128">12128</a> 
<a class="jxr_linenumber" name="L12129" href="#L12129">12129</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_int01"</span>, 
<a class="jxr_linenumber" name="L12130" href="#L12130">12130</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12131" href="#L12131">12131</a>     
<a class="jxr_linenumber" name="L12132" href="#L12132">12132</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_int02"</span>, 
<a class="jxr_linenumber" name="L12133" href="#L12133">12133</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12134" href="#L12134">12134</a>     
<a class="jxr_linenumber" name="L12135" href="#L12135">12135</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_int03"</span>, 
<a class="jxr_linenumber" name="L12136" href="#L12136">12136</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12137" href="#L12137">12137</a>     
<a class="jxr_linenumber" name="L12138" href="#L12138">12138</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_int04"</span>, 
<a class="jxr_linenumber" name="L12139" href="#L12139">12139</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12140" href="#L12140">12140</a>     
<a class="jxr_linenumber" name="L12141" href="#L12141">12141</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_int05"</span>, 
<a class="jxr_linenumber" name="L12142" href="#L12142">12142</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12143" href="#L12143">12143</a>     
<a class="jxr_linenumber" name="L12144" href="#L12144">12144</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_string01"</span>, 
<a class="jxr_linenumber" name="L12145" href="#L12145">12145</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12146" href="#L12146">12146</a>     
<a class="jxr_linenumber" name="L12147" href="#L12147">12147</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_string02"</span>, 
<a class="jxr_linenumber" name="L12148" href="#L12148">12148</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12149" href="#L12149">12149</a>     
<a class="jxr_linenumber" name="L12150" href="#L12150">12150</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_string03"</span>, 
<a class="jxr_linenumber" name="L12151" href="#L12151">12151</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12152" href="#L12152">12152</a>     
<a class="jxr_linenumber" name="L12153" href="#L12153">12153</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_string04"</span>, 
<a class="jxr_linenumber" name="L12154" href="#L12154">12154</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12155" href="#L12155">12155</a>     
<a class="jxr_linenumber" name="L12156" href="#L12156">12156</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_string05"</span>, 
<a class="jxr_linenumber" name="L12157" href="#L12157">12157</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12158" href="#L12158">12158</a>     
<a class="jxr_linenumber" name="L12159" href="#L12159">12159</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_string06"</span>, 
<a class="jxr_linenumber" name="L12160" href="#L12160">12160</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12161" href="#L12161">12161</a>     
<a class="jxr_linenumber" name="L12162" href="#L12162">12162</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_string07"</span>, 
<a class="jxr_linenumber" name="L12163" href="#L12163">12163</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12164" href="#L12164">12164</a>     
<a class="jxr_linenumber" name="L12165" href="#L12165">12165</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"label_string08"</span>, 
<a class="jxr_linenumber" name="L12166" href="#L12166">12166</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12167" href="#L12167">12167</a>     
<a class="jxr_linenumber" name="L12168" href="#L12168">12168</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditTypeTable, <span class="jxr_string">"last_updated"</span>, 
<a class="jxr_linenumber" name="L12169" href="#L12169">12169</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12170" href="#L12170">12170</a>       
<a class="jxr_linenumber" name="L12171" href="#L12171">12171</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperAuditTypeTable.getName(), 
<a class="jxr_linenumber" name="L12172" href="#L12172">12172</a>           <span class="jxr_string">"audit_type_category_type_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"audit_category"</span>, <span class="jxr_string">"action_name"</span>);
<a class="jxr_linenumber" name="L12173" href="#L12173">12173</a> 
<a class="jxr_linenumber" name="L12174" href="#L12174">12174</a>     }
<a class="jxr_linenumber" name="L12175" href="#L12175">12175</a>     
<a class="jxr_linenumber" name="L12176" href="#L12176">12176</a>     {
<a class="jxr_linenumber" name="L12177" href="#L12177">12177</a>       Table grouperAuditEntryTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12178" href="#L12178">12178</a>           AuditEntry.TABLE_GROUPER_AUDIT_ENTRY);
<a class="jxr_linenumber" name="L12179" href="#L12179">12179</a>       
<a class="jxr_linenumber" name="L12180" href="#L12180">12180</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12181" href="#L12181">12181</a>           <span class="jxr_string">"act_as_member_id"</span>, Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L12182" href="#L12182">12182</a> 
<a class="jxr_linenumber" name="L12183" href="#L12183">12183</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12184" href="#L12184">12184</a>           <span class="jxr_string">"audit_type_id"</span>, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12185" href="#L12185">12185</a> 
<a class="jxr_linenumber" name="L12186" href="#L12186">12186</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12187" href="#L12187">12187</a>           <span class="jxr_string">"context_id"</span>, Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L12188" href="#L12188">12188</a> 
<a class="jxr_linenumber" name="L12189" href="#L12189">12189</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12190" href="#L12190">12190</a>           <span class="jxr_string">"created_on"</span>, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12191" href="#L12191">12191</a> 
<a class="jxr_linenumber" name="L12192" href="#L12192">12192</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12193" href="#L12193">12193</a>           <span class="jxr_string">"description"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12194" href="#L12194">12194</a> 
<a class="jxr_linenumber" name="L12195" href="#L12195">12195</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12196" href="#L12196">12196</a>           <span class="jxr_string">"env_name"</span>, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12197" href="#L12197">12197</a> 
<a class="jxr_linenumber" name="L12198" href="#L12198">12198</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12199" href="#L12199">12199</a>           <span class="jxr_string">"grouper_engine"</span>, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12200" href="#L12200">12200</a> 
<a class="jxr_linenumber" name="L12201" href="#L12201">12201</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12202" href="#L12202">12202</a>           <span class="jxr_string">"grouper_version"</span>, Types.VARCHAR, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12203" href="#L12203">12203</a> 
<a class="jxr_linenumber" name="L12204" href="#L12204">12204</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12205" href="#L12205">12205</a>           <span class="jxr_string">"hibernate_version_number"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12206" href="#L12206">12206</a> 
<a class="jxr_linenumber" name="L12207" href="#L12207">12207</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12208" href="#L12208">12208</a>           <span class="jxr_string">"id"</span>, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12209" href="#L12209">12209</a> 
<a class="jxr_linenumber" name="L12210" href="#L12210">12210</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12211" href="#L12211">12211</a>           <span class="jxr_string">"int01"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12212" href="#L12212">12212</a> 
<a class="jxr_linenumber" name="L12213" href="#L12213">12213</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12214" href="#L12214">12214</a>           <span class="jxr_string">"int02"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12215" href="#L12215">12215</a> 
<a class="jxr_linenumber" name="L12216" href="#L12216">12216</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12217" href="#L12217">12217</a>           <span class="jxr_string">"int03"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12218" href="#L12218">12218</a> 
<a class="jxr_linenumber" name="L12219" href="#L12219">12219</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12220" href="#L12220">12220</a>           <span class="jxr_string">"int04"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12221" href="#L12221">12221</a> 
<a class="jxr_linenumber" name="L12222" href="#L12222">12222</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12223" href="#L12223">12223</a>           <span class="jxr_string">"int05"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12224" href="#L12224">12224</a> 
<a class="jxr_linenumber" name="L12225" href="#L12225">12225</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12226" href="#L12226">12226</a>           <span class="jxr_string">"last_updated"</span>, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12227" href="#L12227">12227</a> 
<a class="jxr_linenumber" name="L12228" href="#L12228">12228</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12229" href="#L12229">12229</a>           <span class="jxr_string">"logged_in_member_id"</span>, Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L12230" href="#L12230">12230</a> 
<a class="jxr_linenumber" name="L12231" href="#L12231">12231</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12232" href="#L12232">12232</a>           <span class="jxr_string">"server_host"</span>, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12233" href="#L12233">12233</a> 
<a class="jxr_linenumber" name="L12234" href="#L12234">12234</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12235" href="#L12235">12235</a>           <span class="jxr_string">"string01"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12236" href="#L12236">12236</a> 
<a class="jxr_linenumber" name="L12237" href="#L12237">12237</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12238" href="#L12238">12238</a>           <span class="jxr_string">"string02"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12239" href="#L12239">12239</a> 
<a class="jxr_linenumber" name="L12240" href="#L12240">12240</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12241" href="#L12241">12241</a>           <span class="jxr_string">"string03"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12242" href="#L12242">12242</a> 
<a class="jxr_linenumber" name="L12243" href="#L12243">12243</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12244" href="#L12244">12244</a>           <span class="jxr_string">"string04"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12245" href="#L12245">12245</a> 
<a class="jxr_linenumber" name="L12246" href="#L12246">12246</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12247" href="#L12247">12247</a>           <span class="jxr_string">"string05"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12248" href="#L12248">12248</a> 
<a class="jxr_linenumber" name="L12249" href="#L12249">12249</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12250" href="#L12250">12250</a>           <span class="jxr_string">"string06"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12251" href="#L12251">12251</a> 
<a class="jxr_linenumber" name="L12252" href="#L12252">12252</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12253" href="#L12253">12253</a>           <span class="jxr_string">"string07"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12254" href="#L12254">12254</a> 
<a class="jxr_linenumber" name="L12255" href="#L12255">12255</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12256" href="#L12256">12256</a>           <span class="jxr_string">"string08"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12257" href="#L12257">12257</a> 
<a class="jxr_linenumber" name="L12258" href="#L12258">12258</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12259" href="#L12259">12259</a>           <span class="jxr_string">"user_ip_address"</span>, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12260" href="#L12260">12260</a>       
<a class="jxr_linenumber" name="L12261" href="#L12261">12261</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12262" href="#L12262">12262</a>           <span class="jxr_string">"duration_microseconds"</span>, Types.BIGINT, <span class="jxr_string">"15"</span>, false, false); 
<a class="jxr_linenumber" name="L12263" href="#L12263">12263</a>       
<a class="jxr_linenumber" name="L12264" href="#L12264">12264</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12265" href="#L12265">12265</a>           <span class="jxr_string">"query_count"</span>, Types.INTEGER, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12266" href="#L12266">12266</a>       
<a class="jxr_linenumber" name="L12267" href="#L12267">12267</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperAuditEntryTable, 
<a class="jxr_linenumber" name="L12268" href="#L12268">12268</a>           <span class="jxr_string">"server_user_name"</span>, Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12269" href="#L12269">12269</a> 
<a class="jxr_linenumber" name="L12270" href="#L12270">12270</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperAuditEntryTable.getName(), 
<a class="jxr_linenumber" name="L12271" href="#L12271">12271</a>           <span class="jxr_string">"audit_entry_act_as_idx"</span>, false, <span class="jxr_string">"act_as_member_id"</span>);
<a class="jxr_linenumber" name="L12272" href="#L12272">12272</a>       
<a class="jxr_linenumber" name="L12273" href="#L12273">12273</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperAuditEntryTable.getName(),
<a class="jxr_linenumber" name="L12274" href="#L12274">12274</a>           <span class="jxr_string">"audit_entry_act_as_created_idx"</span>, false, <span class="jxr_string">"act_as_member_id"</span>, <span class="jxr_string">"created_on"</span>);
<a class="jxr_linenumber" name="L12275" href="#L12275">12275</a> 
<a class="jxr_linenumber" name="L12276" href="#L12276">12276</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperAuditEntryTable.getName(), 
<a class="jxr_linenumber" name="L12277" href="#L12277">12277</a>           <span class="jxr_string">"audit_entry_type_idx"</span>, false, <span class="jxr_string">"audit_type_id"</span>);
<a class="jxr_linenumber" name="L12278" href="#L12278">12278</a> 
<a class="jxr_linenumber" name="L12279" href="#L12279">12279</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperAuditEntryTable.getName(), 
<a class="jxr_linenumber" name="L12280" href="#L12280">12280</a>           <span class="jxr_string">"audit_entry_context_idx"</span>, false, <span class="jxr_string">"context_id"</span>);
<a class="jxr_linenumber" name="L12281" href="#L12281">12281</a> 
<a class="jxr_linenumber" name="L12282" href="#L12282">12282</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperAuditEntryTable.getName(), 
<a class="jxr_linenumber" name="L12283" href="#L12283">12283</a>           <span class="jxr_string">"audit_entry_logged_in_idx"</span>, false, <span class="jxr_string">"logged_in_member_id"</span>);
<a class="jxr_linenumber" name="L12284" href="#L12284">12284</a> 
<a class="jxr_linenumber" name="L12285" href="#L12285">12285</a>       <strong class="jxr_keyword">if</strong> (!ddlVersionBean.isSqlServer()) {
<a class="jxr_linenumber" name="L12286" href="#L12286">12286</a>         <em class="jxr_comment">//do 8 string indexes, probably dont need them on the other string cols</em>
<a class="jxr_linenumber" name="L12287" href="#L12287">12287</a>         <strong class="jxr_keyword">for</strong> (<strong class="jxr_keyword">int</strong> i=1;i&lt;=8;i++) {
<a class="jxr_linenumber" name="L12288" href="#L12288">12288</a>           <em class="jxr_comment">//see if we have a custom script here, do this since some versions of mysql cant handle indexes on columns that large</em>
<a class="jxr_linenumber" name="L12289" href="#L12289">12289</a>           String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX audit_entry_string0"</span> + i + <span class="jxr_string">"_idx "</span> +
<a class="jxr_linenumber" name="L12290" href="#L12290">12290</a>               <span class="jxr_string">"ON grouper_audit_entry (string0"</span> + i + <span class="jxr_string">"(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L12291" href="#L12291">12291</a>           
<a class="jxr_linenumber" name="L12292" href="#L12292">12292</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, grouperAuditEntryTable.getName(), 
<a class="jxr_linenumber" name="L12293" href="#L12293">12293</a>               <span class="jxr_string">"audit_entry_string0"</span> + i + <span class="jxr_string">"_idx"</span>, scriptOverride, false, <span class="jxr_string">"string0"</span> + i);
<a class="jxr_linenumber" name="L12294" href="#L12294">12294</a>           
<a class="jxr_linenumber" name="L12295" href="#L12295">12295</a>         }
<a class="jxr_linenumber" name="L12296" href="#L12296">12296</a>       }      
<a class="jxr_linenumber" name="L12297" href="#L12297">12297</a>     }
<a class="jxr_linenumber" name="L12298" href="#L12298">12298</a> 
<a class="jxr_linenumber" name="L12299" href="#L12299">12299</a>   }
<a class="jxr_linenumber" name="L12300" href="#L12300">12300</a>   
<a class="jxr_linenumber" name="L12301" href="#L12301">12301</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L12302" href="#L12302">12302</a> <em class="jxr_javadoccomment">   * add change log tables in v2 or when needed</em>
<a class="jxr_linenumber" name="L12303" href="#L12303">12303</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L12304" href="#L12304">12304</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L12305" href="#L12305">12305</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L12306" href="#L12306">12306</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addChangeLogTables(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Database database) {
<a class="jxr_linenumber" name="L12307" href="#L12307">12307</a>     {
<a class="jxr_linenumber" name="L12308" href="#L12308">12308</a>       Table grouperChangeLogTypeTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12309" href="#L12309">12309</a>           ChangeLogType.TABLE_GROUPER_CHANGE_LOG_TYPE);
<a class="jxr_linenumber" name="L12310" href="#L12310">12310</a>       
<a class="jxr_linenumber" name="L12311" href="#L12311">12311</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"action_name"</span>, 
<a class="jxr_linenumber" name="L12312" href="#L12312">12312</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12313" href="#L12313">12313</a> 
<a class="jxr_linenumber" name="L12314" href="#L12314">12314</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"change_log_category"</span>, 
<a class="jxr_linenumber" name="L12315" href="#L12315">12315</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12316" href="#L12316">12316</a>       
<a class="jxr_linenumber" name="L12317" href="#L12317">12317</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"context_id"</span>, 
<a class="jxr_linenumber" name="L12318" href="#L12318">12318</a>           Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L12319" href="#L12319">12319</a> 
<a class="jxr_linenumber" name="L12320" href="#L12320">12320</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"created_on"</span>, 
<a class="jxr_linenumber" name="L12321" href="#L12321">12321</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12322" href="#L12322">12322</a> 
<a class="jxr_linenumber" name="L12323" href="#L12323">12323</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"hibernate_version_number"</span>, 
<a class="jxr_linenumber" name="L12324" href="#L12324">12324</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12325" href="#L12325">12325</a> 
<a class="jxr_linenumber" name="L12326" href="#L12326">12326</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L12327" href="#L12327">12327</a>           Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12328" href="#L12328">12328</a> 
<a class="jxr_linenumber" name="L12329" href="#L12329">12329</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string01"</span>, 
<a class="jxr_linenumber" name="L12330" href="#L12330">12330</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12331" href="#L12331">12331</a>     
<a class="jxr_linenumber" name="L12332" href="#L12332">12332</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string02"</span>, 
<a class="jxr_linenumber" name="L12333" href="#L12333">12333</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12334" href="#L12334">12334</a>     
<a class="jxr_linenumber" name="L12335" href="#L12335">12335</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string03"</span>, 
<a class="jxr_linenumber" name="L12336" href="#L12336">12336</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12337" href="#L12337">12337</a>     
<a class="jxr_linenumber" name="L12338" href="#L12338">12338</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string04"</span>, 
<a class="jxr_linenumber" name="L12339" href="#L12339">12339</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12340" href="#L12340">12340</a>     
<a class="jxr_linenumber" name="L12341" href="#L12341">12341</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string05"</span>, 
<a class="jxr_linenumber" name="L12342" href="#L12342">12342</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12343" href="#L12343">12343</a>     
<a class="jxr_linenumber" name="L12344" href="#L12344">12344</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string06"</span>, 
<a class="jxr_linenumber" name="L12345" href="#L12345">12345</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12346" href="#L12346">12346</a>     
<a class="jxr_linenumber" name="L12347" href="#L12347">12347</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string07"</span>, 
<a class="jxr_linenumber" name="L12348" href="#L12348">12348</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12349" href="#L12349">12349</a>     
<a class="jxr_linenumber" name="L12350" href="#L12350">12350</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string08"</span>, 
<a class="jxr_linenumber" name="L12351" href="#L12351">12351</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12352" href="#L12352">12352</a>     
<a class="jxr_linenumber" name="L12353" href="#L12353">12353</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string09"</span>, 
<a class="jxr_linenumber" name="L12354" href="#L12354">12354</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12355" href="#L12355">12355</a>     
<a class="jxr_linenumber" name="L12356" href="#L12356">12356</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string10"</span>, 
<a class="jxr_linenumber" name="L12357" href="#L12357">12357</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12358" href="#L12358">12358</a>     
<a class="jxr_linenumber" name="L12359" href="#L12359">12359</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string11"</span>, 
<a class="jxr_linenumber" name="L12360" href="#L12360">12360</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12361" href="#L12361">12361</a>     
<a class="jxr_linenumber" name="L12362" href="#L12362">12362</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"label_string12"</span>, 
<a class="jxr_linenumber" name="L12363" href="#L12363">12363</a>           Types.VARCHAR, <span class="jxr_string">"50"</span>, false, false); 
<a class="jxr_linenumber" name="L12364" href="#L12364">12364</a>     
<a class="jxr_linenumber" name="L12365" href="#L12365">12365</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTypeTable, <span class="jxr_string">"last_updated"</span>, 
<a class="jxr_linenumber" name="L12366" href="#L12366">12366</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12367" href="#L12367">12367</a>       
<a class="jxr_linenumber" name="L12368" href="#L12368">12368</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperChangeLogTypeTable.getName(), 
<a class="jxr_linenumber" name="L12369" href="#L12369">12369</a>           <span class="jxr_string">"change_log_type_cat_type_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"change_log_category"</span>, <span class="jxr_string">"action_name"</span>);
<a class="jxr_linenumber" name="L12370" href="#L12370">12370</a> 
<a class="jxr_linenumber" name="L12371" href="#L12371">12371</a>     }
<a class="jxr_linenumber" name="L12372" href="#L12372">12372</a>     {
<a class="jxr_linenumber" name="L12373" href="#L12373">12373</a>       Table grouperChangeLogConsumerTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12374" href="#L12374">12374</a>           ChangeLogConsumer.TABLE_GROUPER_CHANGE_LOG_CONSUMER);
<a class="jxr_linenumber" name="L12375" href="#L12375">12375</a>       
<a class="jxr_linenumber" name="L12376" href="#L12376">12376</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogConsumerTable, <span class="jxr_string">"name"</span>, 
<a class="jxr_linenumber" name="L12377" href="#L12377">12377</a>           Types.VARCHAR, <span class="jxr_string">"100"</span>, false, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12378" href="#L12378">12378</a>   
<a class="jxr_linenumber" name="L12379" href="#L12379">12379</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogConsumerTable, <span class="jxr_string">"last_sequence_processed"</span>, 
<a class="jxr_linenumber" name="L12380" href="#L12380">12380</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12381" href="#L12381">12381</a>       
<a class="jxr_linenumber" name="L12382" href="#L12382">12382</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogConsumerTable, <span class="jxr_string">"last_updated"</span>, 
<a class="jxr_linenumber" name="L12383" href="#L12383">12383</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12384" href="#L12384">12384</a>   
<a class="jxr_linenumber" name="L12385" href="#L12385">12385</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogConsumerTable, <span class="jxr_string">"created_on"</span>, 
<a class="jxr_linenumber" name="L12386" href="#L12386">12386</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12387" href="#L12387">12387</a>   
<a class="jxr_linenumber" name="L12388" href="#L12388">12388</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogConsumerTable, <span class="jxr_string">"id"</span>, 
<a class="jxr_linenumber" name="L12389" href="#L12389">12389</a>           Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12390" href="#L12390">12390</a>   
<a class="jxr_linenumber" name="L12391" href="#L12391">12391</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogConsumerTable, 
<a class="jxr_linenumber" name="L12392" href="#L12392">12392</a>           <span class="jxr_string">"hibernate_version_number"</span>, Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false); 
<a class="jxr_linenumber" name="L12393" href="#L12393">12393</a> 
<a class="jxr_linenumber" name="L12394" href="#L12394">12394</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperChangeLogConsumerTable.getName(), 
<a class="jxr_linenumber" name="L12395" href="#L12395">12395</a>           <span class="jxr_string">"change_log_consumer_name_idx"</span>, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"name"</span>);
<a class="jxr_linenumber" name="L12396" href="#L12396">12396</a>   
<a class="jxr_linenumber" name="L12397" href="#L12397">12397</a>     }
<a class="jxr_linenumber" name="L12398" href="#L12398">12398</a> 
<a class="jxr_linenumber" name="L12399" href="#L12399">12399</a>     {
<a class="jxr_linenumber" name="L12400" href="#L12400">12400</a>       Table grouperChangeLogTempEntryTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12401" href="#L12401">12401</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY_TEMP);
<a class="jxr_linenumber" name="L12402" href="#L12402">12402</a>       
<a class="jxr_linenumber" name="L12403" href="#L12403">12403</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12404" href="#L12404">12404</a>           <span class="jxr_string">"id"</span>, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12405" href="#L12405">12405</a>       
<a class="jxr_linenumber" name="L12406" href="#L12406">12406</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12407" href="#L12407">12407</a>           <span class="jxr_string">"change_log_type_id"</span>, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12408" href="#L12408">12408</a> 
<a class="jxr_linenumber" name="L12409" href="#L12409">12409</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12410" href="#L12410">12410</a>           <span class="jxr_string">"context_id"</span>, Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L12411" href="#L12411">12411</a> 
<a class="jxr_linenumber" name="L12412" href="#L12412">12412</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12413" href="#L12413">12413</a>           <span class="jxr_string">"created_on"</span>, Types.BIGINT, <span class="jxr_string">"20"</span>, false, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12414" href="#L12414">12414</a> 
<a class="jxr_linenumber" name="L12415" href="#L12415">12415</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12416" href="#L12416">12416</a>           <span class="jxr_string">"string01"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12417" href="#L12417">12417</a> 
<a class="jxr_linenumber" name="L12418" href="#L12418">12418</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12419" href="#L12419">12419</a>           <span class="jxr_string">"string02"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12420" href="#L12420">12420</a> 
<a class="jxr_linenumber" name="L12421" href="#L12421">12421</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12422" href="#L12422">12422</a>           <span class="jxr_string">"string03"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12423" href="#L12423">12423</a> 
<a class="jxr_linenumber" name="L12424" href="#L12424">12424</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12425" href="#L12425">12425</a>           <span class="jxr_string">"string04"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12426" href="#L12426">12426</a> 
<a class="jxr_linenumber" name="L12427" href="#L12427">12427</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12428" href="#L12428">12428</a>           <span class="jxr_string">"string05"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12429" href="#L12429">12429</a> 
<a class="jxr_linenumber" name="L12430" href="#L12430">12430</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12431" href="#L12431">12431</a>           <span class="jxr_string">"string06"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12432" href="#L12432">12432</a> 
<a class="jxr_linenumber" name="L12433" href="#L12433">12433</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12434" href="#L12434">12434</a>           <span class="jxr_string">"string07"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12435" href="#L12435">12435</a> 
<a class="jxr_linenumber" name="L12436" href="#L12436">12436</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12437" href="#L12437">12437</a>           <span class="jxr_string">"string08"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12438" href="#L12438">12438</a> 
<a class="jxr_linenumber" name="L12439" href="#L12439">12439</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12440" href="#L12440">12440</a>           <span class="jxr_string">"string09"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12441" href="#L12441">12441</a> 
<a class="jxr_linenumber" name="L12442" href="#L12442">12442</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12443" href="#L12443">12443</a>           <span class="jxr_string">"string10"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12444" href="#L12444">12444</a> 
<a class="jxr_linenumber" name="L12445" href="#L12445">12445</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12446" href="#L12446">12446</a>           <span class="jxr_string">"string11"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12447" href="#L12447">12447</a> 
<a class="jxr_linenumber" name="L12448" href="#L12448">12448</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogTempEntryTable, 
<a class="jxr_linenumber" name="L12449" href="#L12449">12449</a>           <span class="jxr_string">"string12"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12450" href="#L12450">12450</a> 
<a class="jxr_linenumber" name="L12451" href="#L12451">12451</a>     }
<a class="jxr_linenumber" name="L12452" href="#L12452">12452</a> 
<a class="jxr_linenumber" name="L12453" href="#L12453">12453</a>     {
<a class="jxr_linenumber" name="L12454" href="#L12454">12454</a>       Table grouperChangeLogEntryTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12455" href="#L12455">12455</a>           ChangeLogEntry.TABLE_GROUPER_CHANGE_LOG_ENTRY);
<a class="jxr_linenumber" name="L12456" href="#L12456">12456</a>       
<a class="jxr_linenumber" name="L12457" href="#L12457">12457</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12458" href="#L12458">12458</a>           <span class="jxr_string">"change_log_type_id"</span>, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>); 
<a class="jxr_linenumber" name="L12459" href="#L12459">12459</a> 
<a class="jxr_linenumber" name="L12460" href="#L12460">12460</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12461" href="#L12461">12461</a>           <span class="jxr_string">"context_id"</span>, Types.VARCHAR, ID_SIZE, false, false); 
<a class="jxr_linenumber" name="L12462" href="#L12462">12462</a> 
<a class="jxr_linenumber" name="L12463" href="#L12463">12463</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12464" href="#L12464">12464</a>           <span class="jxr_string">"created_on"</span>, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false); 
<a class="jxr_linenumber" name="L12465" href="#L12465">12465</a> 
<a class="jxr_linenumber" name="L12466" href="#L12466">12466</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12467" href="#L12467">12467</a>           <span class="jxr_string">"sequence_number"</span>, Types.BIGINT, <span class="jxr_string">"20"</span>, <strong class="jxr_keyword">true</strong>, false); 
<a class="jxr_linenumber" name="L12468" href="#L12468">12468</a> 
<a class="jxr_linenumber" name="L12469" href="#L12469">12469</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12470" href="#L12470">12470</a>           <span class="jxr_string">"string01"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12471" href="#L12471">12471</a> 
<a class="jxr_linenumber" name="L12472" href="#L12472">12472</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12473" href="#L12473">12473</a>           <span class="jxr_string">"string02"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12474" href="#L12474">12474</a> 
<a class="jxr_linenumber" name="L12475" href="#L12475">12475</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12476" href="#L12476">12476</a>           <span class="jxr_string">"string03"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12477" href="#L12477">12477</a> 
<a class="jxr_linenumber" name="L12478" href="#L12478">12478</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12479" href="#L12479">12479</a>           <span class="jxr_string">"string04"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12480" href="#L12480">12480</a> 
<a class="jxr_linenumber" name="L12481" href="#L12481">12481</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12482" href="#L12482">12482</a>           <span class="jxr_string">"string05"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12483" href="#L12483">12483</a> 
<a class="jxr_linenumber" name="L12484" href="#L12484">12484</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12485" href="#L12485">12485</a>           <span class="jxr_string">"string06"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12486" href="#L12486">12486</a> 
<a class="jxr_linenumber" name="L12487" href="#L12487">12487</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12488" href="#L12488">12488</a>           <span class="jxr_string">"string07"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12489" href="#L12489">12489</a> 
<a class="jxr_linenumber" name="L12490" href="#L12490">12490</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12491" href="#L12491">12491</a>           <span class="jxr_string">"string08"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12492" href="#L12492">12492</a> 
<a class="jxr_linenumber" name="L12493" href="#L12493">12493</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12494" href="#L12494">12494</a>           <span class="jxr_string">"string09"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12495" href="#L12495">12495</a> 
<a class="jxr_linenumber" name="L12496" href="#L12496">12496</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12497" href="#L12497">12497</a>           <span class="jxr_string">"string10"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12498" href="#L12498">12498</a> 
<a class="jxr_linenumber" name="L12499" href="#L12499">12499</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12500" href="#L12500">12500</a>           <span class="jxr_string">"string11"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12501" href="#L12501">12501</a> 
<a class="jxr_linenumber" name="L12502" href="#L12502">12502</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperChangeLogEntryTable, 
<a class="jxr_linenumber" name="L12503" href="#L12503">12503</a>           <span class="jxr_string">"string12"</span>, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false); 
<a class="jxr_linenumber" name="L12504" href="#L12504">12504</a> 
<a class="jxr_linenumber" name="L12505" href="#L12505">12505</a>       <strong class="jxr_keyword">if</strong> (!ddlVersionBean.isSqlServer()) {
<a class="jxr_linenumber" name="L12506" href="#L12506">12506</a>         <em class="jxr_comment">//do 12 string indexes</em>
<a class="jxr_linenumber" name="L12507" href="#L12507">12507</a>         <strong class="jxr_keyword">for</strong> (<strong class="jxr_keyword">int</strong> i=1;i&lt;=12;i++) {
<a class="jxr_linenumber" name="L12508" href="#L12508">12508</a>           <em class="jxr_comment">//see if we have a custom script here, do this since some versions of mysql cant handle indexes on columns that large</em>
<a class="jxr_linenumber" name="L12509" href="#L12509">12509</a>           String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX change_log_entry_string"</span> + StringUtils.leftPad(i + <span class="jxr_string">""</span>, 2, '0') + <span class="jxr_string">"_idx "</span> +
<a class="jxr_linenumber" name="L12510" href="#L12510">12510</a>               <span class="jxr_string">"ON grouper_change_log_entry (string"</span> + StringUtils.leftPad(i + <span class="jxr_string">""</span>, 2, '0') + <span class="jxr_string">"(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L12511" href="#L12511">12511</a>           
<a class="jxr_linenumber" name="L12512" href="#L12512">12512</a>           GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, grouperChangeLogEntryTable.getName(), 
<a class="jxr_linenumber" name="L12513" href="#L12513">12513</a>               <span class="jxr_string">"change_log_entry_string"</span> + StringUtils.leftPad(i + <span class="jxr_string">""</span>, 2, '0') 
<a class="jxr_linenumber" name="L12514" href="#L12514">12514</a>               + <span class="jxr_string">"_idx"</span>, scriptOverride, false, <span class="jxr_string">"string"</span> + StringUtils.leftPad(i + <span class="jxr_string">""</span>, 2, '0'));
<a class="jxr_linenumber" name="L12515" href="#L12515">12515</a>           
<a class="jxr_linenumber" name="L12516" href="#L12516">12516</a>         }
<a class="jxr_linenumber" name="L12517" href="#L12517">12517</a>       }
<a class="jxr_linenumber" name="L12518" href="#L12518">12518</a>       
<a class="jxr_linenumber" name="L12519" href="#L12519">12519</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, grouperChangeLogEntryTable.getName(), 
<a class="jxr_linenumber" name="L12520" href="#L12520">12520</a>           <span class="jxr_string">"change_log_sequence_number_idx"</span>, <strong class="jxr_keyword">null</strong>, false, <span class="jxr_string">"sequence_number"</span>, <span class="jxr_string">"created_on"</span>);
<a class="jxr_linenumber" name="L12521" href="#L12521">12521</a>       
<a class="jxr_linenumber" name="L12522" href="#L12522">12522</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, grouperChangeLogEntryTable.getName(), 
<a class="jxr_linenumber" name="L12523" href="#L12523">12523</a>           <span class="jxr_string">"change_log_context_id_idx"</span>, <strong class="jxr_keyword">null</strong>, false, <span class="jxr_string">"context_id"</span>);
<a class="jxr_linenumber" name="L12524" href="#L12524">12524</a>       
<a class="jxr_linenumber" name="L12525" href="#L12525">12525</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, grouperChangeLogEntryTable.getName(), 
<a class="jxr_linenumber" name="L12526" href="#L12526">12526</a>           <span class="jxr_string">"change_log_created_on_idx"</span>, <strong class="jxr_keyword">null</strong>, false, <span class="jxr_string">"created_on"</span>);
<a class="jxr_linenumber" name="L12527" href="#L12527">12527</a>       
<a class="jxr_linenumber" name="L12528" href="#L12528">12528</a>     }
<a class="jxr_linenumber" name="L12529" href="#L12529">12529</a> 
<a class="jxr_linenumber" name="L12530" href="#L12530">12530</a>   }
<a class="jxr_linenumber" name="L12531" href="#L12531">12531</a> 
<a class="jxr_linenumber" name="L12532" href="#L12532">12532</a> 
<a class="jxr_linenumber" name="L12533" href="#L12533">12533</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L12534" href="#L12534">12534</a> <em class="jxr_javadoccomment">   * Add external subject tables</em>
<a class="jxr_linenumber" name="L12535" href="#L12535">12535</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean </em>
<a class="jxr_linenumber" name="L12536" href="#L12536">12536</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L12537" href="#L12537">12537</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L12538" href="#L12538">12538</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addExternalSubjectTables(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Database database) {
<a class="jxr_linenumber" name="L12539" href="#L12539">12539</a>     
<a class="jxr_linenumber" name="L12540" href="#L12540">12540</a>     {
<a class="jxr_linenumber" name="L12541" href="#L12541">12541</a>       Table externalSubjectTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12542" href="#L12542">12542</a>           ExternalSubject.TABLE_GROUPER_EXT_SUBJ);
<a class="jxr_linenumber" name="L12543" href="#L12543">12543</a>       
<a class="jxr_linenumber" name="L12544" href="#L12544">12544</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_UUID, 
<a class="jxr_linenumber" name="L12545" href="#L12545">12545</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12546" href="#L12546">12546</a>   
<a class="jxr_linenumber" name="L12547" href="#L12547">12547</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_NAME, 
<a class="jxr_linenumber" name="L12548" href="#L12548">12548</a>           Types.VARCHAR, <span class="jxr_string">"200"</span>, false, false);
<a class="jxr_linenumber" name="L12549" href="#L12549">12549</a>   
<a class="jxr_linenumber" name="L12550" href="#L12550">12550</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_IDENTIFIER, 
<a class="jxr_linenumber" name="L12551" href="#L12551">12551</a>           Types.VARCHAR, <span class="jxr_string">"300"</span>, false, false);
<a class="jxr_linenumber" name="L12552" href="#L12552">12552</a>   
<a class="jxr_linenumber" name="L12553" href="#L12553">12553</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_DESCRIPTION, 
<a class="jxr_linenumber" name="L12554" href="#L12554">12554</a>           Types.VARCHAR, <span class="jxr_string">"500"</span>, false, false);
<a class="jxr_linenumber" name="L12555" href="#L12555">12555</a>   
<a class="jxr_linenumber" name="L12556" href="#L12556">12556</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_INSTITUTION, 
<a class="jxr_linenumber" name="L12557" href="#L12557">12557</a>           Types.VARCHAR, <span class="jxr_string">"200"</span>, false, false);
<a class="jxr_linenumber" name="L12558" href="#L12558">12558</a>   
<a class="jxr_linenumber" name="L12559" href="#L12559">12559</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_EMAIL, 
<a class="jxr_linenumber" name="L12560" href="#L12560">12560</a>           Types.VARCHAR, <span class="jxr_string">"200"</span>, false, false);
<a class="jxr_linenumber" name="L12561" href="#L12561">12561</a> 
<a class="jxr_linenumber" name="L12562" href="#L12562">12562</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_SEARCH_STRING_LOWER, 
<a class="jxr_linenumber" name="L12563" href="#L12563">12563</a>           Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false);
<a class="jxr_linenumber" name="L12564" href="#L12564">12564</a> 
<a class="jxr_linenumber" name="L12565" href="#L12565">12565</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_CREATE_TIME, 
<a class="jxr_linenumber" name="L12566" href="#L12566">12566</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12567" href="#L12567">12567</a> 
<a class="jxr_linenumber" name="L12568" href="#L12568">12568</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_CREATOR_MEMBER_ID, 
<a class="jxr_linenumber" name="L12569" href="#L12569">12569</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12570" href="#L12570">12570</a> 
<a class="jxr_linenumber" name="L12571" href="#L12571">12571</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_MODIFY_TIME, 
<a class="jxr_linenumber" name="L12572" href="#L12572">12572</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12573" href="#L12573">12573</a> 
<a class="jxr_linenumber" name="L12574" href="#L12574">12574</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_MODIFIER_MEMBER_ID, 
<a class="jxr_linenumber" name="L12575" href="#L12575">12575</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12576" href="#L12576">12576</a> 
<a class="jxr_linenumber" name="L12577" href="#L12577">12577</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L12578" href="#L12578">12578</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12579" href="#L12579">12579</a>       
<a class="jxr_linenumber" name="L12580" href="#L12580">12580</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_ENABLED, 
<a class="jxr_linenumber" name="L12581" href="#L12581">12581</a>           Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12582" href="#L12582">12582</a>       
<a class="jxr_linenumber" name="L12583" href="#L12583">12583</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_DISABLED_TIME, 
<a class="jxr_linenumber" name="L12584" href="#L12584">12584</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, false);
<a class="jxr_linenumber" name="L12585" href="#L12585">12585</a>       
<a class="jxr_linenumber" name="L12586" href="#L12586">12586</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L12587" href="#L12587">12587</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12588" href="#L12588">12588</a>       
<a class="jxr_linenumber" name="L12589" href="#L12589">12589</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectTable, ExternalSubject.COLUMN_VETTED_EMAIL_ADDRESSES, 
<a class="jxr_linenumber" name="L12590" href="#L12590">12590</a>           Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false);
<a class="jxr_linenumber" name="L12591" href="#L12591">12591</a> 
<a class="jxr_linenumber" name="L12592" href="#L12592">12592</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, externalSubjectTable.getName(), 
<a class="jxr_linenumber" name="L12593" href="#L12593">12593</a>           <span class="jxr_string">"grouper_ext_subj_cxt_id_idx"</span>, false, ExternalSubject.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L12594" href="#L12594">12594</a>       
<a class="jxr_linenumber" name="L12595" href="#L12595">12595</a>       <em class="jxr_comment">//see if we have a custom script here, do this since some versions of mysql cant handle indexes on columns that large</em>
<a class="jxr_linenumber" name="L12596" href="#L12596">12596</a>       String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX grouper_ext_subj_idfr_idx "</span> +
<a class="jxr_linenumber" name="L12597" href="#L12597">12597</a>           <span class="jxr_string">"ON grouper_ext_subj(identifier(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L12598" href="#L12598">12598</a>       
<a class="jxr_linenumber" name="L12599" href="#L12599">12599</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, externalSubjectTable.getName(), 
<a class="jxr_linenumber" name="L12600" href="#L12600">12600</a>           <span class="jxr_string">"grouper_ext_subj_idfr_idx"</span>, scriptOverride, <strong class="jxr_keyword">true</strong>, ExternalSubject.COLUMN_IDENTIFIER);
<a class="jxr_linenumber" name="L12601" href="#L12601">12601</a> 
<a class="jxr_linenumber" name="L12602" href="#L12602">12602</a>     }
<a class="jxr_linenumber" name="L12603" href="#L12603">12603</a>     
<a class="jxr_linenumber" name="L12604" href="#L12604">12604</a>     {
<a class="jxr_linenumber" name="L12605" href="#L12605">12605</a>       Table externalSubjectAttributeTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(database,
<a class="jxr_linenumber" name="L12606" href="#L12606">12606</a>           ExternalSubjectAttribute.TABLE_GROUPER_EXT_SUBJ_ATTR);
<a class="jxr_linenumber" name="L12607" href="#L12607">12607</a>       
<a class="jxr_linenumber" name="L12608" href="#L12608">12608</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_UUID, 
<a class="jxr_linenumber" name="L12609" href="#L12609">12609</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12610" href="#L12610">12610</a>   
<a class="jxr_linenumber" name="L12611" href="#L12611">12611</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_ATTRIBUTE_SYSTEM_NAME, 
<a class="jxr_linenumber" name="L12612" href="#L12612">12612</a>           Types.VARCHAR, <span class="jxr_string">"200"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12613" href="#L12613">12613</a>   
<a class="jxr_linenumber" name="L12614" href="#L12614">12614</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_ATTRIBUTE_VALUE, 
<a class="jxr_linenumber" name="L12615" href="#L12615">12615</a>           Types.VARCHAR, <span class="jxr_string">"600"</span>, false, false);
<a class="jxr_linenumber" name="L12616" href="#L12616">12616</a>   
<a class="jxr_linenumber" name="L12617" href="#L12617">12617</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_SUBJECT_UUID, 
<a class="jxr_linenumber" name="L12618" href="#L12618">12618</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12619" href="#L12619">12619</a>   
<a class="jxr_linenumber" name="L12620" href="#L12620">12620</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_CREATE_TIME, 
<a class="jxr_linenumber" name="L12621" href="#L12621">12621</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12622" href="#L12622">12622</a> 
<a class="jxr_linenumber" name="L12623" href="#L12623">12623</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_CREATOR_MEMBER_ID, 
<a class="jxr_linenumber" name="L12624" href="#L12624">12624</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12625" href="#L12625">12625</a> 
<a class="jxr_linenumber" name="L12626" href="#L12626">12626</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_MODIFY_TIME, 
<a class="jxr_linenumber" name="L12627" href="#L12627">12627</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12628" href="#L12628">12628</a> 
<a class="jxr_linenumber" name="L12629" href="#L12629">12629</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_MODIFIER_MEMBER_ID, 
<a class="jxr_linenumber" name="L12630" href="#L12630">12630</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12631" href="#L12631">12631</a> 
<a class="jxr_linenumber" name="L12632" href="#L12632">12632</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_CONTEXT_ID, 
<a class="jxr_linenumber" name="L12633" href="#L12633">12633</a>           Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12634" href="#L12634">12634</a>       
<a class="jxr_linenumber" name="L12635" href="#L12635">12635</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(externalSubjectAttributeTable, ExternalSubjectAttribute.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L12636" href="#L12636">12636</a>           Types.BIGINT, <strong class="jxr_keyword">null</strong>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12637" href="#L12637">12637</a>       
<a class="jxr_linenumber" name="L12638" href="#L12638">12638</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, externalSubjectAttributeTable.getName(), 
<a class="jxr_linenumber" name="L12639" href="#L12639">12639</a>           <span class="jxr_string">"grouper_extsubjattr_cxtid_idx"</span>, false, ExternalSubjectAttribute.COLUMN_CONTEXT_ID);
<a class="jxr_linenumber" name="L12640" href="#L12640">12640</a>       
<a class="jxr_linenumber" name="L12641" href="#L12641">12641</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, externalSubjectAttributeTable.getName(), 
<a class="jxr_linenumber" name="L12642" href="#L12642">12642</a>           <span class="jxr_string">"grouper_extsubjattr_subj_idx"</span>, <strong class="jxr_keyword">true</strong>, ExternalSubjectAttribute.COLUMN_SUBJECT_UUID, ExternalSubjectAttribute.COLUMN_ATTRIBUTE_SYSTEM_NAME);
<a class="jxr_linenumber" name="L12643" href="#L12643">12643</a>       
<a class="jxr_linenumber" name="L12644" href="#L12644">12644</a>       <em class="jxr_comment">//see if we have a custom script here, do this since some versions of mysql cant handle indexes on columns that large</em>
<a class="jxr_linenumber" name="L12645" href="#L12645">12645</a>       String scriptOverride = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX grouper_extsubjattr_value_idx "</span> +
<a class="jxr_linenumber" name="L12646" href="#L12646">12646</a>           <span class="jxr_string">"ON grouper_ext_subj_attr(attribute_value(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L12647" href="#L12647">12647</a>       
<a class="jxr_linenumber" name="L12648" href="#L12648">12648</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, externalSubjectAttributeTable.getName(), 
<a class="jxr_linenumber" name="L12649" href="#L12649">12649</a>           <span class="jxr_string">"grouper_extsubjattr_value_idx"</span>, scriptOverride, false, ExternalSubjectAttribute.COLUMN_ATTRIBUTE_VALUE);
<a class="jxr_linenumber" name="L12650" href="#L12650">12650</a> 
<a class="jxr_linenumber" name="L12651" href="#L12651">12651</a>       
<a class="jxr_linenumber" name="L12652" href="#L12652">12652</a>     }
<a class="jxr_linenumber" name="L12653" href="#L12653">12653</a>     
<a class="jxr_linenumber" name="L12654" href="#L12654">12654</a>   }
<a class="jxr_linenumber" name="L12655" href="#L12655">12655</a>   
<a class="jxr_linenumber" name="L12656" href="#L12656">12656</a>   
<a class="jxr_linenumber" name="L12657" href="#L12657">12657</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L12658" href="#L12658">12658</a> <em class="jxr_javadoccomment">   * </em>
<a class="jxr_linenumber" name="L12659" href="#L12659">12659</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L12660" href="#L12660">12660</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L12661" href="#L12661">12661</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L12662" href="#L12662">12662</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addGroupSetOwnerIdColumn(Database database, <a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean) {
<a class="jxr_linenumber" name="L12663" href="#L12663">12663</a>     <strong class="jxr_keyword">boolean</strong> tableExists = GrouperDdlUtils.assertTablesThere(false, false, GroupSet.TABLE_GROUPER_GROUP_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12664" href="#L12664">12664</a>      
<a class="jxr_linenumber" name="L12665" href="#L12665">12665</a>     Table grouperGroupSet = GrouperDdlUtils.ddlutilsFindTable(database, GroupSet.TABLE_GROUPER_GROUP_SET, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12666" href="#L12666">12666</a>     <strong class="jxr_keyword">boolean</strong> columnNew = tableExists &amp;&amp; grouperGroupSet.findColumn(GroupSet.COLUMN_OWNER_ID) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L12667" href="#L12667">12667</a> 
<a class="jxr_linenumber" name="L12668" href="#L12668">12668</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(grouperGroupSet, GroupSet.COLUMN_OWNER_ID,
<a class="jxr_linenumber" name="L12669" href="#L12669">12669</a>         Types.VARCHAR, <span class="jxr_string">"40"</span>, false, !tableExists);
<a class="jxr_linenumber" name="L12670" href="#L12670">12670</a>     
<a class="jxr_linenumber" name="L12671" href="#L12671">12671</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, grouperGroupSet.getName(), 
<a class="jxr_linenumber" name="L12672" href="#L12672">12672</a>         <span class="jxr_string">"group_set_owner_field_idx"</span>, false, <span class="jxr_string">"owner_id"</span>, <span class="jxr_string">"field_id"</span>);
<a class="jxr_linenumber" name="L12673" href="#L12673">12673</a>     
<a class="jxr_linenumber" name="L12674" href="#L12674">12674</a>     <strong class="jxr_keyword">if</strong> (columnNew) {  
<a class="jxr_linenumber" name="L12675" href="#L12675">12675</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_group_set set owner_id = owner_group_id where owner_group_id is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12676" href="#L12676">12676</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_group_set set owner_id = owner_stem_id where owner_stem_id is not null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12677" href="#L12677">12677</a>       ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\nupdate grouper_group_set set owner_id = owner_attr_def_id where owner_attr_def_id is not null;\ncommit;\n"</span>);      
<a class="jxr_linenumber" name="L12678" href="#L12678">12678</a>     }
<a class="jxr_linenumber" name="L12679" href="#L12679">12679</a>   }
<a class="jxr_linenumber" name="L12680" href="#L12680">12680</a> 
<a class="jxr_linenumber" name="L12681" href="#L12681">12681</a>   <em class="jxr_javadoccomment">/** dont do this twice */</em>
<a class="jxr_linenumber" name="L12682" href="#L12682">12682</a>   <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">boolean</strong> alreadyAddedTableIndices = false;
<a class="jxr_linenumber" name="L12683" href="#L12683">12683</a>   
<a class="jxr_linenumber" name="L12684" href="#L12684">12684</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L12685" href="#L12685">12685</a> <em class="jxr_javadoccomment">   * add table indices in DDL v2 or when needed</em>
<a class="jxr_linenumber" name="L12686" href="#L12686">12686</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L12687" href="#L12687">12687</a> <em class="jxr_javadoccomment">   * @param groupTableNew</em>
<a class="jxr_linenumber" name="L12688" href="#L12688">12688</a> <em class="jxr_javadoccomment">   * @param stemTableNew</em>
<a class="jxr_linenumber" name="L12689" href="#L12689">12689</a> <em class="jxr_javadoccomment">   * @param attributeDefTableNew</em>
<a class="jxr_linenumber" name="L12690" href="#L12690">12690</a> <em class="jxr_javadoccomment">   * @param attributeDefNameTableNew</em>
<a class="jxr_linenumber" name="L12691" href="#L12691">12691</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L12692" href="#L12692">12692</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L12693" href="#L12693">12693</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addTableIndices(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, 
<a class="jxr_linenumber" name="L12694" href="#L12694">12694</a>       Database database, <strong class="jxr_keyword">boolean</strong> groupTableNew, <strong class="jxr_keyword">boolean</strong> stemTableNew, 
<a class="jxr_linenumber" name="L12695" href="#L12695">12695</a>       <strong class="jxr_keyword">boolean</strong> attributeDefTableNew, <strong class="jxr_keyword">boolean</strong> attributeDefNameTableNew) {
<a class="jxr_linenumber" name="L12696" href="#L12696">12696</a>     
<a class="jxr_linenumber" name="L12697" href="#L12697">12697</a>     <em class="jxr_comment">//this can happen in step 2 as well as the 2.2 step</em>
<a class="jxr_linenumber" name="L12698" href="#L12698">12698</a>     <strong class="jxr_keyword">if</strong> (alreadyAddedTableIndices) {
<a class="jxr_linenumber" name="L12699" href="#L12699">12699</a>       <strong class="jxr_keyword">return</strong>;
<a class="jxr_linenumber" name="L12700" href="#L12700">12700</a>     }
<a class="jxr_linenumber" name="L12701" href="#L12701">12701</a>     
<a class="jxr_linenumber" name="L12702" href="#L12702">12702</a>     alreadyAddedTableIndices = <strong class="jxr_keyword">true</strong>;
<a class="jxr_linenumber" name="L12703" href="#L12703">12703</a>     
<a class="jxr_linenumber" name="L12704" href="#L12704">12704</a>     <strong class="jxr_keyword">boolean</strong> tableIndexTableNew = <strong class="jxr_keyword">null</strong> == GrouperDdlUtils.ddlutilsFindTable(
<a class="jxr_linenumber" name="L12705" href="#L12705">12705</a>         database, TableIndex.TABLE_GROUPER_TABLE_INDEX, false);
<a class="jxr_linenumber" name="L12706" href="#L12706">12706</a>     
<a class="jxr_linenumber" name="L12707" href="#L12707">12707</a>     {
<a class="jxr_linenumber" name="L12708" href="#L12708">12708</a>       Table tableIndexTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L12709" href="#L12709">12709</a>           database, TableIndex.TABLE_GROUPER_TABLE_INDEX);
<a class="jxr_linenumber" name="L12710" href="#L12710">12710</a> 
<a class="jxr_linenumber" name="L12711" href="#L12711">12711</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(tableIndexTable,
<a class="jxr_linenumber" name="L12712" href="#L12712">12712</a>           TableIndex.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12713" href="#L12713">12713</a> 
<a class="jxr_linenumber" name="L12714" href="#L12714">12714</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(tableIndexTable,
<a class="jxr_linenumber" name="L12715" href="#L12715">12715</a>           TableIndex.COLUMN_TYPE, Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12716" href="#L12716">12716</a> 
<a class="jxr_linenumber" name="L12717" href="#L12717">12717</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(tableIndexTable,
<a class="jxr_linenumber" name="L12718" href="#L12718">12718</a>           TableIndex.COLUMN_LAST_INDEX_RESERVED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L12719" href="#L12719">12719</a>       
<a class="jxr_linenumber" name="L12720" href="#L12720">12720</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(tableIndexTable,
<a class="jxr_linenumber" name="L12721" href="#L12721">12721</a>           TableIndex.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L12722" href="#L12722">12722</a>       
<a class="jxr_linenumber" name="L12723" href="#L12723">12723</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(tableIndexTable,
<a class="jxr_linenumber" name="L12724" href="#L12724">12724</a>           TableIndex.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L12725" href="#L12725">12725</a>       
<a class="jxr_linenumber" name="L12726" href="#L12726">12726</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(tableIndexTable, 
<a class="jxr_linenumber" name="L12727" href="#L12727">12727</a>           TableIndex.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L12728" href="#L12728">12728</a>       
<a class="jxr_linenumber" name="L12729" href="#L12729">12729</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, tableIndexTable.getName(), 
<a class="jxr_linenumber" name="L12730" href="#L12730">12730</a>           <span class="jxr_string">"table_index_type_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L12731" href="#L12731">12731</a>           TableIndex.COLUMN_TYPE);
<a class="jxr_linenumber" name="L12732" href="#L12732">12732</a>       
<a class="jxr_linenumber" name="L12733" href="#L12733">12733</a>     }
<a class="jxr_linenumber" name="L12734" href="#L12734">12734</a>     <em class="jxr_comment">//##################### GROUPS</em>
<a class="jxr_linenumber" name="L12735" href="#L12735">12735</a>     {
<a class="jxr_linenumber" name="L12736" href="#L12736">12736</a>       Table groupTable = GrouperDdlUtils.ddlutilsFindTable(database, Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12737" href="#L12737">12737</a>       
<a class="jxr_linenumber" name="L12738" href="#L12738">12738</a>       <em class="jxr_comment">//is the column there already?</em>
<a class="jxr_linenumber" name="L12739" href="#L12739">12739</a>       <strong class="jxr_keyword">boolean</strong> columnIsNew = <strong class="jxr_keyword">null</strong> == GrouperDdlUtils.ddlutilsFindColumn(groupTable, Group.COLUMN_ID_INDEX, false);
<a class="jxr_linenumber" name="L12740" href="#L12740">12740</a>       
<a class="jxr_linenumber" name="L12741" href="#L12741">12741</a>       <em class="jxr_comment">//this is required if the group table is new</em>
<a class="jxr_linenumber" name="L12742" href="#L12742">12742</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupTable, Group.COLUMN_ID_INDEX, 
<a class="jxr_linenumber" name="L12743" href="#L12743">12743</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, groupTableNew); 
<a class="jxr_linenumber" name="L12744" href="#L12744">12744</a>       
<a class="jxr_linenumber" name="L12745" href="#L12745">12745</a>       <em class="jxr_comment">//unique index on the new col... note, is this allowed in all ds if there is null data there?  hmm...</em>
<a class="jxr_linenumber" name="L12746" href="#L12746">12746</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Group.TABLE_GROUPER_GROUPS, 
<a class="jxr_linenumber" name="L12747" href="#L12747">12747</a>           <span class="jxr_string">"group_id_index_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L12748" href="#L12748">12748</a>          Group.COLUMN_ID_INDEX);
<a class="jxr_linenumber" name="L12749" href="#L12749">12749</a>       
<a class="jxr_linenumber" name="L12750" href="#L12750">12750</a>       <em class="jxr_comment">//see if we need to add a script on top to massage data</em>
<a class="jxr_linenumber" name="L12751" href="#L12751">12751</a>       <strong class="jxr_keyword">if</strong> (!groupTableNew &amp;&amp; GrouperConfig.retrieveConfig().propertyValueBoolean(<span class="jxr_string">"ddl.generateIdIndicesInScript"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L12752" href="#L12752">12752</a> 
<a class="jxr_linenumber" name="L12753" href="#L12753">12753</a>         <em class="jxr_comment">//if the col is in the database then see how many are blank, else see how many rows are in the grouper groups table</em>
<a class="jxr_linenumber" name="L12754" href="#L12754">12754</a>         <strong class="jxr_keyword">int</strong> idsNeeded = HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L12755" href="#L12755">12755</a>             columnIsNew ? <span class="jxr_string">"select count(*) from grouper_groups"</span> 
<a class="jxr_linenumber" name="L12756" href="#L12756">12756</a>                 : <span class="jxr_string">"select count(*) from grouper_groups where id_index is null"</span>);
<a class="jxr_linenumber" name="L12757" href="#L12757">12757</a> 
<a class="jxr_linenumber" name="L12758" href="#L12758">12758</a>         <strong class="jxr_keyword">if</strong> (idsNeeded &gt; 0) {
<a class="jxr_linenumber" name="L12759" href="#L12759">12759</a>           
<a class="jxr_linenumber" name="L12760" href="#L12760">12760</a>           <em class="jxr_comment">//we need the next available index</em>
<a class="jxr_linenumber" name="L12761" href="#L12761">12761</a>           <strong class="jxr_keyword">int</strong> nextIndex = 0;
<a class="jxr_linenumber" name="L12762" href="#L12762">12762</a>           
<a class="jxr_linenumber" name="L12763" href="#L12763">12763</a>           <strong class="jxr_keyword">int</strong> minGroupIndex = GrouperConfig.retrieveConfig().propertyValueInt(<span class="jxr_string">"idIndex.group.minIndex"</span>, 10000);
<a class="jxr_linenumber" name="L12764" href="#L12764">12764</a> 
<a class="jxr_linenumber" name="L12765" href="#L12765">12765</a>           <strong class="jxr_keyword">if</strong> (!tableIndexTableNew) {
<a class="jxr_linenumber" name="L12766" href="#L12766">12766</a>             
<a class="jxr_linenumber" name="L12767" href="#L12767">12767</a>             <em class="jxr_comment">//see if that row is there</em>
<a class="jxr_linenumber" name="L12768" href="#L12768">12768</a>             <strong class="jxr_keyword">if</strong> (0 == HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select count(*) from grouper_table_index where type = ?"</span>, GrouperUtil.toListObject(TableIndexType.group.name()))) {
<a class="jxr_linenumber" name="L12769" href="#L12769">12769</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L12770" href="#L12770">12770</a>               <strong class="jxr_keyword">long</strong> now = System.currentTimeMillis();
<a class="jxr_linenumber" name="L12771" href="#L12771">12771</a> 
<a class="jxr_linenumber" name="L12772" href="#L12772">12772</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L12773" href="#L12773">12773</a>                   <span class="jxr_string">"\ninsert into grouper_table_index (id, type, last_index_reserved, created_on, last_updated, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L12774" href="#L12774">12774</a>                   <span class="jxr_string">"values ('"</span> + GrouperUuid.getUuid() + <span class="jxr_string">"', '"</span> + TableIndexType.group.name() + <span class="jxr_string">"', "</span> + (minGroupIndex-1) + <span class="jxr_string">", "</span> 
<a class="jxr_linenumber" name="L12775" href="#L12775">12775</a>                       + now + <span class="jxr_string">", "</span> + now + <span class="jxr_string">", 1);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12776" href="#L12776">12776</a>               nextIndex = minGroupIndex;
<a class="jxr_linenumber" name="L12777" href="#L12777">12777</a>             } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L12778" href="#L12778">12778</a>             
<a class="jxr_linenumber" name="L12779" href="#L12779">12779</a>               nextIndex = 1 + HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L12780" href="#L12780">12780</a>                   <span class="jxr_string">"select last_index_reserved from grouper_table_index where type = ?"</span>, GrouperUtil.toListObject(TableIndexType.group.name()));
<a class="jxr_linenumber" name="L12781" href="#L12781">12781</a>             }
<a class="jxr_linenumber" name="L12782" href="#L12782">12782</a>           }
<a class="jxr_linenumber" name="L12783" href="#L12783">12783</a>           
<a class="jxr_linenumber" name="L12784" href="#L12784">12784</a>           <strong class="jxr_keyword">if</strong> (nextIndex &lt; minGroupIndex) {
<a class="jxr_linenumber" name="L12785" href="#L12785">12785</a>             nextIndex = minGroupIndex;
<a class="jxr_linenumber" name="L12786" href="#L12786">12786</a>           }
<a class="jxr_linenumber" name="L12787" href="#L12787">12787</a>           
<a class="jxr_linenumber" name="L12788" href="#L12788">12788</a>           <em class="jxr_comment">//if this doesnt work, we dont have an ID col???</em>
<a class="jxr_linenumber" name="L12789" href="#L12789">12789</a>           <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L12790" href="#L12790">12790</a>             <em class="jxr_comment">//lets reserve that many rows and update stuff</em>
<a class="jxr_linenumber" name="L12791" href="#L12791">12791</a>             List&lt;String&gt; groupIds = HibernateSession.bySqlStatic().listSelect(
<a class="jxr_linenumber" name="L12792" href="#L12792">12792</a>                 String.<strong class="jxr_keyword">class</strong>, columnIsNew ? <span class="jxr_string">"select id from grouper_groups order by id"</span> 
<a class="jxr_linenumber" name="L12793" href="#L12793">12793</a>                     : <span class="jxr_string">"select id from grouper_groups where id_index is null order by id"</span> , <strong class="jxr_keyword">null</strong>);
<a class="jxr_linenumber" name="L12794" href="#L12794">12794</a>             
<a class="jxr_linenumber" name="L12795" href="#L12795">12795</a>             <strong class="jxr_keyword">for</strong> (<strong class="jxr_keyword">int</strong> i=0;i&lt;GrouperUtil.length(groupIds); i++) {
<a class="jxr_linenumber" name="L12796" href="#L12796">12796</a>               ddlVersionBean.getAdditionalScripts().append(
<a class="jxr_linenumber" name="L12797" href="#L12797">12797</a>                 <span class="jxr_string">"\nupdate grouper_groups set id_index = "</span> + nextIndex++ + <span class="jxr_string">" where id = '"</span> + groupIds.get(i) + <span class="jxr_string">"';\n"</span>);
<a class="jxr_linenumber" name="L12798" href="#L12798">12798</a>               <strong class="jxr_keyword">if</strong> (i+1 % 50 == 0) {
<a class="jxr_linenumber" name="L12799" href="#L12799">12799</a>                 ddlVersionBean.getAdditionalScripts().append(<span class="jxr_string">"\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12800" href="#L12800">12800</a>               }
<a class="jxr_linenumber" name="L12801" href="#L12801">12801</a>             }
<a class="jxr_linenumber" name="L12802" href="#L12802">12802</a>             ddlVersionBean.getAdditionalScripts().append(<span class="jxr_string">"\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12803" href="#L12803">12803</a> 
<a class="jxr_linenumber" name="L12804" href="#L12804">12804</a>             <em class="jxr_comment">//see if there is already a row there</em>
<a class="jxr_linenumber" name="L12805" href="#L12805">12805</a>             <strong class="jxr_keyword">if</strong> (tableIndexTableNew) {
<a class="jxr_linenumber" name="L12806" href="#L12806">12806</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L12807" href="#L12807">12807</a>               <strong class="jxr_keyword">long</strong> now = System.currentTimeMillis();
<a class="jxr_linenumber" name="L12808" href="#L12808">12808</a>               <em class="jxr_comment">//note: this might be fragile as the structure of the table changes... hmmm</em>
<a class="jxr_linenumber" name="L12809" href="#L12809">12809</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L12810" href="#L12810">12810</a>                   <span class="jxr_string">"\ninsert into grouper_table_index (id, type, last_index_reserved, created_on, last_updated, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L12811" href="#L12811">12811</a>                   <span class="jxr_string">"values ('"</span> + GrouperUuid.getUuid() + <span class="jxr_string">"', '"</span> + TableIndexType.group.name() + <span class="jxr_string">"', "</span> + (nextIndex-1) + <span class="jxr_string">", "</span> 
<a class="jxr_linenumber" name="L12812" href="#L12812">12812</a>                       + now + <span class="jxr_string">", "</span> + now + <span class="jxr_string">", 1);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12813" href="#L12813">12813</a>               
<a class="jxr_linenumber" name="L12814" href="#L12814">12814</a>             } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L12815" href="#L12815">12815</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L12816" href="#L12816">12816</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L12817" href="#L12817">12817</a>                   <span class="jxr_string">"\nupdate grouper_table_index set last_index_reserved = "</span> + (nextIndex-1) + <span class="jxr_string">" where type = '"</span> + TableIndexType.group.name() + <span class="jxr_string">"';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12818" href="#L12818">12818</a>               
<a class="jxr_linenumber" name="L12819" href="#L12819">12819</a>             }
<a class="jxr_linenumber" name="L12820" href="#L12820">12820</a>             
<a class="jxr_linenumber" name="L12821" href="#L12821">12821</a>             
<a class="jxr_linenumber" name="L12822" href="#L12822">12822</a>           } <strong class="jxr_keyword">catch</strong> (Exception e) {
<a class="jxr_linenumber" name="L12823" href="#L12823">12823</a>             LOG.warn(<span class="jxr_string">"Problem with group ID index generation...  probably not a big deal, will be resolved on GSH startup"</span>, e);
<a class="jxr_linenumber" name="L12824" href="#L12824">12824</a>           }
<a class="jxr_linenumber" name="L12825" href="#L12825">12825</a>                 
<a class="jxr_linenumber" name="L12826" href="#L12826">12826</a>           
<a class="jxr_linenumber" name="L12827" href="#L12827">12827</a>         }
<a class="jxr_linenumber" name="L12828" href="#L12828">12828</a>       }
<a class="jxr_linenumber" name="L12829" href="#L12829">12829</a>     }
<a class="jxr_linenumber" name="L12830" href="#L12830">12830</a> 
<a class="jxr_linenumber" name="L12831" href="#L12831">12831</a>     <em class="jxr_comment">//############## STEMS ###################</em>
<a class="jxr_linenumber" name="L12832" href="#L12832">12832</a>     {
<a class="jxr_linenumber" name="L12833" href="#L12833">12833</a>       Table stemTable = GrouperDdlUtils.ddlutilsFindTable(database, Stem.TABLE_GROUPER_STEMS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12834" href="#L12834">12834</a>       
<a class="jxr_linenumber" name="L12835" href="#L12835">12835</a>       <em class="jxr_comment">//is the column there already?</em>
<a class="jxr_linenumber" name="L12836" href="#L12836">12836</a>       <strong class="jxr_keyword">boolean</strong> columnIsNew = <strong class="jxr_keyword">null</strong> == GrouperDdlUtils.ddlutilsFindColumn(stemTable, Stem.COLUMN_ID_INDEX, false);
<a class="jxr_linenumber" name="L12837" href="#L12837">12837</a>       
<a class="jxr_linenumber" name="L12838" href="#L12838">12838</a>       <em class="jxr_comment">//this is required if the stem table is new</em>
<a class="jxr_linenumber" name="L12839" href="#L12839">12839</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemTable, Stem.COLUMN_ID_INDEX, 
<a class="jxr_linenumber" name="L12840" href="#L12840">12840</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, stemTableNew); 
<a class="jxr_linenumber" name="L12841" href="#L12841">12841</a>       
<a class="jxr_linenumber" name="L12842" href="#L12842">12842</a>       <em class="jxr_comment">//unique index on the new col... note, is this allowed in all ds if there is null data there?  hmm...</em>
<a class="jxr_linenumber" name="L12843" href="#L12843">12843</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, Stem.TABLE_GROUPER_STEMS, 
<a class="jxr_linenumber" name="L12844" href="#L12844">12844</a>           <span class="jxr_string">"stem_id_index_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L12845" href="#L12845">12845</a>          Stem.COLUMN_ID_INDEX);
<a class="jxr_linenumber" name="L12846" href="#L12846">12846</a>       
<a class="jxr_linenumber" name="L12847" href="#L12847">12847</a>       <em class="jxr_comment">//see if we need to add a script on top to massage data</em>
<a class="jxr_linenumber" name="L12848" href="#L12848">12848</a>       <strong class="jxr_keyword">if</strong> (!stemTableNew &amp;&amp; GrouperConfig.retrieveConfig().propertyValueBoolean(<span class="jxr_string">"ddl.generateIdIndicesInScript"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L12849" href="#L12849">12849</a> 
<a class="jxr_linenumber" name="L12850" href="#L12850">12850</a>         <em class="jxr_comment">//if the col is in the database then see how many are blank, else see how many rows are in the grouper groups table</em>
<a class="jxr_linenumber" name="L12851" href="#L12851">12851</a>         <strong class="jxr_keyword">int</strong> idsNeeded = HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L12852" href="#L12852">12852</a>             columnIsNew ? <span class="jxr_string">"select count(*) from grouper_stems"</span> 
<a class="jxr_linenumber" name="L12853" href="#L12853">12853</a>                 : <span class="jxr_string">"select count(*) from grouper_stems where id_index is null"</span>);
<a class="jxr_linenumber" name="L12854" href="#L12854">12854</a> 
<a class="jxr_linenumber" name="L12855" href="#L12855">12855</a>         <strong class="jxr_keyword">if</strong> (idsNeeded &gt; 0) {
<a class="jxr_linenumber" name="L12856" href="#L12856">12856</a>           
<a class="jxr_linenumber" name="L12857" href="#L12857">12857</a>           <em class="jxr_comment">//we need the next available index</em>
<a class="jxr_linenumber" name="L12858" href="#L12858">12858</a>           <strong class="jxr_keyword">int</strong> nextIndex = 0;
<a class="jxr_linenumber" name="L12859" href="#L12859">12859</a>           
<a class="jxr_linenumber" name="L12860" href="#L12860">12860</a>           <strong class="jxr_keyword">int</strong> minStemIndex = GrouperConfig.retrieveConfig().propertyValueInt(<span class="jxr_string">"idIndex.stem.minIndex"</span>, 10000);
<a class="jxr_linenumber" name="L12861" href="#L12861">12861</a> 
<a class="jxr_linenumber" name="L12862" href="#L12862">12862</a>           <strong class="jxr_keyword">if</strong> (!tableIndexTableNew) {
<a class="jxr_linenumber" name="L12863" href="#L12863">12863</a>             
<a class="jxr_linenumber" name="L12864" href="#L12864">12864</a>             <em class="jxr_comment">//see if that row is there</em>
<a class="jxr_linenumber" name="L12865" href="#L12865">12865</a>             <strong class="jxr_keyword">if</strong> (0 == HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select count(*) from grouper_table_index where type = ?"</span>, 
<a class="jxr_linenumber" name="L12866" href="#L12866">12866</a>                 GrouperUtil.toListObject(TableIndexType.stem.name()))) {
<a class="jxr_linenumber" name="L12867" href="#L12867">12867</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L12868" href="#L12868">12868</a>               <strong class="jxr_keyword">long</strong> now = System.currentTimeMillis();
<a class="jxr_linenumber" name="L12869" href="#L12869">12869</a> 
<a class="jxr_linenumber" name="L12870" href="#L12870">12870</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L12871" href="#L12871">12871</a>                   <span class="jxr_string">"\ninsert into grouper_table_index (id, type, last_index_reserved, created_on, last_updated, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L12872" href="#L12872">12872</a>                   <span class="jxr_string">"values ('"</span> + GrouperUuid.getUuid() + <span class="jxr_string">"', '"</span> + TableIndexType.stem.name() + <span class="jxr_string">"', "</span> + (minStemIndex-1) + <span class="jxr_string">", "</span> 
<a class="jxr_linenumber" name="L12873" href="#L12873">12873</a>                       + now + <span class="jxr_string">", "</span> + now + <span class="jxr_string">", 1);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12874" href="#L12874">12874</a>               nextIndex = minStemIndex;
<a class="jxr_linenumber" name="L12875" href="#L12875">12875</a>             } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L12876" href="#L12876">12876</a>             
<a class="jxr_linenumber" name="L12877" href="#L12877">12877</a>               nextIndex = 1 + HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L12878" href="#L12878">12878</a>                   <span class="jxr_string">"select last_index_reserved from grouper_table_index where type = ?"</span>, GrouperUtil.toListObject(TableIndexType.stem.name()));
<a class="jxr_linenumber" name="L12879" href="#L12879">12879</a>             }
<a class="jxr_linenumber" name="L12880" href="#L12880">12880</a>           }
<a class="jxr_linenumber" name="L12881" href="#L12881">12881</a> 
<a class="jxr_linenumber" name="L12882" href="#L12882">12882</a>           <strong class="jxr_keyword">if</strong> (nextIndex &lt; minStemIndex) {
<a class="jxr_linenumber" name="L12883" href="#L12883">12883</a>             nextIndex = minStemIndex;
<a class="jxr_linenumber" name="L12884" href="#L12884">12884</a>           }
<a class="jxr_linenumber" name="L12885" href="#L12885">12885</a> 
<a class="jxr_linenumber" name="L12886" href="#L12886">12886</a>           <em class="jxr_comment">//if this doesnt work, we dont have an ID col???</em>
<a class="jxr_linenumber" name="L12887" href="#L12887">12887</a>           <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L12888" href="#L12888">12888</a>             <em class="jxr_comment">//lets reserve that many rows and update stuff</em>
<a class="jxr_linenumber" name="L12889" href="#L12889">12889</a>             List&lt;String&gt; stemIds = HibernateSession.bySqlStatic().listSelect(
<a class="jxr_linenumber" name="L12890" href="#L12890">12890</a>                 String.<strong class="jxr_keyword">class</strong>, columnIsNew ? <span class="jxr_string">"select id from grouper_stems order by id"</span> 
<a class="jxr_linenumber" name="L12891" href="#L12891">12891</a>                     : <span class="jxr_string">"select id from grouper_stems where id_index is null order by id"</span> , <strong class="jxr_keyword">null</strong>);
<a class="jxr_linenumber" name="L12892" href="#L12892">12892</a> 
<a class="jxr_linenumber" name="L12893" href="#L12893">12893</a>             <strong class="jxr_keyword">for</strong> (<strong class="jxr_keyword">int</strong> i=0;i&lt;GrouperUtil.length(stemIds); i++) {
<a class="jxr_linenumber" name="L12894" href="#L12894">12894</a>               ddlVersionBean.getAdditionalScripts().append(
<a class="jxr_linenumber" name="L12895" href="#L12895">12895</a>                 <span class="jxr_string">"\nupdate grouper_stems set id_index = "</span> + nextIndex++ + <span class="jxr_string">" where id = '"</span> + stemIds.get(i) + <span class="jxr_string">"';\n"</span>);
<a class="jxr_linenumber" name="L12896" href="#L12896">12896</a>               <strong class="jxr_keyword">if</strong> (i+1 % 50 == 0) {
<a class="jxr_linenumber" name="L12897" href="#L12897">12897</a>                 ddlVersionBean.getAdditionalScripts().append(<span class="jxr_string">"\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12898" href="#L12898">12898</a>               }
<a class="jxr_linenumber" name="L12899" href="#L12899">12899</a>             }
<a class="jxr_linenumber" name="L12900" href="#L12900">12900</a>             ddlVersionBean.getAdditionalScripts().append(<span class="jxr_string">"\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12901" href="#L12901">12901</a> 
<a class="jxr_linenumber" name="L12902" href="#L12902">12902</a>             <em class="jxr_comment">//see if there is already a row there</em>
<a class="jxr_linenumber" name="L12903" href="#L12903">12903</a>             <strong class="jxr_keyword">if</strong> (tableIndexTableNew) {
<a class="jxr_linenumber" name="L12904" href="#L12904">12904</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L12905" href="#L12905">12905</a>               <strong class="jxr_keyword">long</strong> now = System.currentTimeMillis();
<a class="jxr_linenumber" name="L12906" href="#L12906">12906</a>               <em class="jxr_comment">//note: this might be fragile as the structure of the table changes... hmmm</em>
<a class="jxr_linenumber" name="L12907" href="#L12907">12907</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L12908" href="#L12908">12908</a>                   <span class="jxr_string">"\ninsert into grouper_table_index (id, type, last_index_reserved, created_on, last_updated, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L12909" href="#L12909">12909</a>                   <span class="jxr_string">"values ('"</span> + GrouperUuid.getUuid() + <span class="jxr_string">"', '"</span> + TableIndexType.stem.name() + <span class="jxr_string">"', "</span> + (nextIndex-1) + <span class="jxr_string">", "</span> 
<a class="jxr_linenumber" name="L12910" href="#L12910">12910</a>                       + now + <span class="jxr_string">", "</span> + now + <span class="jxr_string">", 1);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12911" href="#L12911">12911</a>               
<a class="jxr_linenumber" name="L12912" href="#L12912">12912</a>             } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L12913" href="#L12913">12913</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L12914" href="#L12914">12914</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L12915" href="#L12915">12915</a>                   <span class="jxr_string">"\nupdate grouper_table_index set last_index_reserved = "</span> + (nextIndex-1) + <span class="jxr_string">" where type = '"</span> + TableIndexType.stem.name() + <span class="jxr_string">"';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12916" href="#L12916">12916</a>               
<a class="jxr_linenumber" name="L12917" href="#L12917">12917</a>             }
<a class="jxr_linenumber" name="L12918" href="#L12918">12918</a>             
<a class="jxr_linenumber" name="L12919" href="#L12919">12919</a>             
<a class="jxr_linenumber" name="L12920" href="#L12920">12920</a>           } <strong class="jxr_keyword">catch</strong> (Exception e) {
<a class="jxr_linenumber" name="L12921" href="#L12921">12921</a>             LOG.warn(<span class="jxr_string">"Problem with stem ID index generation...  probably not a big deal, will be resolved on GSH startup"</span>, e);
<a class="jxr_linenumber" name="L12922" href="#L12922">12922</a>           }
<a class="jxr_linenumber" name="L12923" href="#L12923">12923</a>                 
<a class="jxr_linenumber" name="L12924" href="#L12924">12924</a>           
<a class="jxr_linenumber" name="L12925" href="#L12925">12925</a>         }
<a class="jxr_linenumber" name="L12926" href="#L12926">12926</a>       }
<a class="jxr_linenumber" name="L12927" href="#L12927">12927</a>     }
<a class="jxr_linenumber" name="L12928" href="#L12928">12928</a>     
<a class="jxr_linenumber" name="L12929" href="#L12929">12929</a>     <em class="jxr_comment">//################################## ATTRIBUTE DEF</em>
<a class="jxr_linenumber" name="L12930" href="#L12930">12930</a>     {
<a class="jxr_linenumber" name="L12931" href="#L12931">12931</a>       Table attributeDefTable = GrouperDdlUtils.ddlutilsFindTable(database, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L12932" href="#L12932">12932</a>       
<a class="jxr_linenumber" name="L12933" href="#L12933">12933</a>       <em class="jxr_comment">//is the column there already?</em>
<a class="jxr_linenumber" name="L12934" href="#L12934">12934</a>       <strong class="jxr_keyword">boolean</strong> columnIsNew = <strong class="jxr_keyword">null</strong> == GrouperDdlUtils.ddlutilsFindColumn(attributeDefTable, AttributeDef.COLUMN_ID_INDEX, false);
<a class="jxr_linenumber" name="L12935" href="#L12935">12935</a>       
<a class="jxr_linenumber" name="L12936" href="#L12936">12936</a>       <em class="jxr_comment">//this is required if the attributeDef table is new</em>
<a class="jxr_linenumber" name="L12937" href="#L12937">12937</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable, AttributeDef.COLUMN_ID_INDEX, 
<a class="jxr_linenumber" name="L12938" href="#L12938">12938</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, attributeDefTableNew); 
<a class="jxr_linenumber" name="L12939" href="#L12939">12939</a>       
<a class="jxr_linenumber" name="L12940" href="#L12940">12940</a>       <em class="jxr_comment">//unique index on the new col... note, is this allowed in all ds if there is null data there?  hmm...</em>
<a class="jxr_linenumber" name="L12941" href="#L12941">12941</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF, 
<a class="jxr_linenumber" name="L12942" href="#L12942">12942</a>           <span class="jxr_string">"attribute_def_id_index_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L12943" href="#L12943">12943</a>          AttributeDef.COLUMN_ID_INDEX);
<a class="jxr_linenumber" name="L12944" href="#L12944">12944</a>       
<a class="jxr_linenumber" name="L12945" href="#L12945">12945</a>       <em class="jxr_comment">//see if we need to add a script on top to massage data</em>
<a class="jxr_linenumber" name="L12946" href="#L12946">12946</a>       <strong class="jxr_keyword">if</strong> (!attributeDefTableNew &amp;&amp; GrouperConfig.retrieveConfig().propertyValueBoolean(<span class="jxr_string">"ddl.generateIdIndicesInScript"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L12947" href="#L12947">12947</a> 
<a class="jxr_linenumber" name="L12948" href="#L12948">12948</a>         <em class="jxr_comment">//if the col is in the database then see how many are blank, else see how many rows are in the grouper attributeDefs table</em>
<a class="jxr_linenumber" name="L12949" href="#L12949">12949</a>         <strong class="jxr_keyword">int</strong> idsNeeded = HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L12950" href="#L12950">12950</a>             columnIsNew ? <span class="jxr_string">"select count(*) from grouper_attribute_def"</span> 
<a class="jxr_linenumber" name="L12951" href="#L12951">12951</a>                 : <span class="jxr_string">"select count(*) from grouper_attribute_def where id_index is null"</span>);
<a class="jxr_linenumber" name="L12952" href="#L12952">12952</a> 
<a class="jxr_linenumber" name="L12953" href="#L12953">12953</a>         <strong class="jxr_keyword">if</strong> (idsNeeded &gt; 0) {
<a class="jxr_linenumber" name="L12954" href="#L12954">12954</a>           
<a class="jxr_linenumber" name="L12955" href="#L12955">12955</a>           <em class="jxr_comment">//we need the next available index</em>
<a class="jxr_linenumber" name="L12956" href="#L12956">12956</a>           <strong class="jxr_keyword">int</strong> nextIndex = 0;
<a class="jxr_linenumber" name="L12957" href="#L12957">12957</a>           
<a class="jxr_linenumber" name="L12958" href="#L12958">12958</a>           <strong class="jxr_keyword">int</strong> minAttributeDefIndex = GrouperConfig.retrieveConfig().propertyValueInt(<span class="jxr_string">"idIndex.attributeDef.minIndex"</span>, 10000);
<a class="jxr_linenumber" name="L12959" href="#L12959">12959</a> 
<a class="jxr_linenumber" name="L12960" href="#L12960">12960</a>           <strong class="jxr_keyword">if</strong> (!tableIndexTableNew) {
<a class="jxr_linenumber" name="L12961" href="#L12961">12961</a>             
<a class="jxr_linenumber" name="L12962" href="#L12962">12962</a>             <em class="jxr_comment">//see if that row is there</em>
<a class="jxr_linenumber" name="L12963" href="#L12963">12963</a>             <strong class="jxr_keyword">if</strong> (0 == HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select count(*) from grouper_table_index where type = ?"</span>, 
<a class="jxr_linenumber" name="L12964" href="#L12964">12964</a>                 GrouperUtil.toListObject(TableIndexType.attributeDef.name()))) {
<a class="jxr_linenumber" name="L12965" href="#L12965">12965</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L12966" href="#L12966">12966</a>               <strong class="jxr_keyword">long</strong> now = System.currentTimeMillis();
<a class="jxr_linenumber" name="L12967" href="#L12967">12967</a> 
<a class="jxr_linenumber" name="L12968" href="#L12968">12968</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L12969" href="#L12969">12969</a>                   <span class="jxr_string">"\ninsert into grouper_table_index (id, type, last_index_reserved, created_on, last_updated, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L12970" href="#L12970">12970</a>                   <span class="jxr_string">"values ('"</span> + GrouperUuid.getUuid() + <span class="jxr_string">"', '"</span> + TableIndexType.attributeDef.name() + <span class="jxr_string">"', "</span> + (minAttributeDefIndex-1) + <span class="jxr_string">", "</span> 
<a class="jxr_linenumber" name="L12971" href="#L12971">12971</a>                       + now + <span class="jxr_string">", "</span> + now + <span class="jxr_string">", 1);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12972" href="#L12972">12972</a>               nextIndex = minAttributeDefIndex;
<a class="jxr_linenumber" name="L12973" href="#L12973">12973</a>             } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L12974" href="#L12974">12974</a>             
<a class="jxr_linenumber" name="L12975" href="#L12975">12975</a>               nextIndex = 1 + HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L12976" href="#L12976">12976</a>                   <span class="jxr_string">"select last_index_reserved from grouper_table_index where type = ?"</span>, GrouperUtil.toListObject(TableIndexType.attributeDef.name()));
<a class="jxr_linenumber" name="L12977" href="#L12977">12977</a>             }
<a class="jxr_linenumber" name="L12978" href="#L12978">12978</a>           }
<a class="jxr_linenumber" name="L12979" href="#L12979">12979</a> 
<a class="jxr_linenumber" name="L12980" href="#L12980">12980</a>           <strong class="jxr_keyword">if</strong> (nextIndex &lt; minAttributeDefIndex) {
<a class="jxr_linenumber" name="L12981" href="#L12981">12981</a>             nextIndex = minAttributeDefIndex;
<a class="jxr_linenumber" name="L12982" href="#L12982">12982</a>           }
<a class="jxr_linenumber" name="L12983" href="#L12983">12983</a> 
<a class="jxr_linenumber" name="L12984" href="#L12984">12984</a>           <em class="jxr_comment">//if this doesnt work, we dont have an ID col???</em>
<a class="jxr_linenumber" name="L12985" href="#L12985">12985</a>           <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L12986" href="#L12986">12986</a>             <em class="jxr_comment">//lets reserve that many rows and update stuff</em>
<a class="jxr_linenumber" name="L12987" href="#L12987">12987</a>             List&lt;String&gt; attributeDefIds = HibernateSession.bySqlStatic().listSelect(
<a class="jxr_linenumber" name="L12988" href="#L12988">12988</a>                 String.<strong class="jxr_keyword">class</strong>, columnIsNew ? <span class="jxr_string">"select id from grouper_attribute_def order by id"</span> 
<a class="jxr_linenumber" name="L12989" href="#L12989">12989</a>                     : <span class="jxr_string">"select id from grouper_attribute_def where id_index is null order by id"</span> , <strong class="jxr_keyword">null</strong>);
<a class="jxr_linenumber" name="L12990" href="#L12990">12990</a>             
<a class="jxr_linenumber" name="L12991" href="#L12991">12991</a>             <strong class="jxr_keyword">for</strong> (<strong class="jxr_keyword">int</strong> i=0;i&lt;GrouperUtil.length(attributeDefIds); i++) {
<a class="jxr_linenumber" name="L12992" href="#L12992">12992</a>               ddlVersionBean.getAdditionalScripts().append(
<a class="jxr_linenumber" name="L12993" href="#L12993">12993</a>                 <span class="jxr_string">"\nupdate grouper_attribute_def set id_index = "</span> + nextIndex++ + <span class="jxr_string">" where id = '"</span> + attributeDefIds.get(i) + <span class="jxr_string">"';\n"</span>);
<a class="jxr_linenumber" name="L12994" href="#L12994">12994</a>               <strong class="jxr_keyword">if</strong> (i+1 % 50 == 0) {
<a class="jxr_linenumber" name="L12995" href="#L12995">12995</a>                 ddlVersionBean.getAdditionalScripts().append(<span class="jxr_string">"\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12996" href="#L12996">12996</a>               }
<a class="jxr_linenumber" name="L12997" href="#L12997">12997</a>             }
<a class="jxr_linenumber" name="L12998" href="#L12998">12998</a>             ddlVersionBean.getAdditionalScripts().append(<span class="jxr_string">"\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L12999" href="#L12999">12999</a> 
<a class="jxr_linenumber" name="L13000" href="#L13000">13000</a>             <em class="jxr_comment">//see if there is already a row there            </em>
<a class="jxr_linenumber" name="L13001" href="#L13001">13001</a>             <strong class="jxr_keyword">if</strong> (tableIndexTableNew) {
<a class="jxr_linenumber" name="L13002" href="#L13002">13002</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L13003" href="#L13003">13003</a>               <strong class="jxr_keyword">long</strong> now = System.currentTimeMillis();
<a class="jxr_linenumber" name="L13004" href="#L13004">13004</a>               <em class="jxr_comment">//note: this might be fragile as the structure of the table changes... hmmm</em>
<a class="jxr_linenumber" name="L13005" href="#L13005">13005</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L13006" href="#L13006">13006</a>                   <span class="jxr_string">"\ninsert into grouper_table_index (id, type, last_index_reserved, created_on, last_updated, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L13007" href="#L13007">13007</a>                   <span class="jxr_string">"values ('"</span> + GrouperUuid.getUuid() + <span class="jxr_string">"', '"</span> + TableIndexType.attributeDef.name() + <span class="jxr_string">"', "</span> + (nextIndex-1) + <span class="jxr_string">", "</span> 
<a class="jxr_linenumber" name="L13008" href="#L13008">13008</a>                       + now + <span class="jxr_string">", "</span> + now + <span class="jxr_string">", 1);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L13009" href="#L13009">13009</a>               
<a class="jxr_linenumber" name="L13010" href="#L13010">13010</a>             } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L13011" href="#L13011">13011</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L13012" href="#L13012">13012</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L13013" href="#L13013">13013</a>                   <span class="jxr_string">"\nupdate grouper_table_index set last_index_reserved = "</span> + (nextIndex-1) + <span class="jxr_string">" where type = '"</span> + TableIndexType.attributeDef.name() + <span class="jxr_string">"';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L13014" href="#L13014">13014</a>               
<a class="jxr_linenumber" name="L13015" href="#L13015">13015</a>             }
<a class="jxr_linenumber" name="L13016" href="#L13016">13016</a>             
<a class="jxr_linenumber" name="L13017" href="#L13017">13017</a>             
<a class="jxr_linenumber" name="L13018" href="#L13018">13018</a>           } <strong class="jxr_keyword">catch</strong> (Exception e) {
<a class="jxr_linenumber" name="L13019" href="#L13019">13019</a>             LOG.warn(<span class="jxr_string">"Problem with attributeDef ID index generation...  probably not a big deal, will be resolved on GSH startup"</span>, e);
<a class="jxr_linenumber" name="L13020" href="#L13020">13020</a>           }
<a class="jxr_linenumber" name="L13021" href="#L13021">13021</a>                 
<a class="jxr_linenumber" name="L13022" href="#L13022">13022</a>           
<a class="jxr_linenumber" name="L13023" href="#L13023">13023</a>         }
<a class="jxr_linenumber" name="L13024" href="#L13024">13024</a>       }
<a class="jxr_linenumber" name="L13025" href="#L13025">13025</a>     }
<a class="jxr_linenumber" name="L13026" href="#L13026">13026</a>     
<a class="jxr_linenumber" name="L13027" href="#L13027">13027</a>     <em class="jxr_comment">//############################## ATTRIBUTE DEF NAME</em>
<a class="jxr_linenumber" name="L13028" href="#L13028">13028</a>     {
<a class="jxr_linenumber" name="L13029" href="#L13029">13029</a>       Table attributeDefNameTable = GrouperDdlUtils.ddlutilsFindTable(database, AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13030" href="#L13030">13030</a>       
<a class="jxr_linenumber" name="L13031" href="#L13031">13031</a>       <em class="jxr_comment">//is the column there already?</em>
<a class="jxr_linenumber" name="L13032" href="#L13032">13032</a>       <strong class="jxr_keyword">boolean</strong> columnIsNew = <strong class="jxr_keyword">null</strong> == GrouperDdlUtils.ddlutilsFindColumn(attributeDefNameTable, AttributeDefName.COLUMN_ID_INDEX, false);
<a class="jxr_linenumber" name="L13033" href="#L13033">13033</a>       
<a class="jxr_linenumber" name="L13034" href="#L13034">13034</a>       <em class="jxr_comment">//this is required if the attributeDefName table is new</em>
<a class="jxr_linenumber" name="L13035" href="#L13035">13035</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable, AttributeDefName.COLUMN_ID_INDEX, 
<a class="jxr_linenumber" name="L13036" href="#L13036">13036</a>           Types.BIGINT, <span class="jxr_string">"20"</span>, false, attributeDefNameTableNew); 
<a class="jxr_linenumber" name="L13037" href="#L13037">13037</a>       
<a class="jxr_linenumber" name="L13038" href="#L13038">13038</a>       <em class="jxr_comment">//unique index on the new col... note, is this allowed in all ds if there is null data there?  hmm...</em>
<a class="jxr_linenumber" name="L13039" href="#L13039">13039</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME, 
<a class="jxr_linenumber" name="L13040" href="#L13040">13040</a>           <span class="jxr_string">"attr_def_name_id_index_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L13041" href="#L13041">13041</a>          AttributeDefName.COLUMN_ID_INDEX);
<a class="jxr_linenumber" name="L13042" href="#L13042">13042</a>       
<a class="jxr_linenumber" name="L13043" href="#L13043">13043</a>       <em class="jxr_comment">//see if we need to add a script on top to massage data</em>
<a class="jxr_linenumber" name="L13044" href="#L13044">13044</a>       <strong class="jxr_keyword">if</strong> (!attributeDefNameTableNew &amp;&amp; GrouperConfig.retrieveConfig().propertyValueBoolean(<span class="jxr_string">"ddl.generateIdIndicesInScript"</span>, <strong class="jxr_keyword">true</strong>)) {
<a class="jxr_linenumber" name="L13045" href="#L13045">13045</a> 
<a class="jxr_linenumber" name="L13046" href="#L13046">13046</a>         <em class="jxr_comment">//if the col is in the database then see how many are blank, else see how many rows are in the grouper groups table</em>
<a class="jxr_linenumber" name="L13047" href="#L13047">13047</a>         <strong class="jxr_keyword">int</strong> idsNeeded = HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L13048" href="#L13048">13048</a>             columnIsNew ? <span class="jxr_string">"select count(*) from grouper_attribute_def_name"</span> 
<a class="jxr_linenumber" name="L13049" href="#L13049">13049</a>                 : <span class="jxr_string">"select count(*) from grouper_attribute_def_name where id_index is null"</span>);
<a class="jxr_linenumber" name="L13050" href="#L13050">13050</a> 
<a class="jxr_linenumber" name="L13051" href="#L13051">13051</a>         <strong class="jxr_keyword">if</strong> (idsNeeded &gt; 0) {
<a class="jxr_linenumber" name="L13052" href="#L13052">13052</a>           
<a class="jxr_linenumber" name="L13053" href="#L13053">13053</a>           <em class="jxr_comment">//we need the next available index</em>
<a class="jxr_linenumber" name="L13054" href="#L13054">13054</a>           <strong class="jxr_keyword">int</strong> nextIndex = 0;
<a class="jxr_linenumber" name="L13055" href="#L13055">13055</a>           
<a class="jxr_linenumber" name="L13056" href="#L13056">13056</a>           <strong class="jxr_keyword">int</strong> minAttributeDefNameIndex = GrouperConfig.retrieveConfig().propertyValueInt(<span class="jxr_string">"idIndex.attributeDefName.minIndex"</span>, 10000);
<a class="jxr_linenumber" name="L13057" href="#L13057">13057</a> 
<a class="jxr_linenumber" name="L13058" href="#L13058">13058</a>           <strong class="jxr_keyword">if</strong> (!tableIndexTableNew) {
<a class="jxr_linenumber" name="L13059" href="#L13059">13059</a>             
<a class="jxr_linenumber" name="L13060" href="#L13060">13060</a>             <em class="jxr_comment">//see if that row is there</em>
<a class="jxr_linenumber" name="L13061" href="#L13061">13061</a>             <strong class="jxr_keyword">if</strong> (0 == HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, <span class="jxr_string">"select count(*) from grouper_table_index where type = ?"</span>, GrouperUtil.toListObject(TableIndexType.attributeDefName.name()))) {
<a class="jxr_linenumber" name="L13062" href="#L13062">13062</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L13063" href="#L13063">13063</a>               <strong class="jxr_keyword">long</strong> now = System.currentTimeMillis();
<a class="jxr_linenumber" name="L13064" href="#L13064">13064</a> 
<a class="jxr_linenumber" name="L13065" href="#L13065">13065</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L13066" href="#L13066">13066</a>                   <span class="jxr_string">"\ninsert into grouper_table_index (id, type, last_index_reserved, created_on, last_updated, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L13067" href="#L13067">13067</a>                   <span class="jxr_string">"values ('"</span> + GrouperUuid.getUuid() + <span class="jxr_string">"', '"</span> + TableIndexType.attributeDefName.name() + <span class="jxr_string">"', "</span> + (minAttributeDefNameIndex-1) + <span class="jxr_string">", "</span> 
<a class="jxr_linenumber" name="L13068" href="#L13068">13068</a>                       + now + <span class="jxr_string">", "</span> + now + <span class="jxr_string">", 1);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L13069" href="#L13069">13069</a>               nextIndex = minAttributeDefNameIndex;
<a class="jxr_linenumber" name="L13070" href="#L13070">13070</a>             } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L13071" href="#L13071">13071</a>             
<a class="jxr_linenumber" name="L13072" href="#L13072">13072</a>               nextIndex = 1 + HibernateSession.bySqlStatic().select(Integer.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L13073" href="#L13073">13073</a>                   <span class="jxr_string">"select last_index_reserved from grouper_table_index where type = ?"</span>, GrouperUtil.toListObject(TableIndexType.attributeDefName.name()));
<a class="jxr_linenumber" name="L13074" href="#L13074">13074</a>             }
<a class="jxr_linenumber" name="L13075" href="#L13075">13075</a>           }
<a class="jxr_linenumber" name="L13076" href="#L13076">13076</a> 
<a class="jxr_linenumber" name="L13077" href="#L13077">13077</a>           <strong class="jxr_keyword">if</strong> (nextIndex &lt; minAttributeDefNameIndex) {
<a class="jxr_linenumber" name="L13078" href="#L13078">13078</a>             nextIndex = minAttributeDefNameIndex;
<a class="jxr_linenumber" name="L13079" href="#L13079">13079</a>           }
<a class="jxr_linenumber" name="L13080" href="#L13080">13080</a> 
<a class="jxr_linenumber" name="L13081" href="#L13081">13081</a>           <em class="jxr_comment">//if this doesnt work, we dont have an ID col???</em>
<a class="jxr_linenumber" name="L13082" href="#L13082">13082</a>           <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L13083" href="#L13083">13083</a>             <em class="jxr_comment">//lets reserve that many rows and update stuff</em>
<a class="jxr_linenumber" name="L13084" href="#L13084">13084</a>             List&lt;String&gt; attributeDefNameIds = HibernateSession.bySqlStatic().listSelect(
<a class="jxr_linenumber" name="L13085" href="#L13085">13085</a>                 String.<strong class="jxr_keyword">class</strong>, columnIsNew ? <span class="jxr_string">"select id from grouper_attribute_def_name order by id"</span> 
<a class="jxr_linenumber" name="L13086" href="#L13086">13086</a>                     : <span class="jxr_string">"select id from grouper_attribute_def_name where id_index is null order by id"</span> , <strong class="jxr_keyword">null</strong>);
<a class="jxr_linenumber" name="L13087" href="#L13087">13087</a>             
<a class="jxr_linenumber" name="L13088" href="#L13088">13088</a>             <strong class="jxr_keyword">for</strong> (<strong class="jxr_keyword">int</strong> i=0;i&lt;GrouperUtil.length(attributeDefNameIds); i++) {
<a class="jxr_linenumber" name="L13089" href="#L13089">13089</a>               ddlVersionBean.getAdditionalScripts().append(
<a class="jxr_linenumber" name="L13090" href="#L13090">13090</a>                 <span class="jxr_string">"\nupdate grouper_attribute_def_name set id_index = "</span> + nextIndex++ + <span class="jxr_string">" where id = '"</span> + attributeDefNameIds.get(i) + <span class="jxr_string">"';\n"</span>);
<a class="jxr_linenumber" name="L13091" href="#L13091">13091</a>               <strong class="jxr_keyword">if</strong> (i+1 % 50 == 0) {
<a class="jxr_linenumber" name="L13092" href="#L13092">13092</a>                 ddlVersionBean.getAdditionalScripts().append(<span class="jxr_string">"\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L13093" href="#L13093">13093</a>               }
<a class="jxr_linenumber" name="L13094" href="#L13094">13094</a>             }
<a class="jxr_linenumber" name="L13095" href="#L13095">13095</a>             ddlVersionBean.getAdditionalScripts().append(<span class="jxr_string">"\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L13096" href="#L13096">13096</a> 
<a class="jxr_linenumber" name="L13097" href="#L13097">13097</a>             <strong class="jxr_keyword">if</strong> (tableIndexTableNew) {
<a class="jxr_linenumber" name="L13098" href="#L13098">13098</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L13099" href="#L13099">13099</a>               <strong class="jxr_keyword">long</strong> now = System.currentTimeMillis();
<a class="jxr_linenumber" name="L13100" href="#L13100">13100</a>               <em class="jxr_comment">//note: this might be fragile as the structure of the table changes... hmmm</em>
<a class="jxr_linenumber" name="L13101" href="#L13101">13101</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L13102" href="#L13102">13102</a>                   <span class="jxr_string">"\ninsert into grouper_table_index (id, type, last_index_reserved, created_on, last_updated, hibernate_version_number) "</span> +
<a class="jxr_linenumber" name="L13103" href="#L13103">13103</a>                   <span class="jxr_string">"values ('"</span> + GrouperUuid.getUuid() + <span class="jxr_string">"', '"</span> + TableIndexType.attributeDefName.name() + <span class="jxr_string">"', "</span> + (nextIndex-1) + <span class="jxr_string">", "</span> 
<a class="jxr_linenumber" name="L13104" href="#L13104">13104</a>                       + now + <span class="jxr_string">", "</span> + now + <span class="jxr_string">", 1);\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L13105" href="#L13105">13105</a>               
<a class="jxr_linenumber" name="L13106" href="#L13106">13106</a>             } <strong class="jxr_keyword">else</strong> {
<a class="jxr_linenumber" name="L13107" href="#L13107">13107</a>               <em class="jxr_comment">//now we need to account for the used indices</em>
<a class="jxr_linenumber" name="L13108" href="#L13108">13108</a>               ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L13109" href="#L13109">13109</a>                   <span class="jxr_string">"\nupdate grouper_table_index set last_index_reserved = "</span> + (nextIndex-1) + <span class="jxr_string">" where type = '"</span> + TableIndexType.attributeDefName.name() + <span class="jxr_string">"';\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L13110" href="#L13110">13110</a>               
<a class="jxr_linenumber" name="L13111" href="#L13111">13111</a>             }
<a class="jxr_linenumber" name="L13112" href="#L13112">13112</a>             
<a class="jxr_linenumber" name="L13113" href="#L13113">13113</a>             
<a class="jxr_linenumber" name="L13114" href="#L13114">13114</a>           } <strong class="jxr_keyword">catch</strong> (Exception e) {
<a class="jxr_linenumber" name="L13115" href="#L13115">13115</a>             LOG.warn(<span class="jxr_string">"Problem with attributeDefName ID index generation...  probably not a big deal, will be resolved on GSH startup"</span>, e);
<a class="jxr_linenumber" name="L13116" href="#L13116">13116</a>           }
<a class="jxr_linenumber" name="L13117" href="#L13117">13117</a>                 
<a class="jxr_linenumber" name="L13118" href="#L13118">13118</a>           
<a class="jxr_linenumber" name="L13119" href="#L13119">13119</a>         }
<a class="jxr_linenumber" name="L13120" href="#L13120">13120</a>       }
<a class="jxr_linenumber" name="L13121" href="#L13121">13121</a>     }
<a class="jxr_linenumber" name="L13122" href="#L13122">13122</a> 
<a class="jxr_linenumber" name="L13123" href="#L13123">13123</a>     
<a class="jxr_linenumber" name="L13124" href="#L13124">13124</a>   }
<a class="jxr_linenumber" name="L13125" href="#L13125">13125</a> 
<a class="jxr_linenumber" name="L13126" href="#L13126">13126</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L13127" href="#L13127">13127</a> <em class="jxr_javadoccomment">   * add privilege management in v2 or when needed</em>
<a class="jxr_linenumber" name="L13128" href="#L13128">13128</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L13129" href="#L13129">13129</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L13130" href="#L13130">13130</a> <em class="jxr_javadoccomment">   * @param groupsTableNew </em>
<a class="jxr_linenumber" name="L13131" href="#L13131">13131</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L13132" href="#L13132">13132</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addPrivilegeManagement(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, 
<a class="jxr_linenumber" name="L13133" href="#L13133">13133</a>       Database database, <strong class="jxr_keyword">boolean</strong> groupsTableNew) {
<a class="jxr_linenumber" name="L13134" href="#L13134">13134</a>     {
<a class="jxr_linenumber" name="L13135" href="#L13135">13135</a>       Table groupTable = GrouperDdlUtils.ddlutilsFindTable(database, Group.TABLE_GROUPER_GROUPS, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13136" href="#L13136">13136</a>       
<a class="jxr_linenumber" name="L13137" href="#L13137">13137</a>       <strong class="jxr_keyword">boolean</strong> columnNew = !groupsTableNew &amp;&amp; groupTable.findColumn(<span class="jxr_string">"type_of_group"</span>) == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L13138" href="#L13138">13138</a>       
<a class="jxr_linenumber" name="L13139" href="#L13139">13139</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(groupTable, <span class="jxr_string">"type_of_group"</span>, 
<a class="jxr_linenumber" name="L13140" href="#L13140">13140</a>           Types.VARCHAR, <span class="jxr_string">"10"</span>, false, groupsTableNew, <span class="jxr_string">"group"</span>); 
<a class="jxr_linenumber" name="L13141" href="#L13141">13141</a>       
<a class="jxr_linenumber" name="L13142" href="#L13142">13142</a>       <em class="jxr_comment">//see if we need to add a script on top to massage data</em>
<a class="jxr_linenumber" name="L13143" href="#L13143">13143</a>       <strong class="jxr_keyword">if</strong> (columnNew) {
<a class="jxr_linenumber" name="L13144" href="#L13144">13144</a>         ddlVersionBean.appendAdditionalScriptUnique(
<a class="jxr_linenumber" name="L13145" href="#L13145">13145</a>           <span class="jxr_string">"\nupdate grouper_groups set type_of_group = 'group' where "</span> +
<a class="jxr_linenumber" name="L13146" href="#L13146">13146</a>       		<span class="jxr_string">"type_of_group is null;\ncommit;\n"</span>);
<a class="jxr_linenumber" name="L13147" href="#L13147">13147</a>       }
<a class="jxr_linenumber" name="L13148" href="#L13148">13148</a>     }
<a class="jxr_linenumber" name="L13149" href="#L13149">13149</a>     
<a class="jxr_linenumber" name="L13150" href="#L13150">13150</a>     {
<a class="jxr_linenumber" name="L13151" href="#L13151">13151</a>       Table attributeDefTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13152" href="#L13152">13152</a>           database, AttributeDef.TABLE_GROUPER_ATTRIBUTE_DEF);
<a class="jxr_linenumber" name="L13153" href="#L13153">13153</a>       
<a class="jxr_linenumber" name="L13154" href="#L13154">13154</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13155" href="#L13155">13155</a>           AttributeDef.COLUMN_ATTRIBUTE_DEF_PUBLIC, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13156" href="#L13156">13156</a> 
<a class="jxr_linenumber" name="L13157" href="#L13157">13157</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13158" href="#L13158">13158</a>           AttributeDef.COLUMN_ATTRIBUTE_DEF_TYPE, Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"attr"</span>);
<a class="jxr_linenumber" name="L13159" href="#L13159">13159</a> 
<a class="jxr_linenumber" name="L13160" href="#L13160">13160</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13161" href="#L13161">13161</a>           AttributeDef.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13162" href="#L13162">13162</a> 
<a class="jxr_linenumber" name="L13163" href="#L13163">13163</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13164" href="#L13164">13164</a>           AttributeDef.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13165" href="#L13165">13165</a> 
<a class="jxr_linenumber" name="L13166" href="#L13166">13166</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13167" href="#L13167">13167</a>           AttributeDef.COLUMN_CREATOR_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13168" href="#L13168">13168</a> 
<a class="jxr_linenumber" name="L13169" href="#L13169">13169</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable, AttributeDef.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L13170" href="#L13170">13170</a>           Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13171" href="#L13171">13171</a> 
<a class="jxr_linenumber" name="L13172" href="#L13172">13172</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13173" href="#L13173">13173</a>           AttributeDef.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13174" href="#L13174">13174</a> 
<a class="jxr_linenumber" name="L13175" href="#L13175">13175</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13176" href="#L13176">13176</a>           AttributeDef.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13177" href="#L13177">13177</a> 
<a class="jxr_linenumber" name="L13178" href="#L13178">13178</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13179" href="#L13179">13179</a>           AttributeDef.COLUMN_DESCRIPTION, Types.VARCHAR, <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L13180" href="#L13180">13180</a> 
<a class="jxr_linenumber" name="L13181" href="#L13181">13181</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13182" href="#L13182">13182</a>           AttributeDef.COLUMN_EXTENSION, Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13183" href="#L13183">13183</a> 
<a class="jxr_linenumber" name="L13184" href="#L13184">13184</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13185" href="#L13185">13185</a>           AttributeDef.COLUMN_NAME, Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13186" href="#L13186">13186</a> 
<a class="jxr_linenumber" name="L13187" href="#L13187">13187</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13188" href="#L13188">13188</a>           AttributeDef.COLUMN_MULTI_ASSIGNABLE, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13189" href="#L13189">13189</a> 
<a class="jxr_linenumber" name="L13190" href="#L13190">13190</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13191" href="#L13191">13191</a>           AttributeDef.COLUMN_MULTI_VALUED, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13192" href="#L13192">13192</a> 
<a class="jxr_linenumber" name="L13193" href="#L13193">13193</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13194" href="#L13194">13194</a>           AttributeDef.COLUMN_STEM_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13195" href="#L13195">13195</a> 
<a class="jxr_linenumber" name="L13196" href="#L13196">13196</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13197" href="#L13197">13197</a>           AttributeDef.COLUMN_VALUE_TYPE, Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"marker"</span>);
<a class="jxr_linenumber" name="L13198" href="#L13198">13198</a>           
<a class="jxr_linenumber" name="L13199" href="#L13199">13199</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13200" href="#L13200">13200</a>           AttributeDef.COLUMN_ASSIGN_TO_ATTRIBUTE_DEF, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13201" href="#L13201">13201</a>           
<a class="jxr_linenumber" name="L13202" href="#L13202">13202</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13203" href="#L13203">13203</a>           AttributeDef.COLUMN_ASSIGN_TO_ATTRIBUTE_DEF_ASSN, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13204" href="#L13204">13204</a>           
<a class="jxr_linenumber" name="L13205" href="#L13205">13205</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13206" href="#L13206">13206</a>           AttributeDef.COLUMN_ASSIGN_TO_EFF_MEMBERSHIP, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13207" href="#L13207">13207</a>           
<a class="jxr_linenumber" name="L13208" href="#L13208">13208</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13209" href="#L13209">13209</a>           AttributeDef.COLUMN_ASSIGN_TO_EFF_MEMBERSHIP_ASSN, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13210" href="#L13210">13210</a>           
<a class="jxr_linenumber" name="L13211" href="#L13211">13211</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13212" href="#L13212">13212</a>           AttributeDef.COLUMN_ASSIGN_TO_GROUP, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13213" href="#L13213">13213</a>           
<a class="jxr_linenumber" name="L13214" href="#L13214">13214</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13215" href="#L13215">13215</a>           AttributeDef.COLUMN_ASSIGN_TO_GROUP_ASSN, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13216" href="#L13216">13216</a>           
<a class="jxr_linenumber" name="L13217" href="#L13217">13217</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13218" href="#L13218">13218</a>           AttributeDef.COLUMN_ASSIGN_TO_IMM_MEMBERSHIP, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13219" href="#L13219">13219</a>           
<a class="jxr_linenumber" name="L13220" href="#L13220">13220</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13221" href="#L13221">13221</a>           AttributeDef.COLUMN_ASSIGN_TO_IMM_MEMBERSHIP_ASSN, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13222" href="#L13222">13222</a>           
<a class="jxr_linenumber" name="L13223" href="#L13223">13223</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13224" href="#L13224">13224</a>           AttributeDef.COLUMN_ASSIGN_TO_MEMBER, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13225" href="#L13225">13225</a>           
<a class="jxr_linenumber" name="L13226" href="#L13226">13226</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13227" href="#L13227">13227</a>           AttributeDef.COLUMN_ASSIGN_TO_MEMBER_ASSN, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13228" href="#L13228">13228</a>           
<a class="jxr_linenumber" name="L13229" href="#L13229">13229</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13230" href="#L13230">13230</a>           AttributeDef.COLUMN_ASSIGN_TO_STEM, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13231" href="#L13231">13231</a>           
<a class="jxr_linenumber" name="L13232" href="#L13232">13232</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefTable,
<a class="jxr_linenumber" name="L13233" href="#L13233">13233</a>           AttributeDef.COLUMN_ASSIGN_TO_STEM_ASSN, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"F"</span>);
<a class="jxr_linenumber" name="L13234" href="#L13234">13234</a>           
<a class="jxr_linenumber" name="L13235" href="#L13235">13235</a> 
<a class="jxr_linenumber" name="L13236" href="#L13236">13236</a>       String scriptOverrideName = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE unique INDEX attribute_def_name_idx "</span> +
<a class="jxr_linenumber" name="L13237" href="#L13237">13237</a>           <span class="jxr_string">"ON grouper_attribute_def (name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L13238" href="#L13238">13238</a>       
<a class="jxr_linenumber" name="L13239" href="#L13239">13239</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, attributeDefTable.getName(), 
<a class="jxr_linenumber" name="L13240" href="#L13240">13240</a>           <span class="jxr_string">"attribute_def_name_idx"</span>, scriptOverrideName, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"name"</span>);
<a class="jxr_linenumber" name="L13241" href="#L13241">13241</a>       
<a class="jxr_linenumber" name="L13242" href="#L13242">13242</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeDefTable.getName(), 
<a class="jxr_linenumber" name="L13243" href="#L13243">13243</a>           <span class="jxr_string">"attribute_def_type_idx"</span>, false, AttributeDef.COLUMN_ATTRIBUTE_DEF_TYPE);
<a class="jxr_linenumber" name="L13244" href="#L13244">13244</a>     }
<a class="jxr_linenumber" name="L13245" href="#L13245">13245</a> 
<a class="jxr_linenumber" name="L13246" href="#L13246">13246</a>     {
<a class="jxr_linenumber" name="L13247" href="#L13247">13247</a>       Table attributeDefNameTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13248" href="#L13248">13248</a>           database, AttributeDefName.TABLE_GROUPER_ATTRIBUTE_DEF_NAME);
<a class="jxr_linenumber" name="L13249" href="#L13249">13249</a>       
<a class="jxr_linenumber" name="L13250" href="#L13250">13250</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13251" href="#L13251">13251</a>           AttributeDefName.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13252" href="#L13252">13252</a> 
<a class="jxr_linenumber" name="L13253" href="#L13253">13253</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13254" href="#L13254">13254</a>           AttributeDefName.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13255" href="#L13255">13255</a> 
<a class="jxr_linenumber" name="L13256" href="#L13256">13256</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable, 
<a class="jxr_linenumber" name="L13257" href="#L13257">13257</a>           AttributeDefName.COLUMN_HIBERNATE_VERSION_NUMBER, 
<a class="jxr_linenumber" name="L13258" href="#L13258">13258</a>           Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13259" href="#L13259">13259</a> 
<a class="jxr_linenumber" name="L13260" href="#L13260">13260</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13261" href="#L13261">13261</a>           AttributeDefName.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13262" href="#L13262">13262</a> 
<a class="jxr_linenumber" name="L13263" href="#L13263">13263</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13264" href="#L13264">13264</a>           AttributeDefName.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13265" href="#L13265">13265</a> 
<a class="jxr_linenumber" name="L13266" href="#L13266">13266</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13267" href="#L13267">13267</a>           AttributeDefName.COLUMN_DESCRIPTION, Types.VARCHAR, <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L13268" href="#L13268">13268</a> 
<a class="jxr_linenumber" name="L13269" href="#L13269">13269</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13270" href="#L13270">13270</a>           AttributeDefName.COLUMN_EXTENSION, Types.VARCHAR, <span class="jxr_string">"255"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13271" href="#L13271">13271</a> 
<a class="jxr_linenumber" name="L13272" href="#L13272">13272</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13273" href="#L13273">13273</a>           AttributeDefName.COLUMN_NAME, Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13274" href="#L13274">13274</a> 
<a class="jxr_linenumber" name="L13275" href="#L13275">13275</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13276" href="#L13276">13276</a>           AttributeDefName.COLUMN_STEM_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13277" href="#L13277">13277</a> 
<a class="jxr_linenumber" name="L13278" href="#L13278">13278</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13279" href="#L13279">13279</a>           AttributeDefName.COLUMN_ATTRIBUTE_DEF_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13280" href="#L13280">13280</a> 
<a class="jxr_linenumber" name="L13281" href="#L13281">13281</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13282" href="#L13282">13282</a>           AttributeDefName.COLUMN_DISPLAY_EXTENSION, Types.VARCHAR, <span class="jxr_string">"128"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13283" href="#L13283">13283</a> 
<a class="jxr_linenumber" name="L13284" href="#L13284">13284</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameTable,
<a class="jxr_linenumber" name="L13285" href="#L13285">13285</a>           AttributeDefName.COLUMN_DISPLAY_NAME, Types.VARCHAR, ddlVersionBean.isSqlServer() ? <span class="jxr_string">"900"</span> : <span class="jxr_string">"1024"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13286" href="#L13286">13286</a> 
<a class="jxr_linenumber" name="L13287" href="#L13287">13287</a>       String scriptOverrideName = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE unique INDEX attribute_def_name_name_idx "</span> +
<a class="jxr_linenumber" name="L13288" href="#L13288">13288</a>           <span class="jxr_string">"ON grouper_attribute_def_name (name(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L13289" href="#L13289">13289</a>       
<a class="jxr_linenumber" name="L13290" href="#L13290">13290</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, attributeDefNameTable.getName(), 
<a class="jxr_linenumber" name="L13291" href="#L13291">13291</a>           <span class="jxr_string">"attribute_def_name_name_idx"</span>, scriptOverrideName, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"name"</span>);
<a class="jxr_linenumber" name="L13292" href="#L13292">13292</a>       
<a class="jxr_linenumber" name="L13293" href="#L13293">13293</a>     }
<a class="jxr_linenumber" name="L13294" href="#L13294">13294</a> 
<a class="jxr_linenumber" name="L13295" href="#L13295">13295</a>     {
<a class="jxr_linenumber" name="L13296" href="#L13296">13296</a>       Table attributeAssignTable = GrouperDdlUtils.ddlutilsFindTable(
<a class="jxr_linenumber" name="L13297" href="#L13297">13297</a>           database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN, false);
<a class="jxr_linenumber" name="L13298" href="#L13298">13298</a>       
<a class="jxr_linenumber" name="L13299" href="#L13299">13299</a>       <strong class="jxr_keyword">boolean</strong> created = attributeAssignTable == <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L13300" href="#L13300">13300</a>       
<a class="jxr_linenumber" name="L13301" href="#L13301">13301</a>       <strong class="jxr_keyword">if</strong> (created) {
<a class="jxr_linenumber" name="L13302" href="#L13302">13302</a>         attributeAssignTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13303" href="#L13303">13303</a>             database, AttributeAssign.TABLE_GROUPER_ATTRIBUTE_ASSIGN);
<a class="jxr_linenumber" name="L13304" href="#L13304">13304</a>       }
<a class="jxr_linenumber" name="L13305" href="#L13305">13305</a>       
<a class="jxr_linenumber" name="L13306" href="#L13306">13306</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13307" href="#L13307">13307</a>           AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13308" href="#L13308">13308</a> 
<a class="jxr_linenumber" name="L13309" href="#L13309">13309</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13310" href="#L13310">13310</a>           AttributeAssign.COLUMN_ATTRIBUTE_DEF_NAME_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13311" href="#L13311">13311</a> 
<a class="jxr_linenumber" name="L13312" href="#L13312">13312</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13313" href="#L13313">13313</a>           AttributeAssign.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13314" href="#L13314">13314</a> 
<a class="jxr_linenumber" name="L13315" href="#L13315">13315</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13316" href="#L13316">13316</a>           AttributeAssign.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13317" href="#L13317">13317</a> 
<a class="jxr_linenumber" name="L13318" href="#L13318">13318</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13319" href="#L13319">13319</a>           AttributeAssign.COLUMN_DISABLED_TIME, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13320" href="#L13320">13320</a> 
<a class="jxr_linenumber" name="L13321" href="#L13321">13321</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13322" href="#L13322">13322</a>           AttributeAssign.COLUMN_ENABLED, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, <strong class="jxr_keyword">true</strong>, <span class="jxr_string">"T"</span>);
<a class="jxr_linenumber" name="L13323" href="#L13323">13323</a> 
<a class="jxr_linenumber" name="L13324" href="#L13324">13324</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13325" href="#L13325">13325</a>           AttributeAssign.COLUMN_ENABLED_TIME, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13326" href="#L13326">13326</a> 
<a class="jxr_linenumber" name="L13327" href="#L13327">13327</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable, 
<a class="jxr_linenumber" name="L13328" href="#L13328">13328</a>           AttributeAssign.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13329" href="#L13329">13329</a> 
<a class="jxr_linenumber" name="L13330" href="#L13330">13330</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13331" href="#L13331">13331</a>           AttributeAssign.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13332" href="#L13332">13332</a> 
<a class="jxr_linenumber" name="L13333" href="#L13333">13333</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13334" href="#L13334">13334</a>           AttributeAssign.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13335" href="#L13335">13335</a> 
<a class="jxr_linenumber" name="L13336" href="#L13336">13336</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13337" href="#L13337">13337</a>           AttributeAssign.COLUMN_NOTES, Types.VARCHAR, <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L13338" href="#L13338">13338</a> 
<a class="jxr_linenumber" name="L13339" href="#L13339">13339</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13340" href="#L13340">13340</a>           AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_DELEGATABLE, Types.VARCHAR, <span class="jxr_string">"15"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13341" href="#L13341">13341</a> 
<a class="jxr_linenumber" name="L13342" href="#L13342">13342</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13343" href="#L13343">13343</a>           AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_TYPE, Types.VARCHAR, <span class="jxr_string">"15"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13344" href="#L13344">13344</a> 
<a class="jxr_linenumber" name="L13345" href="#L13345">13345</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13346" href="#L13346">13346</a>           AttributeAssign.COLUMN_OWNER_ATTRIBUTE_ASSIGN_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13347" href="#L13347">13347</a> 
<a class="jxr_linenumber" name="L13348" href="#L13348">13348</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13349" href="#L13349">13349</a>           AttributeAssign.COLUMN_OWNER_ATTRIBUTE_DEF_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13350" href="#L13350">13350</a> 
<a class="jxr_linenumber" name="L13351" href="#L13351">13351</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13352" href="#L13352">13352</a>           AttributeAssign.COLUMN_OWNER_GROUP_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13353" href="#L13353">13353</a> 
<a class="jxr_linenumber" name="L13354" href="#L13354">13354</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13355" href="#L13355">13355</a>           AttributeAssign.COLUMN_OWNER_MEMBER_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13356" href="#L13356">13356</a> 
<a class="jxr_linenumber" name="L13357" href="#L13357">13357</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13358" href="#L13358">13358</a>           AttributeAssign.COLUMN_OWNER_MEMBERSHIP_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13359" href="#L13359">13359</a> 
<a class="jxr_linenumber" name="L13360" href="#L13360">13360</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13361" href="#L13361">13361</a>           AttributeAssign.COLUMN_OWNER_STEM_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13362" href="#L13362">13362</a> 
<a class="jxr_linenumber" name="L13363" href="#L13363">13363</a>       <strong class="jxr_keyword">if</strong> (created) {
<a class="jxr_linenumber" name="L13364" href="#L13364">13364</a> 
<a class="jxr_linenumber" name="L13365" href="#L13365">13365</a>         GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignTable,
<a class="jxr_linenumber" name="L13366" href="#L13366">13366</a>             AttributeAssign.COLUMN_DISALLOWED, Types.VARCHAR, <span class="jxr_string">"1"</span>, false, false);
<a class="jxr_linenumber" name="L13367" href="#L13367">13367</a> 
<a class="jxr_linenumber" name="L13368" href="#L13368">13368</a>       }
<a class="jxr_linenumber" name="L13369" href="#L13369">13369</a>       
<a class="jxr_linenumber" name="L13370" href="#L13370">13370</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L13371" href="#L13371">13371</a>           <span class="jxr_string">"attribute_asgn_attr_name_idx"</span>, false, 
<a class="jxr_linenumber" name="L13372" href="#L13372">13372</a>           AttributeAssign.COLUMN_ATTRIBUTE_DEF_NAME_ID, AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L13373" href="#L13373">13373</a> 
<a class="jxr_linenumber" name="L13374" href="#L13374">13374</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L13375" href="#L13375">13375</a>           <span class="jxr_string">"attr_asgn_own_asgn_idx"</span>, false, 
<a class="jxr_linenumber" name="L13376" href="#L13376">13376</a>           AttributeAssign.COLUMN_OWNER_ATTRIBUTE_ASSIGN_ID, AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L13377" href="#L13377">13377</a> 
<a class="jxr_linenumber" name="L13378" href="#L13378">13378</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L13379" href="#L13379">13379</a>           <span class="jxr_string">"attr_asgn_own_def_idx"</span>, false, 
<a class="jxr_linenumber" name="L13380" href="#L13380">13380</a>           AttributeAssign.COLUMN_OWNER_ATTRIBUTE_DEF_ID, AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L13381" href="#L13381">13381</a> 
<a class="jxr_linenumber" name="L13382" href="#L13382">13382</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L13383" href="#L13383">13383</a>           <span class="jxr_string">"attr_asgn_own_group_idx"</span>, false, 
<a class="jxr_linenumber" name="L13384" href="#L13384">13384</a>           AttributeAssign.COLUMN_OWNER_GROUP_ID, AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L13385" href="#L13385">13385</a> 
<a class="jxr_linenumber" name="L13386" href="#L13386">13386</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L13387" href="#L13387">13387</a>           <span class="jxr_string">"attr_asgn_own_mem_idx"</span>, false, 
<a class="jxr_linenumber" name="L13388" href="#L13388">13388</a>           AttributeAssign.COLUMN_OWNER_MEMBER_ID, AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L13389" href="#L13389">13389</a> 
<a class="jxr_linenumber" name="L13390" href="#L13390">13390</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L13391" href="#L13391">13391</a>           <span class="jxr_string">"attr_asgn_own_mship_idx"</span>, false, 
<a class="jxr_linenumber" name="L13392" href="#L13392">13392</a>           AttributeAssign.COLUMN_OWNER_MEMBERSHIP_ID, AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L13393" href="#L13393">13393</a> 
<a class="jxr_linenumber" name="L13394" href="#L13394">13394</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignTable.getName(), 
<a class="jxr_linenumber" name="L13395" href="#L13395">13395</a>           <span class="jxr_string">"attr_asgn_own_stem_idx"</span>, false, 
<a class="jxr_linenumber" name="L13396" href="#L13396">13396</a>           AttributeAssign.COLUMN_OWNER_STEM_ID, AttributeAssign.COLUMN_ATTRIBUTE_ASSIGN_ACTION_ID);
<a class="jxr_linenumber" name="L13397" href="#L13397">13397</a> 
<a class="jxr_linenumber" name="L13398" href="#L13398">13398</a>     }
<a class="jxr_linenumber" name="L13399" href="#L13399">13399</a> 
<a class="jxr_linenumber" name="L13400" href="#L13400">13400</a>     {
<a class="jxr_linenumber" name="L13401" href="#L13401">13401</a>       Table attributeAssignValueTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13402" href="#L13402">13402</a>           database, AttributeAssignValue.TABLE_GROUPER_ATTRIBUTE_ASSIGN_VALUE);
<a class="jxr_linenumber" name="L13403" href="#L13403">13403</a>       
<a class="jxr_linenumber" name="L13404" href="#L13404">13404</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13405" href="#L13405">13405</a>           AttributeAssignValue.COLUMN_ATTRIBUTE_ASSIGN_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13406" href="#L13406">13406</a> 
<a class="jxr_linenumber" name="L13407" href="#L13407">13407</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13408" href="#L13408">13408</a>           AttributeAssignValue.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13409" href="#L13409">13409</a> 
<a class="jxr_linenumber" name="L13410" href="#L13410">13410</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13411" href="#L13411">13411</a>           AttributeAssignValue.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13412" href="#L13412">13412</a> 
<a class="jxr_linenumber" name="L13413" href="#L13413">13413</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable, 
<a class="jxr_linenumber" name="L13414" href="#L13414">13414</a>           AttributeAssignValue.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13415" href="#L13415">13415</a> 
<a class="jxr_linenumber" name="L13416" href="#L13416">13416</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13417" href="#L13417">13417</a>           AttributeAssignValue.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13418" href="#L13418">13418</a> 
<a class="jxr_linenumber" name="L13419" href="#L13419">13419</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13420" href="#L13420">13420</a>           AttributeAssignValue.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13421" href="#L13421">13421</a> 
<a class="jxr_linenumber" name="L13422" href="#L13422">13422</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13423" href="#L13423">13423</a>           AttributeAssignValue.COLUMN_VALUE_INTEGER, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13424" href="#L13424">13424</a> 
<a class="jxr_linenumber" name="L13425" href="#L13425">13425</a>       <em class="jxr_comment">//why is this line here???  it should be taken care of in the method below... oh well</em>
<a class="jxr_linenumber" name="L13426" href="#L13426">13426</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13427" href="#L13427">13427</a>           AttributeAssignValue.COLUMN_VALUE_FLOATING, Types.FLOAT, <span class="jxr_string">"20,5"</span>, false, false);
<a class="jxr_linenumber" name="L13428" href="#L13428">13428</a> 
<a class="jxr_linenumber" name="L13429" href="#L13429">13429</a>       addAttributeFloatValueCol(database);
<a class="jxr_linenumber" name="L13430" href="#L13430">13430</a>       
<a class="jxr_linenumber" name="L13431" href="#L13431">13431</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13432" href="#L13432">13432</a>           AttributeAssignValue.COLUMN_VALUE_STRING, Types.VARCHAR, <span class="jxr_string">"4000"</span>, false, false);
<a class="jxr_linenumber" name="L13433" href="#L13433">13433</a> 
<a class="jxr_linenumber" name="L13434" href="#L13434">13434</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignValueTable,
<a class="jxr_linenumber" name="L13435" href="#L13435">13435</a>           AttributeAssignValue.COLUMN_VALUE_MEMBER_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13436" href="#L13436">13436</a> 
<a class="jxr_linenumber" name="L13437" href="#L13437">13437</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L13438" href="#L13438">13438</a>           <span class="jxr_string">"attribute_val_assign_idx"</span>, false, 
<a class="jxr_linenumber" name="L13439" href="#L13439">13439</a>           AttributeAssignValue.COLUMN_ATTRIBUTE_ASSIGN_ID);
<a class="jxr_linenumber" name="L13440" href="#L13440">13440</a> 
<a class="jxr_linenumber" name="L13441" href="#L13441">13441</a>       <strong class="jxr_keyword">if</strong> (!ddlVersionBean.isSqlServer()) {
<a class="jxr_linenumber" name="L13442" href="#L13442">13442</a>         String scriptOverrideName = ddlVersionBean.isSmallIndexes() ? <span class="jxr_string">"\nCREATE INDEX attribute_val_string_idx "</span> +
<a class="jxr_linenumber" name="L13443" href="#L13443">13443</a>             <span class="jxr_string">"ON grouper_attribute_assign_value (value_string(255));\n"</span> : <strong class="jxr_keyword">null</strong>;
<a class="jxr_linenumber" name="L13444" href="#L13444">13444</a>         
<a class="jxr_linenumber" name="L13445" href="#L13445">13445</a>         GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, ddlVersionBean, attributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L13446" href="#L13446">13446</a>             <span class="jxr_string">"attribute_val_string_idx"</span>, scriptOverrideName, false, AttributeAssignValue.COLUMN_VALUE_STRING);
<a class="jxr_linenumber" name="L13447" href="#L13447">13447</a>       }
<a class="jxr_linenumber" name="L13448" href="#L13448">13448</a>       
<a class="jxr_linenumber" name="L13449" href="#L13449">13449</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L13450" href="#L13450">13450</a>           <span class="jxr_string">"attribute_val_integer_idx"</span>, false, 
<a class="jxr_linenumber" name="L13451" href="#L13451">13451</a>           AttributeAssignValue.COLUMN_VALUE_INTEGER);
<a class="jxr_linenumber" name="L13452" href="#L13452">13452</a> 
<a class="jxr_linenumber" name="L13453" href="#L13453">13453</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignValueTable.getName(), 
<a class="jxr_linenumber" name="L13454" href="#L13454">13454</a>           <span class="jxr_string">"attribute_val_member_id_idx"</span>, false, 
<a class="jxr_linenumber" name="L13455" href="#L13455">13455</a>           AttributeAssignValue.COLUMN_VALUE_MEMBER_ID);
<a class="jxr_linenumber" name="L13456" href="#L13456">13456</a> 
<a class="jxr_linenumber" name="L13457" href="#L13457">13457</a>     }
<a class="jxr_linenumber" name="L13458" href="#L13458">13458</a> 
<a class="jxr_linenumber" name="L13459" href="#L13459">13459</a>     {
<a class="jxr_linenumber" name="L13460" href="#L13460">13460</a>       Table attributeDefScopeTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13461" href="#L13461">13461</a>           database, AttributeDefScope.TABLE_GROUPER_ATTRIBUTE_DEF_SCOPE);
<a class="jxr_linenumber" name="L13462" href="#L13462">13462</a>       
<a class="jxr_linenumber" name="L13463" href="#L13463">13463</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable,
<a class="jxr_linenumber" name="L13464" href="#L13464">13464</a>           AttributeDefScope.COLUMN_ATTRIBUTE_DEF_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13465" href="#L13465">13465</a> 
<a class="jxr_linenumber" name="L13466" href="#L13466">13466</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable,
<a class="jxr_linenumber" name="L13467" href="#L13467">13467</a>           AttributeDefScope.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13468" href="#L13468">13468</a> 
<a class="jxr_linenumber" name="L13469" href="#L13469">13469</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable,
<a class="jxr_linenumber" name="L13470" href="#L13470">13470</a>           AttributeDefScope.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13471" href="#L13471">13471</a> 
<a class="jxr_linenumber" name="L13472" href="#L13472">13472</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable, 
<a class="jxr_linenumber" name="L13473" href="#L13473">13473</a>           AttributeDefScope.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13474" href="#L13474">13474</a> 
<a class="jxr_linenumber" name="L13475" href="#L13475">13475</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable,
<a class="jxr_linenumber" name="L13476" href="#L13476">13476</a>           AttributeDefScope.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13477" href="#L13477">13477</a> 
<a class="jxr_linenumber" name="L13478" href="#L13478">13478</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable,
<a class="jxr_linenumber" name="L13479" href="#L13479">13479</a>           AttributeDefScope.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13480" href="#L13480">13480</a> 
<a class="jxr_linenumber" name="L13481" href="#L13481">13481</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable,
<a class="jxr_linenumber" name="L13482" href="#L13482">13482</a>           AttributeDefScope.COLUMN_ATTRIBUTE_DEF_SCOPE_TYPE, Types.VARCHAR, <span class="jxr_string">"32"</span>, false, false);
<a class="jxr_linenumber" name="L13483" href="#L13483">13483</a> 
<a class="jxr_linenumber" name="L13484" href="#L13484">13484</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable,
<a class="jxr_linenumber" name="L13485" href="#L13485">13485</a>           AttributeDefScope.COLUMN_SCOPE_STRING, Types.VARCHAR, <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L13486" href="#L13486">13486</a> 
<a class="jxr_linenumber" name="L13487" href="#L13487">13487</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefScopeTable,
<a class="jxr_linenumber" name="L13488" href="#L13488">13488</a>           AttributeDefScope.COLUMN_SCOPE_STRING2, Types.VARCHAR, <span class="jxr_string">"1024"</span>, false, false);
<a class="jxr_linenumber" name="L13489" href="#L13489">13489</a> 
<a class="jxr_linenumber" name="L13490" href="#L13490">13490</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeDefScopeTable.getName(), 
<a class="jxr_linenumber" name="L13491" href="#L13491">13491</a>           <span class="jxr_string">"attribute_def_scope_atdef_idx"</span>, false, 
<a class="jxr_linenumber" name="L13492" href="#L13492">13492</a>           AttributeDefScope.COLUMN_ATTRIBUTE_DEF_ID);
<a class="jxr_linenumber" name="L13493" href="#L13493">13493</a> 
<a class="jxr_linenumber" name="L13494" href="#L13494">13494</a>     }
<a class="jxr_linenumber" name="L13495" href="#L13495">13495</a> 
<a class="jxr_linenumber" name="L13496" href="#L13496">13496</a>     {
<a class="jxr_linenumber" name="L13497" href="#L13497">13497</a>       Table attributeDefNameSetTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13498" href="#L13498">13498</a>           database, AttributeDefNameSet.TABLE_GROUPER_ATTRIBUTE_DEF_NAME_SET);
<a class="jxr_linenumber" name="L13499" href="#L13499">13499</a>       
<a class="jxr_linenumber" name="L13500" href="#L13500">13500</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13501" href="#L13501">13501</a>           AttributeDefNameSet.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13502" href="#L13502">13502</a> 
<a class="jxr_linenumber" name="L13503" href="#L13503">13503</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13504" href="#L13504">13504</a>           AttributeDefNameSet.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13505" href="#L13505">13505</a> 
<a class="jxr_linenumber" name="L13506" href="#L13506">13506</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable, 
<a class="jxr_linenumber" name="L13507" href="#L13507">13507</a>           AttributeDefNameSet.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13508" href="#L13508">13508</a> 
<a class="jxr_linenumber" name="L13509" href="#L13509">13509</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13510" href="#L13510">13510</a>           AttributeDefNameSet.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13511" href="#L13511">13511</a> 
<a class="jxr_linenumber" name="L13512" href="#L13512">13512</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13513" href="#L13513">13513</a>           AttributeDefNameSet.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13514" href="#L13514">13514</a> 
<a class="jxr_linenumber" name="L13515" href="#L13515">13515</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13516" href="#L13516">13516</a>           AttributeDefNameSet.COLUMN_DEPTH, Types.BIGINT, <span class="jxr_string">"10"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13517" href="#L13517">13517</a> 
<a class="jxr_linenumber" name="L13518" href="#L13518">13518</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13519" href="#L13519">13519</a>           AttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13520" href="#L13520">13520</a> 
<a class="jxr_linenumber" name="L13521" href="#L13521">13521</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13522" href="#L13522">13522</a>           AttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13523" href="#L13523">13523</a> 
<a class="jxr_linenumber" name="L13524" href="#L13524">13524</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13525" href="#L13525">13525</a>           AttributeDefNameSet.COLUMN_PARENT_ATTR_DEF_NAME_SET_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13526" href="#L13526">13526</a> 
<a class="jxr_linenumber" name="L13527" href="#L13527">13527</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeDefNameSetTable,
<a class="jxr_linenumber" name="L13528" href="#L13528">13528</a>           AttributeDefNameSet.COLUMN_TYPE, Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13529" href="#L13529">13529</a> 
<a class="jxr_linenumber" name="L13530" href="#L13530">13530</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeDefNameSetTable.getName(), 
<a class="jxr_linenumber" name="L13531" href="#L13531">13531</a>           <span class="jxr_string">"attr_def_name_set_ifhas_idx"</span>, false, 
<a class="jxr_linenumber" name="L13532" href="#L13532">13532</a>           AttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID);
<a class="jxr_linenumber" name="L13533" href="#L13533">13533</a> 
<a class="jxr_linenumber" name="L13534" href="#L13534">13534</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeDefNameSetTable.getName(), 
<a class="jxr_linenumber" name="L13535" href="#L13535">13535</a>           <span class="jxr_string">"attr_def_name_set_then_idx"</span>, false, 
<a class="jxr_linenumber" name="L13536" href="#L13536">13536</a>           AttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID);
<a class="jxr_linenumber" name="L13537" href="#L13537">13537</a> 
<a class="jxr_linenumber" name="L13538" href="#L13538">13538</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeDefNameSetTable.getName(), 
<a class="jxr_linenumber" name="L13539" href="#L13539">13539</a>           <span class="jxr_string">"attr_def_name_set_unq_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L13540" href="#L13540">13540</a>           AttributeDefNameSet.COLUMN_PARENT_ATTR_DEF_NAME_SET_ID, 
<a class="jxr_linenumber" name="L13541" href="#L13541">13541</a>           AttributeDefNameSet.COLUMN_IF_HAS_ATTRIBUTE_DEF_NAME_ID, AttributeDefNameSet.COLUMN_THEN_HAS_ATTRIBUTE_DEF_NAME_ID);
<a class="jxr_linenumber" name="L13542" href="#L13542">13542</a> 
<a class="jxr_linenumber" name="L13543" href="#L13543">13543</a>     }
<a class="jxr_linenumber" name="L13544" href="#L13544">13544</a> 
<a class="jxr_linenumber" name="L13545" href="#L13545">13545</a>     {
<a class="jxr_linenumber" name="L13546" href="#L13546">13546</a>       Table attributeAssignActionTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13547" href="#L13547">13547</a>           database, AttributeAssignAction.TABLE_GROUPER_ATTR_ASSIGN_ACTION);
<a class="jxr_linenumber" name="L13548" href="#L13548">13548</a>       
<a class="jxr_linenumber" name="L13549" href="#L13549">13549</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignActionTable,
<a class="jxr_linenumber" name="L13550" href="#L13550">13550</a>           AttributeAssignAction.COLUMN_ATTRIBUTE_DEF_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13551" href="#L13551">13551</a> 
<a class="jxr_linenumber" name="L13552" href="#L13552">13552</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignActionTable,
<a class="jxr_linenumber" name="L13553" href="#L13553">13553</a>           AttributeAssignAction.COLUMN_CONTEXT_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L13554" href="#L13554">13554</a> 
<a class="jxr_linenumber" name="L13555" href="#L13555">13555</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignActionTable,
<a class="jxr_linenumber" name="L13556" href="#L13556">13556</a>           AttributeAssignAction.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13557" href="#L13557">13557</a> 
<a class="jxr_linenumber" name="L13558" href="#L13558">13558</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignActionTable, 
<a class="jxr_linenumber" name="L13559" href="#L13559">13559</a>           AttributeAssignAction.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13560" href="#L13560">13560</a> 
<a class="jxr_linenumber" name="L13561" href="#L13561">13561</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignActionTable,
<a class="jxr_linenumber" name="L13562" href="#L13562">13562</a>           AttributeAssignAction.COLUMN_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13563" href="#L13563">13563</a> 
<a class="jxr_linenumber" name="L13564" href="#L13564">13564</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignActionTable,
<a class="jxr_linenumber" name="L13565" href="#L13565">13565</a>           AttributeAssignAction.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13566" href="#L13566">13566</a> 
<a class="jxr_linenumber" name="L13567" href="#L13567">13567</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(attributeAssignActionTable,
<a class="jxr_linenumber" name="L13568" href="#L13568">13568</a>           AttributeAssignAction.COLUMN_NAME, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L13569" href="#L13569">13569</a> 
<a class="jxr_linenumber" name="L13570" href="#L13570">13570</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, attributeAssignActionTable.getName(), 
<a class="jxr_linenumber" name="L13571" href="#L13571">13571</a>           <span class="jxr_string">"attr_assn_act_def_id_idx"</span>, false, 
<a class="jxr_linenumber" name="L13572" href="#L13572">13572</a>           AttributeAssignAction.COLUMN_ATTRIBUTE_DEF_ID);
<a class="jxr_linenumber" name="L13573" href="#L13573">13573</a> 
<a class="jxr_linenumber" name="L13574" href="#L13574">13574</a>     }
<a class="jxr_linenumber" name="L13575" href="#L13575">13575</a> 
<a class="jxr_linenumber" name="L13576" href="#L13576">13576</a>     
<a class="jxr_linenumber" name="L13577" href="#L13577">13577</a>     {
<a class="jxr_linenumber" name="L13578" href="#L13578">13578</a>       Table actionSetTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13579" href="#L13579">13579</a>           database, AttributeAssignActionSet.TABLE_GROUPER_ATTR_ASSIGN_ACTION_SET);
<a class="jxr_linenumber" name="L13580" href="#L13580">13580</a>       
<a class="jxr_linenumber" name="L13581" href="#L13581">13581</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13582" href="#L13582">13582</a>           AttributeAssignActionSet.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13583" href="#L13583">13583</a> 
<a class="jxr_linenumber" name="L13584" href="#L13584">13584</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13585" href="#L13585">13585</a>           AttributeAssignActionSet.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13586" href="#L13586">13586</a> 
<a class="jxr_linenumber" name="L13587" href="#L13587">13587</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable, 
<a class="jxr_linenumber" name="L13588" href="#L13588">13588</a>           AttributeAssignActionSet.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13589" href="#L13589">13589</a> 
<a class="jxr_linenumber" name="L13590" href="#L13590">13590</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13591" href="#L13591">13591</a>           AttributeAssignActionSet.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13592" href="#L13592">13592</a> 
<a class="jxr_linenumber" name="L13593" href="#L13593">13593</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13594" href="#L13594">13594</a>           AttributeAssignActionSet.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13595" href="#L13595">13595</a> 
<a class="jxr_linenumber" name="L13596" href="#L13596">13596</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13597" href="#L13597">13597</a>           AttributeAssignActionSet.COLUMN_DEPTH, Types.BIGINT, <span class="jxr_string">"10"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13598" href="#L13598">13598</a> 
<a class="jxr_linenumber" name="L13599" href="#L13599">13599</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13600" href="#L13600">13600</a>           AttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13601" href="#L13601">13601</a> 
<a class="jxr_linenumber" name="L13602" href="#L13602">13602</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13603" href="#L13603">13603</a>           AttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13604" href="#L13604">13604</a> 
<a class="jxr_linenumber" name="L13605" href="#L13605">13605</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13606" href="#L13606">13606</a>           AttributeAssignActionSet.COLUMN_PARENT_ATTR_ASSN_ACTION_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L13607" href="#L13607">13607</a> 
<a class="jxr_linenumber" name="L13608" href="#L13608">13608</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(actionSetTable,
<a class="jxr_linenumber" name="L13609" href="#L13609">13609</a>           AttributeAssignActionSet.COLUMN_TYPE, Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13610" href="#L13610">13610</a> 
<a class="jxr_linenumber" name="L13611" href="#L13611">13611</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, actionSetTable.getName(), 
<a class="jxr_linenumber" name="L13612" href="#L13612">13612</a>           <span class="jxr_string">"action_set_ifhas_idx"</span>, false, 
<a class="jxr_linenumber" name="L13613" href="#L13613">13613</a>           AttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID);
<a class="jxr_linenumber" name="L13614" href="#L13614">13614</a> 
<a class="jxr_linenumber" name="L13615" href="#L13615">13615</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, actionSetTable.getName(), 
<a class="jxr_linenumber" name="L13616" href="#L13616">13616</a>           <span class="jxr_string">"action_set_then_idx"</span>, false, 
<a class="jxr_linenumber" name="L13617" href="#L13617">13617</a>           AttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID);
<a class="jxr_linenumber" name="L13618" href="#L13618">13618</a> 
<a class="jxr_linenumber" name="L13619" href="#L13619">13619</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, actionSetTable.getName(), 
<a class="jxr_linenumber" name="L13620" href="#L13620">13620</a>           <span class="jxr_string">"action_set_unq_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L13621" href="#L13621">13621</a>           AttributeAssignActionSet.COLUMN_PARENT_ATTR_ASSN_ACTION_ID, 
<a class="jxr_linenumber" name="L13622" href="#L13622">13622</a>           AttributeAssignActionSet.COLUMN_IF_HAS_ATTR_ASSN_ACTION_ID, AttributeAssignActionSet.COLUMN_THEN_HAS_ATTR_ASSN_ACTION_ID);
<a class="jxr_linenumber" name="L13623" href="#L13623">13623</a> 
<a class="jxr_linenumber" name="L13624" href="#L13624">13624</a>     }
<a class="jxr_linenumber" name="L13625" href="#L13625">13625</a> 
<a class="jxr_linenumber" name="L13626" href="#L13626">13626</a>     
<a class="jxr_linenumber" name="L13627" href="#L13627">13627</a>     {
<a class="jxr_linenumber" name="L13628" href="#L13628">13628</a>       Table roleSetTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13629" href="#L13629">13629</a>           database, RoleSet.TABLE_GROUPER_ROLE_SET);
<a class="jxr_linenumber" name="L13630" href="#L13630">13630</a>       
<a class="jxr_linenumber" name="L13631" href="#L13631">13631</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13632" href="#L13632">13632</a>           RoleSet.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13633" href="#L13633">13633</a> 
<a class="jxr_linenumber" name="L13634" href="#L13634">13634</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13635" href="#L13635">13635</a>           RoleSet.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13636" href="#L13636">13636</a> 
<a class="jxr_linenumber" name="L13637" href="#L13637">13637</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable, 
<a class="jxr_linenumber" name="L13638" href="#L13638">13638</a>           RoleSet.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13639" href="#L13639">13639</a> 
<a class="jxr_linenumber" name="L13640" href="#L13640">13640</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13641" href="#L13641">13641</a>           RoleSet.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13642" href="#L13642">13642</a> 
<a class="jxr_linenumber" name="L13643" href="#L13643">13643</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13644" href="#L13644">13644</a>           RoleSet.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13645" href="#L13645">13645</a> 
<a class="jxr_linenumber" name="L13646" href="#L13646">13646</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13647" href="#L13647">13647</a>           RoleSet.COLUMN_DEPTH, Types.BIGINT, <span class="jxr_string">"10"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13648" href="#L13648">13648</a> 
<a class="jxr_linenumber" name="L13649" href="#L13649">13649</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13650" href="#L13650">13650</a>           RoleSet.COLUMN_IF_HAS_ROLE_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13651" href="#L13651">13651</a> 
<a class="jxr_linenumber" name="L13652" href="#L13652">13652</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13653" href="#L13653">13653</a>           RoleSet.COLUMN_THEN_HAS_ROLE_ID, Types.VARCHAR, ID_SIZE, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13654" href="#L13654">13654</a> 
<a class="jxr_linenumber" name="L13655" href="#L13655">13655</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13656" href="#L13656">13656</a>           RoleSet.COLUMN_PARENT_ROLE_SET_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13657" href="#L13657">13657</a> 
<a class="jxr_linenumber" name="L13658" href="#L13658">13658</a>       GrouperDdlUtils.ddlutilsFindOrCreateColumn(roleSetTable,
<a class="jxr_linenumber" name="L13659" href="#L13659">13659</a>           RoleSet.COLUMN_TYPE, Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13660" href="#L13660">13660</a> 
<a class="jxr_linenumber" name="L13661" href="#L13661">13661</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, roleSetTable.getName(), 
<a class="jxr_linenumber" name="L13662" href="#L13662">13662</a>           <span class="jxr_string">"role_set_ifhas_idx"</span>, false, 
<a class="jxr_linenumber" name="L13663" href="#L13663">13663</a>           RoleSet.COLUMN_IF_HAS_ROLE_ID);
<a class="jxr_linenumber" name="L13664" href="#L13664">13664</a> 
<a class="jxr_linenumber" name="L13665" href="#L13665">13665</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, roleSetTable.getName(), 
<a class="jxr_linenumber" name="L13666" href="#L13666">13666</a>           <span class="jxr_string">"role_set_then_idx"</span>, false, 
<a class="jxr_linenumber" name="L13667" href="#L13667">13667</a>           RoleSet.COLUMN_THEN_HAS_ROLE_ID);
<a class="jxr_linenumber" name="L13668" href="#L13668">13668</a> 
<a class="jxr_linenumber" name="L13669" href="#L13669">13669</a>       GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, roleSetTable.getName(), 
<a class="jxr_linenumber" name="L13670" href="#L13670">13670</a>           <span class="jxr_string">"role_set_unq_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L13671" href="#L13671">13671</a>           RoleSet.COLUMN_PARENT_ROLE_SET_ID, 
<a class="jxr_linenumber" name="L13672" href="#L13672">13672</a>           RoleSet.COLUMN_IF_HAS_ROLE_ID, RoleSet.COLUMN_THEN_HAS_ROLE_ID);
<a class="jxr_linenumber" name="L13673" href="#L13673">13673</a> 
<a class="jxr_linenumber" name="L13674" href="#L13674">13674</a>     }
<a class="jxr_linenumber" name="L13675" href="#L13675">13675</a> 
<a class="jxr_linenumber" name="L13676" href="#L13676">13676</a>     <em class="jxr_comment">//see if the table is there</em>
<a class="jxr_linenumber" name="L13677" href="#L13677">13677</a>     <strong class="jxr_keyword">boolean</strong> tableThere = GrouperDdlUtils.assertTablesThere(<strong class="jxr_keyword">true</strong>, false, <span class="jxr_string">"grouper_fields"</span>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13678" href="#L13678">13678</a>     <strong class="jxr_keyword">if</strong> (tableThere) {
<a class="jxr_linenumber" name="L13679" href="#L13679">13679</a>       <strong class="jxr_keyword">try</strong> {
<a class="jxr_linenumber" name="L13680" href="#L13680">13680</a>         <em class="jxr_comment">//first, see if tables are there</em>
<a class="jxr_linenumber" name="L13681" href="#L13681">13681</a>         <strong class="jxr_keyword">int</strong> count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L13682" href="#L13682">13682</a>             <span class="jxr_string">"select count(*) from grouper_fields where name = 'attrOptins'"</span>);
<a class="jxr_linenumber" name="L13683" href="#L13683">13683</a>         <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L13684" href="#L13684">13684</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, "</span> +
<a class="jxr_linenumber" name="L13685" href="#L13685">13685</a>           		<span class="jxr_string">"name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L13686" href="#L13686">13686</a>           		<span class="jxr_string">"values ('00b4148eaf454aabb7435ced0e91277d', 'attrOptins', 'attrUpdate', 'attributeDef', 'attrUpdate', 0, '39c69826e3114f0db38794185e63af3b');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L13687" href="#L13687">13687</a>         }
<a class="jxr_linenumber" name="L13688" href="#L13688">13688</a>         count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L13689" href="#L13689">13689</a>           <span class="jxr_string">"select count(*) from grouper_fields where name = 'attrAdmins'"</span>);
<a class="jxr_linenumber" name="L13690" href="#L13690">13690</a>         <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L13691" href="#L13691">13691</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, "</span> +
<a class="jxr_linenumber" name="L13692" href="#L13692">13692</a>           		<span class="jxr_string">"name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L13693" href="#L13693">13693</a>           		<span class="jxr_string">"values ('3b1da4ed18d64ae88de85a5071dfe6d8', 'attrAdmins', 'attrAdmin', 'attributeDef', 'attrAdmin', 0, '86c25c1ab89741afa70210cb44a5b0a0');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L13694" href="#L13694">13694</a>         }
<a class="jxr_linenumber" name="L13695" href="#L13695">13695</a>         count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L13696" href="#L13696">13696</a>           <span class="jxr_string">"select count(*) from grouper_fields where name = 'attrViewers'"</span>);
<a class="jxr_linenumber" name="L13697" href="#L13697">13697</a>         <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L13698" href="#L13698">13698</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, "</span> +
<a class="jxr_linenumber" name="L13699" href="#L13699">13699</a>           		<span class="jxr_string">"name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L13700" href="#L13700">13700</a>           		<span class="jxr_string">"values ('4ab55239369e409e859e1b4a9b3251c5', 'attrViewers', 'attrAdmin', 'attributeDef', 'attrAdmin', 0, '3ff484c5a5744131a82bf3bedf3cd4d5');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L13701" href="#L13701">13701</a>         }
<a class="jxr_linenumber" name="L13702" href="#L13702">13702</a>         count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L13703" href="#L13703">13703</a>           <span class="jxr_string">"select count(*) from grouper_fields where name = 'attrOptouts'"</span>);
<a class="jxr_linenumber" name="L13704" href="#L13704">13704</a>         <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L13705" href="#L13705">13705</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, "</span> +
<a class="jxr_linenumber" name="L13706" href="#L13706">13706</a>           		<span class="jxr_string">"name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L13707" href="#L13707">13707</a>           		<span class="jxr_string">"values ('6774afba333c4d5187bd814a7faa92e8', 'attrOptouts', 'attrUpdate', 'attributeDef', 'attrUpdate', 0, '4e3799ef8b254013b25f8a4abdf1bc9d');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L13708" href="#L13708">13708</a>         }
<a class="jxr_linenumber" name="L13709" href="#L13709">13709</a>         count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L13710" href="#L13710">13710</a>           <span class="jxr_string">"select count(*) from grouper_fields where name = 'attrUpdaters'"</span>);
<a class="jxr_linenumber" name="L13711" href="#L13711">13711</a>         <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L13712" href="#L13712">13712</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, "</span> +
<a class="jxr_linenumber" name="L13713" href="#L13713">13713</a>           		<span class="jxr_string">"name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L13714" href="#L13714">13714</a>           		<span class="jxr_string">"values ('a4900e37f50d4c9b8e96f6c467b3ac7b', 'attrUpdaters', 'attrAdmin', 'attributeDef', 'attrAdmin', 0, '1d330d859f664cd8b1b86f03c1812f21');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L13715" href="#L13715">13715</a>         }
<a class="jxr_linenumber" name="L13716" href="#L13716">13716</a>         count = HibernateSession.bySqlStatic().select(<strong class="jxr_keyword">int</strong>.<strong class="jxr_keyword">class</strong>, 
<a class="jxr_linenumber" name="L13717" href="#L13717">13717</a>           <span class="jxr_string">"select count(*) from grouper_fields where name = 'attrReaders'"</span>);
<a class="jxr_linenumber" name="L13718" href="#L13718">13718</a>         <strong class="jxr_keyword">if</strong> (count == 0) {
<a class="jxr_linenumber" name="L13719" href="#L13719">13719</a>           ddlVersionBean.appendAdditionalScriptUnique(<span class="jxr_string">"\ninsert into grouper_fields (id, "</span> +
<a class="jxr_linenumber" name="L13720" href="#L13720">13720</a>           		<span class="jxr_string">"name, read_privilege, type, write_privilege, hibernate_version_number, context_id) "</span> +
<a class="jxr_linenumber" name="L13721" href="#L13721">13721</a>           		<span class="jxr_string">"values ('fe16c65b4030428d812c2bc021b5c834', 'attrReaders', 'attrAdmin', 'attributeDef', 'attrAdmin', 0, '6f7243f690274dcdaf8215a13b6d3a93');\ncommit;\n\n"</span>);
<a class="jxr_linenumber" name="L13722" href="#L13722">13722</a>         }
<a class="jxr_linenumber" name="L13723" href="#L13723">13723</a>         
<a class="jxr_linenumber" name="L13724" href="#L13724">13724</a>       } <strong class="jxr_keyword">catch</strong> (RuntimeException e) {
<a class="jxr_linenumber" name="L13725" href="#L13725">13725</a>         <em class="jxr_comment">//dont worry if exception, the table probably isnt there,and will get initted in good time</em>
<a class="jxr_linenumber" name="L13726" href="#L13726">13726</a>       }
<a class="jxr_linenumber" name="L13727" href="#L13727">13727</a>     }
<a class="jxr_linenumber" name="L13728" href="#L13728">13728</a>   }
<a class="jxr_linenumber" name="L13729" href="#L13729">13729</a>   
<a class="jxr_linenumber" name="L13730" href="#L13730">13730</a> 
<a class="jxr_linenumber" name="L13731" href="#L13731">13731</a>   <em class="jxr_javadoccomment">/**</em>
<a class="jxr_linenumber" name="L13732" href="#L13732">13732</a> <em class="jxr_javadoccomment">   * @param ddlVersionBean</em>
<a class="jxr_linenumber" name="L13733" href="#L13733">13733</a> <em class="jxr_javadoccomment">   * @param database</em>
<a class="jxr_linenumber" name="L13734" href="#L13734">13734</a> <em class="jxr_javadoccomment">   */</em>
<a class="jxr_linenumber" name="L13735" href="#L13735">13735</a>   <strong class="jxr_keyword">private</strong> <strong class="jxr_keyword">static</strong> <strong class="jxr_keyword">void</strong> addStemSetTable(<a href="../../../../../edu/internet2/middleware/grouper/ddl/DdlVersionBean.html">DdlVersionBean</a> ddlVersionBean, Database database) {
<a class="jxr_linenumber" name="L13736" href="#L13736">13736</a>     Table stemSetTable = GrouperDdlUtils.ddlutilsFindOrCreateTable(
<a class="jxr_linenumber" name="L13737" href="#L13737">13737</a>         database, StemSet.TABLE_GROUPER_STEM_SET);
<a class="jxr_linenumber" name="L13738" href="#L13738">13738</a> 
<a class="jxr_linenumber" name="L13739" href="#L13739">13739</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13740" href="#L13740">13740</a>         StemSet.COLUMN_ID, Types.VARCHAR, ID_SIZE, <strong class="jxr_keyword">true</strong>, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13741" href="#L13741">13741</a> 
<a class="jxr_linenumber" name="L13742" href="#L13742">13742</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13743" href="#L13743">13743</a>         StemSet.COLUMN_IF_HAS_STEM_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13744" href="#L13744">13744</a> 
<a class="jxr_linenumber" name="L13745" href="#L13745">13745</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13746" href="#L13746">13746</a>         StemSet.COLUMN_THEN_HAS_STEM_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13747" href="#L13747">13747</a> 
<a class="jxr_linenumber" name="L13748" href="#L13748">13748</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13749" href="#L13749">13749</a>         StemSet.COLUMN_PARENT_STEM_SET_ID, Types.VARCHAR, <span class="jxr_string">"40"</span>, false, false);
<a class="jxr_linenumber" name="L13750" href="#L13750">13750</a> 
<a class="jxr_linenumber" name="L13751" href="#L13751">13751</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13752" href="#L13752">13752</a>         StemSet.COLUMN_TYPE, Types.VARCHAR, <span class="jxr_string">"32"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13753" href="#L13753">13753</a> 
<a class="jxr_linenumber" name="L13754" href="#L13754">13754</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13755" href="#L13755">13755</a>         StemSet.COLUMN_DEPTH, Types.BIGINT, <span class="jxr_string">"10"</span>, false, <strong class="jxr_keyword">true</strong>);
<a class="jxr_linenumber" name="L13756" href="#L13756">13756</a>     
<a class="jxr_linenumber" name="L13757" href="#L13757">13757</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13758" href="#L13758">13758</a>         StemSet.COLUMN_CREATED_ON, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13759" href="#L13759">13759</a>     
<a class="jxr_linenumber" name="L13760" href="#L13760">13760</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13761" href="#L13761">13761</a>         StemSet.COLUMN_LAST_UPDATED, Types.BIGINT, <span class="jxr_string">"20"</span>, false, false);
<a class="jxr_linenumber" name="L13762" href="#L13762">13762</a>     
<a class="jxr_linenumber" name="L13763" href="#L13763">13763</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable,
<a class="jxr_linenumber" name="L13764" href="#L13764">13764</a>         StemSet.COLUMN_CONTEXT_ID, Types.VARCHAR, ID_SIZE, false, false);
<a class="jxr_linenumber" name="L13765" href="#L13765">13765</a> 
<a class="jxr_linenumber" name="L13766" href="#L13766">13766</a>     GrouperDdlUtils.ddlutilsFindOrCreateColumn(stemSetTable, 
<a class="jxr_linenumber" name="L13767" href="#L13767">13767</a>         StemSet.COLUMN_HIBERNATE_VERSION_NUMBER, Types.BIGINT, <span class="jxr_string">"12"</span>, false, false);
<a class="jxr_linenumber" name="L13768" href="#L13768">13768</a>     
<a class="jxr_linenumber" name="L13769" href="#L13769">13769</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemSetTable.getName(), 
<a class="jxr_linenumber" name="L13770" href="#L13770">13770</a>         <span class="jxr_string">"stem_set_ifhas_idx"</span>, false, 
<a class="jxr_linenumber" name="L13771" href="#L13771">13771</a>         StemSet.COLUMN_IF_HAS_STEM_ID);
<a class="jxr_linenumber" name="L13772" href="#L13772">13772</a> 
<a class="jxr_linenumber" name="L13773" href="#L13773">13773</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemSetTable.getName(), 
<a class="jxr_linenumber" name="L13774" href="#L13774">13774</a>         <span class="jxr_string">"stem_set_then_idx"</span>, false, 
<a class="jxr_linenumber" name="L13775" href="#L13775">13775</a>         StemSet.COLUMN_THEN_HAS_STEM_ID);
<a class="jxr_linenumber" name="L13776" href="#L13776">13776</a>     
<a class="jxr_linenumber" name="L13777" href="#L13777">13777</a>     GrouperDdlUtils.ddlutilsFindOrCreateIndex(database, stemSetTable.getName(), 
<a class="jxr_linenumber" name="L13778" href="#L13778">13778</a>         <span class="jxr_string">"stem_set_unq_idx"</span>, <strong class="jxr_keyword">true</strong>, 
<a class="jxr_linenumber" name="L13779" href="#L13779">13779</a>         StemSet.COLUMN_PARENT_STEM_SET_ID, StemSet.COLUMN_IF_HAS_STEM_ID, StemSet.COLUMN_THEN_HAS_STEM_ID);
<a class="jxr_linenumber" name="L13780" href="#L13780">13780</a>   }
<a class="jxr_linenumber" name="L13781" href="#L13781">13781</a> }
</pre>
<hr/>
<div id="footer">Copyright &#169; 2014 <a href="http://www.internet2.edu/">Internet2</a>. All rights reserved.</div>
</body>
</html>
