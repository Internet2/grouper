<?xml version="1.0" encoding="utf-8"?>

<!--
Grouper's subject resolver configuration
$Id: sources.xml,v 1.9 2008-08-18 06:26:10 mchyzer Exp $
-->

<sources>

  <!-- Group Subject Resolver -->
  <!-- 
    NOTE: It is recommended that you **not** change the default
          values for this source adapter.
  -->
  <source adapterClass="edu.internet2.middleware.grouper.GrouperSourceAdapter">
    <id>g:gsa</id>
    <name>Grouper: Group Source Adapter</name>
    <type>group</type>
  </source>
  <!-- Group Subject Resolver -->

  <source adapterClass="edu.internet2.middleware.grouper.subj.GrouperJdbcSourceAdapter">
    <id>jdbc</id>
    <name>JDBC Source Adapter</name>
    <type>person</type>
    <init-param>
      <param-name>maxActive</param-name>
      <param-value>4</param-value>
    </init-param>
    <init-param>
      <param-name>maxIdle</param-name>
      <param-value>2</param-value>
    </init-param>
    <init-param>
      <param-name>maxWait</param-name>
      <param-value>5</param-value>
    </init-param>

    <init-param>
      <param-name>dbDriver</param-name>
      <param-value>org.hsqldb.jdbcDriver</param-value>
    </init-param>
    <init-param>
      <param-name>dbUrl</param-name>
      <param-value>jdbc:hsqldb:@base@/dist/run/grouper;create=true</param-value>
    </init-param>

    <init-param>
      <param-name>dbUser</param-name>
      <param-value>sa</param-value>
    </init-param>
    <init-param>
      <param-name>dbPwd</param-name>
      <param-value></param-value>
    </init-param>

     <init-param>
      <param-name>SubjectID_AttributeType</param-name>
      <param-value>subjectId</param-value>
    </init-param>
    <init-param>
      <param-name>Name_AttributeType</param-name>
      <param-value>name</param-value>
    </init-param>
    <init-param>
      <param-name>Description_AttributeType</param-name>
      <param-value>name</param-value>
    </init-param>
    
    <search>
      <searchType>searchSubject</searchType>
      <param>
        <param-name>numParameters</param-name>
        <param-value>1</param-value>
      </param>
      <param>
        <param-name>sql</param-name>
        <param-value>select * from Subject where (subjectId=?)</param-value>
       </param>
    </search>
    <search>
      <searchType>searchSubjectByIdentifier</searchType>
      <param>
        <param-name>numParameters</param-name>
        <param-value>1</param-value>
      </param>
      <param>
        <param-name>sql</param-name>
        <param-value>select * from Subject where (name=?)</param-value>
      </param>
    </search>
    <search>
      <searchType>search</searchType>
        <param>
          <param-name>numParameters</param-name>
          <param-value>2</param-value>
        </param>
        <param>
          <param-name>sql</param-name>
          <param-value>
            select * from Subject where 
                  (subjectId  like '%?%')
              or  (name       like '%?%')
          </param-value>
      </param>
    </search>
    
  </source>

</sources>

