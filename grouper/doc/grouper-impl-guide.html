<html>
<head>
  <title>Grouper Implementation Guide</title>
  <link href="stylesheet.css" media="screen" rel="Stylesheet" type="text/css" />
<!-- FIXME Move into stylesheet.css -->
  <style>
<!--
pre {
  padding-bottom: 2%;
  padding-left: 5%;
  padding-right: 5%;
  padding-top: 2%;
}
#table {
  border: 1px solid black;
  border-collapse: collapse;
}
body {
  padding-bottom: 2%;
  padding-left: 2%;
  padding-right: 2%;
  padding-top: 2%;
}
h2 {
  padding-top: 3%;
}
h3 {
  padding-top: 1%;
}
h4 {
  padding-top: 1%;
}
td.c {
  text-align: center;
  padding: 5px;
}
td.r {
  text-align: left;
  padding: 5px;
}
.section { }
.subsection { }
.subsubsection { }
.TODO {
  color: red;
  font-weight: bolder;
}
#title {
  text-align: center;
}
-->
  </style>
</head>
<body>
<div id="summary">
grouper-impl-guide.html<br />
$Date: 2006-01-12 14:05:21 $
</div>
<div id="title">
<h1>Grouper Implementation Guide</h1>
</div>

<!-- toc -->
<div id="toc">
<h2>Table of Contents</h2>
<ol>
  <li><a href="#intro">Introduction To Grouper</a></li>
  <li><a href="#registry">The Groups Registry</a></li>
  <ol>
    <li><a href="#registry_gans">Groups And Namespaces</a></li>
    <li><a href="#registry_attrs">Group And Namespace Attributes</a></li>
    <li><a href="#registry_lists">Group Lists</a></li>
    <li><a href="#registry_naming">Naming Examples</a></li>
    <li><a href="#registry_privs">Privileges</a></li>
  </ol>
  <li><a href="#layout">Project Layout</a></li>
  <li><a href="#build">Building Grouper</a></li>
  <li><a href="#config">Configuring Grouper</a></li>
  <ol>
    <li><a href="#config_db">Database</a></li>
    <li><a href="#config_subjects">Subjects</a></li>
    <li><a href="#config_privs">Privileges</a></li>
    <li><a href="#config_logging">Logging</a></li>
    <li><a href="#config_cache">Cache</a></li>
  </ol>
  <li><a href="#run">Running Grouper</a></li>
  <li><a href="#integrate">Integrating Grouper</a></li>
  <ol>
    <li><a href="#integrate_inandout">Loaders And Provisioning Connectors</a></li>
    <li><a href="#integrate_subjects">Subjects</a></li>
    <li><a href="#integrate_privs">Privileges</a></li>
  </ol>
  <li><a href="#extend">Extending Grouper</a></li>
  <ol>
    <li><a href="#extend_group_types">Group Types</a></li>
    <li><a href="#extend_privs">Privileges</a></li>
  </ol>
  <li><a href="#contrib">Contributed Applications</a></li>
  <ol>
    <li><a href="#contrib_csv2jdbc">Subject Loader: CSV2JDBC</a></li>
    <li><a href="#contrib_groupadd">Adding Groups: GroupAdd</a></li>
    <li><a href="#contrib_memberadd">Adding Members: MemberAdd</a></li>
    <li><a href="#contrib_cdg_other">Other Contributed Applications</a></li>
  </ol>
</ol>
</div>
<!-- toc -->

<!-- body -->
<div id="body">
<p>
This guide will help you to build and operate Grouper.  As Grouper
is still early in its development cycle, there is little practical
implementation experience and thus this guide is far from a
comprehensive treatment of the topic.  Our strategy is to bootstrap
the documentation process by providing enough information for early
adopters to begin using Grouper and to subsequently contribute to
the enhancement of this document by their experiences.
</p>
<p>
Along with obtaining Grouper (see the 
<a href="http://middleware.internet2.edu/dir/groups/grouper/">MACE-Dir-Groups</a>
website for instructions), adopters should join the
<a href="https://mail.internet2.edu/wws/info/grouper-users">grouper-users</a>
and possibly the 
<a href="https://mail.internet2.edu/wws/info/grouper-dev">grouper-dev</a>
mailing lists for implementation assistance and to discuss the further
development of Grouper.
</p>

<!-- intro -->
<div class="section">
<a name="intro"/>
<h2>1. Introduction To Grouper</h2>
</div>
<p>
Grouper is an open source toolkit for managing groups.  It provides an
API for supporting basic group management capabilities - creation,
reading, updating and deletion of groups from a Groups Registry, a
central information repository complementary to a site's Person
Registry.  Grouper also supports automated and manual maintenance of
groups, subgroups, limited querying capabilities, support for multiple
database backends and the ability to integrate with existing identity
management (IDM) infrastructure.
</p>
<p>
In <a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html">Grouper Phase 1 Specifications</a>
the <a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html#heading_2_Comp">components &amp; architecture section</a>
depicts the major components of Grouper and their relation to
an implementation site's existing identity management
infrastructure. Those components are an API, a relational database
called the Groups Registry and one or more user interfaces for managing
groups.  While the API and other design details have changed since the
<i>Grouper Phase 1 Specification</i>  was released, the architectural
drawing remains accurate.   Future Grouper releases will provide an
improved and more feature-rich API, UI enhancements, aging tasks,
loading and provisioning support and performance improvements.  A
broad roadmap of the Grouper development cycle is below:
</p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th>Version</th>
  <th>Release Date</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="15%">0.5</td>
  <td class="c" width="15%">200412</td>
  <td class="r">Initial API release providing a subset of the Phase 1
    Specification: basic group management by automation processes</td>
</tr>
<tr>
  <td class="c">0.5.5, 0.5.6</td>
  <td class="c">200504</td>
  <td class="r">Improvements to public API and internals</td>
</tr>
<tr>
  <td class="c">0.6</td>
  <td class="c">200509</td>
  <td class="r">Initial UI release, I2MI Subject interface for
    integration with existing IDM infrastructure, full privilege
    model implementation and improved querying capabilities
  </td>
</tr>
<tr>
  <td class="c">0.9</td>
  <td class="c">200512</td>
  <td class="r">New public API, including extensible query API;
    <i>ALL</i> subject; Preparation for 1.0 release
  </td>
</tr>
<tr>
  <td class="c">1.0</td>
  <td class="c">~200603</td>
  <td class="r">API and UI support for group math</td>
</tr>
<tr>
  <td class="c">1.1</td>
  <td class="c">~200606</td>
  <td class="r">API and UI support for aging tasks</td>
</tr>
</tbody>
</table>
</div>
<p>
The rest of this document will describe the 
<a href="#registry">Groups Registry</a>; how to 
<a href="#build">build</a>, <a href="#config">configure</a> and
<a href="#run">run</a> Grouper; <a href="#integrate">integrating</a>
Grouper with an existing infrastructure; 
<a href="#extend">extending</a> Grouper and 
<a href="#contrib">contributed applications</a> that can be used to bootstrap
a site's Grouper implementation.
</p>
<p>
In addition to this implementation guide, the Grouper distribution
contains javadoc (<tt>$GROUPER/doc/javadoc</tt>) that provides
some information on using the API and a list of changes from prior
releases (<tt>$GROUPER/doc/NEWS</tt>).  If this guide and the
<i>NEWS</i> file appear in conflict, <i>NEWS</i> should be considered
authoritative.  We use the symbol <i>$GROUPER</i> throughout this
document to refer to the top level of your Grouper distribution.
</p>
<p>
The best source of practical information on using the Grouper API to
can currently be found in the contributed programs
(<tt>$GROUPER/contrib/</tt>) and Grouper's test suite
(<tt>$GROUPER/java/tests/</tt>), both of which are included with
the Grouper distribution.  They exercise many functional aspects of the
API and the latter serves as a means of assessing that a Grouper
installation is working properly.  A Grouper development guide and
improved contributed applications are under construction and will be available
at a later date.  
</p>
<!-- intro -->

<!-- registry -->
<div class="section">
<a name="registry"/>
<h2>2. The Groups Registry</h2>
</div>
<!-- registry_gans -->
<div class="subsection">
<a name="registry_gans"/>
<h3>2.1 Groups And Namespaces</h3>
</div>
<p>
Grouper works by managing two principal types of objects: groups
and namespaces.  A group is a list of members and various attributes.
A namespace is a context in which a group or a another namespace
may be located and and named along with various attributes.  Both
groups and namespaces may have a number of different privileges
assigned to them.  From the perspective of information management
a Grouper deployment is defined by which subjects (people, applications,
groups) have what access to each namespace and group.
</p>
<p>
The Groups Registry uses a RDBMS to store information on namespaces,
groups, memberships and possibly privileges.  Grouper is
currently known to work and tested with HSQLDB, PostgreSQL and Oracle.
<!-- FIXME
This is the current Grouper database schema 
<a href="http://anoncvs.internet2.edu/cgi-bin/viewcvs.cgi/*checkout*/grouper/doc/erd.jpg?rev=1.2&cvsroot=I2MI">ERD</a>.
-->
</p>
<!-- registry_gans -->
<!-- registry_attrs -->
<div class="subsection">
<a name="registry_attrs"/>
<h3>2.2 Group And Namespace Attributes</h3>
</div>
<p>
Attributes are predefined single-valued pairs that may be assigned to both
groups and namespaces.  The names of attributes are <b>case
sensitive</b> while the values are typically not.
<p>
Groups and namespaces have the following set of attributes:
</p>
<p>
<a name="table_group_and_ns_attrs"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th width="25%">Attribute</th>
  <th>Semantics</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">extension</td>
  <td class="r">Relative name of the group or namespace within its
    parent namespace.</td>
</tr>
<tr>
  <td class="c">name</td>
  <td class="r">A system-maintained, read-only string representation
    of the logical ordered pair of <i>(parent stem, extension)</i>, used
    to facilitate searching for groups by name.  The string
    representation of the <i>name</i> attribute is <i>parent stem:extension</i>.
    This attribute cannot be deleted.
  </td>
</tr>
<tr>
  <td class="c">displayExtension</td>
  <td class="r">An alternative string representation for the group or
    namespace's <i>extension</i> attribute.  This attribute cannot be
    deleted.
</tr>
<tr>
  <td class="c">displayName</td>
  <td class="r">A system-maintained, read-only string representation
    of the logical ordered pair of <i>(displayName of parent stem,
    displayExtension)</i>, used to facilitate searching for groups
    by displayed name.  The string representation of the
    <i>displayName</i> attribute is <i>displayName of parent
    stem:displayExtension</i>.  This attribute cannot be deleted.
  </td>
</tr>
<tr>
  <td class="c">description</td>
  <td class="r">Semantics defined by the implementation site.</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 1 - Group And Namespace Attributes</b></div>
</p>
<p>
In addition, each group and namespace in the registry has several
<i>operational attributes</i> associated with it.  These attributes are
system-maintained and are <b>not</b> editable.  The operational
attributes are:
</p>
<p>
<a name="table_group_and_ns_op_attrs"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th width="25%">Operational Attribute</th>
  <th>Semantics</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">create time</td>
  <td class="r">Time at which the group or stem was created.</td>
</tr>
<tr>
  <td class="c">create subject</td>
  <td class="r">The subject that created the group or stem.</td>
</tr>
<tr>
  <td class="c">create source</td>
  <td class="r">Currently undefined.</td>
</tr>
<tr>
  <td class="c">modify time</td>
  <td class="r">Time at which the group or stem was last modified.
    <br /><br />
    Granting privileges, revoking privileges, adding members
    (immediate or effective), deleting members (immediate or
    effective), setting attributes and deleting attributes are all
    operations that will update the group or stem's modify time.
  </td>
</tr>
<tr>
  <td class="c">modify subject</td>
  <td class="r">The subject that last modified the group or stem.
    <br /><br />
    Granting privileges, revoking privileges, adding members
    (immediate or effective), deleting members (immediate or
    effective), setting attributes and deleting attributes are all
    operations that will update the group or stem's modify subject.
  </td>
</tr>
<tr>
  <td class="c">modify source</td>
  <td class="r">Currently undefined.</td>
</tr>
<tr>
  <td class="c">parent stem</td>
  <td class="r">The namespace in which the group or stem is located.
    All groups must exist within a namespace.  Stems may either exist
    at the root-level or within another namespace.
  </td>
</tr>
<tr>
  <td class="c">uuid</td>
  <td class="r">A system-assigned, read-only, globally unique identifier
    that is never reassigned.</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 2 - Group And Namespace Operational Attributes</b></div>
</p>
<!-- registry_attrs -->
<!-- registry_lists -->
<div class="subsection">
<a name="registry_lists"/>
<h3>2.3 Group Lists</h3>
</div>
In addition to the <a href="#registry_attrs">attributes</a> described
above, groups (but <b>not</b> namespaces) also have a list of members.
</p>
<p>
<a name="table_group_lists"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th width="25%">List</th>
  <th>Semantics</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">members</td>
  <td class="r">All members of the group.  A group can have as a
    member any subject that can by located by the I2MI Subject
    sources that you have configured for your Grouper installation.
    This means that people, applications and groups may all be
    members of a group.  If a group is made a member of another
    group, the members of the group will also be made members.</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 3 - Group Lists</b></div>
</p>
<!-- registry_lists -->
<!-- registry_naming -->
<div class="subsection">
<a name="registry_naming"/>
<h3>2.4 Naming Examples</h3>
</div>
<p>
The <a href="#table_group_and_ns_attrs">attributes table</a> shows that groups and
namespaces have the same naming attributes (<i>parent stem</i>,
<i>extension</i>, <i>name</i>, <i>displayExtension</i> and
<i>displayName</i>) with the same semantics.  Groups and namespaces are
created and named within namespaces and namespaces can be arranged in
either a flat or hierarchical style as desired by the implementation
site.
</p>
<p>
Since a group must be named within a namespace, it is necessary to
create a namespace before any groups can be created.  A root namespace
(named "") exists that all child namespaces are created under.
Namespaces may be created within the root namespace while groups
cannot.   The following code example demonstrates the creation of
a namespace and a group within that namespace:
</p>
<pre class="eg">
  /*
   * Retrieve the root level namespace
   */
  Stem root = StemFinder.findRootStem(s);

  /*
   * Create a top-level namespace with the <i>extension</i> and
   * <i>displayExtension</i> "uofc".
   */
  Stem uofc = root.addChildStem("uofc", "uofc");

  /*
   * Create a group with the <i>extension</i> and <i>displayExtension</i>
   * "exec_council" within the "uofc" namespace.
   */
  Group exec = uofc.addChildGroup("exec_council", "exec_council");
</pre>
<p>
A <i>hierarchy delimiter</i> is used in string representations of the names of
groups and namespaces. This delimiter is placed between every
<i>parent stem</i> and <i>extension</i>.  The delimiter is a ":"
and this character can not be used as part of the <i>extension</i> or
<i>displayExtension</i> for either namespaces or groups.
</p>
<p>
Each newly created group or namespace contributes just one new element,
the <i>extension</i>, to its accumulative name.  The <i>displayName</i>
of groups and namespaces is likewise accumulative - that's why the
<i>name</i> and <i>displayName</i> attributes are system maintained
and read-only. Here are some further examples illustrating all of
the naming attributes of several namespaces and groups.
</p>
<p>
Continuing with the example of the namespace and group created above,
below are the attributes values that each would have:
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">namespace uofc</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>parent stem</i></td>
  <td class="r">&nbsp;</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="r">uofc</td>
</tr>
</tbody>
</table>
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">group uofc:exec_council</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>parent stem</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="r">exec_council</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="r">exec_council</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="r">uofc:exec_council</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="r">uofc:exec_council</td>
</tr>
</tbody>
</table>
</p>
<p>
If we then assign the namespace a <i>displayExtension</i> value of
"The University Of Chicago", the namespace and group will have the
following attribute values:
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">namespace uofc</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>parent stem</i></td>
  <td class="r">&nbsp;</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="r">The University Of Chicago</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="r">The University Of Chicago</td>
</tr>
</tbody>
</table>
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">group uofc:exec_council</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>parent stem</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="r">exec_council</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="r">exec_council</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="r">uofc:exec_council</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="r">The University Of Chicago:exec_council</td>
</tr>
</tbody>
</table>
</p>
<p>
Next we'll give the group a <i>displayExtension</i> value of "Executive
Council".
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">namespace uofc</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>parent stem</i></td>
  <td class="r">&nbsp;</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="r">The University Of Chicago</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="r">The University Of Chicago</td>
</tr>
</tbody>
</table>
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">group uofc:exec_council</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>parent stem</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="r">exec_council</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="r">Executive Council</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="r">uofc:exec_council</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="r">The University Of Chicago:Executive Council</td>
</tr>
</tbody>
</table>
</p>
<p>
Display values propagate down through subordinate namespaces as well:
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">namespace uofc:bsd</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25"><i>parent stem</i></td>
  <td class="r">uofc</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="r">bsd</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="r">Biological Sciences Division</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="r">uofc:bsd</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="r">The University Of Chicago:Biological Sciences Division</td>
</tr>
</tbody>
</table>
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">group uofc:bsd:eis_staff</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>parent stem</i></td>
  <td class="r">uofc:bsd</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="r">eis_staff</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="r">Enterprise Information Systems staff</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="r">uofc:bsd:eis_staff</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="r">The University Of Chicago:Biological Sciences Division:Enterprise
    Information Systems staff</td>
</tr>
</tbody>
</table>
</p>
<p>
This set of examples illuminates at least two things. First, that it
would be a good idea for implementation sites to establish conventions
for the assignment of naming attributes. An example of such is 
<a href="http://techag.uchicago.edu/idm-wg/attrValueBNF.txt">here</a>
(note that it was created before Grouper's design encompassed
<i>displayNames</i> and at that time the term <i>descriptor</i>
was used where we now say <i>extension</i>).
</p>
<p>
Second, that the names of groups, as with the titles of many types of
things, influence people's initial expectations of the meaning of
those groups. Seeing "Enterprise Information Systems staff" by itself
gives a different impression than seeing it in the naming context of
"Biological Sciences Division". That, in part, motivates the care taken
in the design of Grouper's <a href="#registry_privs">privilege
model</a>.
</p>
<!-- registry_naming -->
<!-- registry_privs -->
<div class="subsection">
<a name="registry_privs"/>
<h3>2.5 Privileges</h3>
</div>
<p>
There are two categories of privileges in Grouper: <i>Access</i> and
<i>Naming</i>.  Access privileges determine what a subject can do
to a group. Naming privileges determine what a subject can do to a
namespace.  All Grouper API methods are subject to the Grouper
privilege model and privileges can be assigned to subjects of any type,
including groups.  See <a href="#integrate_privs">Integrating
Privileges</a> for more information on the Grouper privilege model.
</p>
<p>
The access and naming privileges are listed in the following tables:
</p>
<p>
<a name="table_privs_access"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th width="25%">Privilege</th>
  <th>Semantics</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">VIEW</td>
  <td class="r">Can see the group and can refer to it, e.g., to make
    it a subgroup of another group.</td>
</tr>
<tr>
  <td class="c">READ</td>
  <td class="r">Can read the group's public attributes and
    <i>members</i> list.
    <br/><br/>
    Implies <i>VIEW</i>.
  </td>
</tr>
<tr>
  <td class="c">UPDATE</td>
  <td class="r">Can update the group's <i>members</i> list and can grant and
    revoke <i>OPTIN</i> and <i>OPTOUT</i> privileges for this group.
    <br /><br />
    Implies <i>VIEW</i>, <i>OPTIN</i> and <i>OPTOUT</i>.</td>
</tr>
<tr>
  <td class="c">ADMIN</td>
  <td class="r">Can modify all non-system group fields, can grant
    and revoke all access privileges, can rename the group and can
    delete the group.  The creator of a group is automatically
    granted this privilege.
    <br /><br />
    Implies all other access privileges.
  </td>
</tr>
<tr>
  <td class="c">OPTIN</td>
  <td class="r">Can add oneself to the members list of the group. 
    <br /><br />
    Implies <i>VIEW</i>.</td>
</tr>
<tr>
  <td class="c">OPTOUT</td>
  <td class="r">Can remove oneself from the members list of the group.
    <br /><br />
    Implies <i>VIEW</i>.
    <br /><br />
    <b>NOTE:</b> Can only remove <b>immediate</b> memberships.
  </td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 4 - Access Privileges</b></div>
</p>
<p>
<a name="table_privs_naming"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th width="25%">Privilege</th>
  <th>Semantics</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">CREATE</td>
  <td class="r">Can create a group in the namespace.</td>
</tr>
<tr>
  <td class="c">STEM</td>
  <td class="r">Can grant and revoke <i>CREATE</i> and <i>STEM</i>
    privilege for the namespace, can create a subordinate namespace
    and can modify all namespace fields.  The creator of a namespace
    is automatically granted this privilege.
    <br /><br />
    <b>NOTE:</b> This privilege does <b>not</b> imply <i>CREATE</i> but
    a subject with this privilege can grant themselves that privilege.
  </td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 5 - Naming Privileges</b></div>
</p>
<!-- registry -->

<!-- layout -->
<div class="section">
<a name="layout"/>
<h2>3. Project Layout</h2>
</div>
<p>
The top-level directory of the unpacked Grouper distribution contains
the following directories and files:
</p>
<p>
<table id="table" align="center" border="0" width="60%">
<thead>
<tr>
  <td class="c" width="25%"><tt>conf/</tt></td>
  <td class="r">Configuration files for Grouper and third party components</td>
</tr>
</thead>
<tbody>
<tr>
  <td class="c"><tt>build/</tt></td>
  <td class="r">Compiled code</td>
</tr>
<tr>
  <td class="c"><tt>contrib/</tt></td>
  <td class="r">Contributed software</td>
</tr>
<tr>
  <td class="c"><tt>doc/</tt></td>
  <td class="r">Grouper documentation</td>
</tr>
<tr>
  <td class="c"><tt>doc/javadoc/</tt></td>
  <td class="r">javadoc for the Grouper API</td>
</tr>
<tr>
  <td class="c"><tt>lib/</tt></td>
  <td class="r">Third party .jar files required by Grouper</td>
</tr>
<tr>
  <td class="c"><tt>src/</tt></td>
  <td class="r">Java source for Grouper and Grouper test suite.</td>
</tr>
<tr>
  <td class="c"><tt>sql/</tt></td>
  <td class="r">SQL scripts for creating, initializing and testing the
    Groups Registry</td>
</tr>
<tr>
  <td class="c"><tt>LICENSE</tt></td>
  <td class="r">License under which Grouper may be used</td>
</tr>
<tr>
  <td class="c"><tt>build.xml</tt></td>
  <td class="r">Ant configuration file</td>
</tr>
</tbody>
</table>
</p>
<p>
The file <tt>$GROUPER/lib/README</tt> lists the third party software used by Grouper
and identifies the version, source, and license for each.  
</p>
<!-- layout -->

<!-- build -->
<div class="section">
<a name="build"/>
<h2>4. Building Grouper</h2>
</div>
<p>
If you intend to build and test Grouper using a RDBMS other than the
default HSQLDB backend, please review the configuration sections for
<a href="#config_db">databases</a> and <a href="#config_subjects">subjects</a> 
first.
<ol>
  <li><p>Get the Java SDK.</p>
    <p>The SDK may be downloaded from <a href="http://java.sun.com/j2se/">&lt;http://java.sun.com/j2se/&gt;</a>.
    The JRE alone is not sufficient.</p></li>
  <li><p>Get Ant</p>
    <p>Ant may be downloaded from <a href="http://ant.apache.org/">&lt;http://ant.apache.org&gt;</a>.</p>
    <p>Directions for installing Ant are in the unpacked distribution
    at <i>docs/manual/install.html#installing</i>. You may need to
    copy <i>tools.jar</i> from <tt>$JAVA_HOME/lib</tt> to
    <tt>$ANT_HOME/lib</tt> to get ant working properly.</p></li>
  <li>Change directory to <tt>$GROUPER</tt>.</li>
  <li><p><tt>ant schemaexport</tt></p>
    <p>This will generate a DDL appropriate for your configured RDBMS
    and install the tables.</p>
  </li>
  <li><p><tt>ant db-init</tt></p>
    <p>This will install Grouper schema information and the root stem
    of the Groups Registry into your RDBMS.  If using the defeault
    HSQLDB RDBMS this will create the registry in the
    <tt>$GROUPER/dist/run</tt> directory.</p>
  </li>
  <li><p><tt>ant db-init-jdbcsource</tt> [optional]</p>
    <p>This will install tables require by the I2MI Subject interface's
    JDBC source adapter.</p>
  </li>
  <li><p><tt>ant build</tt></p>
    <p>This will compile Grouper and place the class files under
    the <tt>$GROUPER/build</tt> directory.</p></li>
  <li><p><tt>ant test</tt> [optional]</p>
    <p>This will compile and run the Grouper test suite to exercise the
    API and ensure that Grouper is properly configured.</p>
    <p><b>Note: Running the test suite is destructive and will
    delete all groups and memberships in the Groups Registry.  Do
    not run the test suite against production data.</b></p>
    <p><b>Note:</b> <tt>ant db-init-jdbcsource</tt> must have been
    run to run the test suite.</p>
    <p><b>Note:</b> If all of the tests succeed you will see a
      <b>single</b> message like this in the test output:
    </p>
    <blockquote> 
      <tt>FATAL GrouperSession: unable to get subject associated with session</tt>
    </blockquote>
    <p>This is testing an error condition, is expected and indicates
    success.</p>
  </li>
  <li><p><tt>ant db</tt> [optional]</p>
    <p>This will launch HSQLDB's GUI database manager.  From within the
    manager you can run SQL queries against the Groups Registry.</p></li>
  <li><p><tt>ant dist</tt> [optional]</p>
    <p>Builds a <i>grouper.jar</i> file in the
    <tt>$GROUPER/dist/lib</tt> directory.  This is an optional task
    that may make runtime invocation easier.</p>
  </li>
  <li><p><tt>ant dist-lib</tt> [optional]</p>
    <p>Builds a <i>grouper-lib.jar</i> file in the
    <tt>$GROUPER/dist/lib</tt> directory.  This is a rollup of all
    the third party .jar files that Grouper relies upon that are
    located in <tt>$GROUPER/lib</tt>.  This is an optional task
    that may make runtime invocation easier.</p>
  </li>
</ol>
</p>
<!-- build -->

<div class="section">
<a name="config"/>
<h2>5. Configuring Grouper</h2>
</div>
<p>
Grouper requires very little configuration by default.  In fact, if a
site is comfortable using the HSQLDB database and running all programs
that interact with the Groups Registry from the <i>$GROUPER</i>
directory, no configuration (outside of <a href="#run">setting one's
classpath</a>) is required.  The next sections will explain how to
move beyond that specific (and default) setup.
</p>
<!-- config_db -->
<div class="subsection">
<a name="config_db"/>
<h3>5.1 Database</h3>
</div>
<p>
Grouper uses <a href="http://www.hibernate.org/">Hibernate</a> to
persist objects in the Groups Registry.  As Hibernate uses JDBC to
speak to a RDBMS, Grouper should be able to work with your preferred
database backend provided there is a JDBC driver for it.  Grouper
is currently being tested against HSQLDB (the default), PostgreSQL
(version 8) and Oracle (version 9i).
</p>
<!-- config_db_hsqldb -->
<div class="subsubsection">
<a name="config_db_hsqdlb"/>
<h4>5.1.1 HSQLDB</h4>
</div>
<p>
Grouper uses HSQLDB as its default RDBMS.  No configuration is
necessary unless one wants to use HSQLDB in "server mode".  See the
<a href="http://hsqldb.org/doc/guide/">HSQLDB documentation</a> for
information on running in server mode.
</p>
<!-- config_db_hsqldb -->
<!-- config_db_postgres -->
<div class="subsubsection">
<a name="config_db_postgres"/>
<h4>5.1.2 PostgreSQL</h4>
</div>
<p>
PostgreSQL is a supported Grouper backend and should only require small
configuration changes to use.  Grouper also includes a PostgreSQL
JDBC driver; see <tt>$GROUPER/lib/README</tt> for version
information.  To use PostgreSQL you will need to:
<ol>
  <li>Uncomment the PostgreSQL section of 
    <tt>$GROUPER/conf/hibernate.properties</tt> and modify as
    appropriate.</li>
  <li>Uncomment the PostgreSQL section of 
    <tt>$GROUPER/conf/sources.xml</tt> and modify as
    appropriate.</li>
</ol>
</p>
<!-- config_db_postgres -->
<!-- config_db_oracle -->
<div class="subsubsection">
<a name="config_db_oracle"/>
<h4>5.1.3 Oracle</h4>
</div>
<p>
Oracle is a supported Grouper backend and should only require small
configuration changes to use.  An Oracle JDBC driver is not currently
distributed with Grouper.  To use Oracle you will need to:
<ol>
  <li>Uncomment the Oracle section of 
    <tt>$GROUPER/conf/hibernate.properties</tt> and modify as
    appropriate.</li>
  <li>Disable prepared statement caching in 
    <tt>$GROUPER/conf/hibernate.properties</tt>.
  </li>
  <li>Uncomment the Oracle section of 
    <tt>$GROUPER/conf/sources.xml</tt> and modify as
    appropriate.</li>
</ol>
</p>
<!-- config_db_oracle -->
<div class="subsubsection">
<a name="config_db_other"/>
<h4>5.1.4 Using Other Databases</h4>
</div>
<p>
While Grouper should work with other databases, it has not yet been
tested with them nor does it provide support for them as shipped.
To use an alternate database you will need to:
<ol>
  <li>Modify Grouper's Hibernate configuration file
    (<tt>$GROUPER/conf/hibernate.properties</tt>) to connect to
    your RDBMS</li>
  <li>Modify Grouper's Subject API configuration file
    (<tt>$GROUPER/conf/sources.xml</tt>) to connect to
    your RDBMS</li>
  <li>Run <tt>ant schemaexport</tt> to create and install a DDL for
    your RDBMS.
  </li>
</ol>
If you do use an alternate database that is not natively supported by
Grouper, please contact the 
<a href="https://mail.internet2.edu/wws/info/grouper-dev">grouper-dev</a> 
list with your results and schema files.
</p>
<!-- config_db_other -->
<!-- config_db -->
<!-- config_subjects -->
<div class="subsection">
<a name="config_subjects"/>
<h3>5.2 Subjects</h3>
</div>
<p>
See <a href="#integrate_subjects">Integrating Subjects</a> for more
information on subjects and the I2MI Subject API.
</p>
<p>
The configuration file for Grouper's I2MI Subject API resolver is 
<tt>$GROUPER/config/sources.xml</tt>.  The I2MI Subject API is used
to map an external IDM infrastructure to Grouper internals and can
be used to identify people, groups and applications or other subject
types from multiple sources of authority.
</p>
<p>
Grouper's default configuration uses the JDBC Source Adapter for
resolving site-defined subjects.  In addition, Grouper uses two
internally managed source adapters that require no configuration. The
Grouper Source Adapter is used for resolving groups as subjects while
the Internal Source Adapter is used for resolving the
<a href="#integrate_subjects_special"><i>GrouperSystem</i> and <i>GrouperAll</i> subjects</a>.
</p>
<p>
If you wish to use additional or different sources, you will need
to adjust this file.  At this time, the javadoc provided with each
source adapter is probably the best location for configuration
information.
</p>
<p>
<b>Note:</b> With the 0.9 release sites should not configure the
Grouper Source Adapter in <tt>$GROUPER/conf/sources.xml</tt> nor should
they have a <i>GrouperSystem</i> subject in the JDBC Source Adapter's
tables.  These are both managed internally now.
</p>
<!-- config_subjects -->
<!-- config_privs -->
<div class="subsection">
<a name="config_privs"/>
<h3>5.3 Privileges</h3>
</div>
<p>
Grouper's default privilege configuration needs no adjustment but sites
can modify multiple configuration parameters in
<tt>$GROUPER/conf/grouper.properties</tt> if desired.  The
privilege-related parameters are:
</p>
<pre class="eg">
# Use this interface for access privileges
privileges.access.interface           = edu.internet2.middleware.grouper.GrouperAccessAdapter
# Use this interface for naming privileges
privileges.naming.interface           = edu.internet2.middleware.grouper.GrouperNamingAdapter

# If set to _true_, the ALL subject will be granted that privilege on
# each new group that is created.  
groups.create.grant.all.admin         = false
groups.create.grant.all.optin         = false
groups.create.grant.all.optout        = false
groups.create.grant.all.read          = true
groups.create.grant.all.update        = false
groups.create.grant.all.view          = true
  
# If set to _true_, the ALL subject will be granted that privilege on
# each new stem that is created.  
stems.create.grant.all.create         = false 
stems.create.grant.all.stem           = false
</pre>
<p>
Finally, Grouper includes experimental wheel group support that is
disabled by default.  To enable it, adjust the following parameters in
<tt>$GROUPER/conf/grouper.properties</tt>:
</p>
<pre class="eg">
# A wheel group allows you to enable non-GrouperSystem subjects to act
# like a root user when interacting with the registry.
#
# Set to _true_ if you want to use a wheel group
groups.wheel.use                      = false
# Set to the _name_ of the group you want to treat as the wheel group.
# The members of this group will be treated as a root user.
#
# You will need to create your wheel group.
groups.wheel.group                    = your:wheel:group
</pre>
<!-- config_privs -->
<!-- config_logging -->
<div class="subsection">
<a name="config_logging"/>
<h3>5.4 Logging</h3>
</div>
<p>
Logging is configured in the <tt>$GROUPER/conf/log4j.properties</tt>
configuration file.  By default Grouper will write event log
information to <tt>$GROUPER/event.log</tt> while more low-level logging
will be sent to <tt>$GROUPER/dist/run/log</tt>.  The log4j
configuration can be adjusted to control the verbosity, type and
output of Grouper's logging.
</p>
<p>
In addition, there are several configuration parameters in
<tt>$GROUPER/conf/grouper.properties</tt> that may be adjusted to
control the logging of effective membership modifications in the event
log.
<pre class="eg">
# Control whether the addition and deletion of effective groups memberships 
# are logged in the event log.  If using the _GrouperAccessAdapter_ this 
# will include granted and revoked access privileges.
memberships.log.group.effective.add   = true
memberships.log.group.effective.del   = true

# If using _GrouperNamingAdapter_, control whether the granting and
# revoking of effective naming privileges are logged in the event log.
memberships.log.stem.effective.add    = true
memberships.log.stem.effective.del    = true
</pre>
<!-- config_logging -->
<!-- config_cache -->
<div class="subsection">
<a name="config_cache"/>
<h3>5.5 Cache</h3>
</div>
<p>
<a href="http://ehcache.sourceforge.net/">ehcache</a> is used by
Hibernate to cache objects and query results to both memory and disk.
Depending upon your usage and the size of your Groups Registry, you may
want to adjust your cache settings.  See the 
<a href="http://ehcache.sourceforge.net/documentation/">ehcache
documentation</a> for more details and then update
<tt>$GROUPER/ehcache.xml</tt> as appropriate.
</p>
<!-- config_cache -->
<!-- config -->

<!-- run -->
<div class="section">
<a name="run"/>
<h2>6. Running Grouper</h2>
</div>
<p>
As Grouper is currently just a database and a Java API for exercising
that database, there is no "Groups Registry server" that needs to
be running to interact with the Groups Registry.  All that is necessary
is that one be able to connect to your configured database and that the
following items be in your classpath:
<ul>
  <li>Full pathname of <i>grouper.jar</i> OR the full pathname of the
    <tt>$GROUPER/build/grouper</tt> directory
  </li>
  <li>Full pathname of <i>grouper-lib.jar</i> OR the full pathname of
    all the .jar files in the <tt>$GROUPER/java/lib</tt> directory
  </li>
  <li>Full pathname of the Grouper configuration directory</li>
</ul>
</p>
<!-- run -->

<!-- integrate -->
<div class="section">
<a name="integrate"/>
<h2>7. Integrating Grouper</h2>
</div>
<p>
This section is intended to demonstrate how to integrate Grouper with
your existing infrastructure and practices.  Unfortunately, because of
where Grouper is in its development process, integration information
remains sparse.
</p>
<!-- integrate_inandout -->
<div class="subsection">
<a name="integrate_inandout"/>
<h3>7.1 Loaders And Provisioning Connectors</h3>
</div>
<p>
Loaders and provisioning connectors are defined in the 
<a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html#heading_2_Comp">components &amp; architecture section</a>
in <a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html">Grouper Phase 1 Specifications</a>. 
Loaders are automation process that use the Grouper API to load and
maintain the Groups Registry from other sources.  Provisioning
connectors are automation processes that use the Grouper API to
extract information from the Groups Registry in order to represent it
in other databases, directories, etc.
</p>
<p>
As this is an early release, there is as yet no real world contributed
code that has been used to get data in and out of Grouper.  However, the 
<a href="#contrib">contributed applications</a> discussed later in this
document could be used as a starting point.
</p>
<p>
All interactions with the Grouper API are conducted within a session
that is constrained by the privileges of the session's subject.
The default <i>GrouperSystem</i> subject may be used although it may be
preferable to assign each loader and provisioning connector a unique
subject to better meet site-specific security requirements.
</p>
<p>
When a new Grouper session is started, the API verifies the subject's
existence but <b>does not</b> authenticate the subject.  It is assumed
that sites will secure access to the Grouper API - as they do other
infrastructure services - with a combination of of host and application
platform security measures.
</p>
<p>
The Grouper API provides methods for searching the registry to select
groups to load or provision.  Grouper currently provides the following
filters:
</p>
<ul>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/ComplementFilter.html">Complement</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/GroupAnyAttributeFilter.html">Group Any Attribute</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/GroupAttributeFilter.html">Group Attribute</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/GroupCreatedAfterFilter.html">Grouper Created After</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/GroupCreatedBeforeFilter.html">Group Created Before</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/GroupNameFilter.html">Group Name</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/IntersectionFilter.html">Intersection</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/NullFilter.html">Null</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/StemCreatedAfterFilter.html">Stem Created After</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/StemCreatedBeforeFilter.html">Stem Created Before</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/StemNameFilter.html">Stem Name</a></li>
  <li><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/UnionFilter.html">Union</a></li>
</ul>
<p>
More query filters will be provided in the core distribution in
future releases.  In addition, the Grouper API includes an extensible 
<a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/QueryFilter.html">query
filter interface</a> that sites can use to create their own query
filters.
<p>
Grouper currently has no way to order or limit the number of objects
returned by a search.  Search result limits and ordering will be added in a
future release.
</p>
<!-- integrate_inandout -->
<!-- integrate_subjects -->
<div class="subsection">
<a name="integrate_subjects"/>
<h3>7.2 Subjects</h3>
</div>
<p>
Most often the members of your groups will be people and other groups
but they might also be of any other type (applications or computers,
for example) for which you now or eventually will manage identities.
By using the I2MI Subject API as a resolver service, Grouper allows
sites to use multiple external IDM sources of authority to identify
group members.
</p>
<p>
Identifiers and their management can get complicated. They can be
revoked or not, re-assigned or not, lucent or opaque, etc. Depending on
such characteristics, a given identifier might be a good or bad choice
to use in the context of managing the identified subject's group
memberships.
</p>
<p>
For example, a username is often lucent - easily remembered by the
person to whom it is associated. But it may also be revokable, meaning
that it no longer refers to that person (perhaps they have a new one),
or even re-assignable, meaning that it might refer to some other person
at a later time. If a username is used to record membership, username
changes must trigger corresponding membership changes. A username is
better suited to authentication than it is to indicating membership.
</p>
<p>
On the other hand, an opaque registryID (machine, not human, readable)
that never changes is great for membership, but lousy for
authentication - it might not even be known by the person to whom
it is associated. How would I identify myself to Grouper if I wished to
opt-in to a list or manage a group?
</p>
<p>
Grouper accommodates subject identifier issues in two ways. First, it
maintains guids for every subject and group within the Groups
Registry.  These are never exposed by the API, but are associated
with externally supplied subject identifiers within the Groups Registry.
This approach allows the identifier associated with a given subject
to be changed without any need to change actual memberships (although
the supporting method is not yet available via the Grouper API).
</p>
<p>
Second, by incorporating the Subject API Grouper is able to lookup
subjects that are presented with an identifier in one namespace and
obtain identifiers in other namespaces for that subject.  That means
that it can translate a username into a registryID and vice-versa,
for example. So, when a user authenticates to an application using
the Grouper API, that application can use the Subject API to fetch
an identifier for that person chosen by the site for use in
memberships. Similarly, when a membership in the Groups Registry
is to be expressed elsewhere, the identifier used for group members
can be translated by a provisioning connector by use of the Subject
API into one that is suitable in the provisioned context.
</p>
<p>
Grouper includes the a pre-0.1 release of the 
<a href="http://anoncvs.internet2.edu/cgi-bin/viewcvs.cgi/subject/?cvsroot=I2MI">Subject API</a>, 
which only includes support for two sources of authority for subject
information. Sites can choose to write a source adapter class that
would hit their LDAP directory or Person Registry directly to
validate that a <i>subjectID</i> is in fact one that is valid for
a group management operation.  It is expected that the I2MI Subject
API will include an LDAP source adapter in the near future.
</p>
<!-- integrate_subjects_special -->
<div class="subsubsection">
<a name="integrate_subjects_special"/>
<h4>7.2.1 Special Subjects</h4>
</div>
<p>
Grouper includes two special subjects, <i>GrouperSystem</i> and
<i>GrouperAll</i>, that are resolved via the Internal Source Adapter
and that have special semantics in privilege contexts.  The
<i>GrouperSystem</i> subject is considered the "root" subject of the
Groups Registry and can be considered to have all privileges on all
groups and stems within the Groups Registry.  <i>GrouperAll</i> is a
subject that is a way of referring to all subjects that can be
identified by Grouper's subject resolver.  For example, if
<i>GrouperAll</i> is granted the <i>VIEW</i> and <i>READ</i> access
prvileges on a group (as is the default behavior), all subjects will
have <i>VIEW</i> and <i>READ</i> privileges on that group without the
need to explicitly grant the privileges to every resolvable subject.
</p>
<!-- integrate_subjects_special -->
<!-- integrate_subjects -->
<!-- integrate_privs -->
<div class="subsection">
<a name="integrate_privs"/>
<h3>7.3 Privileges</h3>
</div>
<p>
The Grouper API provides and uses interfaces (<i>AccessAdapter</i>
and <i>NamingAdapter</i>) to access and manage the Access and Naming
privileges.  This design permits implementation sites to replace
Grouper's default implementation of either or both of these interfaces
if they desire to integrate with an already existing external
privilege management system.  It is anticipated that Grouper will
provide support for integrating with a
<a href="http://middleware.internet2.edu/signet/">Signet</a> 
Privilege Registry in the future.
</p>
<p>
The default implementations of the Access and Naming privileges that are used
by Grouper use group list values to represent assigned privileges, enabling
Grouper's list management capabilities to be used in privilege management. In
particular, this means that one can use subgroups to provide for the
inheritance of privileges. In addition, one will be able to take
advantage of group math and aging tasks to provide an even richer
privilege management environment in future Grouper releases.
</p>
<p>
To replace one or both of the default privilege implementations, 
see the
<i><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/AccessAdapter.html">AccessAdapter</a></i>
and 
<i><a href="http://grouper.devclue.com/api/edu/internet2/middleware/grouper/NamingAdapter.html">NamingAdapter</a></i>
javadoc for information on the interface that must be implemented.
In addition, the <i>privileges.access.interface</i> and
<i>privileges.naming.interface</i> configuration parameters in
<tt>$GROUPER/conf/grouper.properties</tt> will need to be adjusted
to reflect the privilege implementation being used.
</p>
<!-- integrate_privs_dgmc -->
<div class="subsubsection">
<a name="integrate_privs_dgmc"/>
<h4>7.3.1 Using Privileges To Distribute Group Management
Capabilities</h4>
</div>
<p>
One of the leading reasons why there is interest in Grouper is that
many sites recognize a need to involve many sources of authority in
managing resource access, distribution lists and application
customization - the types of needs which groups help to satisfy.
Grouper's privilege model supports five ways to distribute
management of groups.
<ol>
  <li>Create a group and assign someone <i>UPDATE</i> privilege to
    it.  This delegates the ability to maintain the group's
    membership.</li>
  <li>Create a group and assign someone <i>ADMIN</i> privilege to it.
    This delegates the ability to manage who can maintain the group's
    membership as well as manage all access to the group.</li>
  <li>Create a namespace and assign someone <i>CREATE</i> privilege
    to it. This delegates the ability to preside over the collection
    of all groups they create in that namespace.</li>
  <li>Create a namespace and assign someone <i>STEM</i> privilege
    to it.  They can rule over an entire hierarchy of namespaces and
    groups, all sharing a common root namespace.</li>
  <li>Create a group and assign <i>OPTIN</i> and/or <i>OPTOUT</i>
    privilege to other groups. Subjects belonging to those other
    groups are entitled to manage their own membership in the
    group.</li>
</ol>
</p>
<p>
An example of an actual scenario for delegation of group management to
solve an access control problem can be found in
<a href="http://home.uchicago.edu/%7Etbarton/camp-200411/20041117-authz.ppt">&lt;http://home.uchicago.edu/~tbarton/camp -200411/20041117-authz.ppt&gt;</a>.
</p>
<!-- integrate_privs_dgmc -->
<!-- registry_privs -->
<!-- integrate_privs -->
<!-- integrate -->

<!-- extend -->
<div class="section">
<a name="extend"/>
<h2>8. Extending Grouper</h2>
</div>
<p>
Grouper does currently provide some ability for sites to extend
Grouper's default behavior and types to better fit local needs.
Current <a href="#extend_privs">privileges</a> may be extended and <a
href="#extend_group_types">group types</a> (including attributes and
lists) will be extendable in a future release.
</p>
<!-- extend_group_types -->
<div class="subsection">
<a name="extend_group_types"/>
<h3>8.1 Group Types</h3>
</div>
<p>
Since Grouper 0.9 the API includes internal support for assigning
multiple group types to a group to control what attributes and lists a
group may be assigned.  Unfortunately, there was not time to properly
implement the public API support for assigning multiple types to a
group.  This will be completed in a future release.
<!-- FIXME Implement
To support some of the 
<a href="http://middleware.internet2.edu/dir/docs/draft-internet2-mace-dir-sage-scenarios-00.html">use cases</a>
identified by MACE-Dir-Groups working group members, Grouper was
designed from the start to enable implementation sites to extend the
set of attributes and lists available to be associated with groups.
This was done by declaring attributes, lists, and their properties in
tables within the Groups Registry rather than having them represented
as static schematic elements of that database. Sets of attributes and
lists are packaged into group types.  This is similar to how schemas
for LDAP directories are managed and extended: LDAP attributes are
packaged into object classes, and each LDAP entry can have a set
of object classes associated with it, allowing different entries
to serve different purposes.  
</p>
<p>
Unfortunately, at this time Grouper only allows a single group type to
be assigned to a group.  Thus, if you are extending the Groups Registry
by creating new group types you will currently need to first duplicate
the definition of the <i>base</i> group type and then add any
additional attributes and lists that you may desire.  Grouper ships
with one custom group type: <i>naming</i>.  This type is used
internally to model namespaces.
</p>
<p>
Although it is not currently possible  to extend Grouper's supported
group types, attributes and lists with the API, sites can create
new group types, attributes and lists.  To adjust the schema  you will
need to manually alter the <i>grouper_type</i>, <i>grouper_typeDef</i>
and <i>grouper_field</i> tables within the Groups Registry to
determine the set of attributes and lists that are associated with
an extended group type.  The <tt>$GROUPER/sql/init.sql</tt> file
may provide some guidance on how to update those tables with your
desired extensions.
-->
</p>
<!-- extend_group_types -->
<!-- extend_privs -->
<div class="subsection">
<a name="extend_privs"/>
<h3>8.2 Privileges</h3>
</div>
<p>
Although it is not possible to extend Grouper's privilege
model with the API, sites that extend the set of <a href="#extend_group_types">attributes
and lists</a> in their deployment can declare which privileges are
needed to read and write each attribute and list.  To adjust the schema
you will need to manually alter the <i>grouper_fields</i> table within
the Groups Registry.  
</p>
<!-- extend_privs -->
<!-- extend -->

<!-- contrib -->
<div class="section">
<a name="contrib"/>
<h2>9. Contributed Applications</h2>
</div>
<p>
Grouper includes <a href="http://grouper.devclue.com/articles/category/cdg">cdg</a>,
a contributed suite of programs that exercise the Grouper API and that
can be used to interact with and manipulate the Groups Registry.  This
suite will be expanded and changes contributed back to Grouper in the
future.  It is also hoped that other sites that create useful
programs for interacting with the Groups Registry - especially programs
for provisioning group information - will contribute those programs
back to Grouper.
</p>
<!-- contrib_csv2jdbc -->
<div class="subsection">
<a name="contrib_csv2jdbc"/>
<h3>9.1 Subject Loader: CSV2JDBC</h3>
</div>
<p>
The default source for <i>person</i> subjects is within the Groups
Registry itself.  <i>CSV2JDBC</i> is a simple program for populating
the appropriate tables with subject information from a .csv input file.
See <a href="#config_subjects">Configuring Subjects</a> and 
<a href="#integrate_subjects">Integrating Subjects</a> for more
information on subjects.
<p>
<i>CSV2JDBC</i> is located in <tt>$GROUPER/contrib/cdg</tt>.  
This program reads in a .csv file containing <i>subjectIDs</i> and
<i>subjectTypeIDs</i> and then inserts the subjects into the Groups
Registry via a direct JDBC connection.  <i>CSV2JDBC</i> uses
Grouper's Hibernate configuration file for its JDBC configuration.
<p>
<p>
See the 
<a href="http://grouper.devclue.com/cdg/api/com/devclue/grouper/subject/CSV2JDBC.html">CSV2JDBC javadoc</a> 
for more information.
</p>
<!-- contrib_csv2jdbc -->
<!-- contrib_groupadd -->
<div class="subsection">
<a name="contrib_groupadd"/>
<h3>9.2 Adding Groups: GroupAdd</h3>
</div>
<p>
<i>GroupAdd</i> is a simple program for adding groups to the Groups
Registry.  It is located in the <tt>$GROUPER/contrib/cdg</tt>
directory.  See the
<a href="http://grouper.devclue.com/cdg/api/com/devclue/grouper/group/GroupAdd.html">GroupAdd javadoc</a>
for more information.
</p>
<!-- contrib_groupadd -->
<!-- contrib_memberadd -->
<div class="subsection">
<a name="contrib_memberadd"/>
<h3>9.3 Adding Members: MemberAdd</h3>
</div>
<p>
<i>MemberAdd</i> is a simple program for adding members to groups
within the Groups Registry.  It is located in the <tt>$GROUPER/contrib/cdg</tt>
directory.  See the
<a href="http://grouper.devclue.com/cdg/api/com/devclue/grouper/member/MemberAdd.html">MemberAdd javadoc</a>
for more information.
</p>
<!-- contrib_memberadd -->
<!-- contrib_cdg_other -->
<div class="subsection">
<a name="contrib_cdg_other">
<h3>9.4 Other Contributed Applications</h3>
</div>
<p>
See the <a href="http://grouper.devclue.com/cdg/api/">cdg javadoc</a>
for information on other contributed programs for adding individual
subjects and querying stems, groups, members and subjects.
</p>
<!-- contrib_cdg_other -->
<!-- contrib -->

<!-- body -->
</body>

</html>

