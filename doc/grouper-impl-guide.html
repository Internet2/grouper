<html>
<head>
  <title>Grouper Implementation Guide</title>
  <style>
<!--
pre {
  padding-bottom: 2%;
  padding-left: 5%;
  padding-right: 5%;
  padding-top: 2%;
}
#table {
  border: 1px solid black;
  border-collapse: collapse;
}
body {
  padding-bottom: 2%;
  padding-left: 2%;
  padding-right: 2%;
  padding-top: 2%;
}
h2 {
  padding-top: 1%;
}
h3 {
  padding-top: 1%;
}
td.c {
  text-align: center;
  padding: 5px;
}
td.r {
  text-align: left;
  padding: 5px;
}
.section { }
.subsection { }
.TODO {
  color: red;
  font-weight: bolder;
}
#title {
  text-align: center;
}
-->
  </style>
</head>
<body>
<div id="summary">
grouper-impl-guide.html<br />
$Date: 2005-08-30 20:34:57 $
</div>
<div id="title">
<h1>Grouper Implementation Guide</h1>
</div>

<!-- toc -->
<div id="toc">
<h2>Table of Contents</h2>
<ol>
  <li><a href="#intro">Introduction To Grouper</a></li>
  <li><a href="#layout">Project Layout</a></li>
  <li><a href="#build">Building Grouper</a></li>
  <li><a href="#config">Configuring Grouper</a></li>
  <li><a href="#running">Running Grouper</a></li>
  <li><a href="#registry">The Groups Registry</a></li>
  <ol>
    <li><a href="#registry_gans">Groups And Namespaces</a></li>
  </ol>
</ol>
</div>
<!-- toc -->

<!-- toc_old -->
<div id="toc_old" class="TODO">
<ol>
  <li><a href="#section_2.4">Building And Running Sample Applications</a></li>
  <li><a href="#section_3">Using Grouper's Data And Privilege Models</a></li>
  <li><a href="#section_3.1">Grouper Fields</a></li>
  <li><a href="#section_3.2">Extending Grouper's Fields</a></li>
  <li><a href="#section_3.3">Naming Elements And Examples</a></li>
  <li><a href="#section_3.4">Grouper Privileges</a></li>
  <li><a href="#section_3.5">Using Privileges To Distribute Group Management Capabilities</a></li>
  <li><a href="#section_3.6">Subject Identifiers</a></li>
  <li><a href="#section_4">Integration Tasks</a></li>
  <li><a href="#section_4.1">Using Your Own RDBMS</a></li>
  <li><a href="#section_4.2">SQL Tuning</a></li>
  <li><a href="#section_4.3">Getting Subjects Into Grouper</a></li>
  <li><a href="#section_4.4">Loaders And Provisioning Connecters</a></li>
  <li><a href="#section_4.5">Integrating Grouper With An External Privilege Management System</a></li>
</ol>
<br />
</div>
<!-- toc_old -->

<div id="body">
<p>
This guide will help you to build and operate Grouper.  As Grouper
is still early in its development cycle, there is little practical
implementation experience and thus this guide is far from a
comprehensive treatment of the topic.  Our strategy is to bootstrap
the documentation process by providing enough information for early
adopters to begin using Grouper and to subsequently contribute to
the enhancement of this document by their experiences.
</p>
<p>
Along with obtaining Grouper (see the MACE-Dir-Groups website
<a href="http://middleware.internet2.edu/dir/groups/grouper/">&lt;http://middleware.internet2.edu/dir/groups/grouper/&gt;</a>
for instructions), adopters should join the 
<a href="https://mail.internet2.edu/wws/info/grouper-users">grouper-users</a>
and possibly the 
<a href="https://mail.internet2.edu/wws/info/grouper-dev">grouper-dev</a>
mailing lists for implementation assistance and to discuss the further
development of Grouper.
</p>

<!-- intro -->
<div class="section">
<a name="intro"/>
<h2>Introduction To Grouper</h2>
</div>
<p>
Grouper is an open source toolkit for managing groups.  It provides an
API for supporting basic group management capabilities - creation,
reading, updating and deletion of groups from a Groups Registry, a
central information repository complementary to a site's Person
Registry.  Grouper also supports automated and manual maintenance of
groups, subgroups, limited querying capabilities, support for multiple
database backends and the ability to integrate with existing identity
management (IDM) infrastructure.
</p>
<p>
In <a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html">Grouper Phase 1 Specifications</a>
the <a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html#heading_2_Comp">components &amp; architecture section</a>
depicts the major components of Grouper and their relation to
an implementation site's existing identity management
infrastructure. Those components are an API, a relational database
called the Groups Registry and one or more user interfaces for managing
groups.  While the API and other design details have changed since the
<i>Grouper Phase 1 Specification</i>  was released, the architectural
drawing remains accurate.   Future Grouper releases will provide an
improved and more feature-rich API, UI enhancements, aging tasks,
loading and provisioning support and performance improvements.  A
broad roadmap of the Grouper development cycle is below:
</p>
</p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th>Version</th>
  <th>Release Date</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="15%">0.5</td>
  <td class="c" width="15%">200412</td>
  <td class="r">Initial API release providing a subset of the Phase 1
    Specification: basic group management by automation processes</td>
</tr>
<tr>
  <td class="c">0.5.5, 0.5.6</td>
  <td class="c">200504</td>
  <td class="r">Improvements to public API and internals</td>
</tr>
<tr>
  <td class="c">0.6</td>
  <td class="c">~200509</td>
  <td class="r">Initial UI release, I2MI Subject interface for
    integration with existing IDM infrastructure, full privilege
    model implementation and improved querying capabilities
  </td>
</tr>
<tr>
  <td class="c">0.9</td>
  <td class="c">~200511</td>
  <td class="r">API and UI support for new Grouper API</td>
</tr>
<tr>
  <td class="c">1.0</td>
  <td class="c">~200601</td>
  <td class="r">API and UI support for group math</td>
</tr>
<tr>
  <td class="c">1.1</td>
  <td class="c">~200603</td>
  <td class="r">API and UI support for aging tasks</td>
</tr>
</tbody>
</table>
</div>
<p>
The rest of this document will describe how to 
<span class="TODO">build</span>, <span class="TODO">configure</span> and 
<span class="TODO">run</span> Grouper; the Group Registry's 
<span class="TODO">information</span> and 
<span class="TODO">privilege</span> models; integrating Grouper with an
existing <span class="TODO">IDM infrastructure</span>; and
<span class="TODO">bootstrapping your implementation</span> 
<span class="TODO">(csv2subject changes to work with ui?)</span>
by using the sample programs that come with Grouper.
</p>
<p>
In addition to this implementation guide, the Grouper distribution
contains javadoc (<tt>$GROUPER/doc/javadoc</tt>) that provides
some information on using the API and a list of changes from prior
releases (<tt>$GROUPER/doc/NEWS</tt>).  If this guide and the
<i>NEWS</i> file appear in conflict, <i>NEWS</i> should be considered
authoritative.  We use the symbol <i>$GROUPER</i> throughout this
document to refer to the top level of your Grouper distribution.
</p>
<p>
The best source of practical information on using the Grouper API to
can currently be found in the contributed programs
(<tt>$GROUPER/contrib/</tt>) and Grouper's test suite
(<tt>$GROUPER/java/tests/</tt>), both of which are included with
the Grouper distribution.  They exercise many functional aspects of the
API and the latter serves as a means of assessing that a Grouper
installation is working properly.  A Grouper development guide and
improved sample programs are under construction and will be available
at a later date.  
</p>
<!-- intro -->

<!-- layout -->
<div class="section">
<a name="layout"/>
<h2>Project Layout</h2>
</div>
<p>
The top-level directory of the unpacked Grouper distribution contains
the following directories and files:
</p>
<p>
<table id="table" align="center" border="0" width="60%">
<thead>
<tr>
  <td class="c" width="25%"><tt>conf/</tt></td>
  <td class="r">Configuration files for Grouper and third party components</td>
</tr>
</thead>
<tbody>
<tr>
  <td class="c"><tt>contrib/</tt></td>
  <td class="r">Contributed software</td>
</tr>
<tr>
  <td class="c"><tt>doc/</tt></td>
  <td class="r">Grouper documentation</td>
</tr>
<tr>
  <td class="c"><tt>doc/javadoc/</tt></td>
  <td class="r">javadoc for the Grouper API</td>
</tr>
<tr>
  <td class="c"><tt>java/</tt></td>
  <td class="r">Java source and compiled code</td>
</tr>
<tr>
  <td class="c"><tt>java/lib/</tt></td>
  <td class="r">Third party .jar files required by Grouper</td>
</tr>
<tr>
  <td class="c"><tt>java/src/</tt></td>
  <td class="r">Grouper source code</td>
</tr>
<tr>
  <td class="c"><tt>java/tests/</tt></td>
  <td class="r">Grouper test suite source code</td>
</tr>
<tr>
  <td class="c"><tt>sql/</tt></td>
  <td class="r">SQL scripts for creating, initializing and testing the
    Groups Registry</td>
</tr>
<tr>
  <td class="c"><tt>LICENSE</tt></td>
  <td class="r">License under which Grouper may be used</td>
</tr>
<tr>
  <td class="c"><tt>build.xml</tt></td>
  <td class="r">Ant configuration file</td>
</tr>
</tbody>
</table>
</p>
<p>
The file <tt>$GROUPER/java/lib/README</tt> lists the third party software used by Grouper
and identifies the version, source, and license for each.  README
files occur here and there - you should read them!
</p>
<!-- layout -->

<!-- build -->
<div class="section">
<a name="build"/>
<h2>Building Grouper</h2>
</div>
<p>
<ol>
  <li><p>Get the Java SDK.</p>
    <p>The SDK may be downloaded from <a href="http://java.sun.com/j2se/">&lt;http://java.sun.com/j2se/&gt;</a>.
    The JRE alone is not sufficient.</p></li>
  <li><p>Get Ant</p>
    <p>Ant may be downloaded from <a href="http://ant.apache.org/">&lt;http://ant.apache.org&gt;</a>.</p>
    <p>Directions for installing Ant are in the unpacked distribution
    at <i>docs/manual/install.html#installing</i>. You may need to
    copy <i>tools.jar</i> from <tt>$JAVA_HOME/lib</tt> to
    <tt>$ANT_HOME/lib</tt> to get ant working properly.</p></li>
  <li>Change directory to <tt>$GROUPER</tt>.</li>
  <li><p><tt>ant build</tt></p>
    <p>This will compile Grouper and place the class files under
    the <tt>$GROUPER/build</tt> directory.</p></li>
  <li><p><tt>ant db-init</tt></p>
    <p>This will create a Groups Registry in
    <tt>$GROUPER/dist/run/</tt> directory using the default
    HSQLDB RDBMS.</p></li>
  <li><p><tt>ant test</tt></p>
    <p>This will compile and run the Grouper test suite to exercise the
    API and ensure that Grouper is properly configured.</p>
    <p><b>Note: Running the test suite is destructive and will
    delete all groups and memberships in the Groups Registry.  Do
    not run the test suite against production data.</b></p></li>
  <li><p><tt>ant db</tt> [optional]</p>
    <p>This will launch HSQLDB's GUI database manager.  From within the
    manager you can run SQL queries against the Groups Registry.</p></li>
  <li><p><tt>ant dist</tt> [optional]</p>
    <p>This creates two .jar files within
    <tt>$GROUPER/dist/lib/</tt>.  One file contains all of the
    Grouper class files while the other contains all of the third
    party .jar files used by Grouper.  This isn't required but does
    ease <i>$CLASSPATH</i> configuration.</p></li>
</ol>
</p>
<!-- build -->

<div class="section">
<a name="config"/>
<h2>Configuring Grouper</h2>
</div>
<p>
Grouper requires very little configuration and does not require any by
default.  All Grouper configuration files are stored in
<tt>$GROUPER/conf/</tt>.  The four configuration files that you
<b>may</b> want to adjust and reasons why are described below.
</p>
<h3>hibernate.properties</h3>
<p>
Update this file if you are using an alternate database or intend to run
programs from somewhere other than <i>$GROUPER</i>.  You will want to
review and adjust as necessary the <i>hibernate.dialect</i> and
<i>hibernate.connection.*</i> parameters.
</p>
<h3>log4j.properties</h3>
Update this file if you intend to run programs from somewhere other
than <i>$GROUPER</i>.  Set the <i>log4j.appender.rfile.File</i>
parameter to the absolute path of your desired logfile location.
</p>
<h3>sources.xml</h3>
<p>
This is the configuration file for Grouper's I2MI Subject API resolver.
The I2MI Subject API is used to map an external IDM infrastructure to
Grouper internals and can be used to identify people, groups and
applications from a variety of internal and external to Grouper sources
of authority.  Grouper's default configuration uses Grouper as its
source of authority for subjects of type <i>group</i> and several
tables within the Groups Registry for subjects of type <i>person</i>.
If you wish to use additional or different sources, you will need
to adjust this file.  At this time, the javadoc provided with each
source adapter is probably the best location for configuration
information.  Please <b>do not</b> change the source for subjects
of type <i>group</i>.
</p>
<p>
See <span class="TODO">$SECTION</span> for more information on the I2MI
Subject and how Grouper utilizes it.
</p>
<h3>ehcache.xml</h3>
<p>
ehcache is used by Hibernate to cache objects and query results in both
memory and on disk.  Grouper comes with a default and unoptimized
configuration.  Depending upon your usage and the size of your Groups
Registry, you may want to adjust your cache settings.  See the 
<a href="http://ehcache.sourceforge.net/documentation/">ehcache
documentation</a> for more details.
</p>
<!-- config -->

<!-- running -->
<div class="section">
<a name="running"/>
<h2>Running Grouper</h2>
</div>
<p>
As Grouper is currently just a database and a Java API for exercising
that database, there is no "Groups Registry server" that needs to
be running to interact with the Groups Registry.  All that is necessary
is that one be able to connect to your configured database and that the
following items be in your classpath:
<ul>
  <li>full pathname of the <i>Grouper.jar</i> file produced by <tt>ant
    dist</tt></li>
  <li>full pathname of the <i>Grouper-lib.jar</i> file produced by
    <tt>ant dist</tt></li>
  <li>full pathname of the directory containing Grouper's configuration
    files.</li>
</ul>
</p>
<!-- running -->

<!-- registry -->
<div class="section">
<a name="registry"/>
<h2>The Groups Registry</h2>
</div>
<!-- registry_gandns -->
<div class="subsection">
<a name="registry_gans"/>
<h3>Groups And Namespaces</h3>
</div>
<p>
Grouper works by managing two principal types of objects: groups
and namespaces.  A group is a list of members and various attributes.
A namespace is a context in which a group or a another namespace
may be located and and named along with various attributes.  Both
groups and namespaces may have a number of different privileges
assigned to them.  From the perspective of information management
a Grouper deployment is defined by which subjects (people, applications,
groups) have what access to each namespace and group.
</p>
<p>
The Groups Registry uses a RDBMS to store information on namespaces,
groups, memberships and possibly privileges.  Grouper is
currently known to work and tested with HSQLDB, PostgreSQL and Oracle.
<span class="TODO">
This is the current Grouper database schema
<a href="http://middleware.internet2.edu/dir/groups/docs/groupsRegERD0.5.5.jpg">ERD</a>.
</span>
</p>
<p>
<span class="TODO">In this section we present Grouper's data and
privilege models and discuss several aspects of a Grouper deployment:
naming, distributing management of groups, and choice of identifiers
for members.</span>
</p>
<!-- registry_gans -->
<!-- registry -->


<span class="TODO">
<div class="section">
<a name="section_3"/>
<h2>3. Using Grouper's Data And Privilege Models</h2>
</div>
<div class="subsection">
<a name="section_3.1"/>
<h3>3.1. Grouper Fields</h3>
</div>
<p>
In Grouper parlance, each group has a set of <i>fields</i> and each field can
either be a list or an attribute.  A <i>list</i> is a multivalued
set of subjects and an <i>attribute</i> is a single-valued string.
Each subject has a single <i>subjectType</i>, the full set of which
is determined by each implementation site.  Grouper provides
<i>person</i> and <i>group</i> <i>subjectTypes</i> by default.
</p>
<p>Field names are case sensitive.</p>
<p>
Groups have the following set of attributes:
</p>
<p>
<a name="table_1"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th>Field</th>
  <th>Public Or Private?</th>
  <th>Semantics</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">guid</td>
  <td class="c">public</td>
  <td class="c">system-assigned, read-only, globally unique identifier
    for the group that is never reassigned</td>
</tr>
<tr>
  <td class="c">stem</td>
  <td class="c">public</td>
  <td class="c">the namespace in which the group is named</td>
</tr>
<tr>
  <td class="c">extension</td>
  <td class="c">public</td>
  <td class="c">relative name of the group within its namespace</td>
</tr>
<tr>
  <td class="c">name</td>
  <td class="c">public</td>
  <td class="c">system-maintained, read-only string representation
    of the logical ordered pair of (stem, extension), used to facilitate
    searching for groups by name</td>
</tr>
<tr>
  <td class="c">displayExtension</td>
  <td class="c">public</td>
  <td class="c">alternative string for representing the extension
    attribute</td>
</tr>
<tr>
  <td class="c">displayName</td>
  <td class="c">public</td>
  <td class="c">system-maintained, read-only string representation
    of the logical ordered pair of (displayName of stem, displayExtension),
    used to facilitate searching for groups by displayed name</td>
</tr>
<tr>
  <td class="c">description</td>
  <td class="c">public</td>
  <td class="c">semantics defined by implementation site</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 1 - Attributes Of <i>base</i> Type</b></div>
</p>
<p>
Groups have the following set of lists:
</p>
<p>
<a name="table_2"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <td class="c">members</td>
  <td class="c">public</td>
  <td class="c">subjects belonging to this group</td>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">viewers</td>
  <td class="c">private</td>
  <td class="c">subjects with VIEW privilege for this group</td>
</tr>
<tr>
  <td class="c">readers</td>
  <td class="c">private</td>
  <td class="c">subjects with READ privilege for this group</td>
</tr>
<tr>
  <td class="c">updaters</td>
  <td class="c">private</td>
  <td class="c">subjects with UPDATE privilege for this group</td>
</tr>
<tr>
  <td class="c">admins</td>
  <td class="c">private</td>
  <td class="c">subjects with ADMIN privilege for this group</td>
</tr>
<tr>
  <td class="c">optins</td>
  <td class="c">private</td>
  <td class="c">subjects with OPTIN privilege for this group</td>
</tr>
<tr>
  <td class="c">optouts</td>
  <td class="c">private</td>
  <td class="c">subjects with OPTOUT privilege for this group</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 2 - Lists Of <i>base</i> Type</b></div>
</p>
<p>
Fields listed as "private" are maintained for use by the API while
"public" ones are maintained for use by calling programs.  The 
<i>viewers</i> through <i>optouts</i> lists are used only if using the
default Grouper Access Privilege implementation (see <a
href="#section_3.4">section 3.4</a>).  Thus, a group is a list of
members, a description, a set of naming elements and the privileges
that subjects have over it.
</p>
<p>
Namespaces have the following set of attributes:
</p>
<p>
<a name="table_3"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th>Field</th>
  <th>Public Or Private?</th>
  <th>Semantics</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">guid</td>
  <td class="c">public</td>
  <td class="c">system-assigned, read-only, globally unique identifier
    for the namespace that is never reassigned</td>
</tr>
<tr>
  <td class="c">stem</td>
  <td class="c">public</td>
  <td class="c">the namespace to which this one is subordinate</td>
</tr>
<tr>
  <td class="c">extension</td>
  <td class="c">public</td>
  <td class="c">relative name of the namespace within its parent namespace</td>
</tr>
<tr>
  <td class="c">name</td>
  <td class="c">public</td>
  <td class="c">system-maintained, read-only string representation
    of the logical ordered pair of (stem, extension), used to facilitate
    searching for namespaces by name</td>
</tr>
<tr>
  <td class="c">displayExtension</td>
  <td class="c">public</td>
  <td class="c">alternative string for representing the extension
    attribute</td>
</tr>
<tr>
  <td class="c">displayName</td>
  <td class="c">public</td>
  <td class="c">system-maintained, read-only string representation
    of the logical ordered pair of (displayName of stem, displayExtension),
    used to facilitate searching for namespaces by displayed name</td>
</tr>
<tr>
  <td class="c">description</td>
  <td class="c">public</td>
  <td class="c">semantics defined by implementation site</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 3 - Attributes Of <i>naming</i> Type</b></div>
</p>
<p>
Namespaces have the following set of lists:
</p>
<p>
<a name="table_4"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th>Field</th>
  <th>Public Or Private?</th>
  <th>Semantics</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c">creators</td>
  <td class="c">private</td>
  <td class="c">subjects with CREATE privilege for this namespace</td>
</tr>
<tr>
  <td class="c">stemmers</td>
  <td class="c">private</td>
  <td class="c">subjects with STEM privilege for this namespace</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 4 - Lists Of <i>naming</i> Type</b></div>
</p>
<div class="subsection">
<a name="section_3.2"/>
<h3>3.2. Extending Grouper's Fields</h3>
</div>
<p>
To support some of the 
<a href="http://middleware.internet2.edu/dir/docs/draft-internet2-mace-dir-sage-scenarios-00.html">use cases</a>
identified by MACE-Dir-Groups working group members, Grouper was
designed from the start to enable implementation sites to extend the
set of attributes and lists available to be associated with groups.
This was done by declaring attributes, lists, and their properties in
tables within the Groups Registry rather than having them represented
as static schematic elements of that database. Sets of attributes and
lists are packaged into group types, and, in a future release of
Grouper, each group can be assigned to any number of types. This is
similar to how schemas for LDAP directories are managed and extended:
LDAP attributes are packaged into object classes, and each LDAP entry
can have a set of object classes associated with it, allowing different
entries to serve different purposes. However, as this release of
Grouper only allows groups to have a single type, each site using
extended types will need to ensure that each extended type includes
all of the naming related base fields, <i>members</i>, and all of
the privilege lists unless the site is using an access privilege
interface implementation different from Grouper's default.
</p>
<p>
Grouper ships with two group types. All groups are of the
<i>base</i> type - its structure is shown in <a href="#table_1">Table
1</a> and <a href="#table_2">Table 2</a>. Namespaces are modeled
internally to Grouper as groups of <i>naming</i> type.  Namespace
structure is shown in <a href="#table_3">Table 3</a> and 
<a href="#table_4">Table 4</a>.
</p>
<p>
Although the API provides no support for managing group types, a
site may alter or learn by example from the Groups Registry
initialization script in <tt>$GROUPER/sql/init.sql</tt> to populate the
<i>grouper_type</i>, <i>grouper_typeDef</i>, and <i>grouper_field</i>
tables to determine the set of attributes, lists and group types
they want in their Grouper deployment.
</p>
<p>
<b>Note:</b> the <i>guid</i> attribute is an operational attribute. It is stored in
the database as the <i>grouper_group:groupID</i> column and exposed in the API
with the <i>Group.id()</i> method instead of with the
<i>Group.attribute()</i> method. In presentation and documentation
contexts we'll use the term <i>guid</i>.
</p>
<div class="subsection">
<a name="section_3.3"/>
<h3>3.3. Naming Elements And Examples</h3>
</div>
<p>
Tables <a href="#table_1">1</a>, <a href="#table_2">2</a>, 
<a href="#table_3">3</a> and <a href="#table_4">4</a> show that
groups and namespaces have the same naming attributes with the same
semantics. Groups and namespaces are created and named within
namespaces, and namespaces can be arranged in a flat or hierarchical
style, as desired by each implementation site.
</p>
<p>
Since a group must be named within a namespace, it is necessary to
create a namespace before any groups can be created. Namespaces are
currently modeled internally as groups of <i>naming</i> type.  The
following code example demonstrates the creation of a namespace and a
group within that namespace:
</p>
<pre>
  /*
   * Create a root-level namespace with the extension "uofc".
   */
  String        ns_extn   = "uofc";
  GrouperStem   ns        = GrouperStem.create(s, ns_extn);

  /*
   * Create a group with the extension "exec_council" within the "uofc"
   * namespace.  
   */
  String        grp_stem  = "uofc";
  String        grp_extn  = "exec_council";
  GrouperGroup  g         = GrouperGroup.create(s, grp_stem, grp_extn);
</pre>
<p>
A <i>hierarchy delimiter</i> is used in string representations of the names of
groups and namespaces. The delimiter is a ":" and this character can
not be used as part of the extension for either namespaces or groups.
A future release of Grouper will make the delimiter configurable.
Continuing the above example, the <i>name</i> of the "exec_council"
group within the "uofc" namespace is "uofc:exec_council".
</p>
<p>
Each newly created group or namespace contributes just one new element,
the <i>extension</i>, to its accumulative name.  The <i>displayName</i>
of groups and namespaces is likewise accumulative - that's why the
<i>name</i> and <i>displayName</i> attributes are system maintained
and read-only. Here are some further examples illustrating all of
the naming attributes of several namespaces and groups.
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">namespace uofc</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>stem</i></td>
  <td class="c">&nbsp;</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="c">uofc</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="c">University Of Chicago</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="c">uofc</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="c">University Of Chicago</td>
</tr>
</tbody>
</table>
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">group uofc:exec_council</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>guid</i></td>
  <td class="c">258a158b-3f40-43d4-a4b2-c97398c6ad19</td>
</tr>
<tr>
  <td class="c"><i>stem</i></td>
  <td class="c">uofc</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="c">exec_council</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="c">Executive Council</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="c">uofc:exec_council</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="c">University Of Chicago:Executive Council</td>
</tr>
</tbody>
</table>
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">namespace uofc:bsd</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25"><i>stem</i></td>
  <td class="c">uofc</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="c">bsd</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="c">Biological Sciences Division</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="c">uofc:bsd</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="c">University Of Chicago:Biological Sciences Division</td>
</tr>
</tbody>
</table>
</p>
<p>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th colspan="2">group uofc:bsd:eis_staff</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c" width="25%"><i>guid</i></td>
  <td class="c">82a303fa-cb6b-4330-b085-46a1974b0a79</td>
</tr>
<tr>
  <td class="c"><i>stem</i></td>
  <td class="c">uofc:bsd</td>
</tr>
<tr>
  <td class="c"><i>extension</i></td>
  <td class="c">eis_staff</td>
</tr>
<tr>
  <td class="c"><i>displayExtension</i></td>
  <td class="c">Enterprise Information Systems staff</td>
</tr>
<tr>
  <td class="c"><i>name</i></td>
  <td class="c">uofc:bsd:eis_staff</td>
</tr>
<tr>
  <td class="c"><i>displayName</i></td>
  <td class="c">University Of Chicago:Biological Sciences Division:Enterprise
    Information Systems staff</td>
</tr>
</tbody>
</table>
</p>
<p>
<div align="center"><b>Figure 1 - Naming Examples</b></div>
</p>
<p>
This set of examples illuminates at least two things. First, that it
would be a good idea for implementation sites to establish conventions
for the assignment of naming attributes. An example of such is 
<a href="http://techag.uchicago.edu/idm-wg/attrValueBNF.txt">here</a>
(note that it was created before Grouper's design encompassed
<i>displayNames</i> and at that time the term <i>descriptor</i>
was used where we now say <i>extension</i>).
</p>
<p>
Second, that the names of groups, as with the titles of many types of
things, influence people's initial expectations of the meaning of
those groups. Seeing "Enterprise Information Systems staff" by itself
gives a different impression than seeing it in the context of
"Biological Sciences Division". That, in part, motivates the care taken
in the design of Grouper's privilege model, introduced next.
</p>
<div class="subsection">
<a name="section_3.4"/>
<h3>3.4. Grouper Privileges</h3>
</div>
<p>
There are two categories of privileges in Grouper. Access privileges
determine what a subject can do to a group. Naming privileges determine
what a subject can do to a namespace.  The access and naming privileges
are listed in the following tables.
</p>
<p>
<a name="table_5"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th>Privilege</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c"><i>VIEW</i></td>
  <td class="c">Can see the group and can refer to it, e.g., to make
    it a subgroup of another group.
    <br /><br />
    <b>NOTE:</b> If no explicit <i>VIEW</i> privileges have been
    assigned to a group, <b>all</b> subjects can <i>VIEW</i> the
    group.</td>
</tr>
<tr>
  <td class="c"><i>READ</i></td>
  <td class="c">Can read all "public" fields of the group. Implies
    <i>VIEW</i>.
    <br /><br />
    <b>NOTE:</b>  If no explicit <i>READ</i> privileges have been
    assigned to a group, <b>all</b> subjects can <i>READ</i> the
    group's  public fields.</td>
</tr>
<tr>
  <td class="c"><i>UPDATE</i></td>
  <td class="c">Can update the group's members list and can grant and
    revoke <i>OPTIN</i> and <i>OPTOUT</i> privileges for this group.
    Implies <i>VIEW</i>, <i>OPTIN</i> and <i>OPTOUT</i>.</td>
</tr>
<tr>
  <td class="c"><i>ADMIN</i></td>
  <td class="c">Can modify all group fields, can grant and revoke all
    access privileges, can rename the group and can delete the
    group.  Implies all other access privileges.</td>
</tr>
<tr>
  <td class="c"><i>OPTIN</i></td>
  <td class="c">Can add oneself to the members list of the group. Implies
    <i>VIEW</i>.</td>
</tr>
<tr>
  <td class="c"><i>OPTOUT</i></td>
  <td class="c">Can remove oneself from the members list of the group.
    Implies <i>VIEW</i>.</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 5 - Access Privileges</b></div>
</p>
<p>
<a name="table_6"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th>Privilege</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c"><i>CREATE</i></td>
  <td class="c">Can create a group in the namespace.</td>
</tr>
<tr>
  <td class="c"><i>STEM</i></td>
  <td class="c">Can grant and revoke <i>CREATE</i> and <i>STEM</i>
    privilege for the namespace, can create a subordinate namespace,
    can delete the namespace and can modify all namespace fields.</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 6 - Naming Privileges</b></div>
</p>
<p>
Grouper filters group loads and search results based on a subject's
<i>VIEW</i> and <i>READ</i> privileges for each matched group. Subjects
lacking <i>VIEW</i> privilege to a group will not have that group's
existence revealed to them by the Grouper API. Subjects with
<i>VIEW</i> but lacking <i>READ</i> can read the group's naming
attributes and no others. <i>OPTOUT</i> privilege to a group does not
enable the subject to remove themselves from effective membership in
the group, only immediate membership. The creator of a group is
automatically granted <i>ADMIN</i> privilege to the group. The creator
of a namespace is automatically granted <i>STEM</i> privilege to the
namespace. Although <i>STEM</i> privilege does not imply <i>CREATE</i>
privilege, a subject with <i>STEM</i> privilege can assign themselves
<i>CREATE</i> privilege.
</p>
<p>
Top-level namespaces, i.e., those for which the stem attribute is the
constant <i>Grouper.NS_ROOT</i>, can currently only be created by the
<i>GrouperSystem</i> subject.
</p>
<p>
The Grouper API presents and itself uses abstracted interfaces,
<i>GrouperAccess</i> and <i>GrouperNaming</i>, to manage access and
naming privileges. This design permits implementation sites to replace
Grouper's default implementation of either or both of these
interfaces with ones of their own devise, in case the site has or will
have privilege management capabilities with which they wish to
integrate management of Grouper privileges (see 
<a href="#section_4.5">section 4.5</a>).
</p>
<p>
The privilege interfaces permit privileges to be assigned to subjects
of any type, including groups. An implementation of the privilege
interfaces that relies on Grouper to resolve subjects that are groups
can take advantage of Grouper's subgroup, compound group and aging
capabilities to enrich privilege management. In particular,
Grouper's default privilege implementation uses group management to
support inheritance and aging of privileges.
</p>
<p>
Although it is not currently possible to extend Grouper's privilege model,
sites that extend the set of attributes and lists in their deployment
can declare which privileges are needed to read and to write each
attribute and list. These declarations are in the <i>grouper_field</i>
table.  Although the API provides no support for managing extended
fields or their security, sites may alter or learn by example from the
Groups Registry initialization script <tt>$GROUPER/sql/init.sql</tt>
to do so.
</p>
<div class="subsection">
<a name="section_3.5"/>
<h3>3.5. Using Privileges To Distribute Group Management
Capabilities</h3>
</div>
<p>
One of the leading reasons why there is interest in Grouper is that
many sites recognize a need to involve many sources of authority in
managing resource access, distribution lists and application
customization - the types of needs which groups help to satisfy.
Grouper's privilege model supports five ways to distribute
management of groups.
<ol>
  <li>Create a group and assign someone <i>UPDATE</i> privilege to
    it.  This delegates the ability to maintain the group's
    membership.</li>
  <li>Create a group and assign someone <i>ADMIN</i> privilege to it.
    This delegates the ability to manage who can maintain the group's
    membership as well as manage all access to the group.</li>
  <li>Create a namespace and assign someone <i>CREATE</i> privilege
    to it. This delegates the ability to preside over the collection
    of all groups they create in that namespace.</li>
  <li>Create a namespace and assign someone <i>STEM</i> privilege
    to it.  They can rule over an entire hierarchy of namespaces and
    groups, all sharing a common root namespace.</li>
  <li>Create a group and assign <i>OPTIN</i> and/or <i>OPTOUT</i>
    privilege to other groups. Subjects belonging to those other
    groups are entitled to manage their own membership in the
    group.</li>
</ol>
</p>
<p>
An example of an actual scenario for delegation of group management to
solve an access control problem can be found in
<a href="http://home.uchicago.edu/%7Etbarton/camp-200411/20041117-authz.ppt">&lt;http://home.uchicago.edu/~tbarton/camp -200411/20041117-authz.ppt</a>.
</p>
<div class="subsection">
<a name="section_3.6"/>
<h3>3.6. Subject Identifiers</h3>
</div>
<p>
Most often the members of your groups will be people and other groups.
But they might also be of any other type (applications or computers,
for example) for which you now or eventually will manage identities.
Grouper supports a site-defined set of <i>subjectTypes</i> (see 
<a href="#section_4.3">section 4.3</a> below).
</p>
<p>
Identifiers and their management can get complicated. They can be
revoked or not, re-assigned or not, lucent or opaque, etc. Depending on
such characteristics, a given identifier might be a good or bad choice
to use in the context of managing the identified subject's group
memberships.
</p>
<p>
For example, a username is often lucent - easily remembered by the
person to whom it is associated. But it may also be revokable, meaning
that it no longer refers to that person (perhaps they have a new one),
or even re-assignable, meaning that it might refer to some other person
at a later time. If a username is used to record membership, username
changes must trigger corresponding membership changes. A username is
better suited to authentication than it is to indicating membership.
</p>
<p>
On the other hand, an opaque registryID (machine, not human, readable)
that never changes is great for membership, but lousy for
authentication - it might not even be known by the person to whom
it is associated. How would I identify myself to Grouper if I wished to
opt-in to a list or manage a group?
</p>
<p>
Grouper accommodates subject identifier issues in two ways. First, it
maintains guids for every subject and group within the Groups
Registry.  These are never exposed by the API, but are associated
with externally supplied subject identifiers in the <i>grouper_member</i>
table.  This approach allows the identifier associated with a given
subject to be changed without any need to change actual memberships
(although the supporting <i>GrouperMember</i> method is not yet
available via the Grouper API).
</p>
<p>
Second, during the 0.6 release cycle, the Grouper API will incorporate
an identifier lookup and translation service called the Subject
Interface being co-developed by the Grouper and Signet projects.
The Subject Interface is used to lookup subjects that are presented
with an identifier in one namespace and obtain identifiers in other
namespaces for that subject.  That means that it can translate a
username into a registryID and vice-versa, for example. So, when a
user authenticates to an application using the Grouper API, that
application can use the Subject Interface to fetch an identifier
for that person chosen by the site for use in memberships. Similarly,
when a membership in the Groups Registry is to be expressed elsewhere,
the identifier used for group members can be translated by a
provisioning connector by use of the Subject Interface into one
that is suitable in the provisioned context.
</p>
<div class="section">
<a name="section_4"/>
<h2>4. Integration Tasks</h2>
</div>
<p>
This section is intended to demonstrate how to integrate Grouper with
your existing infrastructure and practices.  Unfortunately, because of
where Grouper is in its development process, practical integration
remains sparse.
</p>
<div class="subsection">
<a name="section_4.1"/>
<h3>4.1. Using Your Own RDBMS</h3>
</div>
<p>
Grouper uses Hibernate 
(<a href="http://www.hibernate.org/">&lt;http://www.hibernate.org/&gt;</a>) 
for object persistence.  As Hibernate uses JDBC to speak to a RDBMS, it
should not be difficult to configure Grouper to work with your
preferred database backend.  Grouper is currently being tested against
and should work with HSQLDB (the default), PostgreSQL and Oracle.
</p>
<div class="subsection">
<a name="section_4.1.1"/>
<h3>4.1.1 Using HSQLDB</h3>
</div>
<p>
Grouper uses HSQLDB as its default RDBMS and no additional
configuration is required.
</p>
<div class="subsection">
<a name="section_4.1.2"/>
<h3>4.1.2 Using PostgreSQL</h3>
</div>
<p>
PostgreSQL is a supported Grouper backend and should only require small
configuration changes to use.  Grouper also includes a PostgreSQL
JDBC driver; see <tt>$GROUPER/java/lib/README</tt> for version
information.  to use PostgreSQL you will need to:
<ol>
  <li>Uncomment the PostgreSQL section of 
    <tt>$GROUPER/conf/hibernate.properties</tt> and modify as
    appropriate.</li>
  <li>Uncomment the PostgreSQL section of 
    <tt>$GROUPER/conf/sources.xml</tt> and modify as
    appropriate.</li>
  <li>Set <i>sql.type</i> to <i>postgres</i> in 
    <tt>$GROUPER/build.xml</tt></li>
</ol>
</p>

<div>
<a name="section_4.1.3"/>
<h3>4.1.3 Using Oracle</h3>
</div>
<p>
Oracle is a supported Grouper backend and should only require small
configuration changes to use.  An Oracle JDBC driver is not currently
distributed with Grouper.  To use Oracle you will need to:
<ol>
  <li>Uncomment the Oracle section of 
    <tt>$GROUPER/conf/hibernate.properties</tt> and modify as
    appropriate.</li>
  <li>Uncomment the Oracle section of 
    <tt>$GROUPER/conf/sources.xml</tt> and modify as
    appropriate.</li>
  <li>Set <i>sql.type</i> to <i>oracle</i> in 
    <tt>$GROUPER/build.xml</tt></li>
</ol>
</p>
<div class="subsection">
<a name="section_4.1.4"/>
<h3>4.1.4 Using Other Databases</h3>
</div>
<p>
While Grouper should work with other databases, it has not yet been
tested with them nor does it provide support for them as shipped.
To use an alternate database you will need to:
<ol>
  <li>Modify Grouper's Hibernate configuration file
    (<tt>$GROUPER/conf/hibernate.properties</tt>) to connect to
    your RDBMS</li>
  <li>Modify Grouper's Subject API configuration file
    (<tt>$GROUPER/conf/sources.xml</tt>) to connect to
    your RDBMS</li>
  <li>Create <tt>$GROUPER/sql/schema-$YOUR_DB_TYPE.sql</tt></li>
  <li>Create <tt>$GROUPER/sql/test-data-$YOUR_DB_TYPE.sql</tt></li>
  <li>Set <i>sql.type</i> to <i>$YOUR_DB_TYPE</i> in 
    <tt>$GROUPER/build.xml</tt></li>
</ol>
If you do use an alternate database that is not natively supported by
Grouper, please contact the grouper-dev list with your results and
schema files.
</p>
<div class="subsection">
<a name="section_4.2"/>
<h3>4.2. SQL Tuning</h3>
</div>
<p>
As development progresses, general performance tuning and RDBMS-specific
suggestions will be made available.
</p>
<div class="subsection">
<a name="section_4.3"/.
<h3>4.3. Getting Subjects Into Grouper</h3>
</div>
<p>
<a href="#section_3.6">Section 3.6</a> broached issues surrounding
the choice of subject identifiers for use with Grouper. Having made
a choice, this section tells you how to get those identifiers
integrated with Grouper. You may want to stare at the
<a href="http://middleware.internet2.edu/dir/groups/docs/groupsRegERD4.4.gif">Groups Registry ERD</a> 
while reading this section.
</p>
<p>
The <i>grouper_subjectType</i> table is used to declare what
<i>subjectTypes</i> are in a Grouper deployment, and, for each type,
the name of the adapter class that will be called to lookup and load
objects of each type. Grouper installs with this table defaulted
to support two subject types: <i>person</i> and <i>group</i>. The
default <i>person</i> adapter class, called
<i>SubjectTypeAdapterPersonImpl</i>, provides sites with a bootstrap
mechanism for getting subjects into the Groups Registry.  It just
looks in the <i>grouper_subject</i> table to qualify that the
<i>subjectID</i> supplied to the Grouper API is valid.  Using 
<i><a href="#csv2subject">csv2subject</a></i>, you can populate the the
<i>grouper_subject</i> table with all of the <i>subjectIDs</i>
encompassed by your Grouper deployment.
</p>
<p>
A better means of integrating your person type <i>subjectIDs</i> with Grouper
is to supply your own adapter class for the <i>person subjectType</i>.
This class will need to validate and create subject objects given a
<i>subjectID</i>.  For example, you might write an adapter class that
hit your LDAP directory or your Person Registry directly to validate
that a <i>subjectID</i> is in fact one that is valid for a group
management operation. This would remove the need to maintain the
<i>grouper_subject</i> table - its sole purpose in the Groups
Registry is to bootstrap subjects into Grouper.
</p>
<p>
With implementation of the Subject Interface, anticipated to be
included in the Grouper 0.6 release cycle, a richer set of subject
data obtained from your identity management operation will be made
available to implement identifier translation capabilities as
described in <a href="#section_3.6">section 3.6</a> and subject
search capabilities in support of the Grouper UI. The default adapter class for
the <i>person subjectType</i> in Grouper 0.6 will support these identifier
search and translation capabilities by reliance on the
<i>grouper_subjectAttribute</i> table. That will allow you to bootstrap your
Grouper deployment by maintaining this table until such time as you can
supply your own <i>person subjectType</i> adapter class with the requisite
functionality.
</p>
<p>
<b>Note:</b> The adapter class for the <i>group subjectType</i> should not
be changed!  Else why are you bothering with Grouper?
</p>
<div class="subsection">
<a name="section_4.4"/>
<h3>4.4. Loaders And Provisioning Connectors</h3>
</div>
<p>
Loaders and provisioning connectors are defined in the 
<a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html#heading_2_Comp">components &amp; architecture section</a>
in <a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html">Grouper Phase 1 Specifications</a>. 
Loaders are automation process that use the Grouper API to load and
maintain the Groups Registry from other sources, and provisioning
connectors are automation processes that use the Grouper API to
extract information from the Groups Registry and represent it in
other databases, directories, etc.
</p>
<p>
As this is an early release, there is as yet no contributed code
that has been used to get real data into or out of Grouper, although
the contributed applications discussed in 
<a href="#section_2.4">section 2.4</a> above could be used as a
starting point for developing them. So this section will merely
identify some of Grouper's capabilities relative to loaders and
provisioning connectors.
</p>
<p>
All interactions with the Grouper API are conducted within a session
that is constrained by the privileges of the session's <i>subjectID</i>,
so each loader and provisioning connector will need to be assigned one.
The default <i>GrouperSystem</i> subject can be used, or others may be
assigned as necessary to meet site-specific security requirements.
</p>
<p>
The Grouper API does not authenticate the <i>subjectID</i> asserted by an API
client. It is assumed that sites will secure access to the Grouper API
as they do other infrastructure services, with a combination of host
and application platform security measures.
</p>
<p>
Loaders and provisioning connectors may use the Subject Interface,
after its incorporation into Grouper in release 0.6, to lookup and
translate external identifiers for subjects into those selected for use
as Grouper <i>subjectIDs</i>.
</p>
<p>
The <i>GrouperQuery</i> class encapsulates the search filters implemented in
Grouper for selecting groups. These include
<ul>
  <li>specifying a time before which the group was modified</li>
  <li>specifying a time after which the group was modified</li>
  <li>specifying a time before which the group was created</li>
  <li>specifying a time after which the group was created</li>
  <li>specifying a group <i>type</i></li>
  <li>specifying whether the group has immediate or effective
    memberships, or both.</li>
</ul>
</p>
<p>
These filters can be combined to constrain a single search. A search is
executed using the selected filters by the <i>GrouperQuery.query()</i> method.
Further search capabilities are slated for later releases of Grouper.
See <a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-search-00.html">Grouper API Search &amp; Browse Capabilities</a>
for details.
</p>
<p>
Grouper currently has no way to limit the number of objects returned by a
search.  Search result limits will be added in a future release.
</p>
<p>
<i>GrouperQuery.query()</i> and the <i>GrouperGroup</i> and
<i>GrouperMember</i> <i>list*</i> methods for listing immediate and
effective memberships return lists of <i>GrouperList</i> objects.
The <i>GrouperList.group()</i> and <i>GrouperList.member()</i>
methods convert <i>GrouperList</i> objects into <i>GrouperGroup</i>
or <i>GrouperMember</i> objects, respectively.
</p>
<p>
In the case of a list value that is a <i>GrouperMember</i> object representing
an effective membership, the <i>via group</i> for that membership is returned
by the <i>GrouperList.via()</i> method. A <i>via group</i> is a
group in which a member has an immediate membership that qualifies
it for effective membership by virtue of a subgroup or compound
group relationship between the via group and the group in which the
member has effective membership (the via group concept is discussed
in more detail in 
<a href="http://middleware.internet2.edu/dir/groups/docs/draft-internet2-mace-dir-grouper-phase1-specs-04.html">Grouper Phase 1 Specifications</a>). 
If there's more than one via group qualifying a given member's
effective membership in some group, then the list of <i>GrouperList</i>
objects returned by <i>GrouperGroup.listEffVals()</i> or
<i>GrouperMember.listEffVals()</i> contains a <i>GrouperMember</i>
object for each via group. This allows API clients like loaders and
provisioning connectors to determine which immediate memberships
must be removed in order to make a given effective membership go
away.
</p>
<p>
Each group in the Groups Registry has several <i>operational
attributes</i> associated with it.  These include:
</p>
<p>
<a name="table_7"/>
<table id="table" align="center" border="1" width="60%">
<thead>
<tr>
  <th>Operational Attribute</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td class="c"><i>createTime</i></td>
  <td class="c">time at which the group was created</td>
</tr>
<tr>
  <td class="c"><i>createSubject</i></td>
  <td class="c">the <i>memberKey</i> of the subject that created the
    group</td>
</tr>
<tr>
  <td class="c"><i>createSource</i></td>
  <td class="c">currently undefined</td>
</tr>
<tr>
  <td class="c"><i>modifyTime</i></td>
  <td class="c">time at which the group was last modified</td>
</tr>
<tr>
  <td class="c"><i>modifySubject</i></td>
  <td class="c">the <i>memberKey</i> of the subject that last modifed the
    group</td>
</tr>
<tr>
  <td class="c"><i>modifySource</i></td>
  <td class="c">currently undefined</td>
</tr>
</tbody>
</table>
<div align="center"><b>Table 7 - Operational Attributes For
Groups</b></div>
</p>
<p>
The <i>modifyTime</i> and <i>modifySubject</i> are updated with
each change to any of the group's fields.  A change in effective
membership or effective privilege is not reflected in the values
of these operational attributes.  A request has been made to include
that ability in a future release of Grouper.
</p>
<p>
The <i>memberKey</i> referred to in this table is an internal globally unique
identifier that Grouper assigns to each subject it comes into contact
with. The <i>GrouperGroup.createSubject()</i> and
<i>GrouperGroup.modifySubject()</i> methods return
<i>Subject</i> objects corresponding to this <i>memberKey</i>.
</p>
<div class="subsection">
<a name="section_4.5"/>
<h3>4.5. Integrating Grouper With An External Privilege Management
System</h3>
</div>
<p>
This will be addressed in a later release cycle.
</p>
<div class="subsection">
<a name="section_2.4"/>
<h3>2.4. Building And Running Sample Applications</h3>
</div>
<p>
Grouper includes four sample programs to aid in getting started
with a Grouper deployment.
</p>
<div class="subsection">
<a name="section_2.4.1"/>
<a name="csv2subject"/>
<h3>2.4.1. Sample Subject Loader - csv2subject</h3>
</div>
<p>
Subjects are identifiers for people, groups and other objects that may
be members of a group.  In this release of Grouper, subjects are
maintained in the <i>Subject</i> table within the Groups
Registry.  <i>csv2subject</i> is a simple program for populating that
table.  Subjects and the preferred means of dealing with them are
discussed in sections <a href="#section_3.6">3.6</a> and 
<a href="#section_4.3">4.3</a>.
</p>
<p>
<i>csvsubject</i> is located in <tt>$GROUPER/contrib/load/csv2subject</tt>.  
This program reads in a .csv file containing <i>subjectIDs</i> and
<i>subjectTypeIDs</i> and then inserts the subjects into the Groups
Registry via a direct JDBC connection.  <i>csv2subject</i> uses
Grouper's Hibernate configuration file for its JDBC configuration.
<p>
A sample .csv file is located in the <tt>$GROUPER/contrib/load/csv2subject</tt>
directory.
</p>
<p>
To use <i>csv2subject</i>:
<ol>
  <li>Change to the <tt>$GROUPER/contrib/load/csv2subject</tt>
    directory</li>
  <li>Follow the instructions in the README file</li>
</ol>
</p>
<div class="subsection">
<a name="section_2.4.2"/>
<a name="csv2group"/>
<h3>2.4.2. Sample Group Loader - csv2group</h3>
</div>
<p>
<i>csv2group</i> is a simple program for adding namespaces, groups and
members to the Groups Registry.  To use it:
<ol>
  <li>Change to the <tt>$GROUPER/contrib/load/csv2group</tt> directory</li>
  <li>Follow the instructions in the README file</li>
</ol>
</p>
<p>
A sample .csv file that creates a number of different namespaces,
groups and memberships is located in this directory.  To use the sample
file you will first need to load sample subjects into the Groups
Registry using <a href="#csv2subject">csv2subject</a>.  The sample
subjects are located in <tt>$GROUPER/contrib/load/csv2subject/sample.csv</tt>.
</p>
<div class="subsection">
<a name="section_2.4.3"/>
<a name="groupmgr"/>
<h3>2.4.3. Sample Group Manager - groupmgr</h3>
</div>
<p>
<i>groupmgr</i> is a program that provides a command line interface for
manipulating the Groups Registry.  It can add and delete namespaces,
groups and memberships.  To use it:
<ol>
  <li>Change to the <tt>$GROUPER/contrib/load/groupmgr</tt> directory</li>
  <li>Follow the instructions in the README file</li>
</ol>
</p>
<div class="subsection">
<a name="section_2.4.4"/>
<a name="grouperq"/>
<h3>2.4.4. Sample Query Tool - grouperq</h3>
</div>
<p>
<i>grouperq</i> is a program that provides a command line interface for
performing simple queries on the Groups Registry.  To use it:
<ol>
  <li>Change to the <tt>$GROUPER/contrib/load/groupmgr</tt> directory</li>
  <li>Follow the instructions in the README file</li>
</ol>
</p>
</span>
</body>
</html>
